/*! For license information please see main.js.LICENSE.txt */
(()=>{var e={653:(e,t,n)=>{"use strict";t.y=void 0;const r=n(412),i=n(965),s=n(518),a=new r.Vector3(1,0,0),o=new r.Vector3(0,1,0),l=new r.Vector3(0,0,1),u=new r.Color(16711680),c=new r.Color(65280),h=new r.Color(255);class p{constructor(e,t,n,s={}){this.opt={coloreSfondo:16777215,coloreLuci:16777215,opzioni:!0,rimanda:!1,tastieraOpzioni:!1,mostraRiferimento:!0,tipoRiferimento:"cartesiano",dimensioneRiferimento:10,mostraAssi:["x","y","z"],etichettaAssi:!0,mostraPiani:["xy"],mostraGriglie:["xy"],mostraNavHelper:!0,posizioneTelecamera:[16,16,16],controlloTelecamera:!0,tipoCamera:"prospettica"},this.raycastSettings={lastTimestamp:0,timeInterval:250,mouseDown:!1,downControlFreeze:!1,conditionalDownControlFreeze:void 0,mouseDoubleDown:!1,doubleDownControlFreeze:!0,conditionalDoubleDownControlFreeze:void 0,clickCallback:void 0,doubleClickCallback:void 0,moveCallback:void 0,singleMoveCallback:void 0,doubleMoveCallback:void 0},this.oggetti=[],this.firstDraw=!0,this.archivioAnimazioni=[],this.id=p.UID,p.UID++,this.clock=new r.Clock,this.contenitore="string"==typeof n?document.getElementById(n):n,this.contenitore.style.position="relative",null!=s&&Object.keys(s).forEach((e=>this.opt[e]=s[e])),r.Object3D.DefaultUp.set(0,0,1),this.scene=new r.Scene,this.fabbrica=new f(this.scene),this.etichettatrice=new m(this.scene),this.scene.background=new r.Color(this.opt.coloreSfondo),this.renderer=new r.WebGLRenderer({antialias:!0}),this.renderer.setSize(e,t),"prospettica"==this.opt.tipoCamera&&(this.camera=new r.PerspectiveCamera(25,e/t,.1,1e3)),"ortografica"==this.opt.tipoCamera&&(this.camera=new r.OrthographicCamera(e/-2,e/2,t/-2,t/2,.1,1e3)),this.camera.position.set(this.opt.posizioneTelecamera[0],this.opt.posizioneTelecamera[1],this.opt.posizioneTelecamera[2]),this.camera.lookAt(0,0,0),this.scene.add(this.camera),this.renderer.domElement.style.top=-t+"px",this.contenitore.appendChild(this.renderer.domElement),this.controlli=new i.OrbitControls(this.camera,this.renderer.domElement),this.contenitore.addEventListener("resize",this.onResize),this.onResize(),this.setupLuci(),this.riferimento(),this.opt.tastieraOpzioni&&this.attivaTastieraOpzioni(),this.opt.rimanda||this.anima()}setupLuci(){let e=new r.AmbientLight(this.opt.coloreLuci,.6);this.scene.add(e);let t=new r.DirectionalLight(this.opt.coloreLuci,1);t.position.set(5,5,5),this.scene.add(t),this.scene.fog=new r.Fog(this.opt.coloreSfondo,90,100)}raycast(e={}){const t=(e,t)=>{if(!e)return!1;let n=!0;for(let r of e)if(!t.find((e=>{var t;return(null==e?void 0:e.object.name)==r||(null===(t=null==e?void 0:e.object)||void 0===t?void 0:t.parent.name)==r}))){n=!1;break}return n};if(e)for(let t in this.raycastSettings)e[t]&&(this.raycastSettings[t]=e[t]);this.raycaster=new r.Raycaster,this.raycaster.layers.disableAll(),this.raycaster.layers.set(0),this.renderer.domElement.addEventListener("mousedown",(e=>{let n=this.renderer.domElement.getBoundingClientRect(),r={x:e.offsetX/n.width*2-1,y:-e.offsetY/n.height*2+1};this.raycaster.setFromCamera(r,this.camera);let i=this.raycaster.intersectObjects(this.scene.children,!0);this.raycastSettings.mouseDown=!0,this.raycastSettings.downControlFreeze&&(this.controlli.enabled=!1),t(this.raycastSettings.conditionalDownControlFreeze,i)&&(this.controlli.enabled=!1);let s=Date.now();s-this.raycastSettings.lastTimestamp<this.raycastSettings.timeInterval&&(this.raycastSettings.mouseDoubleDown=!0,this.raycastSettings.doubleDownControlFreeze&&(this.controlli.enabled=!1),t(this.raycastSettings.conditionalDoubleDownControlFreeze,i)?this.controlli.enabled=!1:this.controlli.enabled=!0),this.raycastSettings.lastTimestamp=s})),this.renderer.domElement.addEventListener("mouseup",(e=>{let t=this.renderer.domElement.getBoundingClientRect(),n={x:e.offsetX/t.width*2-1,y:-e.offsetY/t.height*2+1};this.raycaster.setFromCamera(n,this.camera);let r=this.raycaster.intersectObjects(this.scene.children,!0);this.raycastSettings.clickCallback&&!this.raycastSettings.mouseDoubleDown&&this.raycastSettings.clickCallback(r.map((e=>({nome:e.object.parent.name,coords:e.point,raw:e})))),this.raycastSettings.doubleClickCallback&&this.raycastSettings.mouseDoubleDown&&this.raycastSettings.doubleClickCallback(r.map((e=>({nome:e.object.parent.name,coords:e.point,raw:e})))),this.raycastSettings.mouseDown=!1,this.raycastSettings.mouseDoubleDown=!1,this.controlli.enabled=!0})),this.renderer.domElement.addEventListener("mouseleave",(e=>{this.raycastSettings.mouseDown=!1,this.raycastSettings.mouseDoubleDown=!1,this.controlli.enabled=!0})),this.renderer.domElement.addEventListener("mousemove",(e=>{let t=this.contenitore.getBoundingClientRect(),n={x:e.offsetX/t.width*2-1,y:-e.offsetY/t.height*2+1};this.raycaster.setFromCamera(n,this.camera);let r=this.raycaster.intersectObjects(this.scene.children,!0);this.raycastSettings.moveCallback&&this.raycastSettings.moveCallback(r.map((e=>({nome:e.object.parent.name,coords:e.point,raw:e})))),this.raycastSettings.singleMoveCallback&&this.raycastSettings.mouseDown&&this.raycastSettings.singleMoveCallback(r.map((e=>({nome:e.object.parent.name,coords:e.point,raw:e})))),this.raycastSettings.doubleMoveCallback&&this.raycastSettings.mouseDoubleDown&&this.raycastSettings.doubleMoveCallback(r.map((e=>({nome:e.object.parent.name,coords:e.point,raw:e}))))}))}anima(){requestAnimationFrame((()=>{this.anima()})),this.controlli.update(),this.posizionaNavHelper();let e=this.clock.getDelta();e=e<.1?e:.1,this.eseguiAnimazioni(e),this.renderer.render(this.scene,this.camera)}forceRefresh(){this.togglePiani("xy"),this.renderer.render(this.scene,this.camera),this.togglePiani("xy"),this.renderer.render(this.scene,this.camera)}onResize(){let e=this.contenitore.getBoundingClientRect(),t=Math.floor(e.width),n=Math.floor(e.height);this.camera.aspect=t/n,this.camera.updateProjectionMatrix(),this.renderer.setSize(t,n),this.renderer.render(this.scene,this.camera)}attivaTastieraOpzioni(){let e=document.createElement("div");e.setAttribute("id","tastieraOpzioni-"+this.id),e.style.cssText="position:absolute;\n      top:0;\n      left:0;\n      width:calc(100% - 4px);\n      height:22px;\n      padding:0;\n      margin:0;",this.contenitore.appendChild(e);let t=document.createElement("button");t.setAttribute("id","bottoneTastieraOperazioni-"+this.id),t.className="mat-raised-button mat-primary",t.style.cssText="position:relative;\n    top:0;\n    left:0;\n    width:20px;\n    height:20px;\n    margin:1px;\n    padding:0;\n    min-width:20px;\n    line-height:20px;",t.innerHTML="...",e.appendChild(t),t.addEventListener("click",(()=>{let e=document.getElementById("cardOpzioni-"+this.id);"none"==e.style.display?e.style.display="block":e.style.display="none"}));let n=document.createElement("div");n.setAttribute("id","cardOpzioni-"+this.id),n.className="mat-card mat-elevation-z2",n.style.cssText="position:relative;\n      top:calc(-20px - 2px);\n      left:20px;\n      width:calc(100% - 20px);\n      height:22px;\n      padding:3px 1px;\n      margin:1px",e.appendChild(n),n.style.display="none";let r="width:20px;height:20px;margin:1px;padding:0;min-width:20px;line-height:20px;",i=["xy","xz","yz"],s=document.createElement("span");s.style.margin="0 2px",s.innerHTML="   Griglie: ",n.appendChild(s),i.forEach((e=>{let t=document.createElement("button");t.setAttribute("id",`bottoneTastieraToggleGrid-${this.id}-${e}`),t.className="mat-raised-button mat-primary",t.style.cssText=r,t.innerHTML=e,n.appendChild(t),t.addEventListener("click",(()=>{this.toggleGriglie(e)}))}));let a=document.createElement("span");a.style.margin="0 2px",a.innerHTML="   Piano: ",n.appendChild(a),i.forEach((e=>{let t=document.createElement("button");t.setAttribute("id",`bottoneTastieraTogglePiani-${this.id}-${e}`),t.className="mat-raised-button mat-primary",t.style.cssText=r,t.innerHTML=e,n.appendChild(t),t.addEventListener("click",(()=>{this.togglePiani(e)}))}));let o=document.createElement("span");o.style.margin="0 2px",o.innerHTML="   Assi: ",n.appendChild(o),["x","y","z"].forEach((e=>{let t=document.createElement("button");t.setAttribute("id",`bottoneTastieraToggleAsse-${this.id}-${e}`),t.className="mat-raised-button mat-primary",t.style.cssText=r,t.innerHTML=e,n.appendChild(t),t.addEventListener("click",(()=>{this.toggleAssi(e)}))}))}resetCamera(){this.camera.position.set(this.opt.posizioneTelecamera[0],this.opt.posizioneTelecamera[1],this.opt.posizioneTelecamera[2]),this.camera.lookAt(0,0,0),this.controlli.update()}posizionaNavHelper(){let e;if("PerspectiveCamera"==this.camera.type)e=new r.Vector3(.8,.63,0).unproject(this.camera),this.navHelper.position.set(e.x,e.y,e.z),this.navHelper.scale.set(1,1,1);else if("OrthographicCamera"==this.camera.type){e=new r.Vector3(.8,.63,-.855).unproject(this.camera),this.navHelper.position.set(e.x,e.y,e.z);let t=150/this.camera.zoom;this.navHelper.scale.set(t,t,t)}}setCamera(e){if(e!=this.camera.type){const t=this.camera.position.clone();switch(e){case"OrthographicCamera":const e=this.camera.fov*Math.PI/180,t=2*Math.tan(e/2)*this.camera.position.length(),n=t*this.camera.aspect;this.camera=new r.OrthographicCamera(-n/2,n/2,t/2,-t/2,.01,100);break;case"PerspectiveCamera":const i=this.contenitore.getBoundingClientRect(),s=Math.floor(i.width),a=Math.floor(i.height);this.camera=new r.PerspectiveCamera(25,s/a,.1,1e3)}this.camera.position.set(t.x,t.y,t.z),this.controlli=new i.OrbitControls(this.camera,this.renderer.domElement),this.controlli.update()}}navRaycast(){this.navRaycaster=new r.Raycaster,this.navRaycaster.layers.disableAll(),this.navRaycaster.layers.set(4),this.navRaycaster.params={Line:{threshold:.001}},this.renderer.domElement.addEventListener("click",(e=>{let t=this.renderer.domElement.getBoundingClientRect(),n={x:e.offsetX/t.width*2-1,y:-e.offsetY/t.height*2+1};this.navRaycaster.setFromCamera(n,this.camera);let r=this.navRaycaster.intersectObjects(this.scene.children,!0);if(r.length>0){console.log(r[0].object.name);let e=this.camera.position.length();switch(r[0].object.name){case"navAsseX":this.camera.position.set(e,0,0);break;case"navAsseY":this.camera.position.set(0,e,0);break;case"navAsseZ":this.camera.position.set(0,0,e);break;case"navCamera":"PerspectiveCamera"==this.camera.type?this.setCamera("OrthographicCamera"):this.setCamera("PerspectiveCamera"),console.log(this.camera)}this.navLastOrthoPosition=this.camera.position.clone()}}))}riferimento(){if(this.opt.mostraNavHelper){this.scene.remove(this.scene.getObjectByName("navHelper")),this.navHelper=new r.Object3D,this.navHelper.name="navHelper";const e=.01,t=.001,n=new r.LineBasicMaterial({color:u});let i=[new r.Vector3(e,0,0),new r.Vector3(0,0,0)],s=(new r.BufferGeometry).setFromPoints(i);this.navHelper.add(new r.Line(s,n));const a=new r.MeshBasicMaterial({color:u}),o=new r.SphereGeometry(t),l=new r.Mesh(o,a);l.position.set(e,0,0),l.name="navAsseX",l.layers.enable(4),this.navHelper.add(l);const p=new r.LineBasicMaterial({color:c});i=[new r.Vector3(0,e,0),new r.Vector3(0,0,0)],s=(new r.BufferGeometry).setFromPoints(i),this.navHelper.add(new r.Line(s,p));const f=new r.MeshBasicMaterial({color:c}),m=new r.Mesh(o,f);m.position.set(0,e,0),m.name="navAsseY",m.layers.enable(4),this.navHelper.add(m);const d=new r.LineBasicMaterial({color:h});i=[new r.Vector3(0,0,e),new r.Vector3(0,0,0)],s=(new r.BufferGeometry).setFromPoints(i),this.navHelper.add(new r.Line(s,d));const g=new r.MeshBasicMaterial({color:h}),v=new r.Mesh(o,g);v.position.set(0,0,e),v.name="navAsseZ",v.layers.enable(4),this.navHelper.add(v);const y=new r.GridHelper(8*t,4);y.position.set(0,0,0),y.name="navCamera",y.layers.enable(4),y.lookAt(0,1,0),this.navHelper.add(y),this.scene.add(this.navHelper),this.posizionaNavHelper(),this.navRaycast()}if(this.cancella("griglia-xy","griglia-yz","griglia-xz","piano-xy","piano-yz","piano-xz","asse-x","asse-y","asse-z"),this.opt.mostraRiferimento&&"cartesiano"==this.opt.tipoRiferimento){-1!=this.opt.mostraGriglie.indexOf("xy")&&this.fabbrica.griglia("griglia-xy",l,this.opt.dimensioneRiferimento,this.opt.dimensioneRiferimento),-1!=this.opt.mostraGriglie.indexOf("yz")&&this.fabbrica.griglia("griglia-yz",a,this.opt.dimensioneRiferimento,this.opt.dimensioneRiferimento),-1!=this.opt.mostraGriglie.indexOf("xz")&&this.fabbrica.griglia("griglia-xz",o,this.opt.dimensioneRiferimento,this.opt.dimensioneRiferimento),-1!=this.opt.mostraPiani.indexOf("xy")&&this.fabbrica.piano("piano-xy",a,o,{colore:u.clone().add(c),lato:this.opt.dimensioneRiferimento}),-1!=this.opt.mostraPiani.indexOf("yz")&&this.fabbrica.piano("piano-yz",o,l,{colore:c.clone().add(h),lato:this.opt.dimensioneRiferimento}),-1!=this.opt.mostraPiani.indexOf("xz")&&this.fabbrica.piano("piano-xz",a,l,{colore:u.clone().add(h),lato:this.opt.dimensioneRiferimento});let e=Math.min(.1*this.opt.dimensioneRiferimento,.5);-1!=this.opt.mostraAssi.indexOf("x")&&(this.fabbrica.vettore("asse-x",a.clone().multiplyScalar(this.opt.dimensioneRiferimento+2*e),{colore:u}),this.trasla("asse-x",a.clone().multiplyScalar(-.5*(this.opt.dimensioneRiferimento+e))),this.opt.etichettaAssi&&this.etichetta("asse-x",a.clone().multiplyScalar(.5*this.opt.dimensioneRiferimento+2*e),{contenuto:"x",colore:"red"})),-1!=this.opt.mostraAssi.indexOf("y")&&(this.fabbrica.vettore("asse-y",o.clone().multiplyScalar(this.opt.dimensioneRiferimento+2*e),{colore:c}),this.trasla("asse-y",o.clone().multiplyScalar(-.5*(this.opt.dimensioneRiferimento+e))),this.opt.etichettaAssi&&this.etichetta("asse-y",o.clone().multiplyScalar(.5*this.opt.dimensioneRiferimento+2*e),{contenuto:"y",colore:"lime"})),-1!=this.opt.mostraAssi.indexOf("z")&&(this.fabbrica.vettore("asse-z",l.clone().multiplyScalar(this.opt.dimensioneRiferimento+2*e),{colore:h}),this.trasla("asse-z",l.clone().multiplyScalar(-.5*(this.opt.dimensioneRiferimento+e))),this.opt.etichettaAssi&&this.etichetta("asse-z",l.clone().multiplyScalar(.5*this.opt.dimensioneRiferimento+2*e),{contenuto:"z",colore:"blue"}))}}toggleGriglie(e){let t=this.opt.mostraGriglie.indexOf(e);-1!=t?this.opt.mostraGriglie.splice(t,1):this.opt.mostraGriglie.push(e),this.riferimento()}togglePiani(e){let t=this.opt.mostraPiani.indexOf(e);-1!=t?this.opt.mostraPiani.splice(t,1):this.opt.mostraPiani.push(e),this.riferimento()}toggleAssi(e){let t=this.opt.mostraAssi.indexOf(e);-1!=t?this.opt.mostraAssi.splice(t,1):this.opt.mostraAssi.push(e),this.riferimento()}cancella(...e){for(let t of e)this.scene.remove(this.scene.getObjectByName(t)),this.oggetti=this.oggetti.filter((e=>e!=t))}cancellaLavagna(){let e=[...this.oggetti];for(let t of e)this.cancella(t)}nascondi(...e){for(let t of e)for(let e of this.scene.getObjectByName(t).children)e.traverse((e=>{e.visible=!1}))}rivela(...e){for(let t of e)for(let e of this.scene.getObjectByName(t).children)e.traverse((e=>{e.visible=!0}))}trasla(e,t){for(let n of this.scene.getObjectByName(e).children)n.position.add(t)}ruota(e,t,n){this.scene.getObjectByName(e).rotateOnAxis(t,n)}ruotaX(e,t){this.ruota(e,a,t)}ruotaY(e,t){this.ruota(e,o,t)}ruotaZ(e,t){this.ruota(e,l,t)}ruotaAffine(e,t,n,r){let i=this.scene.getObjectByName(e);i.position.sub(n),i.position.applyAxisAngle(t,r),i.position.add(n),i.rotateOnAxis(t,r),this.resetParent(e)}resetParent(e){let t=this.scene.getObjectByName(e),n=new r.Object3D;n.name=e,n.userData=Object.assign({},t.userData);for(let e of t.children)s.SceneUtils.detach(e,t,this.scene),s.SceneUtils.attach(e,this.scene,n);this.scene.remove(t),this.scene.add(n)}animaTraslazione(e,t,n,r="linear"){let i=t.length();this.archivioAnimazioni.push({tipo:"trasla",id:e,v:t.normalize(),ibt:new d(i,n,r)})}animaRotazione(e,t,n,r,i="linear"){this.archivioAnimazioni.push({tipo:"ruota",id:e,asse:t,ibt:new d(n,r,i)})}animaRotazioneAffine(e,t,n,r,i,s="linear"){this.archivioAnimazioni.push({tipo:"ruotaAffine",id:e,asse:t,punto:n,ibt:new d(r,i,s)})}eseguiAnimazioni(e){let t=!1;this.archivioAnimazioni.forEach((n=>{if(n.ibt.esaurito())t=!0;else switch(n.tipo){case"trasla":this.trasla(n.id,n.v.clone().multiplyScalar(n.ibt.step(e)));break;case"ruota":this.ruota(n.id,n.asse,n.ibt.step(e));break;case"ruotaAffine":this.ruotaAffine(n.id,n.asse,n.punto,n.ibt.step(e))}})),t&&(this.archivioAnimazioni=this.archivioAnimazioni.filter((e=>!e.ibt.esaurito())))}sfera(e,t,n,r={}){this.oggetti.push(e),this.fabbrica.sfera(e,t,n,r)}punto(e,t,n={}){this.oggetti.push(e),this.fabbrica.punto(e,t,n)}segmento(e,t,n,r={}){this.oggetti.push(e),this.fabbrica.segmento(e,t,n,r)}vettore(e,t,n={}){this.oggetti.push(e),this.fabbrica.vettore(e,t,n)}vettoreAffine(e,t,n,r={}){this.oggetti.push(e),this.fabbrica.vettoreAffine(e,t,n,r)}retta(e,t,n={}){this.oggetti.push(e),this.fabbrica.retta(e,t,n)}rettaAffine(e,t,n,r={}){this.oggetti.push(e),this.fabbrica.rettaAffine(e,t,n,r)}piano(e,t,n,r={}){this.oggetti.push(e),this.fabbrica.piano(e,t,n,r)}pianoAffine(e,t,n,r,i={}){this.oggetti.push(e),this.fabbrica.pianoAffine(e,t,n,r,i)}etichetta(e,t,n={}){this.etichettatrice.etichetta(e,t,n)}}t.y=p,p.UID=0;class f{constructor(e){this.opt={bypass:!1,materiale:void 0,materialeBordo:void 0,opacity:1,deptWrite:!0,colore:new r.Color(0),spessore:.05,smoothness:16,tipoLati:r.DoubleSide,proporzionePunta:.1,lunghezza:50,lato:100,bordo:!1,coloreBordo:new r.Color(0),spessoreBordo:2,opacityBordo:0,layer:0},this.scene=e}opzioni(e,t){if(!t||!t.bypass){switch(e){case"sfera":this.opt.opacity=1,this.opt.colore=new r.Color(65280);break;case"punto":this.opt.opacity=1,this.opt.colore=new r.Color(16711680),this.opt.spessore=.05;break;case"segmento":this.opt.opacity=1,this.opt.colore=new r.Color(255),this.opt.spessore=.02;break;case"vettore":this.opt.opacity=1,this.opt.colore=new r.Color(16711680),this.opt.spessore=.02;break;case"retta":this.opt.opacity=1,this.opt.colore=new r.Color(16711680),this.opt.spessore=.01;break;case"piano":this.opt.colore=new r.Color(6710886),this.opt.opacity=.5,this.opt.lato=100,this.opt.bordo=!1,this.opt.coloreBordo=new r.Color(0),this.opt.spessoreBordo=2,this.opt.opacityBordo=0;break;case"griglia":this.opt.coloreBordo=new r.Color(3355443)}for(let e in t)this.opt[e]=t[e];this.opt.materiale=new r.MeshLambertMaterial,this.opt.materiale.color=this.opt.colore,this.opt.materiale.side=this.opt.tipoLati,this.opt.materiale.opacity=this.opt.opacity,this.opt.bordo&&(this.opt.materialeBordo=new r.LineBasicMaterial({color:this.opt.coloreBordo,linewidth:this.opt.spessoreBordo}),0!=this.opt.opacityBordo&&(this.opt.materialeBordo.transparent=!0,this.opt.materialeBordo.opacity=this.opt.opacityBordo)),this.opt.opacity<1&&(this.opt.materiale.transparent=!0)}}add(e,t,...n){this.scene.remove(this.scene.getObjectByName(e)),this.oggetto=new r.Object3D,this.oggetto.name=e,this.oggetto.userData.specie=t;for(let e of n)e&&this.oggetto.add(e);this.scene.add(this.oggetto)}get(e){return this.scene.getObjectByName(e)}sfera(e,t,n,i={}){this.opzioni("sfera",i);let s=new r.SphereGeometry(n,this.opt.smoothness,this.opt.smoothness),a=new r.Mesh(s,this.opt.materiale);a.position.set(t.x,t.y,t.z),this.add(e,"sfera",a)}punto(e,t,n={}){this.opzioni("punto",n),this.opt.bypass=!0,this.sfera(e,t,this.opt.spessore,this.opt)}segmento(e,t,n,i={}){this.opzioni("segmento",i);let s=Math.atan2(n.y-t.y,n.x-t.x),a=.5*Math.PI-Math.atan2(n.z-t.z,Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2))),o=n.clone().sub(t).length(),l=new r.CylinderGeometry(this.opt.spessore,this.opt.spessore,o,this.opt.smoothness),u=new r.Mesh(l,this.opt.materiale);u.rotation.order="XZY",u.rotateZ(s-Math.PI/2),u.rotateX(Math.PI/2-a);let c=n.clone().addScaledVector(t,-1).multiplyScalar(.5);u.position.add(t),u.position.add(c),this.add(e,"segmento",u)}vettore(e,t,n={}){this.opzioni("vettore",n);let i=Math.atan2(t.y,t.x),s=.5*Math.PI-Math.atan2(t.z,Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))),a=t.length(),o=a*this.opt.proporzionePunta;o>12*this.opt.spessore?o=12*this.opt.spessore:o<4*this.opt.spessore&&(o=4*this.opt.spessore);let l=a-o,u=t.clone().normalize(),c=new r.CylinderGeometry(this.opt.spessore,this.opt.spessore,l,this.opt.smoothness),h=new r.Mesh(c,this.opt.materiale);h.rotation.order="XZY",h.rotateZ(i-Math.PI/2),h.rotateX(Math.PI/2-s),h.position.add(u.clone().multiplyScalar(.5*l));let p=new r.ConeGeometry(3*this.opt.spessore,o,this.opt.smoothness),f=new r.Mesh(p,this.opt.materiale);f.position.add(u.clone().multiplyScalar(l+o/2)),f.rotation.order="XZY",f.rotateZ(i-Math.PI/2),f.rotateX(Math.PI/2-s),this.add(e,"vettore",h,f)}vettoreAffine(e,t,n,r={}){this.vettore(e,t,this.opt);let i=this.scene.getObjectByName(e);for(let e of i.children)e.position.add(n)}retta(e,t,n={}){this.opzioni("retta",n),this.opt.bypass=!0;let r=(t=t.clone().normalize().multiplyScalar(this.opt.lunghezza)).clone().multiplyScalar(-1),i=t.clone();this.segmento(e,r,i,this.opt)}rettaAffine(e,t,n,r={}){this.retta(e,t,r);let i=this.scene.getObjectByName(e);for(let e of i.children)e.position.add(n)}piano(e,t,n,i={}){this.opzioni("piano",i);let s,a=new r.PlaneGeometry(this.opt.lato,this.opt.lato),o=new r.Mesh(a,this.opt.materiale),l=t.clone().cross(n);o.lookAt(l),this.opt.bordo&&(s=new r.GridHelper(this.opt.lato,1),s.material=this.opt.materialeBordo,s.rotateX(Math.PI/2),o.add(s)),this.add(e,"piano",o)}pianoAffine(e,t,n,r,i={}){this.piano(e,t,n,i);let s=this.scene.getObjectByName(e);for(let e of s.children)e.position.add(r)}griglia(e,t,n,i,s={}){this.opzioni("griglia",s);var a=new r.GridHelper(n,i,this.opt.coloreBordo,this.opt.coloreBordo);a.geometry.rotateX(Math.PI/2),a.lookAt(t),this.add(e,"griglia",a)}}class m{constructor(e){this.opt={materiale:new r.SpriteMaterial,opacity:1,colore:"black",dimensione:.2,contenuto:""},this.scene=e}opzioni(e){if(!e||!e.bypass){for(let t in e)this.opt[t]=e[t];this.opt.materiale=new r.SpriteMaterial,this.opt.materiale.color=new r.Color(this.opt.colore),this.opt.materiale.opacity=this.opt.opacity,this.opt.opacity<1&&(this.opt.materiale.transparent=!0)}}etichetta(e,t,n={}){this.opzioni(n);let i=""==this.opt.contenuto?e:this.opt.contenuto,s=document.createElement("canvas");s.height=128,s.width=Math.floor(128*i.length*.7);let a=s.getContext("2d");a.font="128px Arial",a.textBaseline="middle",a.textAlign="center",a.fillStyle=this.opt.colore,a.fillText(i,s.width/2,s.height/2);let o=new r.CanvasTexture(s);o.needsUpdate=!0,o.repeat.set(1,1),this.opt.materiale.map=o,this.sprite=new r.Sprite(this.opt.materiale),this.sprite.scale.set(.7*this.opt.dimensione*i.length,this.opt.dimensione,1),this.sprite.position.add(t),this.sprite.name=e,this.scene.getObjectByName(e).add(this.sprite)}}class d{constructor(e,t,n="linear"){switch(this.tol=.001,this.v=e,this.vAct=0,this.t=t,this.tAct=0,this.esausto=!1,n){case"linear":this.f=n=>e/t*n;break;case"quad":this.f=n=>e*Math.pow(n/t,2);break;case"inout":this.f=n=>n/t<.5?2*e*Math.pow(n/t,2):e*((4-2*n/t)*n/t-1)}}step(e){if(this.esausto)return 0;{let t=this.tAct,n=this.tAct+e,r=this.f(n)-this.f(t);return this.vAct+r>=this.v-this.tol&&(r=this.v-this.vAct,this.esausto=!0),this.vAct+=r,this.tAct=n,r}}esaurito(){return this.esausto}}},469:(e,t,n)=>{"use strict";t.XF=void 0;const r=n(307);n(651),n(297);function i(e){return""!==e&&"number"==typeof(e=r(e).evaluate().valueOf())}function s(e){if(i(e))return r(e).toTeX();let t=r(e).numerator().toTeX().split("\\cdot").join(""),n=r(e).denominator().toTeX().split("\\cdot").join("");return"1"==n?a(t):"-"==t[0]?a("-\\frac{"+r("expand("+r(e).numerator().multiply("-1")+")").toTeX().split("\\cdot").join("")+"}{"+n+"}"):a("\\frac{"+t+"}{"+n+"}")}function a(e){let t=[["asin","arcsin"],["acos","arccos"],["atan","arctan"]];for(let n of t)e=e.split(n[0]).join(n[1]);return e}t.XF=s},297:function(e,t,n){var r;"undefined"!=typeof self&&self,r=function(e){return function(){"use strict";var t={974:function(t){t.exports=e}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var s=n[e]={exports:{}};return t[e](s,s.exports,r),s.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var i={};return function(){r.d(i,{default:function(){return l}});var e=r(974),t=r.n(e),n=function(e,t,n){for(var r=n,i=0,s=e.length;r<t.length;){var a=t[r];if(i<=0&&t.slice(r,r+s)===e)return r;"\\"===a?r++:"{"===a?i++:"}"===a&&i--,r++}return-1},s=/^\\begin{/,a=function(e,r){var i=function(e,t){for(var r,i=[],a=new RegExp("("+t.map((function(e){return e.left.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")})).join("|")+")");-1!==(r=e.search(a));){r>0&&(i.push({type:"text",data:e.slice(0,r)}),e=e.slice(r));var o=t.findIndex((function(t){return e.startsWith(t.left)}));if(-1===(r=n(t[o].right,e,t[o].left.length)))break;var l=e.slice(0,r+t[o].right.length),u=s.test(l)?l:e.slice(t[o].left.length,r);i.push({type:"math",data:u,rawData:l,display:t[o].display}),e=e.slice(r+t[o].right.length)}return""!==e&&i.push({type:"text",data:e}),i}(e,r.delimiters);if(1===i.length&&"text"===i[0].type)return null;for(var a=document.createDocumentFragment(),o=0;o<i.length;o++)if("text"===i[o].type)a.appendChild(document.createTextNode(i[o].data));else{var l=document.createElement("span"),u=i[o].data;r.displayMode=i[o].display;try{r.preProcess&&(u=r.preProcess(u)),t().render(u,l,r)}catch(e){if(!(e instanceof t().ParseError))throw e;r.errorCallback("KaTeX auto-render: Failed to parse `"+i[o].data+"` with ",e),a.appendChild(document.createTextNode(i[o].rawData));continue}a.appendChild(l)}return a},o=function e(t,n){for(var r=0;r<t.childNodes.length;r++){var i=t.childNodes[r];if(3===i.nodeType){var s=a(i.textContent,n);s&&(r+=s.childNodes.length-1,t.replaceChild(s,i))}else 1===i.nodeType&&function(){var t=" "+i.className+" ";-1===n.ignoredTags.indexOf(i.nodeName.toLowerCase())&&n.ignoredClasses.every((function(e){return-1===t.indexOf(" "+e+" ")}))&&e(i,n)}()}},l=function(e,t){if(!e)throw new Error("No element provided to render");var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);n.delimiters=n.delimiters||[{left:"$$",right:"$$",display:!0},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}],n.ignoredTags=n.ignoredTags||["script","noscript","style","textarea","pre","code","option"],n.ignoredClasses=n.ignoredClasses||[],n.errorCallback=n.errorCallback||console.error,n.macros=n.macros||{},o(e,n)}}(),i.default}()},e.exports=r(n(651))},651:function(e){var t;"undefined"!=typeof self&&self,t=function(){return function(){"use strict";var e={d:function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t={};e.d(t,{default:function(){return $r}});var n=function e(t,n){this.position=void 0;var r,i="KaTeX parse error: "+t,s=n&&n.loc;if(s&&s.start<=s.end){var a=s.lexer.input;r=s.start;var o=s.end;r===a.length?i+=" at end of input: ":i+=" at position "+(r+1)+": ";var l=a.slice(r,o).replace(/[^]/g,"$&̲");i+=(r>15?"…"+a.slice(r-15,r):a.slice(0,r))+l+(o+15<a.length?a.slice(o,o+15)+"…":a.slice(o))}var u=new Error(i);return u.name="ParseError",u.__proto__=e.prototype,u.position=r,u};n.prototype.__proto__=Error.prototype;var r=n,i=/([A-Z])/g,s={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},a=/[&><"']/g,o=function e(t){return"ordgroup"===t.type||"color"===t.type?1===t.body.length?e(t.body[0]):t:"font"===t.type?e(t.body):t},l=function(e,t){return-1!==e.indexOf(t)},u=function(e,t){return void 0===e?t:e},c=function(e){return String(e).replace(a,(function(e){return s[e]}))},h=function(e){return e.replace(i,"-$1").toLowerCase()},p=o,f=function(e){var t=o(e);return"mathord"===t.type||"textord"===t.type||"atom"===t.type},m=function(e){var t=/^\s*([^\\/#]*?)(?::|&#0*58|&#x0*3a)/i.exec(e);return null!=t?t[1]:"_relative"},d=function(){function e(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{},this.displayMode=u(e.displayMode,!1),this.output=u(e.output,"htmlAndMathml"),this.leqno=u(e.leqno,!1),this.fleqn=u(e.fleqn,!1),this.throwOnError=u(e.throwOnError,!0),this.errorColor=u(e.errorColor,"#cc0000"),this.macros=e.macros||{},this.minRuleThickness=Math.max(0,u(e.minRuleThickness,0)),this.colorIsTextColor=u(e.colorIsTextColor,!1),this.strict=u(e.strict,"warn"),this.trust=u(e.trust,!1),this.maxSize=Math.max(0,u(e.maxSize,1/0)),this.maxExpand=Math.max(0,u(e.maxExpand,1e3)),this.globalGroup=u(e.globalGroup,!1)}var t=e.prototype;return t.reportNonstrict=function(e,t,n){var i=this.strict;if("function"==typeof i&&(i=i(e,t,n)),i&&"ignore"!==i){if(!0===i||"error"===i)throw new r("LaTeX-incompatible input and strict mode is set to 'error': "+t+" ["+e+"]",n);"warn"===i?"undefined"!=typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+t+" ["+e+"]"):"undefined"!=typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to unrecognized '"+i+"': "+t+" ["+e+"]")}},t.useStrictBehavior=function(e,t,n){var r=this.strict;if("function"==typeof r)try{r=r(e,t,n)}catch(e){r="error"}return!(!r||"ignore"===r||!0!==r&&"error"!==r&&("warn"===r?("undefined"!=typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+t+" ["+e+"]"),1):("undefined"!=typeof console&&console.warn("LaTeX-incompatible input and strict mode is set to unrecognized '"+r+"': "+t+" ["+e+"]"),1)))},t.isTrusted=function(e){e.url&&!e.protocol&&(e.protocol=m(e.url));var t="function"==typeof this.trust?this.trust(e):this.trust;return Boolean(t)},e}(),g=function(){function e(e,t,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=t,this.cramped=n}var t=e.prototype;return t.sup=function(){return v[y[this.id]]},t.sub=function(){return v[w[this.id]]},t.fracNum=function(){return v[b[this.id]]},t.fracDen=function(){return v[x[this.id]]},t.cramp=function(){return v[M[this.id]]},t.text=function(){return v[S[this.id]]},t.isTight=function(){return this.size>=2},e}(),v=[new g(0,0,!1),new g(1,0,!0),new g(2,1,!1),new g(3,1,!0),new g(4,2,!1),new g(5,2,!0),new g(6,3,!1),new g(7,3,!0)],y=[4,5,4,5,6,7,6,7],w=[5,5,5,5,7,7,7,7],b=[2,3,4,5,6,7,6,7],x=[3,3,5,5,7,7,7,7],M=[1,1,3,3,5,5,7,7],S=[0,1,2,3,2,3,2,3],_={DISPLAY:v[0],TEXT:v[2],SCRIPT:v[4],SCRIPTSCRIPT:v[6]},E=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}],T=[];function A(e){for(var t=0;t<T.length;t+=2)if(e>=T[t]&&e<=T[t+1])return!0;return!1}E.forEach((function(e){return e.blocks.forEach((function(e){return T.push.apply(T,e)}))}));var L={doubleleftarrow:"M262 157\nl10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3\n 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28\n 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5\nc2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5\n 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87\n-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7\n-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z\nm8 0v40h399730v-40zm0 194v40h399730v-40z",doublerightarrow:"M399738 392l\n-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5\n 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88\n-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68\n-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18\n-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782\nc-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3\n-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z",leftarrow:"M400000 241H110l3-3c68.7-52.7 113.7-120\n 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8\n-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247\nc-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208\n 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3\n 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202\n l-3-3h399890zM100 241v40h399900v-40z",leftbrace:"M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117\n-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7\n 5-6 9-10 13-.7 1-7.3 1-20 1H6z",leftbraceunder:"M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z",leftgroup:"M400000 80\nH435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0\n 435 0h399565z",leftgroupunder:"M400000 262\nH435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219\n 435 219h399565z",leftharpoon:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3\n-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5\n-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7\n-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z",leftharpoonplus:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5\n 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3\n-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7\n-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z\nm0 0v40h400000v-40z",leftharpoondown:"M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333\n 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5\n 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667\n-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z",leftharpoondownplus:"M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12\n 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7\n-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0\nv40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z",lefthook:"M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5\n-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3\n-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21\n 71.5 23h399859zM103 281v-40h399897v40z",leftlinesegment:"M40 281 V428 H0 V94 H40 V241 H400000 v40z\nM40 281 V428 H0 V94 H40 V241 H400000 v40z",leftmapsto:"M40 281 V448H0V74H40V241H400000v40z\nM40 281 V448H0V74H40V241H400000v40z",leftToFrom:"M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23\n-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8\nc28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3\n 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z",longequal:"M0 50 h400000 v40H0z m0 194h40000v40H0z\nM0 50 h400000 v40H0z m0 194h40000v40H0z",midbrace:"M200428 334\nc-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14\n-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7\n 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11\n 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z",midbraceunder:"M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z",oiintSize1:"M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6\n-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z\nm368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8\n60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z",oiintSize2:"M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8\n-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z\nm502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2\nc0 110 84 276 504 276s502.4-166 502.4-276z",oiiintSize1:"M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6\n-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z\nm525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0\n85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z",oiiintSize2:"M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8\n-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z\nm770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1\nc0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z",rightarrow:"M0 241v40h399891c-47.3 35.3-84 78-110 128\n-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20\n 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7\n 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85\n-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n 151.7 139 205zm0 0v40h399900v-40z",rightbrace:"M400000 542l\n-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5\ns-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1\nc124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z",rightbraceunder:"M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z",rightgroup:"M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0\n 3-1 3-3v-38c-76-158-257-219-435-219H0z",rightgroupunder:"M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18\n 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z",rightharpoon:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3\n-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2\n-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58\n 69.2 92 94.5zm0 0v40h399900v-40z",rightharpoonplus:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11\n-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7\n 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z\nm0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z",rightharpoondown:"M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8\n 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5\n-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95\n-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z",rightharpoondownplus:"M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8\n 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3\n 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3\n-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z\nm0-194v40h400000v-40zm0 0v40h400000v-40z",righthook:"M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3\n 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0\n-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21\n 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z",rightlinesegment:"M399960 241 V94 h40 V428 h-40 V281 H0 v-40z\nM399960 241 V94 h40 V428 h-40 V281 H0 v-40z",rightToFrom:"M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23\n 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32\n-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142\n-167z M100 147v40h399900v-40zM0 341v40h399900v-40z",twoheadleftarrow:"M0 167c68 40\n 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69\n-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3\n-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19\n-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101\n 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z",twoheadrightarrow:"M400000 167\nc-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3\n 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42\n 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333\n-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70\n 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z",tilde1:"M200 55.538c-77 0-168 73.953-177 73.953-3 0-7\n-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0\n 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0\n 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128\n-68.267.847-113-73.952-191-73.952z",tilde2:"M344 55.266c-142 0-300.638 81.316-311.5 86.418\n-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9\n 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114\nc1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751\n 181.476 676 181.476c-149 0-189-126.21-332-126.21z",tilde3:"M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457\n-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0\n 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697\n 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696\n -338 0-409-156.573-744-156.573z",tilde4:"M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345\n-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409\n 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9\n 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409\n -175.236-744-175.236z",vec:"M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z",widehat1:"M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22\nc-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z",widehat2:"M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat3:"M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat4:"M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widecheck1:"M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,\n-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z",widecheck2:"M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck3:"M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck4:"M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",baraboveleftarrow:"M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202\nc4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5\nc-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130\ns-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47\n121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6\ns2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11\nc0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z\nM100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z",rightarrowabovebar:"M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32\n-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0\n13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39\n-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5\n-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z",baraboveshortleftharpoon:"M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17\nc2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21\nc-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40\nc-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z\nM0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z",rightharpoonaboveshortbar:"M0,241 l0,40c399126,0,399993,0,399993,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z",shortbaraboveleftharpoon:"M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,\n1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,\n-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z\nM93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z",shortrightharpoonabovebar:"M53,241l0,40c398570,0,399437,0,399437,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z"},C=function(){function e(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}var t=e.prototype;return t.hasClass=function(e){return l(this.classes,e)},t.toNode=function(){for(var e=document.createDocumentFragment(),t=0;t<this.children.length;t++)e.appendChild(this.children[t].toNode());return e},t.toMarkup=function(){for(var e="",t=0;t<this.children.length;t++)e+=this.children[t].toMarkup();return e},t.toText=function(){return this.children.map((function(e){return e.toText()})).join("")},e}(),R=function(e){return e.filter((function(e){return e})).join(" ")},N=function(e,t,n){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=n||{},t){t.style.isTight()&&this.classes.push("mtight");var r=t.getColor();r&&(this.style.color=r)}},P=function(e){var t=document.createElement(e);for(var n in t.className=R(this.classes),this.style)this.style.hasOwnProperty(n)&&(t.style[n]=this.style[n]);for(var r in this.attributes)this.attributes.hasOwnProperty(r)&&t.setAttribute(r,this.attributes[r]);for(var i=0;i<this.children.length;i++)t.appendChild(this.children[i].toNode());return t},I=function(e){var t="<"+e;this.classes.length&&(t+=' class="'+c(R(this.classes))+'"');var n="";for(var r in this.style)this.style.hasOwnProperty(r)&&(n+=h(r)+":"+this.style[r]+";");for(var i in n&&(t+=' style="'+c(n)+'"'),this.attributes)this.attributes.hasOwnProperty(i)&&(t+=" "+i+'="'+c(this.attributes[i])+'"');t+=">";for(var s=0;s<this.children.length;s++)t+=this.children[s].toMarkup();return t+"</"+e+">"},O=function(){function e(e,t,n,r){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,N.call(this,e,n,r),this.children=t||[]}var t=e.prototype;return t.setAttribute=function(e,t){this.attributes[e]=t},t.hasClass=function(e){return l(this.classes,e)},t.toNode=function(){return P.call(this,"span")},t.toMarkup=function(){return I.call(this,"span")},e}(),k=function(){function e(e,t,n,r){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,N.call(this,t,r),this.children=n||[],this.setAttribute("href",e)}var t=e.prototype;return t.setAttribute=function(e,t){this.attributes[e]=t},t.hasClass=function(e){return l(this.classes,e)},t.toNode=function(){return P.call(this,"a")},t.toMarkup=function(){return I.call(this,"a")},e}(),D=function(){function e(e,t,n){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=t,this.src=e,this.classes=["mord"],this.style=n}var t=e.prototype;return t.hasClass=function(e){return l(this.classes,e)},t.toNode=function(){var e=document.createElement("img");for(var t in e.src=this.src,e.alt=this.alt,e.className="mord",this.style)this.style.hasOwnProperty(t)&&(e.style[t]=this.style[t]);return e},t.toMarkup=function(){var e="<img  src='"+this.src+" 'alt='"+this.alt+"' ",t="";for(var n in this.style)this.style.hasOwnProperty(n)&&(t+=h(n)+":"+this.style[n]+";");return t&&(e+=' style="'+c(t)+'"'),e+"'/>"},e}(),U={î:"ı̂",ï:"ı̈",í:"ı́",ì:"ı̀"},z=function(){function e(e,t,n,r,i,s,a,o){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=t||0,this.depth=n||0,this.italic=r||0,this.skew=i||0,this.width=s||0,this.classes=a||[],this.style=o||{},this.maxFontSize=0;var l=function(e){for(var t=0;t<E.length;t++)for(var n=E[t],r=0;r<n.blocks.length;r++){var i=n.blocks[r];if(e>=i[0]&&e<=i[1])return n.name}return null}(this.text.charCodeAt(0));l&&this.classes.push(l+"_fallback"),/[îïíì]/.test(this.text)&&(this.text=U[this.text])}var t=e.prototype;return t.hasClass=function(e){return l(this.classes,e)},t.toNode=function(){var e=document.createTextNode(this.text),t=null;for(var n in this.italic>0&&((t=document.createElement("span")).style.marginRight=this.italic+"em"),this.classes.length>0&&((t=t||document.createElement("span")).className=R(this.classes)),this.style)this.style.hasOwnProperty(n)&&((t=t||document.createElement("span")).style[n]=this.style[n]);return t?(t.appendChild(e),t):e},t.toMarkup=function(){var e=!1,t="<span";this.classes.length&&(e=!0,t+=' class="',t+=c(R(this.classes)),t+='"');var n="";for(var r in this.italic>0&&(n+="margin-right:"+this.italic+"em;"),this.style)this.style.hasOwnProperty(r)&&(n+=h(r)+":"+this.style[r]+";");n&&(e=!0,t+=' style="'+c(n)+'"');var i=c(this.text);return e?(t+=">",t+=i,t+="</span>"):i},e}(),B=function(){function e(e,t){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=t||{}}var t=e.prototype;return t.toNode=function(){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);for(var n=0;n<this.children.length;n++)e.appendChild(this.children[n].toNode());return e},t.toMarkup=function(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+"='"+this.attributes[t]+"'");e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+"</svg>"},e}(),F=function(){function e(e,t){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=t}var t=e.prototype;return t.toNode=function(){var e=document.createElementNS("http://www.w3.org/2000/svg","path");return this.alternate?e.setAttribute("d",this.alternate):e.setAttribute("d",L[this.pathName]),e},t.toMarkup=function(){return this.alternate?"<path d='"+this.alternate+"'/>":"<path d='"+L[this.pathName]+"'/>"},e}(),q=function(){function e(e){this.attributes=void 0,this.attributes=e||{}}var t=e.prototype;return t.toNode=function(){var e=document.createElementNS("http://www.w3.org/2000/svg","line");for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);return e},t.toMarkup=function(){var e="<line";for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+"='"+this.attributes[t]+"'");return e+"/>"},e}();function H(e){if(e instanceof z)return e;throw new Error("Expected symbolNode but got "+String(e)+".")}var G={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,1],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},V={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},W={Å:"A",Ð:"D",Þ:"o",å:"a",ð:"d",þ:"o",А:"A",Б:"B",В:"B",Г:"F",Д:"A",Е:"E",Ж:"K",З:"3",И:"N",Й:"N",К:"K",Л:"N",М:"M",Н:"H",О:"O",П:"N",Р:"P",С:"C",Т:"T",У:"y",Ф:"O",Х:"X",Ц:"U",Ч:"h",Ш:"W",Щ:"W",Ъ:"B",Ы:"X",Ь:"B",Э:"3",Ю:"X",Я:"R",а:"a",б:"b",в:"a",г:"r",д:"y",е:"e",ж:"m",з:"e",и:"n",й:"n",к:"n",л:"n",м:"m",н:"n",о:"o",п:"n",р:"p",с:"c",т:"o",у:"y",ф:"b",х:"x",ц:"n",ч:"n",ш:"w",щ:"w",ъ:"a",ы:"m",ь:"a",э:"e",ю:"m",я:"r"};function j(e,t,n){if(!G[t])throw new Error("Font metrics not found for font: "+t+".");var r=e.charCodeAt(0),i=G[t][r];if(!i&&e[0]in W&&(r=W[e[0]].charCodeAt(0),i=G[t][r]),i||"text"!==n||A(r)&&(i=G[t][77]),i)return{depth:i[0],height:i[1],italic:i[2],skew:i[3],width:i[4]}}var X={},Z={bin:1,close:1,inner:1,open:1,punct:1,rel:1},Y={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},J={math:{},text:{}},$=J;function Q(e,t,n,r,i,s){J[e][i]={font:t,group:n,replace:r},s&&r&&(J[e][r]=J[e][i])}var K="math",ee="text",te="main",ne="ams",re="accent-token",ie="bin",se="close",ae="inner",oe="mathord",le="op-token",ue="open",ce="punct",he="rel",pe="spacing",fe="textord";Q(K,te,he,"≡","\\equiv",!0),Q(K,te,he,"≺","\\prec",!0),Q(K,te,he,"≻","\\succ",!0),Q(K,te,he,"∼","\\sim",!0),Q(K,te,he,"⊥","\\perp"),Q(K,te,he,"⪯","\\preceq",!0),Q(K,te,he,"⪰","\\succeq",!0),Q(K,te,he,"≃","\\simeq",!0),Q(K,te,he,"∣","\\mid",!0),Q(K,te,he,"≪","\\ll",!0),Q(K,te,he,"≫","\\gg",!0),Q(K,te,he,"≍","\\asymp",!0),Q(K,te,he,"∥","\\parallel"),Q(K,te,he,"⋈","\\bowtie",!0),Q(K,te,he,"⌣","\\smile",!0),Q(K,te,he,"⊑","\\sqsubseteq",!0),Q(K,te,he,"⊒","\\sqsupseteq",!0),Q(K,te,he,"≐","\\doteq",!0),Q(K,te,he,"⌢","\\frown",!0),Q(K,te,he,"∋","\\ni",!0),Q(K,te,he,"∝","\\propto",!0),Q(K,te,he,"⊢","\\vdash",!0),Q(K,te,he,"⊣","\\dashv",!0),Q(K,te,he,"∋","\\owns"),Q(K,te,ce,".","\\ldotp"),Q(K,te,ce,"⋅","\\cdotp"),Q(K,te,fe,"#","\\#"),Q(ee,te,fe,"#","\\#"),Q(K,te,fe,"&","\\&"),Q(ee,te,fe,"&","\\&"),Q(K,te,fe,"ℵ","\\aleph",!0),Q(K,te,fe,"∀","\\forall",!0),Q(K,te,fe,"ℏ","\\hbar",!0),Q(K,te,fe,"∃","\\exists",!0),Q(K,te,fe,"∇","\\nabla",!0),Q(K,te,fe,"♭","\\flat",!0),Q(K,te,fe,"ℓ","\\ell",!0),Q(K,te,fe,"♮","\\natural",!0),Q(K,te,fe,"♣","\\clubsuit",!0),Q(K,te,fe,"℘","\\wp",!0),Q(K,te,fe,"♯","\\sharp",!0),Q(K,te,fe,"♢","\\diamondsuit",!0),Q(K,te,fe,"ℜ","\\Re",!0),Q(K,te,fe,"♡","\\heartsuit",!0),Q(K,te,fe,"ℑ","\\Im",!0),Q(K,te,fe,"♠","\\spadesuit",!0),Q(K,te,fe,"§","\\S",!0),Q(ee,te,fe,"§","\\S"),Q(K,te,fe,"¶","\\P",!0),Q(ee,te,fe,"¶","\\P"),Q(K,te,fe,"†","\\dag"),Q(ee,te,fe,"†","\\dag"),Q(ee,te,fe,"†","\\textdagger"),Q(K,te,fe,"‡","\\ddag"),Q(ee,te,fe,"‡","\\ddag"),Q(ee,te,fe,"‡","\\textdaggerdbl"),Q(K,te,se,"⎱","\\rmoustache",!0),Q(K,te,ue,"⎰","\\lmoustache",!0),Q(K,te,se,"⟯","\\rgroup",!0),Q(K,te,ue,"⟮","\\lgroup",!0),Q(K,te,ie,"∓","\\mp",!0),Q(K,te,ie,"⊖","\\ominus",!0),Q(K,te,ie,"⊎","\\uplus",!0),Q(K,te,ie,"⊓","\\sqcap",!0),Q(K,te,ie,"∗","\\ast"),Q(K,te,ie,"⊔","\\sqcup",!0),Q(K,te,ie,"◯","\\bigcirc",!0),Q(K,te,ie,"∙","\\bullet"),Q(K,te,ie,"‡","\\ddagger"),Q(K,te,ie,"≀","\\wr",!0),Q(K,te,ie,"⨿","\\amalg"),Q(K,te,ie,"&","\\And"),Q(K,te,he,"⟵","\\longleftarrow",!0),Q(K,te,he,"⇐","\\Leftarrow",!0),Q(K,te,he,"⟸","\\Longleftarrow",!0),Q(K,te,he,"⟶","\\longrightarrow",!0),Q(K,te,he,"⇒","\\Rightarrow",!0),Q(K,te,he,"⟹","\\Longrightarrow",!0),Q(K,te,he,"↔","\\leftrightarrow",!0),Q(K,te,he,"⟷","\\longleftrightarrow",!0),Q(K,te,he,"⇔","\\Leftrightarrow",!0),Q(K,te,he,"⟺","\\Longleftrightarrow",!0),Q(K,te,he,"↦","\\mapsto",!0),Q(K,te,he,"⟼","\\longmapsto",!0),Q(K,te,he,"↗","\\nearrow",!0),Q(K,te,he,"↩","\\hookleftarrow",!0),Q(K,te,he,"↪","\\hookrightarrow",!0),Q(K,te,he,"↘","\\searrow",!0),Q(K,te,he,"↼","\\leftharpoonup",!0),Q(K,te,he,"⇀","\\rightharpoonup",!0),Q(K,te,he,"↙","\\swarrow",!0),Q(K,te,he,"↽","\\leftharpoondown",!0),Q(K,te,he,"⇁","\\rightharpoondown",!0),Q(K,te,he,"↖","\\nwarrow",!0),Q(K,te,he,"⇌","\\rightleftharpoons",!0),Q(K,ne,he,"≮","\\nless",!0),Q(K,ne,he,"","\\@nleqslant"),Q(K,ne,he,"","\\@nleqq"),Q(K,ne,he,"⪇","\\lneq",!0),Q(K,ne,he,"≨","\\lneqq",!0),Q(K,ne,he,"","\\@lvertneqq"),Q(K,ne,he,"⋦","\\lnsim",!0),Q(K,ne,he,"⪉","\\lnapprox",!0),Q(K,ne,he,"⊀","\\nprec",!0),Q(K,ne,he,"⋠","\\npreceq",!0),Q(K,ne,he,"⋨","\\precnsim",!0),Q(K,ne,he,"⪹","\\precnapprox",!0),Q(K,ne,he,"≁","\\nsim",!0),Q(K,ne,he,"","\\@nshortmid"),Q(K,ne,he,"∤","\\nmid",!0),Q(K,ne,he,"⊬","\\nvdash",!0),Q(K,ne,he,"⊭","\\nvDash",!0),Q(K,ne,he,"⋪","\\ntriangleleft"),Q(K,ne,he,"⋬","\\ntrianglelefteq",!0),Q(K,ne,he,"⊊","\\subsetneq",!0),Q(K,ne,he,"","\\@varsubsetneq"),Q(K,ne,he,"⫋","\\subsetneqq",!0),Q(K,ne,he,"","\\@varsubsetneqq"),Q(K,ne,he,"≯","\\ngtr",!0),Q(K,ne,he,"","\\@ngeqslant"),Q(K,ne,he,"","\\@ngeqq"),Q(K,ne,he,"⪈","\\gneq",!0),Q(K,ne,he,"≩","\\gneqq",!0),Q(K,ne,he,"","\\@gvertneqq"),Q(K,ne,he,"⋧","\\gnsim",!0),Q(K,ne,he,"⪊","\\gnapprox",!0),Q(K,ne,he,"⊁","\\nsucc",!0),Q(K,ne,he,"⋡","\\nsucceq",!0),Q(K,ne,he,"⋩","\\succnsim",!0),Q(K,ne,he,"⪺","\\succnapprox",!0),Q(K,ne,he,"≆","\\ncong",!0),Q(K,ne,he,"","\\@nshortparallel"),Q(K,ne,he,"∦","\\nparallel",!0),Q(K,ne,he,"⊯","\\nVDash",!0),Q(K,ne,he,"⋫","\\ntriangleright"),Q(K,ne,he,"⋭","\\ntrianglerighteq",!0),Q(K,ne,he,"","\\@nsupseteqq"),Q(K,ne,he,"⊋","\\supsetneq",!0),Q(K,ne,he,"","\\@varsupsetneq"),Q(K,ne,he,"⫌","\\supsetneqq",!0),Q(K,ne,he,"","\\@varsupsetneqq"),Q(K,ne,he,"⊮","\\nVdash",!0),Q(K,ne,he,"⪵","\\precneqq",!0),Q(K,ne,he,"⪶","\\succneqq",!0),Q(K,ne,he,"","\\@nsubseteqq"),Q(K,ne,ie,"⊴","\\unlhd"),Q(K,ne,ie,"⊵","\\unrhd"),Q(K,ne,he,"↚","\\nleftarrow",!0),Q(K,ne,he,"↛","\\nrightarrow",!0),Q(K,ne,he,"⇍","\\nLeftarrow",!0),Q(K,ne,he,"⇏","\\nRightarrow",!0),Q(K,ne,he,"↮","\\nleftrightarrow",!0),Q(K,ne,he,"⇎","\\nLeftrightarrow",!0),Q(K,ne,he,"△","\\vartriangle"),Q(K,ne,fe,"ℏ","\\hslash"),Q(K,ne,fe,"▽","\\triangledown"),Q(K,ne,fe,"◊","\\lozenge"),Q(K,ne,fe,"Ⓢ","\\circledS"),Q(K,ne,fe,"®","\\circledR"),Q(ee,ne,fe,"®","\\circledR"),Q(K,ne,fe,"∡","\\measuredangle",!0),Q(K,ne,fe,"∄","\\nexists"),Q(K,ne,fe,"℧","\\mho"),Q(K,ne,fe,"Ⅎ","\\Finv",!0),Q(K,ne,fe,"⅁","\\Game",!0),Q(K,ne,fe,"‵","\\backprime"),Q(K,ne,fe,"▲","\\blacktriangle"),Q(K,ne,fe,"▼","\\blacktriangledown"),Q(K,ne,fe,"■","\\blacksquare"),Q(K,ne,fe,"⧫","\\blacklozenge"),Q(K,ne,fe,"★","\\bigstar"),Q(K,ne,fe,"∢","\\sphericalangle",!0),Q(K,ne,fe,"∁","\\complement",!0),Q(K,ne,fe,"ð","\\eth",!0),Q(ee,te,fe,"ð","ð"),Q(K,ne,fe,"╱","\\diagup"),Q(K,ne,fe,"╲","\\diagdown"),Q(K,ne,fe,"□","\\square"),Q(K,ne,fe,"□","\\Box"),Q(K,ne,fe,"◊","\\Diamond"),Q(K,ne,fe,"¥","\\yen",!0),Q(ee,ne,fe,"¥","\\yen",!0),Q(K,ne,fe,"✓","\\checkmark",!0),Q(ee,ne,fe,"✓","\\checkmark"),Q(K,ne,fe,"ℶ","\\beth",!0),Q(K,ne,fe,"ℸ","\\daleth",!0),Q(K,ne,fe,"ℷ","\\gimel",!0),Q(K,ne,fe,"ϝ","\\digamma",!0),Q(K,ne,fe,"ϰ","\\varkappa"),Q(K,ne,ue,"┌","\\@ulcorner",!0),Q(K,ne,se,"┐","\\@urcorner",!0),Q(K,ne,ue,"└","\\@llcorner",!0),Q(K,ne,se,"┘","\\@lrcorner",!0),Q(K,ne,he,"≦","\\leqq",!0),Q(K,ne,he,"⩽","\\leqslant",!0),Q(K,ne,he,"⪕","\\eqslantless",!0),Q(K,ne,he,"≲","\\lesssim",!0),Q(K,ne,he,"⪅","\\lessapprox",!0),Q(K,ne,he,"≊","\\approxeq",!0),Q(K,ne,ie,"⋖","\\lessdot"),Q(K,ne,he,"⋘","\\lll",!0),Q(K,ne,he,"≶","\\lessgtr",!0),Q(K,ne,he,"⋚","\\lesseqgtr",!0),Q(K,ne,he,"⪋","\\lesseqqgtr",!0),Q(K,ne,he,"≑","\\doteqdot"),Q(K,ne,he,"≓","\\risingdotseq",!0),Q(K,ne,he,"≒","\\fallingdotseq",!0),Q(K,ne,he,"∽","\\backsim",!0),Q(K,ne,he,"⋍","\\backsimeq",!0),Q(K,ne,he,"⫅","\\subseteqq",!0),Q(K,ne,he,"⋐","\\Subset",!0),Q(K,ne,he,"⊏","\\sqsubset",!0),Q(K,ne,he,"≼","\\preccurlyeq",!0),Q(K,ne,he,"⋞","\\curlyeqprec",!0),Q(K,ne,he,"≾","\\precsim",!0),Q(K,ne,he,"⪷","\\precapprox",!0),Q(K,ne,he,"⊲","\\vartriangleleft"),Q(K,ne,he,"⊴","\\trianglelefteq"),Q(K,ne,he,"⊨","\\vDash",!0),Q(K,ne,he,"⊪","\\Vvdash",!0),Q(K,ne,he,"⌣","\\smallsmile"),Q(K,ne,he,"⌢","\\smallfrown"),Q(K,ne,he,"≏","\\bumpeq",!0),Q(K,ne,he,"≎","\\Bumpeq",!0),Q(K,ne,he,"≧","\\geqq",!0),Q(K,ne,he,"⩾","\\geqslant",!0),Q(K,ne,he,"⪖","\\eqslantgtr",!0),Q(K,ne,he,"≳","\\gtrsim",!0),Q(K,ne,he,"⪆","\\gtrapprox",!0),Q(K,ne,ie,"⋗","\\gtrdot"),Q(K,ne,he,"⋙","\\ggg",!0),Q(K,ne,he,"≷","\\gtrless",!0),Q(K,ne,he,"⋛","\\gtreqless",!0),Q(K,ne,he,"⪌","\\gtreqqless",!0),Q(K,ne,he,"≖","\\eqcirc",!0),Q(K,ne,he,"≗","\\circeq",!0),Q(K,ne,he,"≜","\\triangleq",!0),Q(K,ne,he,"∼","\\thicksim"),Q(K,ne,he,"≈","\\thickapprox"),Q(K,ne,he,"⫆","\\supseteqq",!0),Q(K,ne,he,"⋑","\\Supset",!0),Q(K,ne,he,"⊐","\\sqsupset",!0),Q(K,ne,he,"≽","\\succcurlyeq",!0),Q(K,ne,he,"⋟","\\curlyeqsucc",!0),Q(K,ne,he,"≿","\\succsim",!0),Q(K,ne,he,"⪸","\\succapprox",!0),Q(K,ne,he,"⊳","\\vartriangleright"),Q(K,ne,he,"⊵","\\trianglerighteq"),Q(K,ne,he,"⊩","\\Vdash",!0),Q(K,ne,he,"∣","\\shortmid"),Q(K,ne,he,"∥","\\shortparallel"),Q(K,ne,he,"≬","\\between",!0),Q(K,ne,he,"⋔","\\pitchfork",!0),Q(K,ne,he,"∝","\\varpropto"),Q(K,ne,he,"◀","\\blacktriangleleft"),Q(K,ne,he,"∴","\\therefore",!0),Q(K,ne,he,"∍","\\backepsilon"),Q(K,ne,he,"▶","\\blacktriangleright"),Q(K,ne,he,"∵","\\because",!0),Q(K,ne,he,"⋘","\\llless"),Q(K,ne,he,"⋙","\\gggtr"),Q(K,ne,ie,"⊲","\\lhd"),Q(K,ne,ie,"⊳","\\rhd"),Q(K,ne,he,"≂","\\eqsim",!0),Q(K,te,he,"⋈","\\Join"),Q(K,ne,he,"≑","\\Doteq",!0),Q(K,ne,ie,"∔","\\dotplus",!0),Q(K,ne,ie,"∖","\\smallsetminus"),Q(K,ne,ie,"⋒","\\Cap",!0),Q(K,ne,ie,"⋓","\\Cup",!0),Q(K,ne,ie,"⩞","\\doublebarwedge",!0),Q(K,ne,ie,"⊟","\\boxminus",!0),Q(K,ne,ie,"⊞","\\boxplus",!0),Q(K,ne,ie,"⋇","\\divideontimes",!0),Q(K,ne,ie,"⋉","\\ltimes",!0),Q(K,ne,ie,"⋊","\\rtimes",!0),Q(K,ne,ie,"⋋","\\leftthreetimes",!0),Q(K,ne,ie,"⋌","\\rightthreetimes",!0),Q(K,ne,ie,"⋏","\\curlywedge",!0),Q(K,ne,ie,"⋎","\\curlyvee",!0),Q(K,ne,ie,"⊝","\\circleddash",!0),Q(K,ne,ie,"⊛","\\circledast",!0),Q(K,ne,ie,"⋅","\\centerdot"),Q(K,ne,ie,"⊺","\\intercal",!0),Q(K,ne,ie,"⋒","\\doublecap"),Q(K,ne,ie,"⋓","\\doublecup"),Q(K,ne,ie,"⊠","\\boxtimes",!0),Q(K,ne,he,"⇢","\\dashrightarrow",!0),Q(K,ne,he,"⇠","\\dashleftarrow",!0),Q(K,ne,he,"⇇","\\leftleftarrows",!0),Q(K,ne,he,"⇆","\\leftrightarrows",!0),Q(K,ne,he,"⇚","\\Lleftarrow",!0),Q(K,ne,he,"↞","\\twoheadleftarrow",!0),Q(K,ne,he,"↢","\\leftarrowtail",!0),Q(K,ne,he,"↫","\\looparrowleft",!0),Q(K,ne,he,"⇋","\\leftrightharpoons",!0),Q(K,ne,he,"↶","\\curvearrowleft",!0),Q(K,ne,he,"↺","\\circlearrowleft",!0),Q(K,ne,he,"↰","\\Lsh",!0),Q(K,ne,he,"⇈","\\upuparrows",!0),Q(K,ne,he,"↿","\\upharpoonleft",!0),Q(K,ne,he,"⇃","\\downharpoonleft",!0),Q(K,te,he,"⊶","\\origof",!0),Q(K,te,he,"⊷","\\imageof",!0),Q(K,ne,he,"⊸","\\multimap",!0),Q(K,ne,he,"↭","\\leftrightsquigarrow",!0),Q(K,ne,he,"⇉","\\rightrightarrows",!0),Q(K,ne,he,"⇄","\\rightleftarrows",!0),Q(K,ne,he,"↠","\\twoheadrightarrow",!0),Q(K,ne,he,"↣","\\rightarrowtail",!0),Q(K,ne,he,"↬","\\looparrowright",!0),Q(K,ne,he,"↷","\\curvearrowright",!0),Q(K,ne,he,"↻","\\circlearrowright",!0),Q(K,ne,he,"↱","\\Rsh",!0),Q(K,ne,he,"⇊","\\downdownarrows",!0),Q(K,ne,he,"↾","\\upharpoonright",!0),Q(K,ne,he,"⇂","\\downharpoonright",!0),Q(K,ne,he,"⇝","\\rightsquigarrow",!0),Q(K,ne,he,"⇝","\\leadsto"),Q(K,ne,he,"⇛","\\Rrightarrow",!0),Q(K,ne,he,"↾","\\restriction"),Q(K,te,fe,"‘","`"),Q(K,te,fe,"$","\\$"),Q(ee,te,fe,"$","\\$"),Q(ee,te,fe,"$","\\textdollar"),Q(K,te,fe,"%","\\%"),Q(ee,te,fe,"%","\\%"),Q(K,te,fe,"_","\\_"),Q(ee,te,fe,"_","\\_"),Q(ee,te,fe,"_","\\textunderscore"),Q(K,te,fe,"∠","\\angle",!0),Q(K,te,fe,"∞","\\infty",!0),Q(K,te,fe,"′","\\prime"),Q(K,te,fe,"△","\\triangle"),Q(K,te,fe,"Γ","\\Gamma",!0),Q(K,te,fe,"Δ","\\Delta",!0),Q(K,te,fe,"Θ","\\Theta",!0),Q(K,te,fe,"Λ","\\Lambda",!0),Q(K,te,fe,"Ξ","\\Xi",!0),Q(K,te,fe,"Π","\\Pi",!0),Q(K,te,fe,"Σ","\\Sigma",!0),Q(K,te,fe,"Υ","\\Upsilon",!0),Q(K,te,fe,"Φ","\\Phi",!0),Q(K,te,fe,"Ψ","\\Psi",!0),Q(K,te,fe,"Ω","\\Omega",!0),Q(K,te,fe,"A","Α"),Q(K,te,fe,"B","Β"),Q(K,te,fe,"E","Ε"),Q(K,te,fe,"Z","Ζ"),Q(K,te,fe,"H","Η"),Q(K,te,fe,"I","Ι"),Q(K,te,fe,"K","Κ"),Q(K,te,fe,"M","Μ"),Q(K,te,fe,"N","Ν"),Q(K,te,fe,"O","Ο"),Q(K,te,fe,"P","Ρ"),Q(K,te,fe,"T","Τ"),Q(K,te,fe,"X","Χ"),Q(K,te,fe,"¬","\\neg",!0),Q(K,te,fe,"¬","\\lnot"),Q(K,te,fe,"⊤","\\top"),Q(K,te,fe,"⊥","\\bot"),Q(K,te,fe,"∅","\\emptyset"),Q(K,ne,fe,"∅","\\varnothing"),Q(K,te,oe,"α","\\alpha",!0),Q(K,te,oe,"β","\\beta",!0),Q(K,te,oe,"γ","\\gamma",!0),Q(K,te,oe,"δ","\\delta",!0),Q(K,te,oe,"ϵ","\\epsilon",!0),Q(K,te,oe,"ζ","\\zeta",!0),Q(K,te,oe,"η","\\eta",!0),Q(K,te,oe,"θ","\\theta",!0),Q(K,te,oe,"ι","\\iota",!0),Q(K,te,oe,"κ","\\kappa",!0),Q(K,te,oe,"λ","\\lambda",!0),Q(K,te,oe,"μ","\\mu",!0),Q(K,te,oe,"ν","\\nu",!0),Q(K,te,oe,"ξ","\\xi",!0),Q(K,te,oe,"ο","\\omicron",!0),Q(K,te,oe,"π","\\pi",!0),Q(K,te,oe,"ρ","\\rho",!0),Q(K,te,oe,"σ","\\sigma",!0),Q(K,te,oe,"τ","\\tau",!0),Q(K,te,oe,"υ","\\upsilon",!0),Q(K,te,oe,"ϕ","\\phi",!0),Q(K,te,oe,"χ","\\chi",!0),Q(K,te,oe,"ψ","\\psi",!0),Q(K,te,oe,"ω","\\omega",!0),Q(K,te,oe,"ε","\\varepsilon",!0),Q(K,te,oe,"ϑ","\\vartheta",!0),Q(K,te,oe,"ϖ","\\varpi",!0),Q(K,te,oe,"ϱ","\\varrho",!0),Q(K,te,oe,"ς","\\varsigma",!0),Q(K,te,oe,"φ","\\varphi",!0),Q(K,te,ie,"∗","*",!0),Q(K,te,ie,"+","+"),Q(K,te,ie,"−","-",!0),Q(K,te,ie,"⋅","\\cdot",!0),Q(K,te,ie,"∘","\\circ"),Q(K,te,ie,"÷","\\div",!0),Q(K,te,ie,"±","\\pm",!0),Q(K,te,ie,"×","\\times",!0),Q(K,te,ie,"∩","\\cap",!0),Q(K,te,ie,"∪","\\cup",!0),Q(K,te,ie,"∖","\\setminus"),Q(K,te,ie,"∧","\\land"),Q(K,te,ie,"∨","\\lor"),Q(K,te,ie,"∧","\\wedge",!0),Q(K,te,ie,"∨","\\vee",!0),Q(K,te,fe,"√","\\surd"),Q(K,te,ue,"⟨","\\langle",!0),Q(K,te,ue,"∣","\\lvert"),Q(K,te,ue,"∥","\\lVert"),Q(K,te,se,"?","?"),Q(K,te,se,"!","!"),Q(K,te,se,"⟩","\\rangle",!0),Q(K,te,se,"∣","\\rvert"),Q(K,te,se,"∥","\\rVert"),Q(K,te,he,"=","="),Q(K,te,he,":",":"),Q(K,te,he,"≈","\\approx",!0),Q(K,te,he,"≅","\\cong",!0),Q(K,te,he,"≥","\\ge"),Q(K,te,he,"≥","\\geq",!0),Q(K,te,he,"←","\\gets"),Q(K,te,he,">","\\gt",!0),Q(K,te,he,"∈","\\in",!0),Q(K,te,he,"","\\@not"),Q(K,te,he,"⊂","\\subset",!0),Q(K,te,he,"⊃","\\supset",!0),Q(K,te,he,"⊆","\\subseteq",!0),Q(K,te,he,"⊇","\\supseteq",!0),Q(K,ne,he,"⊈","\\nsubseteq",!0),Q(K,ne,he,"⊉","\\nsupseteq",!0),Q(K,te,he,"⊨","\\models"),Q(K,te,he,"←","\\leftarrow",!0),Q(K,te,he,"≤","\\le"),Q(K,te,he,"≤","\\leq",!0),Q(K,te,he,"<","\\lt",!0),Q(K,te,he,"→","\\rightarrow",!0),Q(K,te,he,"→","\\to"),Q(K,ne,he,"≱","\\ngeq",!0),Q(K,ne,he,"≰","\\nleq",!0),Q(K,te,pe," ","\\ "),Q(K,te,pe," ","\\space"),Q(K,te,pe," ","\\nobreakspace"),Q(ee,te,pe," ","\\ "),Q(ee,te,pe," "," "),Q(ee,te,pe," ","\\space"),Q(ee,te,pe," ","\\nobreakspace"),Q(K,te,pe,null,"\\nobreak"),Q(K,te,pe,null,"\\allowbreak"),Q(K,te,ce,",",","),Q(K,te,ce,";",";"),Q(K,ne,ie,"⊼","\\barwedge",!0),Q(K,ne,ie,"⊻","\\veebar",!0),Q(K,te,ie,"⊙","\\odot",!0),Q(K,te,ie,"⊕","\\oplus",!0),Q(K,te,ie,"⊗","\\otimes",!0),Q(K,te,fe,"∂","\\partial",!0),Q(K,te,ie,"⊘","\\oslash",!0),Q(K,ne,ie,"⊚","\\circledcirc",!0),Q(K,ne,ie,"⊡","\\boxdot",!0),Q(K,te,ie,"△","\\bigtriangleup"),Q(K,te,ie,"▽","\\bigtriangledown"),Q(K,te,ie,"†","\\dagger"),Q(K,te,ie,"⋄","\\diamond"),Q(K,te,ie,"⋆","\\star"),Q(K,te,ie,"◃","\\triangleleft"),Q(K,te,ie,"▹","\\triangleright"),Q(K,te,ue,"{","\\{"),Q(ee,te,fe,"{","\\{"),Q(ee,te,fe,"{","\\textbraceleft"),Q(K,te,se,"}","\\}"),Q(ee,te,fe,"}","\\}"),Q(ee,te,fe,"}","\\textbraceright"),Q(K,te,ue,"{","\\lbrace"),Q(K,te,se,"}","\\rbrace"),Q(K,te,ue,"[","\\lbrack",!0),Q(ee,te,fe,"[","\\lbrack",!0),Q(K,te,se,"]","\\rbrack",!0),Q(ee,te,fe,"]","\\rbrack",!0),Q(K,te,ue,"(","\\lparen",!0),Q(K,te,se,")","\\rparen",!0),Q(ee,te,fe,"<","\\textless",!0),Q(ee,te,fe,">","\\textgreater",!0),Q(K,te,ue,"⌊","\\lfloor",!0),Q(K,te,se,"⌋","\\rfloor",!0),Q(K,te,ue,"⌈","\\lceil",!0),Q(K,te,se,"⌉","\\rceil",!0),Q(K,te,fe,"\\","\\backslash"),Q(K,te,fe,"∣","|"),Q(K,te,fe,"∣","\\vert"),Q(ee,te,fe,"|","\\textbar",!0),Q(K,te,fe,"∥","\\|"),Q(K,te,fe,"∥","\\Vert"),Q(ee,te,fe,"∥","\\textbardbl"),Q(ee,te,fe,"~","\\textasciitilde"),Q(ee,te,fe,"\\","\\textbackslash"),Q(ee,te,fe,"^","\\textasciicircum"),Q(K,te,he,"↑","\\uparrow",!0),Q(K,te,he,"⇑","\\Uparrow",!0),Q(K,te,he,"↓","\\downarrow",!0),Q(K,te,he,"⇓","\\Downarrow",!0),Q(K,te,he,"↕","\\updownarrow",!0),Q(K,te,he,"⇕","\\Updownarrow",!0),Q(K,te,le,"∐","\\coprod"),Q(K,te,le,"⋁","\\bigvee"),Q(K,te,le,"⋀","\\bigwedge"),Q(K,te,le,"⨄","\\biguplus"),Q(K,te,le,"⋂","\\bigcap"),Q(K,te,le,"⋃","\\bigcup"),Q(K,te,le,"∫","\\int"),Q(K,te,le,"∫","\\intop"),Q(K,te,le,"∬","\\iint"),Q(K,te,le,"∭","\\iiint"),Q(K,te,le,"∏","\\prod"),Q(K,te,le,"∑","\\sum"),Q(K,te,le,"⨂","\\bigotimes"),Q(K,te,le,"⨁","\\bigoplus"),Q(K,te,le,"⨀","\\bigodot"),Q(K,te,le,"∮","\\oint"),Q(K,te,le,"∯","\\oiint"),Q(K,te,le,"∰","\\oiiint"),Q(K,te,le,"⨆","\\bigsqcup"),Q(K,te,le,"∫","\\smallint"),Q(ee,te,ae,"…","\\textellipsis"),Q(K,te,ae,"…","\\mathellipsis"),Q(ee,te,ae,"…","\\ldots",!0),Q(K,te,ae,"…","\\ldots",!0),Q(K,te,ae,"⋯","\\@cdots",!0),Q(K,te,ae,"⋱","\\ddots",!0),Q(K,te,fe,"⋮","\\varvdots"),Q(K,te,re,"ˊ","\\acute"),Q(K,te,re,"ˋ","\\grave"),Q(K,te,re,"¨","\\ddot"),Q(K,te,re,"~","\\tilde"),Q(K,te,re,"ˉ","\\bar"),Q(K,te,re,"˘","\\breve"),Q(K,te,re,"ˇ","\\check"),Q(K,te,re,"^","\\hat"),Q(K,te,re,"⃗","\\vec"),Q(K,te,re,"˙","\\dot"),Q(K,te,re,"˚","\\mathring"),Q(K,te,oe,"","\\@imath"),Q(K,te,oe,"","\\@jmath"),Q(K,te,fe,"ı","ı"),Q(K,te,fe,"ȷ","ȷ"),Q(ee,te,fe,"ı","\\i",!0),Q(ee,te,fe,"ȷ","\\j",!0),Q(ee,te,fe,"ß","\\ss",!0),Q(ee,te,fe,"æ","\\ae",!0),Q(ee,te,fe,"œ","\\oe",!0),Q(ee,te,fe,"ø","\\o",!0),Q(ee,te,fe,"Æ","\\AE",!0),Q(ee,te,fe,"Œ","\\OE",!0),Q(ee,te,fe,"Ø","\\O",!0),Q(ee,te,re,"ˊ","\\'"),Q(ee,te,re,"ˋ","\\`"),Q(ee,te,re,"ˆ","\\^"),Q(ee,te,re,"˜","\\~"),Q(ee,te,re,"ˉ","\\="),Q(ee,te,re,"˘","\\u"),Q(ee,te,re,"˙","\\."),Q(ee,te,re,"¸","\\c"),Q(ee,te,re,"˚","\\r"),Q(ee,te,re,"ˇ","\\v"),Q(ee,te,re,"¨",'\\"'),Q(ee,te,re,"˝","\\H"),Q(ee,te,re,"◯","\\textcircled");var me={"--":!0,"---":!0,"``":!0,"''":!0};Q(ee,te,fe,"–","--",!0),Q(ee,te,fe,"–","\\textendash"),Q(ee,te,fe,"—","---",!0),Q(ee,te,fe,"—","\\textemdash"),Q(ee,te,fe,"‘","`",!0),Q(ee,te,fe,"‘","\\textquoteleft"),Q(ee,te,fe,"’","'",!0),Q(ee,te,fe,"’","\\textquoteright"),Q(ee,te,fe,"“","``",!0),Q(ee,te,fe,"“","\\textquotedblleft"),Q(ee,te,fe,"”","''",!0),Q(ee,te,fe,"”","\\textquotedblright"),Q(K,te,fe,"°","\\degree",!0),Q(ee,te,fe,"°","\\degree"),Q(ee,te,fe,"°","\\textdegree",!0),Q(K,te,fe,"£","\\pounds"),Q(K,te,fe,"£","\\mathsterling",!0),Q(ee,te,fe,"£","\\pounds"),Q(ee,te,fe,"£","\\textsterling",!0),Q(K,ne,fe,"✠","\\maltese"),Q(ee,ne,fe,"✠","\\maltese");for(var de='0123456789/@."',ge=0;ge<de.length;ge++){var ve=de.charAt(ge);Q(K,te,fe,ve,ve)}for(var ye='0123456789!@*()-=+";:?/.,',we=0;we<ye.length;we++){var be=ye.charAt(we);Q(ee,te,fe,be,be)}for(var xe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",Me=0;Me<xe.length;Me++){var Se=xe.charAt(Me);Q(K,te,oe,Se,Se),Q(ee,te,fe,Se,Se)}Q(K,ne,fe,"C","ℂ"),Q(ee,ne,fe,"C","ℂ"),Q(K,ne,fe,"H","ℍ"),Q(ee,ne,fe,"H","ℍ"),Q(K,ne,fe,"N","ℕ"),Q(ee,ne,fe,"N","ℕ"),Q(K,ne,fe,"P","ℙ"),Q(ee,ne,fe,"P","ℙ"),Q(K,ne,fe,"Q","ℚ"),Q(ee,ne,fe,"Q","ℚ"),Q(K,ne,fe,"R","ℝ"),Q(ee,ne,fe,"R","ℝ"),Q(K,ne,fe,"Z","ℤ"),Q(ee,ne,fe,"Z","ℤ"),Q(K,te,oe,"h","ℎ"),Q(ee,te,oe,"h","ℎ");for(var _e="",Ee=0;Ee<xe.length;Ee++){var Te=xe.charAt(Ee);Q(K,te,oe,Te,_e=String.fromCharCode(55349,56320+Ee)),Q(ee,te,fe,Te,_e),Q(K,te,oe,Te,_e=String.fromCharCode(55349,56372+Ee)),Q(ee,te,fe,Te,_e),Q(K,te,oe,Te,_e=String.fromCharCode(55349,56424+Ee)),Q(ee,te,fe,Te,_e),Q(K,te,oe,Te,_e=String.fromCharCode(55349,56580+Ee)),Q(ee,te,fe,Te,_e),Q(K,te,oe,Te,_e=String.fromCharCode(55349,56736+Ee)),Q(ee,te,fe,Te,_e),Q(K,te,oe,Te,_e=String.fromCharCode(55349,56788+Ee)),Q(ee,te,fe,Te,_e),Q(K,te,oe,Te,_e=String.fromCharCode(55349,56840+Ee)),Q(ee,te,fe,Te,_e),Q(K,te,oe,Te,_e=String.fromCharCode(55349,56944+Ee)),Q(ee,te,fe,Te,_e),Ee<26&&(Q(K,te,oe,Te,_e=String.fromCharCode(55349,56632+Ee)),Q(ee,te,fe,Te,_e),Q(K,te,oe,Te,_e=String.fromCharCode(55349,56476+Ee)),Q(ee,te,fe,Te,_e))}Q(K,te,oe,"k",_e=String.fromCharCode(55349,56668)),Q(ee,te,fe,"k",_e);for(var Ae=0;Ae<10;Ae++){var Le=Ae.toString();Q(K,te,oe,Le,_e=String.fromCharCode(55349,57294+Ae)),Q(ee,te,fe,Le,_e),Q(K,te,oe,Le,_e=String.fromCharCode(55349,57314+Ae)),Q(ee,te,fe,Le,_e),Q(K,te,oe,Le,_e=String.fromCharCode(55349,57324+Ae)),Q(ee,te,fe,Le,_e),Q(K,te,oe,Le,_e=String.fromCharCode(55349,57334+Ae)),Q(ee,te,fe,Le,_e)}for(var Ce="ÐÞþ",Re=0;Re<Ce.length;Re++){var Ne=Ce.charAt(Re);Q(K,te,oe,Ne,Ne),Q(ee,te,fe,Ne,Ne)}var Pe=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["","",""],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],Ie=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],Oe=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],ke=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],De=function(e,t){return t.size<2?e:Oe[e-1][t.size-1]},Ue=function(){function e(t){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=t.style,this.color=t.color,this.size=t.size||e.BASESIZE,this.textSize=t.textSize||this.size,this.phantom=!!t.phantom,this.font=t.font||"",this.fontFamily=t.fontFamily||"",this.fontWeight=t.fontWeight||"",this.fontShape=t.fontShape||"",this.sizeMultiplier=ke[this.size-1],this.maxSize=t.maxSize,this.minRuleThickness=t.minRuleThickness,this._fontMetrics=void 0}var t=e.prototype;return t.extend=function(t){var n={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return new e(n)},t.havingStyle=function(e){return this.style===e?this:this.extend({style:e,size:De(this.textSize,e)})},t.havingCrampedStyle=function(){return this.havingStyle(this.style.cramp())},t.havingSize=function(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:ke[e-1]})},t.havingBaseStyle=function(t){t=t||this.style.text();var n=De(e.BASESIZE,t);return this.size===n&&this.textSize===e.BASESIZE&&this.style===t?this:this.extend({style:t,size:n})},t.havingBaseSizing=function(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})},t.withColor=function(e){return this.extend({color:e})},t.withPhantom=function(){return this.extend({phantom:!0})},t.withFont=function(e){return this.extend({font:e})},t.withTextFontFamily=function(e){return this.extend({fontFamily:e,font:""})},t.withTextFontWeight=function(e){return this.extend({fontWeight:e,font:""})},t.withTextFontShape=function(e){return this.extend({fontShape:e,font:""})},t.sizingClasses=function(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]},t.baseSizingClasses=function(){return this.size!==e.BASESIZE?["sizing","reset-size"+this.size,"size"+e.BASESIZE]:[]},t.fontMetrics=function(){return this._fontMetrics||(this._fontMetrics=function(e){var t;if(!X[t=e>=5?0:e>=3?1:2]){var n=X[t]={cssEmPerMu:V.quad[t]/18};for(var r in V)V.hasOwnProperty(r)&&(n[r]=V[r][t])}return X[t]}(this.size)),this._fontMetrics},t.getColor=function(){return this.phantom?"transparent":this.color},e}();Ue.BASESIZE=6;var ze=Ue,Be={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:1.00375,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:1.00375},Fe={ex:!0,em:!0,mu:!0},qe=function(e){return"string"!=typeof e&&(e=e.unit),e in Be||e in Fe||"ex"===e},He=function(e,t){var n;if(e.unit in Be)n=Be[e.unit]/t.fontMetrics().ptPerEm/t.sizeMultiplier;else if("mu"===e.unit)n=t.fontMetrics().cssEmPerMu;else{var i;if(i=t.style.isTight()?t.havingStyle(t.style.text()):t,"ex"===e.unit)n=i.fontMetrics().xHeight;else{if("em"!==e.unit)throw new r("Invalid unit: '"+e.unit+"'");n=i.fontMetrics().quad}i!==t&&(n*=i.sizeMultiplier/t.sizeMultiplier)}return Math.min(e.number*n,t.maxSize)},Ge=function(e,t,n){return $[n][e]&&$[n][e].replace&&(e=$[n][e].replace),{value:e,metrics:j(e,t,n)}},Ve=function(e,t,n,r,i){var s,a=Ge(e,t,n),o=a.metrics;if(e=a.value,o){var l=o.italic;("text"===n||r&&"mathit"===r.font)&&(l=0),s=new z(e,o.height,o.depth,l,o.skew,o.width,i)}else"undefined"!=typeof console&&console.warn("No character metrics for '"+e+"' in style '"+t+"' and mode '"+n+"'"),s=new z(e,0,0,0,0,0,i);if(r){s.maxFontSize=r.sizeMultiplier,r.style.isTight()&&s.classes.push("mtight");var u=r.getColor();u&&(s.style.color=u)}return s},We=function(e,t){if(R(e.classes)!==R(t.classes)||e.skew!==t.skew||e.maxFontSize!==t.maxFontSize)return!1;if(1===e.classes.length){var n=e.classes[0];if("mbin"===n||"mord"===n)return!1}for(var r in e.style)if(e.style.hasOwnProperty(r)&&e.style[r]!==t.style[r])return!1;for(var i in t.style)if(t.style.hasOwnProperty(i)&&e.style[i]!==t.style[i])return!1;return!0},je=function(e){for(var t=0,n=0,r=0,i=0;i<e.children.length;i++){var s=e.children[i];s.height>t&&(t=s.height),s.depth>n&&(n=s.depth),s.maxFontSize>r&&(r=s.maxFontSize)}e.height=t,e.depth=n,e.maxFontSize=r},Xe=function(e,t,n,r){var i=new O(e,t,n,r);return je(i),i},Ze=function(e,t,n,r){return new O(e,t,n,r)},Ye=function(e){var t=new C(e);return je(t),t},Je=function(e,t,n){var r="";switch(e){case"amsrm":r="AMS";break;case"textrm":r="Main";break;case"textsf":r="SansSerif";break;case"texttt":r="Typewriter";break;default:r=e}return r+"-"+("textbf"===t&&"textit"===n?"BoldItalic":"textbf"===t?"Bold":"textit"===t?"Italic":"Regular")},$e={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},Qe={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},Ke={fontMap:$e,makeSymbol:Ve,mathsym:function(e,t,n,r){return void 0===r&&(r=[]),"boldsymbol"===n.font&&Ge(e,"Main-Bold",t).metrics?Ve(e,"Main-Bold",t,n,r.concat(["mathbf"])):"\\"===e||"main"===$[t][e].font?Ve(e,"Main-Regular",t,n,r):Ve(e,"AMS-Regular",t,n,r.concat(["amsrm"]))},makeSpan:Xe,makeSvgSpan:Ze,makeLineSpan:function(e,t,n){var r=Xe([e],[],t);return r.height=Math.max(n||t.fontMetrics().defaultRuleThickness,t.minRuleThickness),r.style.borderBottomWidth=r.height+"em",r.maxFontSize=1,r},makeAnchor:function(e,t,n,r){var i=new k(e,t,n,r);return je(i),i},makeFragment:Ye,wrapFragment:function(e,t){return e instanceof C?Xe([],[e],t):e},makeVList:function(e,t){for(var n=function(e){if("individualShift"===e.positionType){for(var t=e.children,n=[t[0]],r=-t[0].shift-t[0].elem.depth,i=r,s=1;s<t.length;s++){var a=-t[s].shift-i-t[s].elem.depth,o=a-(t[s-1].elem.height+t[s-1].elem.depth);i+=a,n.push({type:"kern",size:o}),n.push(t[s])}return{children:n,depth:r}}var l;if("top"===e.positionType){for(var u=e.positionData,c=0;c<e.children.length;c++){var h=e.children[c];u-="kern"===h.type?h.size:h.elem.height+h.elem.depth}l=u}else if("bottom"===e.positionType)l=-e.positionData;else{var p=e.children[0];if("elem"!==p.type)throw new Error('First child must have type "elem".');if("shift"===e.positionType)l=-p.elem.depth-e.positionData;else{if("firstBaseline"!==e.positionType)throw new Error("Invalid positionType "+e.positionType+".");l=-p.elem.depth}}return{children:e.children,depth:l}}(e),r=n.children,i=n.depth,s=0,a=0;a<r.length;a++){var o=r[a];if("elem"===o.type){var l=o.elem;s=Math.max(s,l.maxFontSize,l.height)}}s+=2;var u=Xe(["pstrut"],[]);u.style.height=s+"em";for(var c=[],h=i,p=i,f=i,m=0;m<r.length;m++){var d=r[m];if("kern"===d.type)f+=d.size;else{var g=d.elem,v=d.wrapperClasses||[],y=d.wrapperStyle||{},w=Xe(v,[u,g],void 0,y);w.style.top=-s-f-g.depth+"em",d.marginLeft&&(w.style.marginLeft=d.marginLeft),d.marginRight&&(w.style.marginRight=d.marginRight),c.push(w),f+=g.height+g.depth}h=Math.min(h,f),p=Math.max(p,f)}var b,x=Xe(["vlist"],c);if(x.style.height=p+"em",h<0){var M=Xe([],[]),S=Xe(["vlist"],[M]);S.style.height=-h+"em";var _=Xe(["vlist-s"],[new z("​")]);b=[Xe(["vlist-r"],[x,_]),Xe(["vlist-r"],[S])]}else b=[Xe(["vlist-r"],[x])];var E=Xe(["vlist-t"],b);return 2===b.length&&E.classes.push("vlist-t2"),E.height=p,E.depth=-h,E},makeOrd:function(e,t,n){var i=e.mode,s=e.text,a=["mord"],o="math"===i||"text"===i&&t.font,l=o?t.font:t.fontFamily;if(55349===s.charCodeAt(0)){var u=function(e,t){var n=1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536,i="math"===t?0:1;if(119808<=n&&n<120484){var s=Math.floor((n-119808)/26);return[Pe[s][2],Pe[s][i]]}if(120782<=n&&n<=120831){var a=Math.floor((n-120782)/10);return[Ie[a][2],Ie[a][i]]}if(120485===n||120486===n)return[Pe[0][2],Pe[0][i]];if(120486<n&&n<120782)return["",""];throw new r("Unsupported character: "+e)}(s,i),c=u[0],h=u[1];return Ve(s,c,i,t,a.concat(h))}if(l){var p,f;if("boldsymbol"===l){var m=function(e,t,n,r,i){return"textord"!==i&&Ge(e,"Math-BoldItalic",t).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}}(s,i,0,0,n);p=m.fontName,f=[m.fontClass]}else o?(p=$e[l].fontName,f=[l]):(p=Je(l,t.fontWeight,t.fontShape),f=[l,t.fontWeight,t.fontShape]);if(Ge(s,p,i).metrics)return Ve(s,p,i,t,a.concat(f));if(me.hasOwnProperty(s)&&"Typewriter"===p.substr(0,10)){for(var d=[],g=0;g<s.length;g++)d.push(Ve(s[g],p,i,t,a.concat(f)));return Ye(d)}}if("mathord"===n)return Ve(s,"Math-Italic",i,t,a.concat(["mathnormal"]));if("textord"===n){var v=$[i][s]&&$[i][s].font;if("ams"===v){var y=Je("amsrm",t.fontWeight,t.fontShape);return Ve(s,y,i,t,a.concat("amsrm",t.fontWeight,t.fontShape))}if("main"!==v&&v){var w=Je(v,t.fontWeight,t.fontShape);return Ve(s,w,i,t,a.concat(w,t.fontWeight,t.fontShape))}var b=Je("textrm",t.fontWeight,t.fontShape);return Ve(s,b,i,t,a.concat(t.fontWeight,t.fontShape))}throw new Error("unexpected type: "+n+" in makeOrd")},makeGlue:function(e,t){var n=Xe(["mspace"],[],t),r=He(e,t);return n.style.marginRight=r+"em",n},staticSvg:function(e,t){var n=Qe[e],r=n[0],i=n[1],s=n[2],a=new F(r),o=new B([a],{width:i+"em",height:s+"em",style:"width:"+i+"em",viewBox:"0 0 "+1e3*i+" "+1e3*s,preserveAspectRatio:"xMinYMin"}),l=Ze(["overlay"],[o],t);return l.height=s,l.style.height=s+"em",l.style.width=i+"em",l},svgData:Qe,tryCombineChars:function(e){for(var t=0;t<e.length-1;t++){var n=e[t],r=e[t+1];n instanceof z&&r instanceof z&&We(n,r)&&(n.text+=r.text,n.height=Math.max(n.height,r.height),n.depth=Math.max(n.depth,r.depth),n.italic=r.italic,e.splice(t+1,1),t--)}return e}},et={number:3,unit:"mu"},tt={number:4,unit:"mu"},nt={number:5,unit:"mu"},rt={mord:{mop:et,mbin:tt,mrel:nt,minner:et},mop:{mord:et,mop:et,mrel:nt,minner:et},mbin:{mord:tt,mop:tt,mopen:tt,minner:tt},mrel:{mord:nt,mop:nt,mopen:nt,minner:nt},mopen:{},mclose:{mop:et,mbin:tt,mrel:nt,minner:et},mpunct:{mord:et,mop:et,mrel:nt,mopen:et,mclose:et,mpunct:et,minner:et},minner:{mord:et,mop:et,mbin:tt,mrel:nt,mopen:et,mpunct:et,minner:et}},it={mord:{mop:et},mop:{mord:et,mop:et},mbin:{},mrel:{},mopen:{},mclose:{mop:et},mpunct:{},minner:{mop:et}},st={},at={},ot={};function lt(e){for(var t=e.type,n=e.names,r=e.props,i=e.handler,s=e.htmlBuilder,a=e.mathmlBuilder,o={type:t,numArgs:r.numArgs,argTypes:r.argTypes,allowedInArgument:!!r.allowedInArgument,allowedInText:!!r.allowedInText,allowedInMath:void 0===r.allowedInMath||r.allowedInMath,numOptionalArgs:r.numOptionalArgs||0,infix:!!r.infix,primitive:!!r.primitive,handler:i},l=0;l<n.length;++l)st[n[l]]=o;t&&(s&&(at[t]=s),a&&(ot[t]=a))}function ut(e){lt({type:e.type,names:[],props:{numArgs:0},handler:function(){throw new Error("Should never be called.")},htmlBuilder:e.htmlBuilder,mathmlBuilder:e.mathmlBuilder})}var ct=function(e){return"ordgroup"===e.type&&1===e.body.length?e.body[0]:e},ht=function(e){return"ordgroup"===e.type?e.body:[e]},pt=Ke.makeSpan,ft=["leftmost","mbin","mopen","mrel","mop","mpunct"],mt=["rightmost","mrel","mclose","mpunct"],dt={display:_.DISPLAY,text:_.TEXT,script:_.SCRIPT,scriptscript:_.SCRIPTSCRIPT},gt={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},vt=function(e,t,n,r){void 0===r&&(r=[null,null]);for(var i=[],s=0;s<e.length;s++){var a=St(e[s],t);if(a instanceof C){var o=a.children;i.push.apply(i,o)}else i.push(a)}if(Ke.tryCombineChars(i),!n)return i;var u=t;if(1===e.length){var c=e[0];"sizing"===c.type?u=t.havingSize(c.size):"styling"===c.type&&(u=t.havingStyle(dt[c.style]))}var h=pt([r[0]||"leftmost"],[],t),p=pt([r[1]||"rightmost"],[],t),f="root"===n;return yt(i,(function(e,t){var n=t.classes[0],r=e.classes[0];"mbin"===n&&l(mt,r)?t.classes[0]="mord":"mbin"===r&&l(ft,n)&&(e.classes[0]="mord")}),{node:h},p,f),yt(i,(function(e,t){var n=xt(t),r=xt(e),i=n&&r?e.hasClass("mtight")?it[n][r]:rt[n][r]:null;if(i)return Ke.makeGlue(i,u)}),{node:h},p,f),i},yt=function e(t,n,r,i,s){i&&t.push(i);for(var a=0;a<t.length;a++){var o=t[a],l=wt(o);if(l)e(l.children,n,r,null,s);else{var u=!o.hasClass("mspace");if(u){var c=n(o,r.node);c&&(r.insertAfter?r.insertAfter(c):(t.unshift(c),a++))}u?r.node=o:s&&o.hasClass("newline")&&(r.node=pt(["leftmost"])),r.insertAfter=function(e){return function(n){t.splice(e+1,0,n),a++}}(a)}}i&&t.pop()},wt=function(e){return e instanceof C||e instanceof k||e instanceof O&&e.hasClass("enclosing")?e:null},bt=function e(t,n){var r=wt(t);if(r){var i=r.children;if(i.length){if("right"===n)return e(i[i.length-1],"right");if("left"===n)return e(i[0],"left")}}return t},xt=function(e,t){return e?(t&&(e=bt(e,t)),gt[e.classes[0]]||null):null},Mt=function(e,t){var n=["nulldelimiter"].concat(e.baseSizingClasses());return pt(t.concat(n))},St=function(e,t,n){if(!e)return pt();if(at[e.type]){var i=at[e.type](e,t);if(n&&t.size!==n.size){i=pt(t.sizingClasses(n),[i],t);var s=t.sizeMultiplier/n.sizeMultiplier;i.height*=s,i.depth*=s}return i}throw new r("Got group of unknown type: '"+e.type+"'")};function _t(e,t){var n=pt(["base"],e,t),r=pt(["strut"]);return r.style.height=n.height+n.depth+"em",r.style.verticalAlign=-n.depth+"em",n.children.unshift(r),n}function Et(e,t){var n=null;1===e.length&&"tag"===e[0].type&&(n=e[0].tag,e=e[0].body);var r,i=vt(e,t,"root");2===i.length&&i[1].hasClass("tag")&&(r=i.pop());for(var s,a=[],o=[],l=0;l<i.length;l++)if(o.push(i[l]),i[l].hasClass("mbin")||i[l].hasClass("mrel")||i[l].hasClass("allowbreak")){for(var u=!1;l<i.length-1&&i[l+1].hasClass("mspace")&&!i[l+1].hasClass("newline");)l++,o.push(i[l]),i[l].hasClass("nobreak")&&(u=!0);u||(a.push(_t(o,t)),o=[])}else i[l].hasClass("newline")&&(o.pop(),o.length>0&&(a.push(_t(o,t)),o=[]),a.push(i[l]));o.length>0&&a.push(_t(o,t)),n?((s=_t(vt(n,t,!0))).classes=["tag"],a.push(s)):r&&a.push(r);var c=pt(["katex-html"],a);if(c.setAttribute("aria-hidden","true"),s){var h=s.children[0];h.style.height=c.height+c.depth+"em",h.style.verticalAlign=-c.depth+"em"}return c}function Tt(e){return new C(e)}var At=function(){function e(e,t,n){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=t||[],this.classes=n||[]}var t=e.prototype;return t.setAttribute=function(e,t){this.attributes[e]=t},t.getAttribute=function(e){return this.attributes[e]},t.toNode=function(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);this.classes.length>0&&(e.className=R(this.classes));for(var n=0;n<this.children.length;n++)e.appendChild(this.children[n].toNode());return e},t.toMarkup=function(){var e="<"+this.type;for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="',e+=c(this.attributes[t]),e+='"');this.classes.length>0&&(e+=' class ="'+c(R(this.classes))+'"'),e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+"</"+this.type+">"},t.toText=function(){return this.children.map((function(e){return e.toText()})).join("")},e}(),Lt=function(){function e(e){this.text=void 0,this.text=e}var t=e.prototype;return t.toNode=function(){return document.createTextNode(this.text)},t.toMarkup=function(){return c(this.toText())},t.toText=function(){return this.text},e}(),Ct={MathNode:At,TextNode:Lt,SpaceNode:function(){function e(e){this.width=void 0,this.character=void 0,this.width=e,this.character=e>=.05555&&e<=.05556?" ":e>=.1666&&e<=.1667?" ":e>=.2222&&e<=.2223?" ":e>=.2777&&e<=.2778?"  ":e>=-.05556&&e<=-.05555?" ⁣":e>=-.1667&&e<=-.1666?" ⁣":e>=-.2223&&e<=-.2222?" ⁣":e>=-.2778&&e<=-.2777?" ⁣":null}var t=e.prototype;return t.toNode=function(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",this.width+"em"),e},t.toMarkup=function(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+this.width+'em"/>'},t.toText=function(){return this.character?this.character:" "},e}(),newDocumentFragment:Tt},Rt=function(e,t,n){return!$[t][e]||!$[t][e].replace||55349===e.charCodeAt(0)||me.hasOwnProperty(e)&&n&&(n.fontFamily&&"tt"===n.fontFamily.substr(4,2)||n.font&&"tt"===n.font.substr(4,2))||(e=$[t][e].replace),new Ct.TextNode(e)},Nt=function(e){return 1===e.length?e[0]:new Ct.MathNode("mrow",e)},Pt=function(e,t){if("texttt"===t.fontFamily)return"monospace";if("textsf"===t.fontFamily)return"textit"===t.fontShape&&"textbf"===t.fontWeight?"sans-serif-bold-italic":"textit"===t.fontShape?"sans-serif-italic":"textbf"===t.fontWeight?"bold-sans-serif":"sans-serif";if("textit"===t.fontShape&&"textbf"===t.fontWeight)return"bold-italic";if("textit"===t.fontShape)return"italic";if("textbf"===t.fontWeight)return"bold";var n=t.font;if(!n||"mathnormal"===n)return null;var r=e.mode;if("mathit"===n)return"italic";if("boldsymbol"===n)return"textord"===e.type?"bold":"bold-italic";if("mathbf"===n)return"bold";if("mathbb"===n)return"double-struck";if("mathfrak"===n)return"fraktur";if("mathscr"===n||"mathcal"===n)return"script";if("mathsf"===n)return"sans-serif";if("mathtt"===n)return"monospace";var i=e.text;return l(["\\imath","\\jmath"],i)?null:($[r][i]&&$[r][i].replace&&(i=$[r][i].replace),j(i,Ke.fontMap[n].fontName,r)?Ke.fontMap[n].variant:null)},It=function(e,t,n){if(1===e.length){var r=kt(e[0],t);return n&&r instanceof At&&"mo"===r.type&&(r.setAttribute("lspace","0em"),r.setAttribute("rspace","0em")),[r]}for(var i,s=[],a=0;a<e.length;a++){var o=kt(e[a],t);if(o instanceof At&&i instanceof At){if("mtext"===o.type&&"mtext"===i.type&&o.getAttribute("mathvariant")===i.getAttribute("mathvariant")){var l;(l=i.children).push.apply(l,o.children);continue}if("mn"===o.type&&"mn"===i.type){var u;(u=i.children).push.apply(u,o.children);continue}if("mi"===o.type&&1===o.children.length&&"mn"===i.type){var c=o.children[0];if(c instanceof Lt&&"."===c.text){var h;(h=i.children).push.apply(h,o.children);continue}}else if("mi"===i.type&&1===i.children.length){var p=i.children[0];if(p instanceof Lt&&"̸"===p.text&&("mo"===o.type||"mi"===o.type||"mn"===o.type)){var f=o.children[0];f instanceof Lt&&f.text.length>0&&(f.text=f.text.slice(0,1)+"̸"+f.text.slice(1),s.pop())}}}s.push(o),i=o}return s},Ot=function(e,t,n){return Nt(It(e,t,n))},kt=function(e,t){if(!e)return new Ct.MathNode("mrow");if(ot[e.type])return ot[e.type](e,t);throw new r("Got group of unknown type: '"+e.type+"'")};function Dt(e,t,n,r,i){var s,a=It(e,n);s=1===a.length&&a[0]instanceof At&&l(["mrow","mtable"],a[0].type)?a[0]:new Ct.MathNode("mrow",a);var o=new Ct.MathNode("annotation",[new Ct.TextNode(t)]);o.setAttribute("encoding","application/x-tex");var u=new Ct.MathNode("semantics",[s,o]),c=new Ct.MathNode("math",[u]);return c.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),r&&c.setAttribute("display","block"),Ke.makeSpan([i?"katex":"katex-mathml"],[c])}var Ut=function(e){return new ze({style:e.displayMode?_.DISPLAY:_.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},zt=function(e,t){if(t.displayMode){var n=["katex-display"];t.leqno&&n.push("leqno"),t.fleqn&&n.push("fleqn"),e=Ke.makeSpan(n,[e])}return e},Bt={widehat:"^",widecheck:"ˇ",widetilde:"~",utilde:"~",overleftarrow:"←",underleftarrow:"←",xleftarrow:"←",overrightarrow:"→",underrightarrow:"→",xrightarrow:"→",underbrace:"⏟",overbrace:"⏞",overgroup:"⏠",undergroup:"⏡",overleftrightarrow:"↔",underleftrightarrow:"↔",xleftrightarrow:"↔",Overrightarrow:"⇒",xRightarrow:"⇒",overleftharpoon:"↼",xleftharpoonup:"↼",overrightharpoon:"⇀",xrightharpoonup:"⇀",xLeftarrow:"⇐",xLeftrightarrow:"⇔",xhookleftarrow:"↩",xhookrightarrow:"↪",xmapsto:"↦",xrightharpoondown:"⇁",xleftharpoondown:"↽",xrightleftharpoons:"⇌",xleftrightharpoons:"⇋",xtwoheadleftarrow:"↞",xtwoheadrightarrow:"↠",xlongequal:"=",xtofrom:"⇄",xrightleftarrows:"⇄",xrightequilibrium:"⇌",xleftequilibrium:"⇋","\\cdrightarrow":"→","\\cdleftarrow":"←","\\cdlongequal":"="},Ft={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},qt=function(e){var t=new Ct.MathNode("mo",[new Ct.TextNode(Bt[e.replace(/^\\/,"")])]);return t.setAttribute("stretchy","true"),t},Ht=function(e,t){var n=function(){var n=4e5,r=e.label.substr(1);if(l(["widehat","widecheck","widetilde","utilde"],r)){var i,s,a,o="ordgroup"===(m=e.base).type?m.body.length:1;if(o>5)"widehat"===r||"widecheck"===r?(i=420,n=2364,a=.42,s=r+"4"):(i=312,n=2340,a=.34,s="tilde4");else{var u=[1,1,2,2,3,3][o];"widehat"===r||"widecheck"===r?(n=[0,1062,2364,2364,2364][u],i=[0,239,300,360,420][u],a=[0,.24,.3,.3,.36,.42][u],s=r+u):(n=[0,600,1033,2339,2340][u],i=[0,260,286,306,312][u],a=[0,.26,.286,.3,.306,.34][u],s="tilde"+u)}var c=new F(s),h=new B([c],{width:"100%",height:a+"em",viewBox:"0 0 "+n+" "+i,preserveAspectRatio:"none"});return{span:Ke.makeSvgSpan([],[h],t),minWidth:0,height:a}}var p,f,m,d=[],g=Ft[r],v=g[0],y=g[1],w=g[2],b=w/1e3,x=v.length;if(1===x)p=["hide-tail"],f=[g[3]];else if(2===x)p=["halfarrow-left","halfarrow-right"],f=["xMinYMin","xMaxYMin"];else{if(3!==x)throw new Error("Correct katexImagesData or update code here to support\n                    "+x+" children.");p=["brace-left","brace-center","brace-right"],f=["xMinYMin","xMidYMin","xMaxYMin"]}for(var M=0;M<x;M++){var S=new F(v[M]),_=new B([S],{width:"400em",height:b+"em",viewBox:"0 0 "+n+" "+w,preserveAspectRatio:f[M]+" slice"}),E=Ke.makeSvgSpan([p[M]],[_],t);if(1===x)return{span:E,minWidth:y,height:b};E.style.height=b+"em",d.push(E)}return{span:Ke.makeSpan(["stretchy"],d,t),minWidth:y,height:b}}(),r=n.span,i=n.minWidth,s=n.height;return r.height=s,r.style.height=s+"em",i>0&&(r.style.minWidth=i+"em"),r};function Gt(e,t){if(!e||e.type!==t)throw new Error("Expected node of type "+t+", but got "+(e?"node of type "+e.type:String(e)));return e}function Vt(e){var t=Wt(e);if(!t)throw new Error("Expected node of symbol group type, but got "+(e?"node of type "+e.type:String(e)));return t}function Wt(e){return e&&("atom"===e.type||Y.hasOwnProperty(e.type))?e:null}var jt=function(e,t){var n,r,i;e&&"supsub"===e.type?(n=(r=Gt(e.base,"accent")).base,e.base=n,i=function(e){if(e instanceof O)return e;throw new Error("Expected span<HtmlDomNode> but got "+String(e)+".")}(St(e,t)),e.base=r):n=(r=Gt(e,"accent")).base;var s=St(n,t.havingCrampedStyle()),a=0;if(r.isShifty&&f(n)){var o=p(n);a=H(St(o,t.havingCrampedStyle())).skew}var l,u="\\c"===r.label,c=u?s.height+s.depth:Math.min(s.height,t.fontMetrics().xHeight);if(r.isStretchy)l=Ht(r,t),l=Ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"elem",elem:l,wrapperClasses:["svg-align"],wrapperStyle:a>0?{width:"calc(100% - "+2*a+"em)",marginLeft:2*a+"em"}:void 0}]},t);else{var h,m;"\\vec"===r.label?(h=Ke.staticSvg("vec",t),m=Ke.svgData.vec[1]):((h=H(h=Ke.makeOrd({mode:r.mode,text:r.label},t,"textord"))).italic=0,m=h.width,u&&(c+=h.depth)),l=Ke.makeSpan(["accent-body"],[h]);var d="\\textcircled"===r.label;d&&(l.classes.push("accent-full"),c=s.height);var g=a;d||(g-=m/2),l.style.left=g+"em","\\textcircled"===r.label&&(l.style.top=".2em"),l=Ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:-c},{type:"elem",elem:l}]},t)}var v=Ke.makeSpan(["mord","accent"],[l],t);return i?(i.children[0]=v,i.height=Math.max(v.height,i.height),i.classes[0]="mord",i):v},Xt=function(e,t){var n=e.isStretchy?qt(e.label):new Ct.MathNode("mo",[Rt(e.label,e.mode)]),r=new Ct.MathNode("mover",[kt(e.base,t),n]);return r.setAttribute("accent","true"),r},Zt=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map((function(e){return"\\"+e})).join("|"));lt({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:function(e,t){var n=ct(t[0]),r=!Zt.test(e.funcName),i=!r||"\\widehat"===e.funcName||"\\widetilde"===e.funcName||"\\widecheck"===e.funcName;return{type:"accent",mode:e.parser.mode,label:e.funcName,isStretchy:r,isShifty:i,base:n}},htmlBuilder:jt,mathmlBuilder:Xt}),lt({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:function(e,t){var n=t[0],r=e.parser.mode;return"math"===r&&(e.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+e.funcName+" works only in text mode"),r="text"),{type:"accent",mode:r,label:e.funcName,isStretchy:!1,isShifty:!0,base:n}},htmlBuilder:jt,mathmlBuilder:Xt}),lt({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:function(e,t){var n=e.parser,r=e.funcName,i=t[0];return{type:"accentUnder",mode:n.mode,label:r,base:i}},htmlBuilder:function(e,t){var n=St(e.base,t),r=Ht(e,t),i="\\utilde"===e.label?.12:0,s=Ke.makeVList({positionType:"top",positionData:n.height,children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:i},{type:"elem",elem:n}]},t);return Ke.makeSpan(["mord","accentunder"],[s],t)},mathmlBuilder:function(e,t){var n=qt(e.label),r=new Ct.MathNode("munder",[kt(e.base,t),n]);return r.setAttribute("accentunder","true"),r}});var Yt=function(e){var t=new Ct.MathNode("mpadded",e?[e]:[]);return t.setAttribute("width","+0.6em"),t.setAttribute("lspace","0.3em"),t};lt({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler:function(e,t,n){var r=e.parser,i=e.funcName;return{type:"xArrow",mode:r.mode,label:i,body:t[0],below:n[0]}},htmlBuilder:function(e,t){var n,r=t.style,i=t.havingStyle(r.sup()),s=Ke.wrapFragment(St(e.body,i,t),t),a="\\x"===e.label.slice(0,2)?"x":"cd";s.classes.push(a+"-arrow-pad"),e.below&&(i=t.havingStyle(r.sub()),(n=Ke.wrapFragment(St(e.below,i,t),t)).classes.push(a+"-arrow-pad"));var o,l=Ht(e,t),u=-t.fontMetrics().axisHeight+.5*l.height,c=-t.fontMetrics().axisHeight-.5*l.height-.111;if((s.depth>.25||"\\xleftequilibrium"===e.label)&&(c-=s.depth),n){var h=-t.fontMetrics().axisHeight+n.height+.5*l.height+.111;o=Ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:c},{type:"elem",elem:l,shift:u},{type:"elem",elem:n,shift:h}]},t)}else o=Ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:c},{type:"elem",elem:l,shift:u}]},t);return o.children[0].children[0].children[1].classes.push("svg-align"),Ke.makeSpan(["mrel","x-arrow"],[o],t)},mathmlBuilder:function(e,t){var n,r=qt(e.label);if(r.setAttribute("minsize","x"===e.label.charAt(0)?"1.75em":"3.0em"),e.body){var i=Yt(kt(e.body,t));if(e.below){var s=Yt(kt(e.below,t));n=new Ct.MathNode("munderover",[r,s,i])}else n=new Ct.MathNode("mover",[r,i])}else if(e.below){var a=Yt(kt(e.below,t));n=new Ct.MathNode("munder",[r,a])}else n=Yt(),n=new Ct.MathNode("mover",[r,n]);return n}});var Jt={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},$t=function(e){return"textord"===e.type&&"@"===e.text};function Qt(e,t,n){var r=Jt[e];switch(r){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return n.callFunction(r,[t[0]],[t[1]]);case"\\uparrow":case"\\downarrow":var i={type:"atom",text:r,mode:"math",family:"rel"},s={type:"ordgroup",mode:"math",body:[n.callFunction("\\\\cdleft",[t[0]],[]),n.callFunction("\\Big",[i],[]),n.callFunction("\\\\cdright",[t[1]],[])]};return n.callFunction("\\\\cdparent",[s],[]);case"\\\\cdlongequal":return n.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":return n.callFunction("\\Big",[{type:"textord",text:"\\Vert",mode:"math"}],[]);default:return{type:"textord",text:" ",mode:"math"}}}lt({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler:function(e,t){var n=e.parser,r=e.funcName;return{type:"cdlabel",mode:n.mode,side:r.slice(4),label:t[0]}},htmlBuilder:function(e,t){var n=t.havingStyle(t.style.sup()),r=Ke.wrapFragment(St(e.label,n,t),t);return r.classes.push("cd-label-"+e.side),r.style.bottom=.8-r.depth+"em",r.height=0,r.depth=0,r},mathmlBuilder:function(e,t){var n=new Ct.MathNode("mrow",[kt(e.label,t)]);return(n=new Ct.MathNode("mpadded",[n])).setAttribute("width","0"),"left"===e.side&&n.setAttribute("lspace","-1width"),n.setAttribute("voffset","0.7em"),(n=new Ct.MathNode("mstyle",[n])).setAttribute("displaystyle","false"),n.setAttribute("scriptlevel","1"),n}}),lt({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler:function(e,t){return{type:"cdlabelparent",mode:e.parser.mode,fragment:t[0]}},htmlBuilder:function(e,t){var n=Ke.wrapFragment(St(e.fragment,t),t);return n.classes.push("cd-vert-arrow"),n},mathmlBuilder:function(e,t){return new Ct.MathNode("mrow",[kt(e.fragment,t)])}}),lt({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler:function(e,t){for(var n=e.parser,i=Gt(t[0],"ordgroup").body,s="",a=0;a<i.length;a++)s+=Gt(i[a],"textord").text;var o,l=parseInt(s);if(isNaN(l))throw new r("\\@char has non-numeric argument "+s);if(l<0||l>=1114111)throw new r("\\@char with invalid code point "+s);return l<=65535?o=String.fromCharCode(l):(l-=65536,o=String.fromCharCode(55296+(l>>10),56320+(1023&l))),{type:"textord",mode:n.mode,text:o}}});var Kt=function(e,t){var n=vt(e.body,t.withColor(e.color),!1);return Ke.makeFragment(n)},en=function(e,t){var n=It(e.body,t.withColor(e.color)),r=new Ct.MathNode("mstyle",n);return r.setAttribute("mathcolor",e.color),r};lt({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler:function(e,t){var n=e.parser,r=Gt(t[0],"color-token").color,i=t[1];return{type:"color",mode:n.mode,color:r,body:ht(i)}},htmlBuilder:Kt,mathmlBuilder:en}),lt({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler:function(e,t){var n=e.parser,r=e.breakOnTokenText,i=Gt(t[0],"color-token").color;n.gullet.macros.set("\\current@color",i);var s=n.parseExpression(!0,r);return{type:"color",mode:n.mode,color:i,body:s}},htmlBuilder:Kt,mathmlBuilder:en}),lt({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:1,argTypes:["size"],allowedInText:!0},handler:function(e,t,n){var r=e.parser,i=n[0],s=!r.settings.displayMode||!r.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:r.mode,newLine:s,size:i&&Gt(i,"size").value}},htmlBuilder:function(e,t){var n=Ke.makeSpan(["mspace"],[],t);return e.newLine&&(n.classes.push("newline"),e.size&&(n.style.marginTop=He(e.size,t)+"em")),n},mathmlBuilder:function(e,t){var n=new Ct.MathNode("mspace");return e.newLine&&(n.setAttribute("linebreak","newline"),e.size&&n.setAttribute("height",He(e.size,t)+"em")),n}});var tn={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},nn=function(e){var t=e.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(t))throw new r("Expected a control sequence",e);return t},rn=function(e,t,n,r){var i=e.gullet.macros.get(n.text);null==i&&(n.noexpand=!0,i={tokens:[n],numArgs:0,unexpandable:!e.gullet.isExpandable(n.text)}),e.gullet.macros.set(t,i,r)};lt({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler:function(e){var t=e.parser,n=e.funcName;t.consumeSpaces();var i=t.fetch();if(tn[i.text])return"\\global"!==n&&"\\\\globallong"!==n||(i.text=tn[i.text]),Gt(t.parseFunction(),"internal");throw new r("Invalid token after macro prefix",i)}}),lt({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler:function(e){var t=e.parser,n=e.funcName,i=t.gullet.popToken(),s=i.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(s))throw new r("Expected a control sequence",i);for(var a,o=0,l=[[]];"{"!==t.gullet.future().text;)if("#"===(i=t.gullet.popToken()).text){if("{"===t.gullet.future().text){a=t.gullet.future(),l[o].push("{");break}if(i=t.gullet.popToken(),!/^[1-9]$/.test(i.text))throw new r('Invalid argument number "'+i.text+'"');if(parseInt(i.text)!==o+1)throw new r('Argument number "'+i.text+'" out of order');o++,l.push([])}else{if("EOF"===i.text)throw new r("Expected a macro definition");l[o].push(i.text)}var u=t.gullet.consumeArg().tokens;return a&&u.unshift(a),"\\edef"!==n&&"\\xdef"!==n||(u=t.gullet.expandTokens(u)).reverse(),t.gullet.macros.set(s,{tokens:u,numArgs:o,delimiters:l},n===tn[n]),{type:"internal",mode:t.mode}}}),lt({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler:function(e){var t=e.parser,n=e.funcName,r=nn(t.gullet.popToken());t.gullet.consumeSpaces();var i=function(e){var t=e.gullet.popToken();return"="===t.text&&" "===(t=e.gullet.popToken()).text&&(t=e.gullet.popToken()),t}(t);return rn(t,r,i,"\\\\globallet"===n),{type:"internal",mode:t.mode}}}),lt({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler:function(e){var t=e.parser,n=e.funcName,r=nn(t.gullet.popToken()),i=t.gullet.popToken(),s=t.gullet.popToken();return rn(t,r,s,"\\\\globalfuture"===n),t.gullet.pushToken(s),t.gullet.pushToken(i),{type:"internal",mode:t.mode}}});var sn=function(e,t,n){var r=j($.math[e]&&$.math[e].replace||e,t,n);if(!r)throw new Error("Unsupported symbol "+e+" and font size "+t+".");return r},an=function(e,t,n,r){var i=n.havingBaseStyle(t),s=Ke.makeSpan(r.concat(i.sizingClasses(n)),[e],n),a=i.sizeMultiplier/n.sizeMultiplier;return s.height*=a,s.depth*=a,s.maxFontSize=i.sizeMultiplier,s},on=function(e,t,n){var r=t.havingBaseStyle(n),i=(1-t.sizeMultiplier/r.sizeMultiplier)*t.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=i+"em",e.height-=i,e.depth+=i},ln=function(e,t,n,r,i,s){var a=function(e,t,n,r){return Ke.makeSymbol(e,"Size"+t+"-Regular",n,r)}(e,t,i,r),o=an(Ke.makeSpan(["delimsizing","size"+t],[a],r),_.TEXT,r,s);return n&&on(o,r,_.TEXT),o},un=function(e,t,n){return{type:"elem",elem:Ke.makeSpan(["delimsizinginner","Size1-Regular"===t?"delim-size1":"delim-size4"],[Ke.makeSpan([],[Ke.makeSymbol(e,t,n)])])}},cn=function(e,t,n){var r=G["Size4-Regular"][e.charCodeAt(0)]?G["Size4-Regular"][e.charCodeAt(0)][4].toFixed(3):G["Size1-Regular"][e.charCodeAt(0)][4].toFixed(3),i=new F("inner",function(e,t){switch(e){case"⎜":return"M291 0 H417 V"+t+" H291z M291 0 H417 V"+t+" H291z";case"∣":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145z";case"∥":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145zM367 0 H410 V"+t+" H367z M367 0 H410 V"+t+" H367z";case"⎟":return"M457 0 H583 V"+t+" H457z M457 0 H583 V"+t+" H457z";case"⎢":return"M319 0 H403 V"+t+" H319z M319 0 H403 V"+t+" H319z";case"⎥":return"M263 0 H347 V"+t+" H263z M263 0 H347 V"+t+" H263z";case"⎪":return"M384 0 H504 V"+t+" H384z M384 0 H504 V"+t+" H384z";case"⏐":return"M312 0 H355 V"+t+" H312z M312 0 H355 V"+t+" H312z";case"‖":return"M257 0 H300 V"+t+" H257z M257 0 H300 V"+t+" H257zM478 0 H521 V"+t+" H478z M478 0 H521 V"+t+" H478z";default:return""}}(e,Math.round(1e3*t))),s=new B([i],{width:r+"em",height:t+"em",style:"width:"+r+"em",viewBox:"0 0 "+1e3*r+" "+Math.round(1e3*t),preserveAspectRatio:"xMinYMin"}),a=Ke.makeSvgSpan([],[s],n);return a.height=t,a.style.height=t+"em",a.style.width=r+"em",{type:"elem",elem:a}},hn={type:"kern",size:-.008},pn=["|","\\lvert","\\rvert","\\vert"],fn=["\\|","\\lVert","\\rVert","\\Vert"],mn=function(e,t,n,r,i,s){var a,o,u,c;a=u=c=e,o=null;var h="Size1-Regular";"\\uparrow"===e?u=c="⏐":"\\Uparrow"===e?u=c="‖":"\\downarrow"===e?a=u="⏐":"\\Downarrow"===e?a=u="‖":"\\updownarrow"===e?(a="\\uparrow",u="⏐",c="\\downarrow"):"\\Updownarrow"===e?(a="\\Uparrow",u="‖",c="\\Downarrow"):l(pn,e)?u="∣":l(fn,e)?u="∥":"["===e||"\\lbrack"===e?(a="⎡",u="⎢",c="⎣",h="Size4-Regular"):"]"===e||"\\rbrack"===e?(a="⎤",u="⎥",c="⎦",h="Size4-Regular"):"\\lfloor"===e||"⌊"===e?(u=a="⎢",c="⎣",h="Size4-Regular"):"\\lceil"===e||"⌈"===e?(a="⎡",u=c="⎢",h="Size4-Regular"):"\\rfloor"===e||"⌋"===e?(u=a="⎥",c="⎦",h="Size4-Regular"):"\\rceil"===e||"⌉"===e?(a="⎤",u=c="⎥",h="Size4-Regular"):"("===e||"\\lparen"===e?(a="⎛",u="⎜",c="⎝",h="Size4-Regular"):")"===e||"\\rparen"===e?(a="⎞",u="⎟",c="⎠",h="Size4-Regular"):"\\{"===e||"\\lbrace"===e?(a="⎧",o="⎨",c="⎩",u="⎪",h="Size4-Regular"):"\\}"===e||"\\rbrace"===e?(a="⎫",o="⎬",c="⎭",u="⎪",h="Size4-Regular"):"\\lgroup"===e||"⟮"===e?(a="⎧",c="⎩",u="⎪",h="Size4-Regular"):"\\rgroup"===e||"⟯"===e?(a="⎫",c="⎭",u="⎪",h="Size4-Regular"):"\\lmoustache"===e||"⎰"===e?(a="⎧",c="⎭",u="⎪",h="Size4-Regular"):"\\rmoustache"!==e&&"⎱"!==e||(a="⎫",c="⎩",u="⎪",h="Size4-Regular");var p=sn(a,h,i),f=p.height+p.depth,m=sn(u,h,i),d=m.height+m.depth,g=sn(c,h,i),v=g.height+g.depth,y=0,w=1;if(null!==o){var b=sn(o,h,i);y=b.height+b.depth,w=2}var x=f+v+y,M=x+Math.max(0,Math.ceil((t-x)/(w*d)))*w*d,S=r.fontMetrics().axisHeight;n&&(S*=r.sizeMultiplier);var E=M/2-S,T=[];if(T.push(un(c,h,i)),T.push(hn),null===o){var A=M-f-v+.016;T.push(cn(u,A,r))}else{var L=(M-f-v-y)/2+.016;T.push(cn(u,L,r)),T.push(hn),T.push(un(o,h,i)),T.push(hn),T.push(cn(u,L,r))}T.push(hn),T.push(un(a,h,i));var C=r.havingBaseStyle(_.TEXT),R=Ke.makeVList({positionType:"bottom",positionData:E,children:T},C);return an(Ke.makeSpan(["delimsizing","mult"],[R],C),_.TEXT,r,s)},dn=.08,gn=function(e,t,n,r,i){var s=function(e,t,n){t*=1e3;var r="";switch(e){case"sqrtMain":r=function(e,t){return"M95,"+(622+e+80)+"\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl"+e/2.075+" -"+e+"\nc5.3,-9.3,12,-14,20,-14\nH400000v"+(40+e)+"H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM"+(834+e)+" 80h400000v"+(40+e)+"h-400000z"}(t);break;case"sqrtSize1":r=function(e,t){return"M263,"+(601+e+80)+"c0.7,0,18,39.7,52,119\nc34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120\nc340,-704.7,510.7,-1060.3,512,-1067\nl"+e/2.084+" -"+e+"\nc4.7,-7.3,11,-11,19,-11\nH40000v"+(40+e)+"H1012.3\ns-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232\nc-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1\ns-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26\nc-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z\nM"+(1001+e)+" 80h400000v"+(40+e)+"h-400000z"}(t);break;case"sqrtSize2":r=function(e,t){return"M983 "+(10+e+80)+"\nl"+e/3.13+" -"+e+"\nc4,-6.7,10,-10,18,-10 H400000v"+(40+e)+"\nH1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7\ns-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744\nc-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30\nc26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722\nc56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5\nc53.7,-170.3,84.5,-266.8,92.5,-289.5z\nM"+(1001+e)+" 80h400000v"+(40+e)+"h-400000z"}(t);break;case"sqrtSize3":r=function(e,t){return"M424,"+(2398+e+80)+"\nc-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514\nc0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20\ns-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121\ns209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081\nl"+e/4.223+" -"+e+"c4,-6.7,10,-10,18,-10 H400000\nv"+(40+e)+"H1014.6\ns-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185\nc-2,6,-10,9,-24,9\nc-8,0,-12,-0.7,-12,-2z M"+(1001+e)+" 80\nh400000v"+(40+e)+"h-400000z"}(t);break;case"sqrtSize4":r=function(e,t){return"M473,"+(2713+e+80)+"\nc339.3,-1799.3,509.3,-2700,510,-2702 l"+e/5.298+" -"+e+"\nc3.3,-7.3,9.3,-11,18,-11 H400000v"+(40+e)+"H1017.7\ns-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9\nc-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200\nc0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26\ns76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,\n606zM"+(1001+e)+" 80h400000v"+(40+e)+"H1017.7z"}(t);break;case"sqrtTall":r=function(e,t,n){return"M702 "+(e+80)+"H400000"+(40+e)+"\nH742v"+(n-54-80-e)+"l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1\nh-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170\nc-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667\n219 661 l218 661zM702 80H400000v"+(40+e)+"H742z"}(t,0,n)}return r}(e,r,n),a=new F(e,s),o=new B([a],{width:"400em",height:t+"em",viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return Ke.makeSvgSpan(["hide-tail"],[o],i)},vn=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","\\surd"],yn=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱"],wn=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],bn=[0,1.2,1.8,2.4,3],xn=[{type:"small",style:_.SCRIPTSCRIPT},{type:"small",style:_.SCRIPT},{type:"small",style:_.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],Mn=[{type:"small",style:_.SCRIPTSCRIPT},{type:"small",style:_.SCRIPT},{type:"small",style:_.TEXT},{type:"stack"}],Sn=[{type:"small",style:_.SCRIPTSCRIPT},{type:"small",style:_.SCRIPT},{type:"small",style:_.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],_n=function(e){if("small"===e.type)return"Main-Regular";if("large"===e.type)return"Size"+e.size+"-Regular";if("stack"===e.type)return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},En=function(e,t,n,r){for(var i=Math.min(2,3-r.style.size);i<n.length&&"stack"!==n[i].type;i++){var s=sn(e,_n(n[i]),"math"),a=s.height+s.depth;if("small"===n[i].type&&(a*=r.havingBaseStyle(n[i].style).sizeMultiplier),a>t)return n[i]}return n[n.length-1]},Tn=function(e,t,n,r,i,s){var a;"<"===e||"\\lt"===e||"⟨"===e?e="\\langle":">"!==e&&"\\gt"!==e&&"⟩"!==e||(e="\\rangle"),a=l(wn,e)?xn:l(vn,e)?Sn:Mn;var o=En(e,t,a,r);return"small"===o.type?function(e,t,n,r,i,s){var a=Ke.makeSymbol(e,"Main-Regular",i,r),o=an(a,t,r,s);return n&&on(o,r,t),o}(e,o.style,n,r,i,s):"large"===o.type?ln(e,o.size,n,r,i,s):mn(e,t,n,r,i,s)},An=function(e,t,n,i,s){if("<"===e||"\\lt"===e||"⟨"===e?e="\\langle":">"!==e&&"\\gt"!==e&&"⟩"!==e||(e="\\rangle"),l(vn,e)||l(wn,e))return ln(e,t,!1,n,i,s);if(l(yn,e))return mn(e,bn[t],!1,n,i,s);throw new r("Illegal delimiter: '"+e+"'")},Ln=bn,Cn=Tn,Rn=function(e,t,n,r,i,s){var a=r.fontMetrics().axisHeight*r.sizeMultiplier,o=5/r.fontMetrics().ptPerEm,l=Math.max(t-a,n+a),u=Math.max(l/500*901,2*l-o);return Tn(e,u,!0,r,i,s)},Nn={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},Pn=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","<",">","\\langle","⟨","\\rangle","⟩","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function In(e,t){var n=Wt(e);if(n&&l(Pn,n.text))return n;throw new r(n?"Invalid delimiter '"+n.text+"' after '"+t.funcName+"'":"Invalid delimiter type '"+e.type+"'",e)}function On(e){if(!e.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}lt({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:function(e,t){var n=In(t[0],e);return{type:"delimsizing",mode:e.parser.mode,size:Nn[e.funcName].size,mclass:Nn[e.funcName].mclass,delim:n.text}},htmlBuilder:function(e,t){return"."===e.delim?Ke.makeSpan([e.mclass]):An(e.delim,e.size,t,e.mode,[e.mclass])},mathmlBuilder:function(e){var t=[];"."!==e.delim&&t.push(Rt(e.delim,e.mode));var n=new Ct.MathNode("mo",t);return"mopen"===e.mclass||"mclose"===e.mclass?n.setAttribute("fence","true"):n.setAttribute("fence","false"),n.setAttribute("stretchy","true"),n.setAttribute("minsize",Ln[e.size]+"em"),n.setAttribute("maxsize",Ln[e.size]+"em"),n}}),lt({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:function(e,t){var n=e.parser.gullet.macros.get("\\current@color");if(n&&"string"!=typeof n)throw new r("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:e.parser.mode,delim:In(t[0],e).text,color:n}}}),lt({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:function(e,t){var n=In(t[0],e),r=e.parser;++r.leftrightDepth;var i=r.parseExpression(!1);--r.leftrightDepth,r.expect("\\right",!1);var s=Gt(r.parseFunction(),"leftright-right");return{type:"leftright",mode:r.mode,body:i,left:n.text,right:s.delim,rightColor:s.color}},htmlBuilder:function(e,t){On(e);for(var n,r,i=vt(e.body,t,!0,["mopen","mclose"]),s=0,a=0,o=!1,l=0;l<i.length;l++)i[l].isMiddle?o=!0:(s=Math.max(i[l].height,s),a=Math.max(i[l].depth,a));if(s*=t.sizeMultiplier,a*=t.sizeMultiplier,n="."===e.left?Mt(t,["mopen"]):Rn(e.left,s,a,t,e.mode,["mopen"]),i.unshift(n),o)for(var u=1;u<i.length;u++){var c=i[u].isMiddle;c&&(i[u]=Rn(c.delim,s,a,c.options,e.mode,[]))}if("."===e.right)r=Mt(t,["mclose"]);else{var h=e.rightColor?t.withColor(e.rightColor):t;r=Rn(e.right,s,a,h,e.mode,["mclose"])}return i.push(r),Ke.makeSpan(["minner"],i,t)},mathmlBuilder:function(e,t){On(e);var n=It(e.body,t);if("."!==e.left){var r=new Ct.MathNode("mo",[Rt(e.left,e.mode)]);r.setAttribute("fence","true"),n.unshift(r)}if("."!==e.right){var i=new Ct.MathNode("mo",[Rt(e.right,e.mode)]);i.setAttribute("fence","true"),e.rightColor&&i.setAttribute("mathcolor",e.rightColor),n.push(i)}return Nt(n)}}),lt({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:function(e,t){var n=In(t[0],e);if(!e.parser.leftrightDepth)throw new r("\\middle without preceding \\left",n);return{type:"middle",mode:e.parser.mode,delim:n.text}},htmlBuilder:function(e,t){var n;if("."===e.delim)n=Mt(t,[]);else{n=An(e.delim,1,t,e.mode,[]);var r={delim:e.delim,options:t};n.isMiddle=r}return n},mathmlBuilder:function(e,t){var n="\\vert"===e.delim||"|"===e.delim?Rt("|","text"):Rt(e.delim,e.mode),r=new Ct.MathNode("mo",[n]);return r.setAttribute("fence","true"),r.setAttribute("lspace","0.05em"),r.setAttribute("rspace","0.05em"),r}});var kn=function(e,t){var n,r,i,s=Ke.wrapFragment(St(e.body,t),t),a=e.label.substr(1),o=t.sizeMultiplier,l=0,u=f(e.body);if("sout"===a)(n=Ke.makeSpan(["stretchy","sout"])).height=t.fontMetrics().defaultRuleThickness/o,l=-.5*t.fontMetrics().xHeight;else if("phase"===a){var c=He({number:.6,unit:"pt"},t),h=He({number:.35,unit:"ex"},t);o/=t.havingBaseSizing().sizeMultiplier;var p=s.height+s.depth+c+h;s.style.paddingLeft=p/2+c+"em";var m=Math.floor(1e3*p*o),d="M400000 "+(r=m)+" H0 L"+r/2+" 0 l65 45 L145 "+(r-80)+" H400000z",g=new B([new F("phase",d)],{width:"400em",height:m/1e3+"em",viewBox:"0 0 400000 "+m,preserveAspectRatio:"xMinYMin slice"});(n=Ke.makeSvgSpan(["hide-tail"],[g],t)).style.height=p+"em",l=s.depth+c+h}else{/cancel/.test(a)?u||s.classes.push("cancel-pad"):"angl"===a?s.classes.push("anglpad"):s.classes.push("boxpad");var v=0,y=0,w=0;/box/.test(a)?(w=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness),y=v=t.fontMetrics().fboxsep+("colorbox"===a?0:w)):"angl"===a?(v=4*(w=Math.max(t.fontMetrics().defaultRuleThickness,t.minRuleThickness)),y=Math.max(0,.25-s.depth)):y=v=u?.2:0,n=function(e,t,n,r,i){var s,a=e.height+e.depth+n+r;if(/fbox|color|angl/.test(t)){if(s=Ke.makeSpan(["stretchy",t],[],i),"fbox"===t){var o=i.color&&i.getColor();o&&(s.style.borderColor=o)}}else{var l=[];/^[bx]cancel$/.test(t)&&l.push(new q({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(t)&&l.push(new q({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var u=new B(l,{width:"100%",height:a+"em"});s=Ke.makeSvgSpan([],[u],i)}return s.height=a,s.style.height=a+"em",s}(s,a,v,y,t),/fbox|boxed|fcolorbox/.test(a)?(n.style.borderStyle="solid",n.style.borderWidth=w+"em"):"angl"===a&&.049!==w&&(n.style.borderTopWidth=w+"em",n.style.borderRightWidth=w+"em"),l=s.depth+y,e.backgroundColor&&(n.style.backgroundColor=e.backgroundColor,e.borderColor&&(n.style.borderColor=e.borderColor))}if(e.backgroundColor)i=Ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:n,shift:l},{type:"elem",elem:s,shift:0}]},t);else{var b=/cancel|phase/.test(a)?["svg-align"]:[];i=Ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:0},{type:"elem",elem:n,shift:l,wrapperClasses:b}]},t)}return/cancel/.test(a)&&(i.height=s.height,i.depth=s.depth),/cancel/.test(a)&&!u?Ke.makeSpan(["mord","cancel-lap"],[i],t):Ke.makeSpan(["mord"],[i],t)},Dn=function(e,t){var n=0,r=new Ct.MathNode(e.label.indexOf("colorbox")>-1?"mpadded":"menclose",[kt(e.body,t)]);switch(e.label){case"\\cancel":r.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":r.setAttribute("notation","downdiagonalstrike");break;case"\\phase":r.setAttribute("notation","phasorangle");break;case"\\sout":r.setAttribute("notation","horizontalstrike");break;case"\\fbox":r.setAttribute("notation","box");break;case"\\angl":r.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(n=t.fontMetrics().fboxsep*t.fontMetrics().ptPerEm,r.setAttribute("width","+"+2*n+"pt"),r.setAttribute("height","+"+2*n+"pt"),r.setAttribute("lspace",n+"pt"),r.setAttribute("voffset",n+"pt"),"\\fcolorbox"===e.label){var i=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness);r.setAttribute("style","border: "+i+"em solid "+String(e.borderColor))}break;case"\\xcancel":r.setAttribute("notation","updiagonalstrike downdiagonalstrike")}return e.backgroundColor&&r.setAttribute("mathbackground",e.backgroundColor),r};lt({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler:function(e,t,n){var r=e.parser,i=e.funcName,s=Gt(t[0],"color-token").color,a=t[1];return{type:"enclose",mode:r.mode,label:i,backgroundColor:s,body:a}},htmlBuilder:kn,mathmlBuilder:Dn}),lt({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler:function(e,t,n){var r=e.parser,i=e.funcName,s=Gt(t[0],"color-token").color,a=Gt(t[1],"color-token").color,o=t[2];return{type:"enclose",mode:r.mode,label:i,backgroundColor:a,borderColor:s,body:o}},htmlBuilder:kn,mathmlBuilder:Dn}),lt({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler:function(e,t){return{type:"enclose",mode:e.parser.mode,label:"\\fbox",body:t[0]}}}),lt({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler:function(e,t){var n=e.parser,r=e.funcName,i=t[0];return{type:"enclose",mode:n.mode,label:r,body:i}},htmlBuilder:kn,mathmlBuilder:Dn}),lt({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler:function(e,t){return{type:"enclose",mode:e.parser.mode,label:"\\angl",body:t[0]}}});var Un={};function zn(e){for(var t=e.type,n=e.names,r=e.props,i=e.handler,s=e.htmlBuilder,a=e.mathmlBuilder,o={type:t,numArgs:r.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:i},l=0;l<n.length;++l)Un[n[l]]=o;s&&(at[t]=s),a&&(ot[t]=a)}function Bn(e){var t=[];e.consumeSpaces();for(var n=e.fetch().text;"\\hline"===n||"\\hdashline"===n;)e.consume(),t.push("\\hdashline"===n),e.consumeSpaces(),n=e.fetch().text;return t}var Fn=function(e){if(!e.parser.settings.displayMode)throw new r("{"+e.envName+"} can be used only in display mode.")};function qn(e,t,n){var i=t.hskipBeforeAndAfter,s=t.addJot,a=t.cols,o=t.arraystretch,l=t.colSeparationType,u=t.addEqnNum,c=t.singleRow,h=t.emptySingleRow,p=t.maxNumCols,f=t.leqno;if(e.gullet.beginGroup(),c||e.gullet.macros.set("\\cr","\\\\\\relax"),!o){var m=e.gullet.expandMacroAsText("\\arraystretch");if(null==m)o=1;else if(!(o=parseFloat(m))||o<0)throw new r("Invalid \\arraystretch: "+m)}e.gullet.beginGroup();var d=[],g=[d],v=[],y=[];for(y.push(Bn(e));;){var w=e.parseExpression(!1,c?"\\end":"\\\\");e.gullet.endGroup(),e.gullet.beginGroup(),w={type:"ordgroup",mode:e.mode,body:w},n&&(w={type:"styling",mode:e.mode,style:n,body:[w]}),d.push(w);var b=e.fetch().text;if("&"===b){if(p&&d.length===p){if(c||l)throw new r("Too many tab characters: &",e.nextToken);e.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}e.consume()}else{if("\\end"===b){1===d.length&&"styling"===w.type&&0===w.body[0].body.length&&(g.length>1||!h)&&g.pop(),y.length<g.length+1&&y.push([]);break}if("\\\\"!==b)throw new r("Expected & or \\\\ or \\cr or \\end",e.nextToken);e.consume();var x=void 0;" "!==e.gullet.future().text&&(x=e.parseSizeGroup(!0)),v.push(x?x.value:null),y.push(Bn(e)),d=[],g.push(d)}}return e.gullet.endGroup(),e.gullet.endGroup(),{type:"array",mode:e.mode,addJot:s,arraystretch:o,body:g,cols:a,rowGaps:v,hskipBeforeAndAfter:i,hLinesBeforeRow:y,colSeparationType:l,addEqnNum:u,leqno:f}}function Hn(e){return"d"===e.substr(0,1)?"display":"text"}var Gn=function(e,t){var n,i,s=e.body.length,a=e.hLinesBeforeRow,o=0,l=new Array(s),c=[],h=Math.max(t.fontMetrics().arrayRuleWidth,t.minRuleThickness),p=1/t.fontMetrics().ptPerEm,f=5*p;e.colSeparationType&&"small"===e.colSeparationType&&(f=t.havingStyle(_.SCRIPT).sizeMultiplier/t.sizeMultiplier*.2778);var m="CD"===e.colSeparationType?He({number:3,unit:"ex"},t):12*p,d=3*p,g=e.arraystretch*m,v=.7*g,y=.3*g,w=0;function b(e){for(var t=0;t<e.length;++t)t>0&&(w+=.25),c.push({pos:w,isDashed:e[t]})}for(b(a[0]),n=0;n<e.body.length;++n){var x=e.body[n],M=v,S=y;o<x.length&&(o=x.length);var E=new Array(x.length);for(i=0;i<x.length;++i){var T=St(x[i],t);S<T.depth&&(S=T.depth),M<T.height&&(M=T.height),E[i]=T}var A=e.rowGaps[n],L=0;A&&(L=He(A,t))>0&&(S<(L+=y)&&(S=L),L=0),e.addJot&&(S+=d),E.height=M,E.depth=S,w+=M,E.pos=w,w+=S+L,l[n]=E,b(a[n+1])}var C,R,N=w/2+t.fontMetrics().axisHeight,P=e.cols||[],I=[],O=[];if(e.addEqnNum)for(n=0;n<s;++n){var k=l[n],D=k.pos-N,U=Ke.makeSpan(["eqn-num"],[],t);U.depth=k.depth,U.height=k.height,O.push({type:"elem",elem:U,shift:D})}for(i=0,R=0;i<o||R<P.length;++i,++R){for(var z=P[R]||{},B=!0;"separator"===z.type;){if(B||((C=Ke.makeSpan(["arraycolsep"],[])).style.width=t.fontMetrics().doubleRuleSep+"em",I.push(C)),"|"!==z.separator&&":"!==z.separator)throw new r("Invalid separator type: "+z.separator);var F="|"===z.separator?"solid":"dashed",q=Ke.makeSpan(["vertical-separator"],[],t);q.style.height=w+"em",q.style.borderRightWidth=h+"em",q.style.borderRightStyle=F,q.style.margin="0 -"+h/2+"em",q.style.verticalAlign=-(w-N)+"em",I.push(q),z=P[++R]||{},B=!1}if(!(i>=o)){var H=void 0;(i>0||e.hskipBeforeAndAfter)&&0!==(H=u(z.pregap,f))&&((C=Ke.makeSpan(["arraycolsep"],[])).style.width=H+"em",I.push(C));var G=[];for(n=0;n<s;++n){var V=l[n],W=V[i];if(W){var j=V.pos-N;W.depth=V.depth,W.height=V.height,G.push({type:"elem",elem:W,shift:j})}}G=Ke.makeVList({positionType:"individualShift",children:G},t),G=Ke.makeSpan(["col-align-"+(z.align||"c")],[G]),I.push(G),(i<o-1||e.hskipBeforeAndAfter)&&0!==(H=u(z.postgap,f))&&((C=Ke.makeSpan(["arraycolsep"],[])).style.width=H+"em",I.push(C))}}if(l=Ke.makeSpan(["mtable"],I),c.length>0){for(var X=Ke.makeLineSpan("hline",t,h),Z=Ke.makeLineSpan("hdashline",t,h),Y=[{type:"elem",elem:l,shift:0}];c.length>0;){var J=c.pop(),$=J.pos-N;J.isDashed?Y.push({type:"elem",elem:Z,shift:$}):Y.push({type:"elem",elem:X,shift:$})}l=Ke.makeVList({positionType:"individualShift",children:Y},t)}if(e.addEqnNum){var Q=Ke.makeVList({positionType:"individualShift",children:O},t);return Q=Ke.makeSpan(["tag"],[Q],t),Ke.makeFragment([l,Q])}return Ke.makeSpan(["mord"],[l],t)},Vn={c:"center ",l:"left ",r:"right "},Wn=function(e,t){for(var n=[],r=new Ct.MathNode("mtd",[],["mtr-glue"]),i=new Ct.MathNode("mtd",[],["mml-eqn-num"]),s=0;s<e.body.length;s++){for(var a=e.body[s],o=[],l=0;l<a.length;l++)o.push(new Ct.MathNode("mtd",[kt(a[l],t)]));e.addEqnNum&&(o.unshift(r),o.push(r),e.leqno?o.unshift(i):o.push(i)),n.push(new Ct.MathNode("mtr",o))}var u=new Ct.MathNode("mtable",n),c=.5===e.arraystretch?.1:.16+e.arraystretch-1+(e.addJot?.09:0);u.setAttribute("rowspacing",c.toFixed(4)+"em");var h="",p="";if(e.cols&&e.cols.length>0){var f=e.cols,m="",d=!1,g=0,v=f.length;"separator"===f[0].type&&(h+="top ",g=1),"separator"===f[f.length-1].type&&(h+="bottom ",v-=1);for(var y=g;y<v;y++)"align"===f[y].type?(p+=Vn[f[y].align],d&&(m+="none "),d=!0):"separator"===f[y].type&&d&&(m+="|"===f[y].separator?"solid ":"dashed ",d=!1);u.setAttribute("columnalign",p.trim()),/[sd]/.test(m)&&u.setAttribute("columnlines",m.trim())}if("align"===e.colSeparationType){for(var w=e.cols||[],b="",x=1;x<w.length;x++)b+=x%2?"0em ":"1em ";u.setAttribute("columnspacing",b.trim())}else"alignat"===e.colSeparationType||"gather"===e.colSeparationType?u.setAttribute("columnspacing","0em"):"small"===e.colSeparationType?u.setAttribute("columnspacing","0.2778em"):"CD"===e.colSeparationType?u.setAttribute("columnspacing","0.5em"):u.setAttribute("columnspacing","1em");var M="",S=e.hLinesBeforeRow;h+=S[0].length>0?"left ":"",h+=S[S.length-1].length>0?"right ":"";for(var _=1;_<S.length-1;_++)M+=0===S[_].length?"none ":S[_][0]?"dashed ":"solid ";return/[sd]/.test(M)&&u.setAttribute("rowlines",M.trim()),""!==h&&(u=new Ct.MathNode("menclose",[u])).setAttribute("notation",h.trim()),e.arraystretch&&e.arraystretch<1&&(u=new Ct.MathNode("mstyle",[u])).setAttribute("scriptlevel","1"),u},jn=function(e,t){-1===e.envName.indexOf("ed")&&Fn(e);var n,i=[],s=e.envName.indexOf("at")>-1?"alignat":"align",a=qn(e.parser,{cols:i,addJot:!0,addEqnNum:"align"===e.envName||"alignat"===e.envName,emptySingleRow:!0,colSeparationType:s,maxNumCols:"split"===e.envName?2:void 0,leqno:e.parser.settings.leqno},"display"),o=0,l={type:"ordgroup",mode:e.mode,body:[]};if(t[0]&&"ordgroup"===t[0].type){for(var u="",c=0;c<t[0].body.length;c++)u+=Gt(t[0].body[c],"textord").text;n=Number(u),o=2*n}var h=!o;a.body.forEach((function(e){for(var t=1;t<e.length;t+=2){var i=Gt(e[t],"styling");Gt(i.body[0],"ordgroup").body.unshift(l)}if(h)o<e.length&&(o=e.length);else{var s=e.length/2;if(n<s)throw new r("Too many math in a row: expected "+n+", but got "+s,e[0])}}));for(var p=0;p<o;++p){var f="r",m=0;p%2==1?f="l":p>0&&h&&(m=1),i[p]={type:"align",align:f,pregap:m,postgap:0}}return a.colSeparationType=h?"align":"alignat",a};zn({type:"array",names:["array","darray"],props:{numArgs:1},handler:function(e,t){var n=(Wt(t[0])?[t[0]]:Gt(t[0],"ordgroup").body).map((function(e){var t=Vt(e).text;if(-1!=="lcr".indexOf(t))return{type:"align",align:t};if("|"===t)return{type:"separator",separator:"|"};if(":"===t)return{type:"separator",separator:":"};throw new r("Unknown column alignment: "+t,e)})),i={cols:n,hskipBeforeAndAfter:!0,maxNumCols:n.length};return qn(e.parser,i,Hn(e.envName))},htmlBuilder:Gn,mathmlBuilder:Wn}),zn({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler:function(e){var t={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[e.envName.replace("*","")],n="c",i={hskipBeforeAndAfter:!1,cols:[{type:"align",align:n}]};if("*"===e.envName.charAt(e.envName.length-1)){var s=e.parser;if(s.consumeSpaces(),"["===s.fetch().text){if(s.consume(),s.consumeSpaces(),n=s.fetch().text,-1==="lcr".indexOf(n))throw new r("Expected l or c or r",s.nextToken);s.consume(),s.consumeSpaces(),s.expect("]"),s.consume(),i.cols=[{type:"align",align:n}]}}var a=qn(e.parser,i,Hn(e.envName)),o=Math.max.apply(Math,[0].concat(a.body.map((function(e){return e.length}))));return a.cols=new Array(o).fill({type:"align",align:n}),t?{type:"leftright",mode:e.mode,body:[a],left:t[0],right:t[1],rightColor:void 0}:a},htmlBuilder:Gn,mathmlBuilder:Wn}),zn({type:"array",names:["smallmatrix"],props:{numArgs:0},handler:function(e){var t=qn(e.parser,{arraystretch:.5},"script");return t.colSeparationType="small",t},htmlBuilder:Gn,mathmlBuilder:Wn}),zn({type:"array",names:["subarray"],props:{numArgs:1},handler:function(e,t){var n=(Wt(t[0])?[t[0]]:Gt(t[0],"ordgroup").body).map((function(e){var t=Vt(e).text;if(-1!=="lc".indexOf(t))return{type:"align",align:t};throw new r("Unknown column alignment: "+t,e)}));if(n.length>1)throw new r("{subarray} can contain only one column");var i={cols:n,hskipBeforeAndAfter:!1,arraystretch:.5};if((i=qn(e.parser,i,"script")).body.length>0&&i.body[0].length>1)throw new r("{subarray} can contain only one column");return i},htmlBuilder:Gn,mathmlBuilder:Wn}),zn({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler:function(e){var t=qn(e.parser,{arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},Hn(e.envName));return{type:"leftright",mode:e.mode,body:[t],left:e.envName.indexOf("r")>-1?".":"\\{",right:e.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:Gn,mathmlBuilder:Wn}),zn({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:jn,htmlBuilder:Gn,mathmlBuilder:Wn}),zn({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler:function(e){l(["gather","gather*"],e.envName)&&Fn(e);var t={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",addEqnNum:"gather"===e.envName,emptySingleRow:!0,leqno:e.parser.settings.leqno};return qn(e.parser,t,"display")},htmlBuilder:Gn,mathmlBuilder:Wn}),zn({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:jn,htmlBuilder:Gn,mathmlBuilder:Wn}),zn({type:"array",names:["equation","equation*"],props:{numArgs:0},handler:function(e){Fn(e);var t={addEqnNum:"equation"===e.envName,emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:e.parser.settings.leqno};return qn(e.parser,t,"display")},htmlBuilder:Gn,mathmlBuilder:Wn}),zn({type:"array",names:["CD"],props:{numArgs:0},handler:function(e){return Fn(e),function(e){var t=[];for(e.gullet.beginGroup(),e.gullet.macros.set("\\cr","\\\\\\relax"),e.gullet.beginGroup();;){t.push(e.parseExpression(!1,"\\\\")),e.gullet.endGroup(),e.gullet.beginGroup();var n=e.fetch().text;if("&"!==n&&"\\\\"!==n){if("\\end"===n){0===t[t.length-1].length&&t.pop();break}throw new r("Expected \\\\ or \\cr or \\end",e.nextToken)}e.consume()}for(var i,s,a=[],o=[a],l=0;l<t.length;l++){for(var u=t[l],c={type:"styling",body:[],mode:"math",style:"display"},h=0;h<u.length;h++)if($t(u[h])){a.push(c);var p=Vt(u[h+=1]).text,f=new Array(2);if(f[0]={type:"ordgroup",mode:"math",body:[]},f[1]={type:"ordgroup",mode:"math",body:[]},"=|.".indexOf(p)>-1);else{if(!("<>AV".indexOf(p)>-1))throw new r('Expected one of "<>AV=|." after @',u[h]);for(var m=0;m<2;m++){for(var d=!0,g=h+1;g<u.length;g++){if(s=p,("mathord"===(i=u[g]).type||"atom"===i.type)&&i.text===s){d=!1,h=g;break}if($t(u[g]))throw new r("Missing a "+p+" character to complete a CD arrow.",u[g]);f[m].body.push(u[g])}if(d)throw new r("Missing a "+p+" character to complete a CD arrow.",u[h])}}var v={type:"styling",body:[Qt(p,f,e)],mode:"math",style:"display"};a.push(v),c={type:"styling",body:[],mode:"math",style:"display"}}else c.body.push(u[h]);l%2==0?a.push(c):a.shift(),a=[],o.push(a)}return e.gullet.endGroup(),e.gullet.endGroup(),{type:"array",mode:"math",body:o,arraystretch:1,addJot:!0,rowGaps:[null],cols:new Array(o[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25}),colSeparationType:"CD",hLinesBeforeRow:new Array(o.length+1).fill([])}}(e.parser)},htmlBuilder:Gn,mathmlBuilder:Wn}),lt({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler:function(e,t){throw new r(e.funcName+" valid only within array environment")}});var Xn=Un;lt({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler:function(e,t){var n=e.parser,i=e.funcName,s=t[0];if("ordgroup"!==s.type)throw new r("Invalid environment name",s);for(var a="",o=0;o<s.body.length;++o)a+=Gt(s.body[o],"textord").text;if("\\begin"===i){if(!Xn.hasOwnProperty(a))throw new r("No such environment: "+a,s);var l=Xn[a],u=n.parseArguments("\\begin{"+a+"}",l),c=u.args,h=u.optArgs,p={mode:n.mode,envName:a,parser:n},f=l.handler(p,c,h);n.expect("\\end",!1);var m=n.nextToken,d=Gt(n.parseFunction(),"environment");if(d.name!==a)throw new r("Mismatch: \\begin{"+a+"} matched by \\end{"+d.name+"}",m);return f}return{type:"environment",mode:n.mode,name:a,nameGroup:s}}});var Zn=Ke.makeSpan;function Yn(e,t){var n=vt(e.body,t,!0);return Zn([e.mclass],n,t)}function Jn(e,t){var n,r=It(e.body,t);return"minner"===e.mclass?Ct.newDocumentFragment(r):("mord"===e.mclass?e.isCharacterBox?(n=r[0]).type="mi":n=new Ct.MathNode("mi",r):(e.isCharacterBox?(n=r[0]).type="mo":n=new Ct.MathNode("mo",r),"mbin"===e.mclass?(n.attributes.lspace="0.22em",n.attributes.rspace="0.22em"):"mpunct"===e.mclass?(n.attributes.lspace="0em",n.attributes.rspace="0.17em"):"mopen"!==e.mclass&&"mclose"!==e.mclass||(n.attributes.lspace="0em",n.attributes.rspace="0em")),n)}lt({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler:function(e,t){var n=e.parser,r=e.funcName,i=t[0];return{type:"mclass",mode:n.mode,mclass:"m"+r.substr(5),body:ht(i),isCharacterBox:f(i)}},htmlBuilder:Yn,mathmlBuilder:Jn});var $n=function(e){var t="ordgroup"===e.type&&e.body.length?e.body[0]:e;return"atom"!==t.type||"bin"!==t.family&&"rel"!==t.family?"mord":"m"+t.family};lt({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler:function(e,t){return{type:"mclass",mode:e.parser.mode,mclass:$n(t[0]),body:ht(t[1]),isCharacterBox:f(t[1])}}}),lt({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler:function(e,t){var n,r=e.parser,i=e.funcName,s=t[1],a=t[0];n="\\stackrel"!==i?$n(s):"mrel";var o={type:"op",mode:s.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:"\\stackrel"!==i,body:ht(s)},l={type:"supsub",mode:a.mode,base:o,sup:"\\underset"===i?null:a,sub:"\\underset"===i?a:null};return{type:"mclass",mode:r.mode,mclass:n,body:[l],isCharacterBox:f(l)}},htmlBuilder:Yn,mathmlBuilder:Jn});var Qn=function(e,t){var n=e.font,r=t.withFont(n);return St(e.body,r)},Kn=function(e,t){var n=e.font,r=t.withFont(n);return kt(e.body,r)},er={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};lt({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:function(e,t){var n=e.parser,r=e.funcName,i=ct(t[0]),s=r;return s in er&&(s=er[s]),{type:"font",mode:n.mode,font:s.slice(1),body:i}},htmlBuilder:Qn,mathmlBuilder:Kn}),lt({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:function(e,t){var n=e.parser,r=t[0],i=f(r);return{type:"mclass",mode:n.mode,mclass:$n(r),body:[{type:"font",mode:n.mode,font:"boldsymbol",body:r}],isCharacterBox:i}}}),lt({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:function(e,t){var n=e.parser,r=e.funcName,i=e.breakOnTokenText,s=n.mode,a=n.parseExpression(!0,i);return{type:"font",mode:s,font:"math"+r.slice(1),body:{type:"ordgroup",mode:n.mode,body:a}}},htmlBuilder:Qn,mathmlBuilder:Kn});var tr=function(e,t){var n=t;return"display"===e?n=n.id>=_.SCRIPT.id?n.text():_.DISPLAY:"text"===e&&n.size===_.DISPLAY.size?n=_.TEXT:"script"===e?n=_.SCRIPT:"scriptscript"===e&&(n=_.SCRIPTSCRIPT),n},nr=function(e,t){var n,r=tr(e.size,t.style),i=r.fracNum(),s=r.fracDen();n=t.havingStyle(i);var a=St(e.numer,n,t);if(e.continued){var o=8.5/t.fontMetrics().ptPerEm,l=3.5/t.fontMetrics().ptPerEm;a.height=a.height<o?o:a.height,a.depth=a.depth<l?l:a.depth}n=t.havingStyle(s);var u,c,h,p,f,m,d,g,v,y,w=St(e.denom,n,t);if(e.hasBarLine?(e.barSize?(c=He(e.barSize,t),u=Ke.makeLineSpan("frac-line",t,c)):u=Ke.makeLineSpan("frac-line",t),c=u.height,h=u.height):(u=null,c=0,h=t.fontMetrics().defaultRuleThickness),r.size===_.DISPLAY.size||"display"===e.size?(p=t.fontMetrics().num1,f=c>0?3*h:7*h,m=t.fontMetrics().denom1):(c>0?(p=t.fontMetrics().num2,f=h):(p=t.fontMetrics().num3,f=3*h),m=t.fontMetrics().denom2),u){var b=t.fontMetrics().axisHeight;p-a.depth-(b+.5*c)<f&&(p+=f-(p-a.depth-(b+.5*c))),b-.5*c-(w.height-m)<f&&(m+=f-(b-.5*c-(w.height-m))),d=Ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:w,shift:m},{type:"elem",elem:u,shift:-(b-.5*c)},{type:"elem",elem:a,shift:-p}]},t)}else{var x=p-a.depth-(w.height-m);x<f&&(p+=.5*(f-x),m+=.5*(f-x)),d=Ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:w,shift:m},{type:"elem",elem:a,shift:-p}]},t)}return n=t.havingStyle(r),d.height*=n.sizeMultiplier/t.sizeMultiplier,d.depth*=n.sizeMultiplier/t.sizeMultiplier,g=r.size===_.DISPLAY.size?t.fontMetrics().delim1:r.size===_.SCRIPTSCRIPT.size?t.havingStyle(_.SCRIPT).fontMetrics().delim2:t.fontMetrics().delim2,v=null==e.leftDelim?Mt(t,["mopen"]):Cn(e.leftDelim,g,!0,t.havingStyle(r),e.mode,["mopen"]),y=e.continued?Ke.makeSpan([]):null==e.rightDelim?Mt(t,["mclose"]):Cn(e.rightDelim,g,!0,t.havingStyle(r),e.mode,["mclose"]),Ke.makeSpan(["mord"].concat(n.sizingClasses(t)),[v,Ke.makeSpan(["mfrac"],[d]),y],t)},rr=function(e,t){var n=new Ct.MathNode("mfrac",[kt(e.numer,t),kt(e.denom,t)]);if(e.hasBarLine){if(e.barSize){var r=He(e.barSize,t);n.setAttribute("linethickness",r+"em")}}else n.setAttribute("linethickness","0px");var i=tr(e.size,t.style);if(i.size!==t.style.size){n=new Ct.MathNode("mstyle",[n]);var s=i.size===_.DISPLAY.size?"true":"false";n.setAttribute("displaystyle",s),n.setAttribute("scriptlevel","0")}if(null!=e.leftDelim||null!=e.rightDelim){var a=[];if(null!=e.leftDelim){var o=new Ct.MathNode("mo",[new Ct.TextNode(e.leftDelim.replace("\\",""))]);o.setAttribute("fence","true"),a.push(o)}if(a.push(n),null!=e.rightDelim){var l=new Ct.MathNode("mo",[new Ct.TextNode(e.rightDelim.replace("\\",""))]);l.setAttribute("fence","true"),a.push(l)}return Nt(a)}return n};lt({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:function(e,t){var n,r=e.parser,i=e.funcName,s=t[0],a=t[1],o=null,l=null,u="auto";switch(i){case"\\dfrac":case"\\frac":case"\\tfrac":n=!0;break;case"\\\\atopfrac":n=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":n=!1,o="(",l=")";break;case"\\\\bracefrac":n=!1,o="\\{",l="\\}";break;case"\\\\brackfrac":n=!1,o="[",l="]";break;default:throw new Error("Unrecognized genfrac command")}switch(i){case"\\dfrac":case"\\dbinom":u="display";break;case"\\tfrac":case"\\tbinom":u="text"}return{type:"genfrac",mode:r.mode,continued:!1,numer:s,denom:a,hasBarLine:n,leftDelim:o,rightDelim:l,size:u,barSize:null}},htmlBuilder:nr,mathmlBuilder:rr}),lt({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:function(e,t){var n=e.parser,r=(e.funcName,t[0]),i=t[1];return{type:"genfrac",mode:n.mode,continued:!0,numer:r,denom:i,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}}),lt({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler:function(e){var t,n=e.parser,r=e.funcName,i=e.token;switch(r){case"\\over":t="\\frac";break;case"\\choose":t="\\binom";break;case"\\atop":t="\\\\atopfrac";break;case"\\brace":t="\\\\bracefrac";break;case"\\brack":t="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:n.mode,replaceWith:t,token:i}}});var ir=["display","text","script","scriptscript"],sr=function(e){var t=null;return e.length>0&&(t="."===(t=e)?null:t),t};lt({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler:function(e,t){var n,r=e.parser,i=t[4],s=t[5],a=ct(t[0]),o="atom"===a.type&&"open"===a.family?sr(a.text):null,l=ct(t[1]),u="atom"===l.type&&"close"===l.family?sr(l.text):null,c=Gt(t[2],"size"),h=null;n=!!c.isBlank||(h=c.value).number>0;var p="auto",f=t[3];if("ordgroup"===f.type){if(f.body.length>0){var m=Gt(f.body[0],"textord");p=ir[Number(m.text)]}}else f=Gt(f,"textord"),p=ir[Number(f.text)];return{type:"genfrac",mode:r.mode,numer:i,denom:s,continued:!1,hasBarLine:n,barSize:h,leftDelim:o,rightDelim:u,size:p}},htmlBuilder:nr,mathmlBuilder:rr}),lt({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler:function(e,t){var n=e.parser,r=(e.funcName,e.token);return{type:"infix",mode:n.mode,replaceWith:"\\\\abovefrac",size:Gt(t[0],"size").value,token:r}}}),lt({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:function(e,t){var n=e.parser,r=(e.funcName,t[0]),i=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e}(Gt(t[1],"infix").size),s=t[2],a=i.number>0;return{type:"genfrac",mode:n.mode,numer:r,denom:s,continued:!1,hasBarLine:a,barSize:i,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:nr,mathmlBuilder:rr});var ar=function(e,t){var n,r,i=t.style;"supsub"===e.type?(n=e.sup?St(e.sup,t.havingStyle(i.sup()),t):St(e.sub,t.havingStyle(i.sub()),t),r=Gt(e.base,"horizBrace")):r=Gt(e,"horizBrace");var s,a=St(r.base,t.havingBaseStyle(_.DISPLAY)),o=Ht(r,t);if(r.isOver?(s=Ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:a},{type:"kern",size:.1},{type:"elem",elem:o}]},t)).children[0].children[0].children[1].classes.push("svg-align"):(s=Ke.makeVList({positionType:"bottom",positionData:a.depth+.1+o.height,children:[{type:"elem",elem:o},{type:"kern",size:.1},{type:"elem",elem:a}]},t)).children[0].children[0].children[0].classes.push("svg-align"),n){var l=Ke.makeSpan(["mord",r.isOver?"mover":"munder"],[s],t);s=r.isOver?Ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:.2},{type:"elem",elem:n}]},t):Ke.makeVList({positionType:"bottom",positionData:l.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:l}]},t)}return Ke.makeSpan(["mord",r.isOver?"mover":"munder"],[s],t)};lt({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler:function(e,t){var n=e.parser,r=e.funcName;return{type:"horizBrace",mode:n.mode,label:r,isOver:/^\\over/.test(r),base:t[0]}},htmlBuilder:ar,mathmlBuilder:function(e,t){var n=qt(e.label);return new Ct.MathNode(e.isOver?"mover":"munder",[kt(e.base,t),n])}}),lt({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:function(e,t){var n=e.parser,r=t[1],i=Gt(t[0],"url").url;return n.settings.isTrusted({command:"\\href",url:i})?{type:"href",mode:n.mode,href:i,body:ht(r)}:n.formatUnsupportedCmd("\\href")},htmlBuilder:function(e,t){var n=vt(e.body,t,!1);return Ke.makeAnchor(e.href,[],n,t)},mathmlBuilder:function(e,t){var n=Ot(e.body,t);return n instanceof At||(n=new At("mrow",[n])),n.setAttribute("href",e.href),n}}),lt({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:function(e,t){var n=e.parser,r=Gt(t[0],"url").url;if(!n.settings.isTrusted({command:"\\url",url:r}))return n.formatUnsupportedCmd("\\url");for(var i=[],s=0;s<r.length;s++){var a=r[s];"~"===a&&(a="\\textasciitilde"),i.push({type:"textord",mode:"text",text:a})}var o={type:"text",mode:n.mode,font:"\\texttt",body:i};return{type:"href",mode:n.mode,href:r,body:ht(o)}}}),lt({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler:function(e,t){return{type:"hbox",mode:e.parser.mode,body:ht(t[0])}},htmlBuilder:function(e,t){var n=vt(e.body,t,!1);return Ke.makeFragment(n)},mathmlBuilder:function(e,t){return new Ct.MathNode("mrow",It(e.body,t))}}),lt({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:function(e,t){var n,i=e.parser,s=e.funcName,a=(e.token,Gt(t[0],"raw").string),o=t[1];i.settings.strict&&i.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var l={};switch(s){case"\\htmlClass":l.class=a,n={command:"\\htmlClass",class:a};break;case"\\htmlId":l.id=a,n={command:"\\htmlId",id:a};break;case"\\htmlStyle":l.style=a,n={command:"\\htmlStyle",style:a};break;case"\\htmlData":for(var u=a.split(","),c=0;c<u.length;c++){var h=u[c].split("=");if(2!==h.length)throw new r("Error parsing key-value for \\htmlData");l["data-"+h[0].trim()]=h[1].trim()}n={command:"\\htmlData",attributes:l};break;default:throw new Error("Unrecognized html command")}return i.settings.isTrusted(n)?{type:"html",mode:i.mode,attributes:l,body:ht(o)}:i.formatUnsupportedCmd(s)},htmlBuilder:function(e,t){var n=vt(e.body,t,!1),r=["enclosing"];e.attributes.class&&r.push.apply(r,e.attributes.class.trim().split(/\s+/));var i=Ke.makeSpan(r,n,t);for(var s in e.attributes)"class"!==s&&e.attributes.hasOwnProperty(s)&&i.setAttribute(s,e.attributes[s]);return i},mathmlBuilder:function(e,t){return Ot(e.body,t)}}),lt({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:function(e,t){return{type:"htmlmathml",mode:e.parser.mode,html:ht(t[0]),mathml:ht(t[1])}},htmlBuilder:function(e,t){var n=vt(e.html,t,!1);return Ke.makeFragment(n)},mathmlBuilder:function(e,t){return Ot(e.mathml,t)}});var or=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var t=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!t)throw new r("Invalid size: '"+e+"' in \\includegraphics");var n={number:+(t[1]+t[2]),unit:t[3]};if(!qe(n))throw new r("Invalid unit: '"+n.unit+"' in \\includegraphics.");return n};lt({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:function(e,t,n){var i=e.parser,s={number:0,unit:"em"},a={number:.9,unit:"em"},o={number:0,unit:"em"},l="";if(n[0])for(var u=Gt(n[0],"raw").string.split(","),c=0;c<u.length;c++){var h=u[c].split("=");if(2===h.length){var p=h[1].trim();switch(h[0].trim()){case"alt":l=p;break;case"width":s=or(p);break;case"height":a=or(p);break;case"totalheight":o=or(p);break;default:throw new r("Invalid key: '"+h[0]+"' in \\includegraphics.")}}}var f=Gt(t[0],"url").url;return""===l&&(l=(l=(l=f).replace(/^.*[\\/]/,"")).substring(0,l.lastIndexOf("."))),i.settings.isTrusted({command:"\\includegraphics",url:f})?{type:"includegraphics",mode:i.mode,alt:l,width:s,height:a,totalheight:o,src:f}:i.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:function(e,t){var n=He(e.height,t),r=0;e.totalheight.number>0&&(r=He(e.totalheight,t)-n,r=Number(r.toFixed(2)));var i=0;e.width.number>0&&(i=He(e.width,t));var s={height:n+r+"em"};i>0&&(s.width=i+"em"),r>0&&(s.verticalAlign=-r+"em");var a=new D(e.src,e.alt,s);return a.height=n,a.depth=r,a},mathmlBuilder:function(e,t){var n=new Ct.MathNode("mglyph",[]);n.setAttribute("alt",e.alt);var r=He(e.height,t),i=0;if(e.totalheight.number>0&&(i=(i=He(e.totalheight,t)-r).toFixed(2),n.setAttribute("valign","-"+i+"em")),n.setAttribute("height",r+i+"em"),e.width.number>0){var s=He(e.width,t);n.setAttribute("width",s+"em")}return n.setAttribute("src",e.src),n}}),lt({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler:function(e,t){var n=e.parser,r=e.funcName,i=Gt(t[0],"size");if(n.settings.strict){var s="m"===r[1],a="mu"===i.value.unit;s?(a||n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" supports only mu units, not "+i.value.unit+" units"),"math"!==n.mode&&n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" works only in math mode")):a&&n.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+r+" doesn't support mu units")}return{type:"kern",mode:n.mode,dimension:i.value}},htmlBuilder:function(e,t){return Ke.makeGlue(e.dimension,t)},mathmlBuilder:function(e,t){var n=He(e.dimension,t);return new Ct.SpaceNode(n)}}),lt({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:function(e,t){var n=e.parser,r=e.funcName,i=t[0];return{type:"lap",mode:n.mode,alignment:r.slice(5),body:i}},htmlBuilder:function(e,t){var n;"clap"===e.alignment?(n=Ke.makeSpan([],[St(e.body,t)]),n=Ke.makeSpan(["inner"],[n],t)):n=Ke.makeSpan(["inner"],[St(e.body,t)]);var r=Ke.makeSpan(["fix"],[]),i=Ke.makeSpan([e.alignment],[n,r],t),s=Ke.makeSpan(["strut"]);return s.style.height=i.height+i.depth+"em",s.style.verticalAlign=-i.depth+"em",i.children.unshift(s),i=Ke.makeSpan(["thinbox"],[i],t),Ke.makeSpan(["mord","vbox"],[i],t)},mathmlBuilder:function(e,t){var n=new Ct.MathNode("mpadded",[kt(e.body,t)]);if("rlap"!==e.alignment){var r="llap"===e.alignment?"-1":"-0.5";n.setAttribute("lspace",r+"width")}return n.setAttribute("width","0px"),n}}),lt({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler:function(e,t){var n=e.funcName,r=e.parser,i=r.mode;r.switchMode("math");var s="\\("===n?"\\)":"$",a=r.parseExpression(!1,s);return r.expect(s),r.switchMode(i),{type:"styling",mode:r.mode,style:"text",body:a}}}),lt({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler:function(e,t){throw new r("Mismatched "+e.funcName)}});var lr=function(e,t){switch(t.style.size){case _.DISPLAY.size:return e.display;case _.TEXT.size:return e.text;case _.SCRIPT.size:return e.script;case _.SCRIPTSCRIPT.size:return e.scriptscript;default:return e.text}};lt({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:function(e,t){return{type:"mathchoice",mode:e.parser.mode,display:ht(t[0]),text:ht(t[1]),script:ht(t[2]),scriptscript:ht(t[3])}},htmlBuilder:function(e,t){var n=lr(e,t),r=vt(n,t,!1);return Ke.makeFragment(r)},mathmlBuilder:function(e,t){var n=lr(e,t);return Ot(n,t)}});var ur=function(e,t,n,r,i,s,a){e=Ke.makeSpan([],[e]);var o,l,u,c=n&&f(n);if(t){var h=St(t,r.havingStyle(i.sup()),r);l={elem:h,kern:Math.max(r.fontMetrics().bigOpSpacing1,r.fontMetrics().bigOpSpacing3-h.depth)}}if(n){var p=St(n,r.havingStyle(i.sub()),r);o={elem:p,kern:Math.max(r.fontMetrics().bigOpSpacing2,r.fontMetrics().bigOpSpacing4-p.height)}}if(l&&o){var m=r.fontMetrics().bigOpSpacing5+o.elem.height+o.elem.depth+o.kern+e.depth+a;u=Ke.makeVList({positionType:"bottom",positionData:m,children:[{type:"kern",size:r.fontMetrics().bigOpSpacing5},{type:"elem",elem:o.elem,marginLeft:-s+"em"},{type:"kern",size:o.kern},{type:"elem",elem:e},{type:"kern",size:l.kern},{type:"elem",elem:l.elem,marginLeft:s+"em"},{type:"kern",size:r.fontMetrics().bigOpSpacing5}]},r)}else if(o){var d=e.height-a;u=Ke.makeVList({positionType:"top",positionData:d,children:[{type:"kern",size:r.fontMetrics().bigOpSpacing5},{type:"elem",elem:o.elem,marginLeft:-s+"em"},{type:"kern",size:o.kern},{type:"elem",elem:e}]},r)}else{if(!l)return e;var g=e.depth+a;u=Ke.makeVList({positionType:"bottom",positionData:g,children:[{type:"elem",elem:e},{type:"kern",size:l.kern},{type:"elem",elem:l.elem,marginLeft:s+"em"},{type:"kern",size:r.fontMetrics().bigOpSpacing5}]},r)}var v=[u];if(o&&0!==s&&!c){var y=Ke.makeSpan(["mspace"],[],r);y.style.marginRight=s+"em",v.unshift(y)}return Ke.makeSpan(["mop","op-limits"],v,r)},cr=["\\smallint"],hr=function(e,t){var n,r,i,s=!1;"supsub"===e.type?(n=e.sup,r=e.sub,i=Gt(e.base,"op"),s=!0):i=Gt(e,"op");var a,o=t.style,u=!1;if(o.size===_.DISPLAY.size&&i.symbol&&!l(cr,i.name)&&(u=!0),i.symbol){var c=u?"Size2-Regular":"Size1-Regular",h="";if("\\oiint"!==i.name&&"\\oiiint"!==i.name||(h=i.name.substr(1),i.name="oiint"===h?"\\iint":"\\iiint"),a=Ke.makeSymbol(i.name,c,"math",t,["mop","op-symbol",u?"large-op":"small-op"]),h.length>0){var p=a.italic,f=Ke.staticSvg(h+"Size"+(u?"2":"1"),t);a=Ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:a,shift:0},{type:"elem",elem:f,shift:u?.08:0}]},t),i.name="\\"+h,a.classes.unshift("mop"),a.italic=p}}else if(i.body){var m=vt(i.body,t,!0);1===m.length&&m[0]instanceof z?(a=m[0]).classes[0]="mop":a=Ke.makeSpan(["mop"],m,t)}else{for(var d=[],g=1;g<i.name.length;g++)d.push(Ke.mathsym(i.name[g],i.mode,t));a=Ke.makeSpan(["mop"],d,t)}var v=0,y=0;return(a instanceof z||"\\oiint"===i.name||"\\oiiint"===i.name)&&!i.suppressBaseShift&&(v=(a.height-a.depth)/2-t.fontMetrics().axisHeight,y=a.italic),s?ur(a,n,r,t,o,y,v):(v&&(a.style.position="relative",a.style.top=v+"em"),a)},pr=function(e,t){var n;if(e.symbol)n=new At("mo",[Rt(e.name,e.mode)]),l(cr,e.name)&&n.setAttribute("largeop","false");else if(e.body)n=new At("mo",It(e.body,t));else{n=new At("mi",[new Lt(e.name.slice(1))]);var r=new At("mo",[Rt("⁡","text")]);n=e.parentIsSupSub?new At("mrow",[n,r]):Tt([n,r])}return n},fr={"∏":"\\prod","∐":"\\coprod","∑":"\\sum","⋀":"\\bigwedge","⋁":"\\bigvee","⋂":"\\bigcap","⋃":"\\bigcup","⨀":"\\bigodot","⨁":"\\bigoplus","⨂":"\\bigotimes","⨄":"\\biguplus","⨆":"\\bigsqcup"};lt({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","∏","∐","∑","⋀","⋁","⋂","⋃","⨀","⨁","⨂","⨄","⨆"],props:{numArgs:0},handler:function(e,t){var n=e.parser,r=e.funcName;return 1===r.length&&(r=fr[r]),{type:"op",mode:n.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:r}},htmlBuilder:hr,mathmlBuilder:pr}),lt({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:function(e,t){var n=e.parser,r=t[0];return{type:"op",mode:n.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:ht(r)}},htmlBuilder:hr,mathmlBuilder:pr});var mr={"∫":"\\int","∬":"\\iint","∭":"\\iiint","∮":"\\oint","∯":"\\oiint","∰":"\\oiiint"};lt({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler:function(e){var t=e.parser,n=e.funcName;return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:n}},htmlBuilder:hr,mathmlBuilder:pr}),lt({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler:function(e){var t=e.parser,n=e.funcName;return{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:n}},htmlBuilder:hr,mathmlBuilder:pr}),lt({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","∫","∬","∭","∮","∯","∰"],props:{numArgs:0},handler:function(e){var t=e.parser,n=e.funcName;return 1===n.length&&(n=mr[n]),{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:hr,mathmlBuilder:pr});var dr={};function gr(e,t){dr[e]=t}var vr=function(e,t){var n,r,i,s,a=!1;if("supsub"===e.type?(n=e.sup,r=e.sub,i=Gt(e.base,"operatorname"),a=!0):i=Gt(e,"operatorname"),i.body.length>0){for(var o=i.body.map((function(e){var t=e.text;return"string"==typeof t?{type:"textord",mode:e.mode,text:t}:e})),l=vt(o,t.withFont("mathrm"),!0),u=0;u<l.length;u++){var c=l[u];c instanceof z&&(c.text=c.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}s=Ke.makeSpan(["mop"],l,t)}else s=Ke.makeSpan(["mop"],[],t);return a?ur(s,n,r,t,t.style,0,0):s};function yr(e,t,n){for(var r=vt(e,t,!1),i=t.sizeMultiplier/n.sizeMultiplier,s=0;s<r.length;s++){var a=r[s].classes.indexOf("sizing");a<0?Array.prototype.push.apply(r[s].classes,t.sizingClasses(n)):r[s].classes[a+1]==="reset-size"+t.size&&(r[s].classes[a+1]="reset-size"+n.size),r[s].height*=i,r[s].depth*=i}return Ke.makeFragment(r)}lt({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:function(e,t){var n=e.parser,r=e.funcName,i=t[0];return{type:"operatorname",mode:n.mode,body:ht(i),alwaysHandleSupSub:"\\operatornamewithlimits"===r,limits:!1,parentIsSupSub:!1}},htmlBuilder:vr,mathmlBuilder:function(e,t){for(var n=It(e.body,t.withFont("mathrm")),r=!0,i=0;i<n.length;i++){var s=n[i];if(s instanceof Ct.SpaceNode);else if(s instanceof Ct.MathNode)switch(s.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":var a=s.children[0];1===s.children.length&&a instanceof Ct.TextNode?a.text=a.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):r=!1;break;default:r=!1}else r=!1}if(r){var o=n.map((function(e){return e.toText()})).join("");n=[new Ct.TextNode(o)]}var l=new Ct.MathNode("mi",n);l.setAttribute("mathvariant","normal");var u=new Ct.MathNode("mo",[Rt("⁡","text")]);return e.parentIsSupSub?new Ct.MathNode("mrow",[l,u]):Ct.newDocumentFragment([l,u])}}),gr("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@"),ut({type:"ordgroup",htmlBuilder:function(e,t){return e.semisimple?Ke.makeFragment(vt(e.body,t,!1)):Ke.makeSpan(["mord"],vt(e.body,t,!0),t)},mathmlBuilder:function(e,t){return Ot(e.body,t,!0)}}),lt({type:"overline",names:["\\overline"],props:{numArgs:1},handler:function(e,t){var n=e.parser,r=t[0];return{type:"overline",mode:n.mode,body:r}},htmlBuilder:function(e,t){var n=St(e.body,t.havingCrampedStyle()),r=Ke.makeLineSpan("overline-line",t),i=t.fontMetrics().defaultRuleThickness,s=Ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n},{type:"kern",size:3*i},{type:"elem",elem:r},{type:"kern",size:i}]},t);return Ke.makeSpan(["mord","overline"],[s],t)},mathmlBuilder:function(e,t){var n=new Ct.MathNode("mo",[new Ct.TextNode("‾")]);n.setAttribute("stretchy","true");var r=new Ct.MathNode("mover",[kt(e.body,t),n]);return r.setAttribute("accent","true"),r}}),lt({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:function(e,t){var n=e.parser,r=t[0];return{type:"phantom",mode:n.mode,body:ht(r)}},htmlBuilder:function(e,t){var n=vt(e.body,t.withPhantom(),!1);return Ke.makeFragment(n)},mathmlBuilder:function(e,t){var n=It(e.body,t);return new Ct.MathNode("mphantom",n)}}),lt({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:function(e,t){var n=e.parser,r=t[0];return{type:"hphantom",mode:n.mode,body:r}},htmlBuilder:function(e,t){var n=Ke.makeSpan([],[St(e.body,t.withPhantom())]);if(n.height=0,n.depth=0,n.children)for(var r=0;r<n.children.length;r++)n.children[r].height=0,n.children[r].depth=0;return n=Ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n}]},t),Ke.makeSpan(["mord"],[n],t)},mathmlBuilder:function(e,t){var n=It(ht(e.body),t),r=new Ct.MathNode("mphantom",n),i=new Ct.MathNode("mpadded",[r]);return i.setAttribute("height","0px"),i.setAttribute("depth","0px"),i}}),lt({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:function(e,t){var n=e.parser,r=t[0];return{type:"vphantom",mode:n.mode,body:r}},htmlBuilder:function(e,t){var n=Ke.makeSpan(["inner"],[St(e.body,t.withPhantom())]),r=Ke.makeSpan(["fix"],[]);return Ke.makeSpan(["mord","rlap"],[n,r],t)},mathmlBuilder:function(e,t){var n=It(ht(e.body),t),r=new Ct.MathNode("mphantom",n),i=new Ct.MathNode("mpadded",[r]);return i.setAttribute("width","0px"),i}}),lt({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler:function(e,t){var n=e.parser,r=Gt(t[0],"size").value,i=t[1];return{type:"raisebox",mode:n.mode,dy:r,body:i}},htmlBuilder:function(e,t){var n=St(e.body,t),r=He(e.dy,t);return Ke.makeVList({positionType:"shift",positionData:-r,children:[{type:"elem",elem:n}]},t)},mathmlBuilder:function(e,t){var n=new Ct.MathNode("mpadded",[kt(e.body,t)]),r=e.dy.number+e.dy.unit;return n.setAttribute("voffset",r),n}}),lt({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,argTypes:["size","size","size"]},handler:function(e,t,n){var r=e.parser,i=n[0],s=Gt(t[0],"size"),a=Gt(t[1],"size");return{type:"rule",mode:r.mode,shift:i&&Gt(i,"size").value,width:s.value,height:a.value}},htmlBuilder:function(e,t){var n=Ke.makeSpan(["mord","rule"],[],t),r=He(e.width,t),i=He(e.height,t),s=e.shift?He(e.shift,t):0;return n.style.borderRightWidth=r+"em",n.style.borderTopWidth=i+"em",n.style.bottom=s+"em",n.width=r,n.height=i+s,n.depth=-s,n.maxFontSize=1.125*i*t.sizeMultiplier,n},mathmlBuilder:function(e,t){var n=He(e.width,t),r=He(e.height,t),i=e.shift?He(e.shift,t):0,s=t.color&&t.getColor()||"black",a=new Ct.MathNode("mspace");a.setAttribute("mathbackground",s),a.setAttribute("width",n+"em"),a.setAttribute("height",r+"em");var o=new Ct.MathNode("mpadded",[a]);return i>=0?o.setAttribute("height","+"+i+"em"):(o.setAttribute("height",i+"em"),o.setAttribute("depth","+"+-i+"em")),o.setAttribute("voffset",i+"em"),o}});var wr=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"];lt({type:"sizing",names:wr,props:{numArgs:0,allowedInText:!0},handler:function(e,t){var n=e.breakOnTokenText,r=e.funcName,i=e.parser,s=i.parseExpression(!1,n);return{type:"sizing",mode:i.mode,size:wr.indexOf(r)+1,body:s}},htmlBuilder:function(e,t){var n=t.havingSize(e.size);return yr(e.body,n,t)},mathmlBuilder:function(e,t){var n=t.havingSize(e.size),r=It(e.body,n),i=new Ct.MathNode("mstyle",r);return i.setAttribute("mathsize",n.sizeMultiplier+"em"),i}}),lt({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:function(e,t,n){var r=e.parser,i=!1,s=!1,a=n[0]&&Gt(n[0],"ordgroup");if(a)for(var o="",l=0;l<a.body.length;++l)if("t"===(o=a.body[l].text))i=!0;else{if("b"!==o){i=!1,s=!1;break}s=!0}else i=!0,s=!0;var u=t[0];return{type:"smash",mode:r.mode,body:u,smashHeight:i,smashDepth:s}},htmlBuilder:function(e,t){var n=Ke.makeSpan([],[St(e.body,t)]);if(!e.smashHeight&&!e.smashDepth)return n;if(e.smashHeight&&(n.height=0,n.children))for(var r=0;r<n.children.length;r++)n.children[r].height=0;if(e.smashDepth&&(n.depth=0,n.children))for(var i=0;i<n.children.length;i++)n.children[i].depth=0;var s=Ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n}]},t);return Ke.makeSpan(["mord"],[s],t)},mathmlBuilder:function(e,t){var n=new Ct.MathNode("mpadded",[kt(e.body,t)]);return e.smashHeight&&n.setAttribute("height","0px"),e.smashDepth&&n.setAttribute("depth","0px"),n}}),lt({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler:function(e,t,n){var r=e.parser,i=n[0],s=t[0];return{type:"sqrt",mode:r.mode,body:s,index:i}},htmlBuilder:function(e,t){var n=St(e.body,t.havingCrampedStyle());0===n.height&&(n.height=t.fontMetrics().xHeight),n=Ke.wrapFragment(n,t);var r=t.fontMetrics().defaultRuleThickness,i=r;t.style.id<_.TEXT.id&&(i=t.fontMetrics().xHeight);var s=r+i/4,a=function(e,t){var n,r,i=t.havingBaseSizing(),s=En("\\surd",e*i.sizeMultiplier,Sn,i),a=i.sizeMultiplier,o=Math.max(0,t.minRuleThickness-t.fontMetrics().sqrtRuleThickness),l=0,u=0,c=0;return"small"===s.type?(e<1?a=1:e<1.4&&(a=.7),u=(1+o)/a,(n=gn("sqrtMain",l=(1+o+dn)/a,c=1e3+1e3*o+80,o,t)).style.minWidth="0.853em",r=.833/a):"large"===s.type?(c=1080*bn[s.size],u=(bn[s.size]+o)/a,l=(bn[s.size]+o+dn)/a,(n=gn("sqrtSize"+s.size,l,c,o,t)).style.minWidth="1.02em",r=1/a):(l=e+o+dn,u=e+o,c=Math.floor(1e3*e+o)+80,(n=gn("sqrtTall",l,c,o,t)).style.minWidth="0.742em",r=1.056),n.height=u,n.style.height=l+"em",{span:n,advanceWidth:r,ruleWidth:(t.fontMetrics().sqrtRuleThickness+o)*a}}(n.height+n.depth+s+r,t),o=a.span,l=a.ruleWidth,u=a.advanceWidth,c=o.height-l;c>n.height+n.depth+s&&(s=(s+c-n.height-n.depth)/2);var h=o.height-n.height-s-l;n.style.paddingLeft=u+"em";var p=Ke.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:-(n.height+h)},{type:"elem",elem:o},{type:"kern",size:l}]},t);if(e.index){var f=t.havingStyle(_.SCRIPTSCRIPT),m=St(e.index,f,t),d=.6*(p.height-p.depth),g=Ke.makeVList({positionType:"shift",positionData:-d,children:[{type:"elem",elem:m}]},t),v=Ke.makeSpan(["root"],[g]);return Ke.makeSpan(["mord","sqrt"],[v,p],t)}return Ke.makeSpan(["mord","sqrt"],[p],t)},mathmlBuilder:function(e,t){var n=e.body,r=e.index;return r?new Ct.MathNode("mroot",[kt(n,t),kt(r,t)]):new Ct.MathNode("msqrt",[kt(n,t)])}});var br={display:_.DISPLAY,text:_.TEXT,script:_.SCRIPT,scriptscript:_.SCRIPTSCRIPT};lt({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler:function(e,t){var n=e.breakOnTokenText,r=e.funcName,i=e.parser,s=i.parseExpression(!0,n),a=r.slice(1,r.length-5);return{type:"styling",mode:i.mode,style:a,body:s}},htmlBuilder:function(e,t){var n=br[e.style],r=t.havingStyle(n).withFont("");return yr(e.body,r,t)},mathmlBuilder:function(e,t){var n=br[e.style],r=t.havingStyle(n),i=It(e.body,r),s=new Ct.MathNode("mstyle",i),a={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]}[e.style];return s.setAttribute("scriptlevel",a[0]),s.setAttribute("displaystyle",a[1]),s}});ut({type:"supsub",htmlBuilder:function(e,t){var n=function(e,t){var n=e.base;return n?"op"===n.type?n.limits&&(t.style.size===_.DISPLAY.size||n.alwaysHandleSupSub)?hr:null:"operatorname"===n.type?n.alwaysHandleSupSub&&(t.style.size===_.DISPLAY.size||n.limits)?vr:null:"accent"===n.type?f(n.base)?jt:null:"horizBrace"===n.type&&!e.sub===n.isOver?ar:null:null}(e,t);if(n)return n(e,t);var r,i,s,a=e.base,o=e.sup,l=e.sub,u=St(a,t),c=t.fontMetrics(),h=0,p=0,m=a&&f(a);if(o){var d=t.havingStyle(t.style.sup());r=St(o,d,t),m||(h=u.height-d.fontMetrics().supDrop*d.sizeMultiplier/t.sizeMultiplier)}if(l){var g=t.havingStyle(t.style.sub());i=St(l,g,t),m||(p=u.depth+g.fontMetrics().subDrop*g.sizeMultiplier/t.sizeMultiplier)}s=t.style===_.DISPLAY?c.sup1:t.style.cramped?c.sup3:c.sup2;var v,y=t.sizeMultiplier,w=.5/c.ptPerEm/y+"em",b=null;if(i){var x=e.base&&"op"===e.base.type&&e.base.name&&("\\oiint"===e.base.name||"\\oiiint"===e.base.name);(u instanceof z||x)&&(b=-u.italic+"em")}if(r&&i){h=Math.max(h,s,r.depth+.25*c.xHeight),p=Math.max(p,c.sub2);var M=4*c.defaultRuleThickness;if(h-r.depth-(i.height-p)<M){p=M-(h-r.depth)+i.height;var S=.8*c.xHeight-(h-r.depth);S>0&&(h+=S,p-=S)}v=Ke.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:p,marginRight:w,marginLeft:b},{type:"elem",elem:r,shift:-h,marginRight:w}]},t)}else if(i){p=Math.max(p,c.sub1,i.height-.8*c.xHeight),v=Ke.makeVList({positionType:"shift",positionData:p,children:[{type:"elem",elem:i,marginLeft:b,marginRight:w}]},t)}else{if(!r)throw new Error("supsub must have either sup or sub.");h=Math.max(h,s,r.depth+.25*c.xHeight),v=Ke.makeVList({positionType:"shift",positionData:-h,children:[{type:"elem",elem:r,marginRight:w}]},t)}var E=xt(u,"right")||"mord";return Ke.makeSpan([E],[u,Ke.makeSpan(["msupsub"],[v])],t)},mathmlBuilder:function(e,t){var n,r=!1;e.base&&"horizBrace"===e.base.type&&!!e.sup===e.base.isOver&&(r=!0,n=e.base.isOver),!e.base||"op"!==e.base.type&&"operatorname"!==e.base.type||(e.base.parentIsSupSub=!0);var i,s=[kt(e.base,t)];if(e.sub&&s.push(kt(e.sub,t)),e.sup&&s.push(kt(e.sup,t)),r)i=n?"mover":"munder";else if(e.sub)if(e.sup){var a=e.base;i=a&&"op"===a.type&&a.limits&&t.style===_.DISPLAY||a&&"operatorname"===a.type&&a.alwaysHandleSupSub&&(t.style===_.DISPLAY||a.limits)?"munderover":"msubsup"}else{var o=e.base;i=o&&"op"===o.type&&o.limits&&(t.style===_.DISPLAY||o.alwaysHandleSupSub)||o&&"operatorname"===o.type&&o.alwaysHandleSupSub&&(o.limits||t.style===_.DISPLAY)?"munder":"msub"}else{var l=e.base;i=l&&"op"===l.type&&l.limits&&(t.style===_.DISPLAY||l.alwaysHandleSupSub)||l&&"operatorname"===l.type&&l.alwaysHandleSupSub&&(l.limits||t.style===_.DISPLAY)?"mover":"msup"}return new Ct.MathNode(i,s)}}),ut({type:"atom",htmlBuilder:function(e,t){return Ke.mathsym(e.text,e.mode,t,["m"+e.family])},mathmlBuilder:function(e,t){var n=new Ct.MathNode("mo",[Rt(e.text,e.mode)]);if("bin"===e.family){var r=Pt(e,t);"bold-italic"===r&&n.setAttribute("mathvariant",r)}else"punct"===e.family?n.setAttribute("separator","true"):"open"!==e.family&&"close"!==e.family||n.setAttribute("stretchy","false");return n}});var xr={mi:"italic",mn:"normal",mtext:"normal"};ut({type:"mathord",htmlBuilder:function(e,t){return Ke.makeOrd(e,t,"mathord")},mathmlBuilder:function(e,t){var n=new Ct.MathNode("mi",[Rt(e.text,e.mode,t)]),r=Pt(e,t)||"italic";return r!==xr[n.type]&&n.setAttribute("mathvariant",r),n}}),ut({type:"textord",htmlBuilder:function(e,t){return Ke.makeOrd(e,t,"textord")},mathmlBuilder:function(e,t){var n,r=Rt(e.text,e.mode,t),i=Pt(e,t)||"normal";return n="text"===e.mode?new Ct.MathNode("mtext",[r]):/[0-9]/.test(e.text)?new Ct.MathNode("mn",[r]):"\\prime"===e.text?new Ct.MathNode("mo",[r]):new Ct.MathNode("mi",[r]),i!==xr[n.type]&&n.setAttribute("mathvariant",i),n}});var Mr={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},Sr={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};ut({type:"spacing",htmlBuilder:function(e,t){if(Sr.hasOwnProperty(e.text)){var n=Sr[e.text].className||"";if("text"===e.mode){var i=Ke.makeOrd(e,t,"textord");return i.classes.push(n),i}return Ke.makeSpan(["mspace",n],[Ke.mathsym(e.text,e.mode,t)],t)}if(Mr.hasOwnProperty(e.text))return Ke.makeSpan(["mspace",Mr[e.text]],[],t);throw new r('Unknown type of space "'+e.text+'"')},mathmlBuilder:function(e,t){if(!Sr.hasOwnProperty(e.text)){if(Mr.hasOwnProperty(e.text))return new Ct.MathNode("mspace");throw new r('Unknown type of space "'+e.text+'"')}return new Ct.MathNode("mtext",[new Ct.TextNode(" ")])}});var _r=function(){var e=new Ct.MathNode("mtd",[]);return e.setAttribute("width","50%"),e};ut({type:"tag",mathmlBuilder:function(e,t){var n=new Ct.MathNode("mtable",[new Ct.MathNode("mtr",[_r(),new Ct.MathNode("mtd",[Ot(e.body,t)]),_r(),new Ct.MathNode("mtd",[Ot(e.tag,t)])])]);return n.setAttribute("width","100%"),n}});var Er={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},Tr={"\\textbf":"textbf","\\textmd":"textmd"},Ar={"\\textit":"textit","\\textup":"textup"},Lr=function(e,t){var n=e.font;return n?Er[n]?t.withTextFontFamily(Er[n]):Tr[n]?t.withTextFontWeight(Tr[n]):t.withTextFontShape(Ar[n]):t};lt({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler:function(e,t){var n=e.parser,r=e.funcName,i=t[0];return{type:"text",mode:n.mode,body:ht(i),font:r}},htmlBuilder:function(e,t){var n=Lr(e,t),r=vt(e.body,n,!0);return Ke.makeSpan(["mord","text"],r,n)},mathmlBuilder:function(e,t){var n=Lr(e,t);return Ot(e.body,n)}}),lt({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler:function(e,t){return{type:"underline",mode:e.parser.mode,body:t[0]}},htmlBuilder:function(e,t){var n=St(e.body,t),r=Ke.makeLineSpan("underline-line",t),i=t.fontMetrics().defaultRuleThickness,s=Ke.makeVList({positionType:"top",positionData:n.height,children:[{type:"kern",size:i},{type:"elem",elem:r},{type:"kern",size:3*i},{type:"elem",elem:n}]},t);return Ke.makeSpan(["mord","underline"],[s],t)},mathmlBuilder:function(e,t){var n=new Ct.MathNode("mo",[new Ct.TextNode("‾")]);n.setAttribute("stretchy","true");var r=new Ct.MathNode("munder",[kt(e.body,t),n]);return r.setAttribute("accentunder","true"),r}}),lt({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler:function(e,t){return{type:"vcenter",mode:e.parser.mode,body:t[0]}},htmlBuilder:function(e,t){var n=St(e.body,t),r=t.fontMetrics().axisHeight,i=.5*(n.height-r-(n.depth+r));return Ke.makeVList({positionType:"shift",positionData:i,children:[{type:"elem",elem:n}]},t)},mathmlBuilder:function(e,t){return new Ct.MathNode("mpadded",[kt(e.body,t)],["vcenter"])}}),lt({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler:function(e,t,n){throw new r("\\verb ended by end of line instead of matching delimiter")},htmlBuilder:function(e,t){for(var n=Cr(e),r=[],i=t.havingStyle(t.style.text()),s=0;s<n.length;s++){var a=n[s];"~"===a&&(a="\\textasciitilde"),r.push(Ke.makeSymbol(a,"Typewriter-Regular",e.mode,i,["mord","texttt"]))}return Ke.makeSpan(["mord","text"].concat(i.sizingClasses(t)),Ke.tryCombineChars(r),i)},mathmlBuilder:function(e,t){var n=new Ct.TextNode(Cr(e)),r=new Ct.MathNode("mtext",[n]);return r.setAttribute("mathvariant","monospace"),r}});var Cr=function(e){return e.body.replace(/ /g,e.star?"␣":" ")},Rr=st,Nr=function(){function e(e,t,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=t,this.end=n}return e.range=function(t,n){return n?t&&t.loc&&n.loc&&t.loc.lexer===n.loc.lexer?new e(t.loc.lexer,t.loc.start,n.loc.end):null:t&&t.loc},e}(),Pr=function(){function e(e,t){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=t}return e.prototype.range=function(t,n){return new e(n,Nr.range(this,t))},e}(),Ir=new RegExp("[̀-ͯ]+$"),Or=function(){function e(e,t){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=t,this.tokenRegex=new RegExp("([ \r\n\t]+)|\\\\(\n|[ \r\t]+\n?)[ \r\t]*|([!-\\[\\]-‧‪-퟿豈-￿][̀-ͯ]*|[\ud800-\udbff][\udc00-\udfff][̀-ͯ]*|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5|(\\\\[a-zA-Z@]+)[ \r\n\t]*|\\\\[^\ud800-\udfff])","g"),this.catcodes={"%":14,"~":13}}var t=e.prototype;return t.setCatcode=function(e,t){this.catcodes[e]=t},t.lex=function(){var e=this.input,t=this.tokenRegex.lastIndex;if(t===e.length)return new Pr("EOF",new Nr(this,t,t));var n=this.tokenRegex.exec(e);if(null===n||n.index!==t)throw new r("Unexpected character: '"+e[t]+"'",new Pr(e[t],new Nr(this,t,t+1)));var i=n[6]||n[3]||(n[2]?"\\ ":" ");if(14===this.catcodes[i]){var s=e.indexOf("\n",this.tokenRegex.lastIndex);return-1===s?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=s+1,this.lex()}return new Pr(i,new Nr(this,t,this.tokenRegex.lastIndex))},e}(),kr=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=t,this.builtins=e,this.undefStack=[]}var t=e.prototype;return t.beginGroup=function(){this.undefStack.push({})},t.endGroup=function(){if(0===this.undefStack.length)throw new r("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var t in e)e.hasOwnProperty(t)&&(void 0===e[t]?delete this.current[t]:this.current[t]=e[t])},t.endGroups=function(){for(;this.undefStack.length>0;)this.endGroup()},t.has=function(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)},t.get=function(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]},t.set=function(e,t,n){if(void 0===n&&(n=!1),n){for(var r=0;r<this.undefStack.length;r++)delete this.undefStack[r][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=t)}else{var i=this.undefStack[this.undefStack.length-1];i&&!i.hasOwnProperty(e)&&(i[e]=this.current[e])}this.current[e]=t},e}(),Dr=dr;gr("\\noexpand",(function(e){var t=e.popToken();return e.isExpandable(t.text)&&(t.noexpand=!0,t.treatAsRelax=!0),{tokens:[t],numArgs:0}})),gr("\\expandafter",(function(e){var t=e.popToken();return e.expandOnce(!0),{tokens:[t],numArgs:0}})),gr("\\@firstoftwo",(function(e){return{tokens:e.consumeArgs(2)[0],numArgs:0}})),gr("\\@secondoftwo",(function(e){return{tokens:e.consumeArgs(2)[1],numArgs:0}})),gr("\\@ifnextchar",(function(e){var t=e.consumeArgs(3);e.consumeSpaces();var n=e.future();return 1===t[0].length&&t[0][0].text===n.text?{tokens:t[1],numArgs:0}:{tokens:t[2],numArgs:0}})),gr("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}"),gr("\\TextOrMath",(function(e){var t=e.consumeArgs(2);return"text"===e.mode?{tokens:t[0],numArgs:0}:{tokens:t[1],numArgs:0}}));var Ur={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};gr("\\char",(function(e){var t,n=e.popToken(),i="";if("'"===n.text)t=8,n=e.popToken();else if('"'===n.text)t=16,n=e.popToken();else if("`"===n.text)if("\\"===(n=e.popToken()).text[0])i=n.text.charCodeAt(1);else{if("EOF"===n.text)throw new r("\\char` missing argument");i=n.text.charCodeAt(0)}else t=10;if(t){if(null==(i=Ur[n.text])||i>=t)throw new r("Invalid base-"+t+" digit "+n.text);for(var s;null!=(s=Ur[e.future().text])&&s<t;)i*=t,i+=s,e.popToken()}return"\\@char{"+i+"}"}));var zr=function(e,t,n){var i=e.consumeArg().tokens;if(1!==i.length)throw new r("\\newcommand's first argument must be a macro name");var s=i[0].text,a=e.isDefined(s);if(a&&!t)throw new r("\\newcommand{"+s+"} attempting to redefine "+s+"; use \\renewcommand");if(!a&&!n)throw new r("\\renewcommand{"+s+"} when command "+s+" does not yet exist; use \\newcommand");var o=0;if(1===(i=e.consumeArg().tokens).length&&"["===i[0].text){for(var l="",u=e.expandNextToken();"]"!==u.text&&"EOF"!==u.text;)l+=u.text,u=e.expandNextToken();if(!l.match(/^\s*[0-9]+\s*$/))throw new r("Invalid number of arguments: "+l);o=parseInt(l),i=e.consumeArg().tokens}return e.macros.set(s,{tokens:i,numArgs:o}),""};gr("\\newcommand",(function(e){return zr(e,!1,!0)})),gr("\\renewcommand",(function(e){return zr(e,!0,!1)})),gr("\\providecommand",(function(e){return zr(e,!0,!0)})),gr("\\message",(function(e){var t=e.consumeArgs(1)[0];return console.log(t.reverse().map((function(e){return e.text})).join("")),""})),gr("\\errmessage",(function(e){var t=e.consumeArgs(1)[0];return console.error(t.reverse().map((function(e){return e.text})).join("")),""})),gr("\\show",(function(e){var t=e.popToken(),n=t.text;return console.log(t,e.macros.get(n),Rr[n],$.math[n],$.text[n]),""})),gr("\\bgroup","{"),gr("\\egroup","}"),gr("~","\\nobreakspace"),gr("\\lq","`"),gr("\\rq","'"),gr("\\aa","\\r a"),gr("\\AA","\\r A"),gr("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`©}"),gr("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}"),gr("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`®}"),gr("ℬ","\\mathscr{B}"),gr("ℰ","\\mathscr{E}"),gr("ℱ","\\mathscr{F}"),gr("ℋ","\\mathscr{H}"),gr("ℐ","\\mathscr{I}"),gr("ℒ","\\mathscr{L}"),gr("ℳ","\\mathscr{M}"),gr("ℛ","\\mathscr{R}"),gr("ℭ","\\mathfrak{C}"),gr("ℌ","\\mathfrak{H}"),gr("ℨ","\\mathfrak{Z}"),gr("\\Bbbk","\\Bbb{k}"),gr("·","\\cdotp"),gr("\\llap","\\mathllap{\\textrm{#1}}"),gr("\\rlap","\\mathrlap{\\textrm{#1}}"),gr("\\clap","\\mathclap{\\textrm{#1}}"),gr("\\mathstrut","\\vphantom{(}"),gr("\\underbar","\\underline{\\text{#1}}"),gr("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}'),gr("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`≠}}"),gr("\\ne","\\neq"),gr("≠","\\neq"),gr("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`∉}}"),gr("∉","\\notin"),gr("≘","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`≘}}"),gr("≙","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`≘}}"),gr("≚","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`≚}}"),gr("≛","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`≛}}"),gr("≝","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`≝}}"),gr("≞","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`≞}}"),gr("≟","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`≟}}"),gr("⟂","\\perp"),gr("‼","\\mathclose{!\\mkern-0.8mu!}"),gr("∌","\\notni"),gr("⌜","\\ulcorner"),gr("⌝","\\urcorner"),gr("⌞","\\llcorner"),gr("⌟","\\lrcorner"),gr("©","\\copyright"),gr("®","\\textregistered"),gr("️","\\textregistered"),gr("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}'),gr("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}'),gr("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}'),gr("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}'),gr("\\vdots","\\mathord{\\varvdots\\rule{0pt}{15pt}}"),gr("⋮","\\vdots"),gr("\\varGamma","\\mathit{\\Gamma}"),gr("\\varDelta","\\mathit{\\Delta}"),gr("\\varTheta","\\mathit{\\Theta}"),gr("\\varLambda","\\mathit{\\Lambda}"),gr("\\varXi","\\mathit{\\Xi}"),gr("\\varPi","\\mathit{\\Pi}"),gr("\\varSigma","\\mathit{\\Sigma}"),gr("\\varUpsilon","\\mathit{\\Upsilon}"),gr("\\varPhi","\\mathit{\\Phi}"),gr("\\varPsi","\\mathit{\\Psi}"),gr("\\varOmega","\\mathit{\\Omega}"),gr("\\substack","\\begin{subarray}{c}#1\\end{subarray}"),gr("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu"),gr("\\boxed","\\fbox{$\\displaystyle{#1}$}"),gr("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;"),gr("\\implies","\\DOTSB\\;\\Longrightarrow\\;"),gr("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");var Br={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};gr("\\dots",(function(e){var t="\\dotso",n=e.expandAfterFuture().text;return n in Br?t=Br[n]:("\\not"===n.substr(0,4)||n in $.math&&l(["bin","rel"],$.math[n].group))&&(t="\\dotsb"),t}));var Fr={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};gr("\\dotso",(function(e){return e.future().text in Fr?"\\ldots\\,":"\\ldots"})),gr("\\dotsc",(function(e){var t=e.future().text;return t in Fr&&","!==t?"\\ldots\\,":"\\ldots"})),gr("\\cdots",(function(e){return e.future().text in Fr?"\\@cdots\\,":"\\@cdots"})),gr("\\dotsb","\\cdots"),gr("\\dotsm","\\cdots"),gr("\\dotsi","\\!\\cdots"),gr("\\dotsx","\\ldots\\,"),gr("\\DOTSI","\\relax"),gr("\\DOTSB","\\relax"),gr("\\DOTSX","\\relax"),gr("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax"),gr("\\,","\\tmspace+{3mu}{.1667em}"),gr("\\thinspace","\\,"),gr("\\>","\\mskip{4mu}"),gr("\\:","\\tmspace+{4mu}{.2222em}"),gr("\\medspace","\\:"),gr("\\;","\\tmspace+{5mu}{.2777em}"),gr("\\thickspace","\\;"),gr("\\!","\\tmspace-{3mu}{.1667em}"),gr("\\negthinspace","\\!"),gr("\\negmedspace","\\tmspace-{4mu}{.2222em}"),gr("\\negthickspace","\\tmspace-{5mu}{.277em}"),gr("\\enspace","\\kern.5em "),gr("\\enskip","\\hskip.5em\\relax"),gr("\\quad","\\hskip1em\\relax"),gr("\\qquad","\\hskip2em\\relax"),gr("\\tag","\\@ifstar\\tag@literal\\tag@paren"),gr("\\tag@paren","\\tag@literal{({#1})}"),gr("\\tag@literal",(function(e){if(e.macros.get("\\df@tag"))throw new r("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"})),gr("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}"),gr("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)"),gr("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}"),gr("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1"),gr("\\pmb","\\html@mathml{\\@binrel{#1}{\\mathrlap{#1}\\kern0.5px#1}}{\\mathbf{#1}}"),gr("\\newline","\\\\\\relax"),gr("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var qr=G["Main-Regular"]["T".charCodeAt(0)][1]-.7*G["Main-Regular"]["A".charCodeAt(0)][1]+"em";gr("\\LaTeX","\\textrm{\\html@mathml{L\\kern-.36em\\raisebox{"+qr+"}{\\scriptstyle A}\\kern-.15em\\TeX}{LaTeX}}"),gr("\\KaTeX","\\textrm{\\html@mathml{K\\kern-.17em\\raisebox{"+qr+"}{\\scriptstyle A}\\kern-.15em\\TeX}{KaTeX}}"),gr("\\hspace","\\@ifstar\\@hspacer\\@hspace"),gr("\\@hspace","\\hskip #1\\relax"),gr("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax"),gr("\\ordinarycolon",":"),gr("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}"),gr("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}'),gr("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}'),gr("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}'),gr("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}'),gr("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}'),gr("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}'),gr("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}'),gr("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}'),gr("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}'),gr("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}'),gr("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}'),gr("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}'),gr("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}'),gr("∷","\\dblcolon"),gr("∹","\\eqcolon"),gr("≔","\\coloneqq"),gr("≕","\\eqqcolon"),gr("⩴","\\Coloneqq"),gr("\\ratio","\\vcentcolon"),gr("\\coloncolon","\\dblcolon"),gr("\\colonequals","\\coloneqq"),gr("\\coloncolonequals","\\Coloneqq"),gr("\\equalscolon","\\eqqcolon"),gr("\\equalscoloncolon","\\Eqqcolon"),gr("\\colonminus","\\coloneq"),gr("\\coloncolonminus","\\Coloneq"),gr("\\minuscolon","\\eqcolon"),gr("\\minuscoloncolon","\\Eqcolon"),gr("\\coloncolonapprox","\\Colonapprox"),gr("\\coloncolonsim","\\Colonsim"),gr("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),gr("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}"),gr("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),gr("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}"),gr("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`∌}}"),gr("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}"),gr("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}"),gr("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}"),gr("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}"),gr("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}"),gr("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}"),gr("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}"),gr("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}"),gr("\\gvertneqq","\\html@mathml{\\@gvertneqq}{≩}"),gr("\\lvertneqq","\\html@mathml{\\@lvertneqq}{≨}"),gr("\\ngeqq","\\html@mathml{\\@ngeqq}{≱}"),gr("\\ngeqslant","\\html@mathml{\\@ngeqslant}{≱}"),gr("\\nleqq","\\html@mathml{\\@nleqq}{≰}"),gr("\\nleqslant","\\html@mathml{\\@nleqslant}{≰}"),gr("\\nshortmid","\\html@mathml{\\@nshortmid}{∤}"),gr("\\nshortparallel","\\html@mathml{\\@nshortparallel}{∦}"),gr("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{⊈}"),gr("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{⊉}"),gr("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{⊊}"),gr("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{⫋}"),gr("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{⊋}"),gr("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{⫌}"),gr("\\imath","\\html@mathml{\\@imath}{ı}"),gr("\\jmath","\\html@mathml{\\@jmath}{ȷ}"),gr("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`⟦}}"),gr("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`⟧}}"),gr("⟦","\\llbracket"),gr("⟧","\\rrbracket"),gr("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`⦃}}"),gr("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`⦄}}"),gr("⦃","\\lBrace"),gr("⦄","\\rBrace"),gr("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`⦵}}"),gr("⦵","\\minuso"),gr("\\darr","\\downarrow"),gr("\\dArr","\\Downarrow"),gr("\\Darr","\\Downarrow"),gr("\\lang","\\langle"),gr("\\rang","\\rangle"),gr("\\uarr","\\uparrow"),gr("\\uArr","\\Uparrow"),gr("\\Uarr","\\Uparrow"),gr("\\N","\\mathbb{N}"),gr("\\R","\\mathbb{R}"),gr("\\Z","\\mathbb{Z}"),gr("\\alef","\\aleph"),gr("\\alefsym","\\aleph"),gr("\\Alpha","\\mathrm{A}"),gr("\\Beta","\\mathrm{B}"),gr("\\bull","\\bullet"),gr("\\Chi","\\mathrm{X}"),gr("\\clubs","\\clubsuit"),gr("\\cnums","\\mathbb{C}"),gr("\\Complex","\\mathbb{C}"),gr("\\Dagger","\\ddagger"),gr("\\diamonds","\\diamondsuit"),gr("\\empty","\\emptyset"),gr("\\Epsilon","\\mathrm{E}"),gr("\\Eta","\\mathrm{H}"),gr("\\exist","\\exists"),gr("\\harr","\\leftrightarrow"),gr("\\hArr","\\Leftrightarrow"),gr("\\Harr","\\Leftrightarrow"),gr("\\hearts","\\heartsuit"),gr("\\image","\\Im"),gr("\\infin","\\infty"),gr("\\Iota","\\mathrm{I}"),gr("\\isin","\\in"),gr("\\Kappa","\\mathrm{K}"),gr("\\larr","\\leftarrow"),gr("\\lArr","\\Leftarrow"),gr("\\Larr","\\Leftarrow"),gr("\\lrarr","\\leftrightarrow"),gr("\\lrArr","\\Leftrightarrow"),gr("\\Lrarr","\\Leftrightarrow"),gr("\\Mu","\\mathrm{M}"),gr("\\natnums","\\mathbb{N}"),gr("\\Nu","\\mathrm{N}"),gr("\\Omicron","\\mathrm{O}"),gr("\\plusmn","\\pm"),gr("\\rarr","\\rightarrow"),gr("\\rArr","\\Rightarrow"),gr("\\Rarr","\\Rightarrow"),gr("\\real","\\Re"),gr("\\reals","\\mathbb{R}"),gr("\\Reals","\\mathbb{R}"),gr("\\Rho","\\mathrm{P}"),gr("\\sdot","\\cdot"),gr("\\sect","\\S"),gr("\\spades","\\spadesuit"),gr("\\sub","\\subset"),gr("\\sube","\\subseteq"),gr("\\supe","\\supseteq"),gr("\\Tau","\\mathrm{T}"),gr("\\thetasym","\\vartheta"),gr("\\weierp","\\wp"),gr("\\Zeta","\\mathrm{Z}"),gr("\\argmin","\\DOTSB\\operatorname*{arg\\,min}"),gr("\\argmax","\\DOTSB\\operatorname*{arg\\,max}"),gr("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits"),gr("\\bra","\\mathinner{\\langle{#1}|}"),gr("\\ket","\\mathinner{|{#1}\\rangle}"),gr("\\braket","\\mathinner{\\langle{#1}\\rangle}"),gr("\\Bra","\\left\\langle#1\\right|"),gr("\\Ket","\\left|#1\\right\\rangle"),gr("\\angln","{\\angl n}"),gr("\\blue","\\textcolor{##6495ed}{#1}"),gr("\\orange","\\textcolor{##ffa500}{#1}"),gr("\\pink","\\textcolor{##ff00af}{#1}"),gr("\\red","\\textcolor{##df0030}{#1}"),gr("\\green","\\textcolor{##28ae7b}{#1}"),gr("\\gray","\\textcolor{gray}{#1}"),gr("\\purple","\\textcolor{##9d38bd}{#1}"),gr("\\blueA","\\textcolor{##ccfaff}{#1}"),gr("\\blueB","\\textcolor{##80f6ff}{#1}"),gr("\\blueC","\\textcolor{##63d9ea}{#1}"),gr("\\blueD","\\textcolor{##11accd}{#1}"),gr("\\blueE","\\textcolor{##0c7f99}{#1}"),gr("\\tealA","\\textcolor{##94fff5}{#1}"),gr("\\tealB","\\textcolor{##26edd5}{#1}"),gr("\\tealC","\\textcolor{##01d1c1}{#1}"),gr("\\tealD","\\textcolor{##01a995}{#1}"),gr("\\tealE","\\textcolor{##208170}{#1}"),gr("\\greenA","\\textcolor{##b6ffb0}{#1}"),gr("\\greenB","\\textcolor{##8af281}{#1}"),gr("\\greenC","\\textcolor{##74cf70}{#1}"),gr("\\greenD","\\textcolor{##1fab54}{#1}"),gr("\\greenE","\\textcolor{##0d923f}{#1}"),gr("\\goldA","\\textcolor{##ffd0a9}{#1}"),gr("\\goldB","\\textcolor{##ffbb71}{#1}"),gr("\\goldC","\\textcolor{##ff9c39}{#1}"),gr("\\goldD","\\textcolor{##e07d10}{#1}"),gr("\\goldE","\\textcolor{##a75a05}{#1}"),gr("\\redA","\\textcolor{##fca9a9}{#1}"),gr("\\redB","\\textcolor{##ff8482}{#1}"),gr("\\redC","\\textcolor{##f9685d}{#1}"),gr("\\redD","\\textcolor{##e84d39}{#1}"),gr("\\redE","\\textcolor{##bc2612}{#1}"),gr("\\maroonA","\\textcolor{##ffbde0}{#1}"),gr("\\maroonB","\\textcolor{##ff92c6}{#1}"),gr("\\maroonC","\\textcolor{##ed5fa6}{#1}"),gr("\\maroonD","\\textcolor{##ca337c}{#1}"),gr("\\maroonE","\\textcolor{##9e034e}{#1}"),gr("\\purpleA","\\textcolor{##ddd7ff}{#1}"),gr("\\purpleB","\\textcolor{##c6b9fc}{#1}"),gr("\\purpleC","\\textcolor{##aa87ff}{#1}"),gr("\\purpleD","\\textcolor{##7854ab}{#1}"),gr("\\purpleE","\\textcolor{##543b78}{#1}"),gr("\\mintA","\\textcolor{##f5f9e8}{#1}"),gr("\\mintB","\\textcolor{##edf2df}{#1}"),gr("\\mintC","\\textcolor{##e0e5cc}{#1}"),gr("\\grayA","\\textcolor{##f6f7f7}{#1}"),gr("\\grayB","\\textcolor{##f0f1f2}{#1}"),gr("\\grayC","\\textcolor{##e3e5e6}{#1}"),gr("\\grayD","\\textcolor{##d6d8da}{#1}"),gr("\\grayE","\\textcolor{##babec2}{#1}"),gr("\\grayF","\\textcolor{##888d93}{#1}"),gr("\\grayG","\\textcolor{##626569}{#1}"),gr("\\grayH","\\textcolor{##3b3e40}{#1}"),gr("\\grayI","\\textcolor{##21242c}{#1}"),gr("\\kaBlue","\\textcolor{##314453}{#1}"),gr("\\kaGreen","\\textcolor{##71B307}{#1}");var Hr={"\\relax":!0,"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0},Gr=function(){function e(e,t,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=t,this.expansionCount=0,this.feed(e),this.macros=new kr(Dr,t.macros),this.mode=n,this.stack=[]}var t=e.prototype;return t.feed=function(e){this.lexer=new Or(e,this.settings)},t.switchMode=function(e){this.mode=e},t.beginGroup=function(){this.macros.beginGroup()},t.endGroup=function(){this.macros.endGroup()},t.endGroups=function(){this.macros.endGroups()},t.future=function(){return 0===this.stack.length&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]},t.popToken=function(){return this.future(),this.stack.pop()},t.pushToken=function(e){this.stack.push(e)},t.pushTokens=function(e){var t;(t=this.stack).push.apply(t,e)},t.scanArgument=function(e){var t,n,r;if(e){if(this.consumeSpaces(),"["!==this.future().text)return null;t=this.popToken();var i=this.consumeArg(["]"]);r=i.tokens,n=i.end}else{var s=this.consumeArg();r=s.tokens,t=s.start,n=s.end}return this.pushToken(new Pr("EOF",n.loc)),this.pushTokens(r),t.range(n,"")},t.consumeSpaces=function(){for(;" "===this.future().text;)this.stack.pop()},t.consumeArg=function(e){var t=[],n=e&&e.length>0;n||this.consumeSpaces();var i,s=this.future(),a=0,o=0;do{if(i=this.popToken(),t.push(i),"{"===i.text)++a;else if("}"===i.text){if(-1==--a)throw new r("Extra }",i)}else if("EOF"===i.text)throw new r("Unexpected end of input in a macro argument, expected '"+(e&&n?e[o]:"}")+"'",i);if(e&&n)if((0===a||1===a&&"{"===e[o])&&i.text===e[o]){if(++o===e.length){t.splice(-o,o);break}}else o=0}while(0!==a||n);return"{"===s.text&&"}"===t[t.length-1].text&&(t.pop(),t.shift()),t.reverse(),{tokens:t,start:s,end:i}},t.consumeArgs=function(e,t){if(t){if(t.length!==e+1)throw new r("The length of delimiters doesn't match the number of args!");for(var n=t[0],i=0;i<n.length;i++){var s=this.popToken();if(n[i]!==s.text)throw new r("Use of the macro doesn't match its definition",s)}}for(var a=[],o=0;o<e;o++)a.push(this.consumeArg(t&&t[o+1]).tokens);return a},t.expandOnce=function(e){var t=this.popToken(),n=t.text,i=t.noexpand?null:this._getExpansion(n);if(null==i||e&&i.unexpandable){if(e&&null==i&&"\\"===n[0]&&!this.isDefined(n))throw new r("Undefined control sequence: "+n);return this.pushToken(t),t}if(this.expansionCount++,this.expansionCount>this.settings.maxExpand)throw new r("Too many expansions: infinite loop or need to increase maxExpand setting");var s=i.tokens,a=this.consumeArgs(i.numArgs,i.delimiters);if(i.numArgs)for(var o=(s=s.slice()).length-1;o>=0;--o){var l=s[o];if("#"===l.text){if(0===o)throw new r("Incomplete placeholder at end of macro body",l);if("#"===(l=s[--o]).text)s.splice(o+1,1);else{if(!/^[1-9]$/.test(l.text))throw new r("Not a valid argument number",l);var u;(u=s).splice.apply(u,[o,2].concat(a[+l.text-1]))}}}return this.pushTokens(s),s},t.expandAfterFuture=function(){return this.expandOnce(),this.future()},t.expandNextToken=function(){for(;;){var e=this.expandOnce();if(e instanceof Pr){if("\\relax"!==e.text&&!e.treatAsRelax)return this.stack.pop();this.stack.pop()}}throw new Error},t.expandMacro=function(e){return this.macros.has(e)?this.expandTokens([new Pr(e)]):void 0},t.expandTokens=function(e){var t=[],n=this.stack.length;for(this.pushTokens(e);this.stack.length>n;){var r=this.expandOnce(!0);r instanceof Pr&&(r.treatAsRelax&&(r.noexpand=!1,r.treatAsRelax=!1),t.push(this.stack.pop()))}return t},t.expandMacroAsText=function(e){var t=this.expandMacro(e);return t?t.map((function(e){return e.text})).join(""):t},t._getExpansion=function(e){var t=this.macros.get(e);if(null==t)return t;if(1===e.length){var n=this.lexer.catcodes[e];if(null!=n&&13!==n)return}var r="function"==typeof t?t(this):t;if("string"==typeof r){var i=0;if(-1!==r.indexOf("#"))for(var s=r.replace(/##/g,"");-1!==s.indexOf("#"+(i+1));)++i;for(var a=new Or(r,this.settings),o=[],l=a.lex();"EOF"!==l.text;)o.push(l),l=a.lex();return o.reverse(),{tokens:o,numArgs:i}}return r},t.isDefined=function(e){return this.macros.has(e)||Rr.hasOwnProperty(e)||$.math.hasOwnProperty(e)||$.text.hasOwnProperty(e)||Hr.hasOwnProperty(e)},t.isExpandable=function(e){var t=this.macros.get(e);return null!=t?"string"==typeof t||"function"==typeof t||!t.unexpandable:Rr.hasOwnProperty(e)&&!Rr[e].primitive},e}(),Vr={"́":{text:"\\'",math:"\\acute"},"̀":{text:"\\`",math:"\\grave"},"̈":{text:'\\"',math:"\\ddot"},"̃":{text:"\\~",math:"\\tilde"},"̄":{text:"\\=",math:"\\bar"},"̆":{text:"\\u",math:"\\breve"},"̌":{text:"\\v",math:"\\check"},"̂":{text:"\\^",math:"\\hat"},"̇":{text:"\\.",math:"\\dot"},"̊":{text:"\\r",math:"\\mathring"},"̋":{text:"\\H"},"̧":{text:"\\c"}},Wr={á:"á",à:"à",ä:"ä",ǟ:"ǟ",ã:"ã",ā:"ā",ă:"ă",ắ:"ắ",ằ:"ằ",ẵ:"ẵ",ǎ:"ǎ",â:"â",ấ:"ấ",ầ:"ầ",ẫ:"ẫ",ȧ:"ȧ",ǡ:"ǡ",å:"å",ǻ:"ǻ",ḃ:"ḃ",ć:"ć",ḉ:"ḉ",č:"č",ĉ:"ĉ",ċ:"ċ",ç:"ç",ď:"ď",ḋ:"ḋ",ḑ:"ḑ",é:"é",è:"è",ë:"ë",ẽ:"ẽ",ē:"ē",ḗ:"ḗ",ḕ:"ḕ",ĕ:"ĕ",ḝ:"ḝ",ě:"ě",ê:"ê",ế:"ế",ề:"ề",ễ:"ễ",ė:"ė",ȩ:"ȩ",ḟ:"ḟ",ǵ:"ǵ",ḡ:"ḡ",ğ:"ğ",ǧ:"ǧ",ĝ:"ĝ",ġ:"ġ",ģ:"ģ",ḧ:"ḧ",ȟ:"ȟ",ĥ:"ĥ",ḣ:"ḣ",ḩ:"ḩ",í:"í",ì:"ì",ï:"ï",ḯ:"ḯ",ĩ:"ĩ",ī:"ī",ĭ:"ĭ",ǐ:"ǐ",î:"î",ǰ:"ǰ",ĵ:"ĵ",ḱ:"ḱ",ǩ:"ǩ",ķ:"ķ",ĺ:"ĺ",ľ:"ľ",ļ:"ļ",ḿ:"ḿ",ṁ:"ṁ",ń:"ń",ǹ:"ǹ",ñ:"ñ",ň:"ň",ṅ:"ṅ",ņ:"ņ",ó:"ó",ò:"ò",ö:"ö",ȫ:"ȫ",õ:"õ",ṍ:"ṍ",ṏ:"ṏ",ȭ:"ȭ",ō:"ō",ṓ:"ṓ",ṑ:"ṑ",ŏ:"ŏ",ǒ:"ǒ",ô:"ô",ố:"ố",ồ:"ồ",ỗ:"ỗ",ȯ:"ȯ",ȱ:"ȱ",ő:"ő",ṕ:"ṕ",ṗ:"ṗ",ŕ:"ŕ",ř:"ř",ṙ:"ṙ",ŗ:"ŗ",ś:"ś",ṥ:"ṥ",š:"š",ṧ:"ṧ",ŝ:"ŝ",ṡ:"ṡ",ş:"ş",ẗ:"ẗ",ť:"ť",ṫ:"ṫ",ţ:"ţ",ú:"ú",ù:"ù",ü:"ü",ǘ:"ǘ",ǜ:"ǜ",ǖ:"ǖ",ǚ:"ǚ",ũ:"ũ",ṹ:"ṹ",ū:"ū",ṻ:"ṻ",ŭ:"ŭ",ǔ:"ǔ",û:"û",ů:"ů",ű:"ű",ṽ:"ṽ",ẃ:"ẃ",ẁ:"ẁ",ẅ:"ẅ",ŵ:"ŵ",ẇ:"ẇ",ẘ:"ẘ",ẍ:"ẍ",ẋ:"ẋ",ý:"ý",ỳ:"ỳ",ÿ:"ÿ",ỹ:"ỹ",ȳ:"ȳ",ŷ:"ŷ",ẏ:"ẏ",ẙ:"ẙ",ź:"ź",ž:"ž",ẑ:"ẑ",ż:"ż",Á:"Á",À:"À",Ä:"Ä",Ǟ:"Ǟ",Ã:"Ã",Ā:"Ā",Ă:"Ă",Ắ:"Ắ",Ằ:"Ằ",Ẵ:"Ẵ",Ǎ:"Ǎ",Â:"Â",Ấ:"Ấ",Ầ:"Ầ",Ẫ:"Ẫ",Ȧ:"Ȧ",Ǡ:"Ǡ",Å:"Å",Ǻ:"Ǻ",Ḃ:"Ḃ",Ć:"Ć",Ḉ:"Ḉ",Č:"Č",Ĉ:"Ĉ",Ċ:"Ċ",Ç:"Ç",Ď:"Ď",Ḋ:"Ḋ",Ḑ:"Ḑ",É:"É",È:"È",Ë:"Ë",Ẽ:"Ẽ",Ē:"Ē",Ḗ:"Ḗ",Ḕ:"Ḕ",Ĕ:"Ĕ",Ḝ:"Ḝ",Ě:"Ě",Ê:"Ê",Ế:"Ế",Ề:"Ề",Ễ:"Ễ",Ė:"Ė",Ȩ:"Ȩ",Ḟ:"Ḟ",Ǵ:"Ǵ",Ḡ:"Ḡ",Ğ:"Ğ",Ǧ:"Ǧ",Ĝ:"Ĝ",Ġ:"Ġ",Ģ:"Ģ",Ḧ:"Ḧ",Ȟ:"Ȟ",Ĥ:"Ĥ",Ḣ:"Ḣ",Ḩ:"Ḩ",Í:"Í",Ì:"Ì",Ï:"Ï",Ḯ:"Ḯ",Ĩ:"Ĩ",Ī:"Ī",Ĭ:"Ĭ",Ǐ:"Ǐ",Î:"Î",İ:"İ",Ĵ:"Ĵ",Ḱ:"Ḱ",Ǩ:"Ǩ",Ķ:"Ķ",Ĺ:"Ĺ",Ľ:"Ľ",Ļ:"Ļ",Ḿ:"Ḿ",Ṁ:"Ṁ",Ń:"Ń",Ǹ:"Ǹ",Ñ:"Ñ",Ň:"Ň",Ṅ:"Ṅ",Ņ:"Ņ",Ó:"Ó",Ò:"Ò",Ö:"Ö",Ȫ:"Ȫ",Õ:"Õ",Ṍ:"Ṍ",Ṏ:"Ṏ",Ȭ:"Ȭ",Ō:"Ō",Ṓ:"Ṓ",Ṑ:"Ṑ",Ŏ:"Ŏ",Ǒ:"Ǒ",Ô:"Ô",Ố:"Ố",Ồ:"Ồ",Ỗ:"Ỗ",Ȯ:"Ȯ",Ȱ:"Ȱ",Ő:"Ő",Ṕ:"Ṕ",Ṗ:"Ṗ",Ŕ:"Ŕ",Ř:"Ř",Ṙ:"Ṙ",Ŗ:"Ŗ",Ś:"Ś",Ṥ:"Ṥ",Š:"Š",Ṧ:"Ṧ",Ŝ:"Ŝ",Ṡ:"Ṡ",Ş:"Ş",Ť:"Ť",Ṫ:"Ṫ",Ţ:"Ţ",Ú:"Ú",Ù:"Ù",Ü:"Ü",Ǘ:"Ǘ",Ǜ:"Ǜ",Ǖ:"Ǖ",Ǚ:"Ǚ",Ũ:"Ũ",Ṹ:"Ṹ",Ū:"Ū",Ṻ:"Ṻ",Ŭ:"Ŭ",Ǔ:"Ǔ",Û:"Û",Ů:"Ů",Ű:"Ű",Ṽ:"Ṽ",Ẃ:"Ẃ",Ẁ:"Ẁ",Ẅ:"Ẅ",Ŵ:"Ŵ",Ẇ:"Ẇ",Ẍ:"Ẍ",Ẋ:"Ẋ",Ý:"Ý",Ỳ:"Ỳ",Ÿ:"Ÿ",Ỹ:"Ỹ",Ȳ:"Ȳ",Ŷ:"Ŷ",Ẏ:"Ẏ",Ź:"Ź",Ž:"Ž",Ẑ:"Ẑ",Ż:"Ż",ά:"ά",ὰ:"ὰ",ᾱ:"ᾱ",ᾰ:"ᾰ",έ:"έ",ὲ:"ὲ",ή:"ή",ὴ:"ὴ",ί:"ί",ὶ:"ὶ",ϊ:"ϊ",ΐ:"ΐ",ῒ:"ῒ",ῑ:"ῑ",ῐ:"ῐ",ό:"ό",ὸ:"ὸ",ύ:"ύ",ὺ:"ὺ",ϋ:"ϋ",ΰ:"ΰ",ῢ:"ῢ",ῡ:"ῡ",ῠ:"ῠ",ώ:"ώ",ὼ:"ὼ",Ύ:"Ύ",Ὺ:"Ὺ",Ϋ:"Ϋ",Ῡ:"Ῡ",Ῠ:"Ῠ",Ώ:"Ώ",Ὼ:"Ὼ"},jr=function(){function e(e,t){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new Gr(e,t,this.mode),this.settings=t,this.leftrightDepth=0}var t=e.prototype;return t.expect=function(e,t){if(void 0===t&&(t=!0),this.fetch().text!==e)throw new r("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());t&&this.consume()},t.consume=function(){this.nextToken=null},t.fetch=function(){return null==this.nextToken&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken},t.switchMode=function(e){this.mode=e,this.gullet.switchMode(e)},t.parse=function(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}},t.parseExpression=function(t,n){for(var r=[];;){"math"===this.mode&&this.consumeSpaces();var i=this.fetch();if(-1!==e.endOfExpression.indexOf(i.text))break;if(n&&i.text===n)break;if(t&&Rr[i.text]&&Rr[i.text].infix)break;var s=this.parseAtom(n);if(!s)break;"internal"!==s.type&&r.push(s)}return"text"===this.mode&&this.formLigatures(r),this.handleInfixNodes(r)},t.handleInfixNodes=function(e){for(var t,n=-1,i=0;i<e.length;i++)if("infix"===e[i].type){if(-1!==n)throw new r("only one infix operator per group",e[i].token);n=i,t=e[i].replaceWith}if(-1!==n&&t){var s,a,o=e.slice(0,n),l=e.slice(n+1);return s=1===o.length&&"ordgroup"===o[0].type?o[0]:{type:"ordgroup",mode:this.mode,body:o},a=1===l.length&&"ordgroup"===l[0].type?l[0]:{type:"ordgroup",mode:this.mode,body:l},["\\\\abovefrac"===t?this.callFunction(t,[s,e[n],a],[]):this.callFunction(t,[s,a],[])]}return e},t.handleSupSubscript=function(e){var t=this.fetch(),n=t.text;this.consume(),this.consumeSpaces();var i=this.parseGroup(e);if(!i)throw new r("Expected group after '"+n+"'",t);return i},t.formatUnsupportedCmd=function(e){for(var t=[],n=0;n<e.length;n++)t.push({type:"textord",mode:"text",text:e[n]});var r={type:"text",mode:this.mode,body:t};return{type:"color",mode:this.mode,color:this.settings.errorColor,body:[r]}},t.parseAtom=function(e){var t,n,i=this.parseGroup("atom",e);if("text"===this.mode)return i;for(;;){this.consumeSpaces();var s=this.fetch();if("\\limits"===s.text||"\\nolimits"===s.text){if(i&&"op"===i.type){var a="\\limits"===s.text;i.limits=a,i.alwaysHandleSupSub=!0}else{if(!i||"operatorname"!==i.type)throw new r("Limit controls must follow a math operator",s);i.alwaysHandleSupSub&&(i.limits="\\limits"===s.text)}this.consume()}else if("^"===s.text){if(t)throw new r("Double superscript",s);t=this.handleSupSubscript("superscript")}else if("_"===s.text){if(n)throw new r("Double subscript",s);n=this.handleSupSubscript("subscript")}else{if("'"!==s.text)break;if(t)throw new r("Double superscript",s);var o={type:"textord",mode:this.mode,text:"\\prime"},l=[o];for(this.consume();"'"===this.fetch().text;)l.push(o),this.consume();"^"===this.fetch().text&&l.push(this.handleSupSubscript("superscript")),t={type:"ordgroup",mode:this.mode,body:l}}}return t||n?{type:"supsub",mode:this.mode,base:i,sup:t,sub:n}:i},t.parseFunction=function(e,t){var n=this.fetch(),i=n.text,s=Rr[i];if(!s)return null;if(this.consume(),t&&"atom"!==t&&!s.allowedInArgument)throw new r("Got function '"+i+"' with no arguments"+(t?" as "+t:""),n);if("text"===this.mode&&!s.allowedInText)throw new r("Can't use function '"+i+"' in text mode",n);if("math"===this.mode&&!1===s.allowedInMath)throw new r("Can't use function '"+i+"' in math mode",n);var a=this.parseArguments(i,s),o=a.args,l=a.optArgs;return this.callFunction(i,o,l,n,e)},t.callFunction=function(e,t,n,i,s){var a={funcName:e,parser:this,token:i,breakOnTokenText:s},o=Rr[e];if(o&&o.handler)return o.handler(a,t,n);throw new r("No function handler for "+e)},t.parseArguments=function(e,t){var n=t.numArgs+t.numOptionalArgs;if(0===n)return{args:[],optArgs:[]};for(var i=[],s=[],a=0;a<n;a++){var o=t.argTypes&&t.argTypes[a],l=a<t.numOptionalArgs;(t.primitive&&null==o||"sqrt"===t.type&&1===a&&null==s[0])&&(o="primitive");var u=this.parseGroupOfType("argument to '"+e+"'",o,l);if(l)s.push(u);else{if(null==u)throw new r("Null argument, please report this as a bug");i.push(u)}}return{args:i,optArgs:s}},t.parseGroupOfType=function(e,t,n){switch(t){case"color":return this.parseColorGroup(n);case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,t);case"hbox":var i=this.parseArgumentGroup(n,"text");return null!=i?{type:"styling",mode:i.mode,body:[i],style:"text"}:null;case"raw":var s=this.parseStringGroup("raw",n);return null!=s?{type:"raw",mode:"text",string:s.text}:null;case"primitive":if(n)throw new r("A primitive argument cannot be optional");var a=this.parseGroup(e);if(null==a)throw new r("Expected group as "+e,this.fetch());return a;case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new r("Unknown group type as "+e,this.fetch())}},t.consumeSpaces=function(){for(;" "===this.fetch().text;)this.consume()},t.parseStringGroup=function(e,t){var n=this.gullet.scanArgument(t);if(null==n)return null;for(var r,i="";"EOF"!==(r=this.fetch()).text;)i+=r.text,this.consume();return this.consume(),n.text=i,n},t.parseRegexGroup=function(e,t){for(var n,i=this.fetch(),s=i,a="";"EOF"!==(n=this.fetch()).text&&e.test(a+n.text);)a+=(s=n).text,this.consume();if(""===a)throw new r("Invalid "+t+": '"+i.text+"'",i);return i.range(s,a)},t.parseColorGroup=function(e){var t=this.parseStringGroup("color",e);if(null==t)return null;var n=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(t.text);if(!n)throw new r("Invalid color: '"+t.text+"'",t);var i=n[0];return/^[0-9a-f]{6}$/i.test(i)&&(i="#"+i),{type:"color-token",mode:this.mode,color:i}},t.parseSizeGroup=function(e){var t,n=!1;if(this.gullet.consumeSpaces(),!(t=e||"{"===this.gullet.future().text?this.parseStringGroup("size",e):this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size")))return null;e||0!==t.text.length||(t.text="0pt",n=!0);var i=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t.text);if(!i)throw new r("Invalid size: '"+t.text+"'",t);var s={number:+(i[1]+i[2]),unit:i[3]};if(!qe(s))throw new r("Invalid unit: '"+s.unit+"'",t);return{type:"size",mode:this.mode,value:s,isBlank:n}},t.parseUrlGroup=function(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var t=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),null==t)return null;var n=t.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:n}},t.parseArgumentGroup=function(e,t){var n=this.gullet.scanArgument(e);if(null==n)return null;var r=this.mode;t&&this.switchMode(t),this.gullet.beginGroup();var i=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var s={type:"ordgroup",mode:this.mode,loc:n.loc,body:i};return t&&this.switchMode(r),s},t.parseGroup=function(e,t){var n,i=this.fetch(),s=i.text;if("{"===s||"\\begingroup"===s){this.consume();var a="{"===s?"}":"\\endgroup";this.gullet.beginGroup();var o=this.parseExpression(!1,a),l=this.fetch();this.expect(a),this.gullet.endGroup(),n={type:"ordgroup",mode:this.mode,loc:Nr.range(i,l),body:o,semisimple:"\\begingroup"===s||void 0}}else if(null==(n=this.parseFunction(t,e)||this.parseSymbol())&&"\\"===s[0]&&!Hr.hasOwnProperty(s)){if(this.settings.throwOnError)throw new r("Undefined control sequence: "+s,i);n=this.formatUnsupportedCmd(s),this.consume()}return n},t.formLigatures=function(e){for(var t=e.length-1,n=0;n<t;++n){var r=e[n],i=r.text;"-"===i&&"-"===e[n+1].text&&(n+1<t&&"-"===e[n+2].text?(e.splice(n,3,{type:"textord",mode:"text",loc:Nr.range(r,e[n+2]),text:"---"}),t-=2):(e.splice(n,2,{type:"textord",mode:"text",loc:Nr.range(r,e[n+1]),text:"--"}),t-=1)),"'"!==i&&"`"!==i||e[n+1].text!==i||(e.splice(n,2,{type:"textord",mode:"text",loc:Nr.range(r,e[n+1]),text:i+i}),t-=1)}},t.parseSymbol=function(){var e=this.fetch(),t=e.text;if(/^\\verb[^a-zA-Z]/.test(t)){this.consume();var n=t.slice(5),i="*"===n.charAt(0);if(i&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new r("\\verb assertion failed --\n                    please report what input caused this bug");return{type:"verb",mode:"text",body:n=n.slice(1,-1),star:i}}Wr.hasOwnProperty(t[0])&&!$[this.mode][t[0]]&&(this.settings.strict&&"math"===this.mode&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+t[0]+'" used in math mode',e),t=Wr[t[0]]+t.substr(1));var s,a=Ir.exec(t);if(a&&("i"===(t=t.substring(0,a.index))?t="ı":"j"===t&&(t="ȷ")),$[this.mode][t]){this.settings.strict&&"math"===this.mode&&Ce.indexOf(t)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+t[0]+'" used in math mode',e);var o,l=$[this.mode][t].group,u=Nr.range(e);if(Z.hasOwnProperty(l)){var c=l;o={type:"atom",mode:this.mode,family:c,loc:u,text:t}}else o={type:l,mode:this.mode,loc:u,text:t};s=o}else{if(!(t.charCodeAt(0)>=128))return null;this.settings.strict&&(A(t.charCodeAt(0))?"math"===this.mode&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+t[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+t[0]+'" ('+t.charCodeAt(0)+")",e)),s={type:"textord",mode:"text",loc:Nr.range(e),text:t}}if(this.consume(),a)for(var h=0;h<a[0].length;h++){var p=a[0][h];if(!Vr[p])throw new r("Unknown accent ' "+p+"'",e);var f=Vr[p][this.mode]||Vr[p].text;if(!f)throw new r("Accent "+p+" unsupported in "+this.mode+" mode",e);s={type:"accent",mode:this.mode,loc:Nr.range(e),label:f,isStretchy:!1,isShifty:!0,base:s}}return s},e}();jr.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var Xr=function(e,t){if(!("string"==typeof e||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new jr(e,t);delete n.gullet.macros.current["\\df@tag"];var i=n.parse();if(delete n.gullet.macros.current["\\current@color"],delete n.gullet.macros.current["\\color"],n.gullet.macros.get("\\df@tag")){if(!t.displayMode)throw new r("\\tag works only in display equations");n.gullet.feed("\\df@tag"),i=[{type:"tag",mode:"text",body:i,tag:n.parse()}]}return i},Zr=function(e,t,n){t.textContent="";var r=Jr(e,n).toNode();t.appendChild(r)};"undefined"!=typeof document&&"CSS1Compat"!==document.compatMode&&("undefined"!=typeof console&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),Zr=function(){throw new r("KaTeX doesn't work in quirks mode.")});var Yr=function(e,t,n){if(n.throwOnError||!(e instanceof r))throw e;var i=Ke.makeSpan(["katex-error"],[new z(t)]);return i.setAttribute("title",e.toString()),i.setAttribute("style","color:"+n.errorColor),i},Jr=function(e,t){var n=new d(t);try{return function(e,t,n){var r,i=Ut(n);if("mathml"===n.output)return Dt(e,t,i,n.displayMode,!0);if("html"===n.output){var s=Et(e,i);r=Ke.makeSpan(["katex"],[s])}else{var a=Dt(e,t,i,n.displayMode,!1),o=Et(e,i);r=Ke.makeSpan(["katex"],[a,o])}return zt(r,n)}(Xr(e,n),e,n)}catch(t){return Yr(t,e,n)}},$r={version:"0.13.18",render:Zr,renderToString:function(e,t){return Jr(e,t).toMarkup()},ParseError:r,__parse:function(e,t){var n=new d(t);return Xr(e,n)},__renderToDomTree:Jr,__renderToHTMLTree:function(e,t){var n=new d(t);try{return function(e,t,n){var r=Et(e,Ut(n)),i=Ke.makeSpan(["katex"],[r]);return zt(i,n)}(Xr(e,n),0,n)}catch(t){return Yr(t,e,n)}},__setFontMetrics:function(e,t){G[e]=t},__defineSymbol:Q,__defineMacro:gr,__domTree:{Span:O,Anchor:k,SymbolNode:z,SvgNode:B,PathNode:F,LineNode:q}};return t.default}()},e.exports=t()},374:(e,t,n)=>{var r=n(407);n(426),function(){"use strict";var e=r.getCore(),t=e.PARSER,n=e.groups.N,i=e.groups.P,s=e.groups.S,a=e.groups.EX,o=e.groups.FN,l=e.groups.PL,u=e.groups.CP,c=e.groups.CB,h=e.Utils.keys,p=e.Utils.even,f=e.Utils.variables,m=e.Utils.format,d=e.Utils.round,g=e.Frac,v=e.Utils.isInt,y=e.Symbol,w=e.Settings.CONST_HASH,b=e.Utils.importFunctions();function x(n,r,i){if(e.Utils.isSymbol(n))this.parse(n),this.variable=this.variable||r;else if(isNaN(n))"string"==typeof n&&this.parse(t.parse(n));else{if(i=i||0,void 0===r)throw new e.exceptions.InvalidVariableNameError("Polynomial expects a variable name when creating using order");this.coeffs=[],this.coeffs[i]=n,this.fill(n)}}function M(){this.factors={},this.length=0}function S(t,n,r){this.terms=n||[],this.coeff=t,this.map=r,this.sum=new e.Frac(0),this.image=void 0}e.Utils.evaluate,x.fromArray=function(t,n){if(void 0===n)throw new e.exceptions.InvalidVariableNameError("A variable name must be specified when creating polynomial from array");var r=new x;return r.coeffs=t,r.variable=n,r},x.fit=function(e,t,n,r,i,s){var a=new Array(i+1),o=n-t;a[0]=t,a[i]=e,o-=e*Math.pow(r,i);for(var l=i-1;l>0;l--){var u=Math.pow(r,l),c=o/u,h=Math.sign(c)*Math.floor(Math.abs(c));o-=h*u,a[l]=h}if(0!==o)return null;for(l=0;l<a.length;l++)a[l]=new g(a[l]);return x.fromArray(a,s)},x.prototype={parse:function(r,i){if(this.variable=f(r)[0],!r.isPoly())throw e.exceptions.NerdamerTypeError("Polynomial Expected! Received "+e.Utils.text(r));if(i=i||[],r.power.absEquals(1)||(r=t.expand(r)),r.group===e.groups.N)i[0]=r.multiplier;else if(r.group===e.groups.S)i[r.power.toDecimal()]=r.multiplier;else for(var s in r.symbols){var a=r.symbols[s],o=a.power;if(e.Utils.isSymbol(o))throw new e.exceptions.NerdamerTypeError("power cannot be a Symbol");o=a.group===n?0:o.toDecimal(),a.symbols?this.parse(a,i):i[o]=a.multiplier}this.coeffs=i,this.fill()},fill:function(e){e=Number(e)||0;for(var t=this.coeffs.length,n=0;n<t;n++)void 0===this.coeffs[n]&&(this.coeffs[n]=new g(e));return this},trim:function(){for(var e=this.coeffs.length;e--;){var t=this.coeffs[e],n=t.equals(0);if(!t||!n)break;if(0===e)break;this.coeffs.pop()}return this},modP:function(e){for(var t=this.coeffs.length,n=0;n<t;n++){var r=this.coeffs[n];if(r<0){for(var i,s=n;s<t;s++)if(this.coeffs[s]>0){i=this.coeffs[s];break}if(i){for(;s>n;s--)this.coeffs[s]=this.coeffs[s].subtract(new g(1)),this.coeffs[s-1]=this.coeffs[s-1].add(new g(e));r=this.coeffs[n]}}var a=r.mod(e),o=r.subtract(a).divide(e);if(!o.equals(0)){var l=n+1,u=this.coeffs[l]||new g(0);u=u.add(o),this.coeffs[l]=new g(u),this.coeffs[n]=new g(a)}}return this},add:function(e){for(var t=Math.max(this.coeffs.length,e.coeffs.length),n=0;n<t;n++){var r=this.coeffs[n]||new g(0),i=e.coeffs[n]||new g(0);this.coeffs[n]=r.add(i)}return this},subtract:function(e){for(var t=Math.max(this.coeffs.length,e.coeffs.length),n=0;n<t;n++){var r=this.coeffs[n]||new g(0),i=e.coeffs[n]||new g(0);this.coeffs[n]=r.subtract(i)}return this},divide:function(t){for(var n=this.variable,r=e.Utils.arrayClone(this.coeffs),i=e.Utils.arrayClone(t.coeffs),s=r.length,a=i.length-1,o=[],l=0;l<s;l++){var u=s-(l+1),c=u-a,h=r[u].divide(i[a]);if(c<0)break;o[c]=h;for(var p=0;p<=a;p++)r[p+c]=r[p+c].subtract(i[p].multiply(h))}var f=x.fromArray(r,n||"x").trim();return[x.fromArray(o,n||"x"),f]},multiply:function(e){for(var t=this.coeffs.length,n=e.coeffs.length,r=[],i=0;i<t;i++)for(var s=this.coeffs[i],a=0;a<n;a++){var o=i+a,l=e.coeffs[a],u=r[o]||new g(0);r[o]=u.add(s.multiply(l))}return this.coeffs=r,this},isZero:function(){for(var e=this.coeffs.length,t=0;t<e;t++)if(!this.coeffs[t].equals(0))return!1;return!0},sub:function(e){for(var t=new g(0),n=this.coeffs.length,r=0;r<n;r++){var i=this.coeffs[r];i.equals(0)||(t=t.add(i.multiply(new g(Math.pow(e,r)))))}return t},clone:function(){var e=new x;return e.coeffs=this.coeffs,e.variable=this.variable,e},deg:function(){return this.trim(),this.coeffs.length-1},lc:function(){return this.coeffs[this.deg()].clone()},monic:function(){for(var e=this.lc(),t=this.coeffs.length,n=0;n<t;n++)this.coeffs[n]=this.coeffs[n].divide(e);return this},gcd:function(t){if(this.coeffs.length-1<t.coeffs.length-1)return t.gcd(this);for(var n=this;!t.isZero();){var r=t.clone();t=(n=n.clone()).divide(r)[1],n=r}var i=e.Math2.QGCD.apply(null,n.coeffs);if(!i.equals(1))for(var s=n.coeffs.length,a=0;a<s;a++)n.coeffs[a]=n.coeffs[a].divide(i);return n},diff:function(){for(var e=[],t=this.coeffs.length,n=1;n<t;n++)e.push(this.coeffs[n].multiply(new g(n)));return this.coeffs=e,this},integrate:function(){for(var e=[0],t=this.coeffs.length,n=0;n<t;n++){var r=new g(n+1);e[r]=this.coeffs[n].divide(r)}return this.coeffs=e,this},gcf:function(t){for(var n=[],r=0;r<this.coeffs.length;r++){var i=this.coeffs[r];i.equals(0)||-1!==n.indexOf(i)||n.push(i)}var s=[e.Math2.QGCD.apply(void 0,n),function(e){for(var t=0;t<e.length;t++)if(!e[t].equals(0))return t}(this.coeffs)].toDecimal();if(t){var a=[];a[s[1]-1]=s[0],s=x.fromArray(a,this.variable).fill()}return s},quad:function(e){var t=[];if(this.coeffs.length>3)throw new Error("Cannot calculate quadratic order of "+(this.coeffs.length-1));if(0===this.coeffs.length)throw new Error("Polynomial array has no terms");var n=this.coeffs[2]||0,r=this.coeffs[1]||0,i=r*r-4*n*this.coeffs[0];return i<0&&!e||(t[0]=(-r+Math.sqrt(i))/(2*n),t[1]=(-r-Math.sqrt(i))/(2*n)),t},squareFree:function(){for(var e=this.clone(),t=1,n=e.clone().diff(),r=e.clone().gcd(n),i=e.divide(r)[0],s=x.fromArray([new g(1)],e.variable);!r.equalsNumber(1);){var a=i.gcd(r),o=i.divide(a)[0];if(!o.equalsNumber(1)&&t>1){for(var l=o.clone(),u=1;u<t;u++)l.multiply(o.clone());o=l}s=s.multiply(o),t++,i=a,r=r.divide(a)[0]}return[s,i,t]},toSymbol:function(){var n=this.coeffs.length,r=this.variable;if(0===n)return new e.Symbol(0);for(var i=n-1,s="",a=0;a<n;a++){var o=a===i?"":"+",l=this.coeffs[a];l.equals(0)||(s+=l+"*"+r+"^"+a+o)}return t.parse(s)},equalsNumber:function(e){return this.trim(),1===this.coeffs.length&&this.coeffs[0].toDecimal()===String(e)},toString:function(){return this.toSymbol().toString()}},y.prototype.coeffs=function(e,n){n&&!this.isPoly(!0)&&t.error("Polynomial expected when requesting coefficients with order"),e=e||[];var r=this.clone().distributeMultiplier();if(r.isComposite())for(var i in r.symbols){var s=r.symbols[i];s.isComposite()?s.clone().distributeMultiplier().coeffs(e,n):n?e[s.isConstant()?0:s.power.toDecimal()]=s.multiplier:e.push(s.multiplier)}else if(n)e[r.isConstant(!0)?0:r.power.toDecimal()]=r.multiplier;else if(r.group===c&&r.isImaginary()){var a=new y(r.multiplier);r.each((function(e){(e.isConstant(!0)||e.imaginary)&&(a=t.multiply(a,e))})),e.push(a)}else e.push(r.multiplier);if(n)for(var o=0;o<e.length;o++)void 0===e[o]&&(e[o]=new y(0));return e},y.prototype.tBase=function(e){if(void 0===e)throw new Error("Symbol.tBase requires a map object!");for(var t=[],n=this.collectSymbols(null,null,null,!0),r=n.length,i=0;i<r;i++){var s=n[i],a=s.group,o=new S(s.multiplier,[],e);if(a===c)for(var l in s.symbols){var u=s.symbols[l];o.terms[e[l]]=u.power}else o.terms[e[s.value]]=s.power;t.push(o.fill()),o.updateCount()}return t},y.prototype.altVar=function(e){var t=this.multiplier.toString(),n=this.power.toString();return("1"===t?"":t+"*")+e+("1"===n?"":"^"+n)},y.prototype.sameVars=function(e){if(!this.symbols&&this.group!==e.group)return!1;for(var t in this.symbols){var n=this.symbols[t],r=e.symbols[t];if(!r)return!1;if(n.value!==r.value)return!1}return!0},y.prototype.groupTerms=function(n){var r,i,s;n=String(n);var a=[];return this.each((function(o){if(o.group===l){s=o.groupTerms(n);for(var u=0;u<s.length;u++){var c=s[u];c&&(a[u]=c)}}else r=e.Utils.decompose_fn(o,n,!0),i=r.x.value===n?Number(r.x.power):0,a[i]=t.add(a[i]||new y(0),r.a)})),a},y.prototype.collectFactors=function(){var e=[];return this.group===c?this.each((function(t){e.push(t.clone())})):e.push(this.clone()),e},M.prototype.getNumberSymbolics=function(){var e=0;return this.each((function(t){t.isConstant(!0)||e++})),e},M.prototype.add=function(n){if(n.equals(0))return this;if(n.equals(-1)&&this.length>0){var r=e.Utils.firstObject(this.factors,null,!0);return this.add(t.symfunction(e.Settings.PARENTHESIS,[r.obj]).negate()),delete this.factors[r.key],this.length--,this}if(n.group===c){var i=this;n.multiplier.equals(1)||i.add(new y(n.multiplier)),n.each((function(e){i.add(e)}))}else{this.preAdd&&(n=this.preAdd(n)),this.pFactor&&(n=t.pow(n,new y(this.pFactor)));var s=n.isConstant();if(s&&n.equals(1))return this;var a=s?n.value:n.text();a in this.factors?(this.factors[a]=t.multiply(this.factors[a],n),this.factors[a].equals(1)&&(delete this.factors[a],this.length--)):(this.factors[a]=n,this.length++)}return this},M.prototype.toSymbol=function(){for(var n=new y(1),r=Object.values(this.factors).sort((function(e,t){return e.group>t.group})),i=0,s=r.length;i<s;i++){var a=r[i],o=a.power.equals(1)&&""!==a.fname?t.symfunction(e.PARENTHESIS,[a]):a;n=t.multiply(n,o)}return""===n.fname&&(n=y.unwrapPARENS(n)),n},M.prototype.merge=function(e){for(var n in e)n in this.factors?this.factors[n]=t.multiply(this.factors[n],e[n]):this.factors[n]=e[n];return this},M.prototype.each=function(t){for(var n in this.factors){var r=this.factors[n];r.fname===e.PARENTHESIS&&r.isLinear()&&(r=r.args[0]),t.call(this,r,n)}return this},M.prototype.count=function(){return h(this.factors).length},M.prototype.clean=function(){try{var t=e.Settings.CONST_HASH;this.factors[t].lessThan(0)&&(this.factors[t].equals(-1)?delete this.factors[t]:this.factors[t].negate(),this.each((function(e){e.negate()})))}catch(e){}},M.prototype.toString=function(){return this.toSymbol().toString()},S.prototype.updateCount=function(){this.count=this.count||0;for(var e=0;e<this.terms.length;e++)this.terms[e].equals(0)||this.count++;return this},S.prototype.getVars=function(){for(var e=[],t=0;t<this.terms.length;t++){var n=this.terms[t];this.getRevMap(),n.equals(0)||e.push(this.rev_map[t])}return e.join(" ")},S.prototype.len=function(){return void 0===this.count&&this.updateCount(),this.count},S.prototype.toSymbol=function(e){e=e||this.getRevMap();for(var n=new y(this.coeff),r=0;r<this.terms.length;r++){var i=e[r],s=this.terms[r];if(!s.equals(0)&&i!==w){var a=new y(i);a.power=s,n=t.multiply(n,a)}}return n},S.prototype.getRevMap=function(){if(this.rev_map)return this.rev_map;var e={};for(var t in this.map)e[this.map[t]]=t;return this.rev_map=e,e},S.prototype.generateImage=function(){return this.image=this.terms.join(" "),this},S.prototype.getImg=function(){return this.image||this.generateImage(),this.image},S.prototype.fill=function(){for(var t=this.map.length,n=0;n<t;n++)void 0===this.terms[n]?this.terms[n]=new e.Frac(0):this.sum=this.sum.add(this.terms[n]);return this},S.prototype.divide=function(e){for(var t=this.coeff.divide(e.coeff),n=this.terms.length,r=new S(t,[],this.map),i=0;i<n;i++)r.terms[i]=this.terms[i].subtract(e.terms[i]),r.sum=r.sum.add(r.terms[i]);return r},S.prototype.multiply=function(e){for(var t=this.coeff.multiply(e.coeff),n=this.terms.length,r=new S(t,[],this.map),i=0;i<n;i++)r.terms[i]=this.terms[i].add(e.terms[i]),r.sum=r.sum.add(r.terms[i]);return r},S.prototype.isZero=function(){return this.coeff.equals(0)},S.prototype.toString=function(){return"{ coeff: "+this.coeff.toString()+", terms: ["+this.terms.join(",")+"]: sum: "+this.sum.toString()+", count: "+this.count+"}"},e.Utils.toMapObj=function(e){for(var t=0,n={},r=0;r<e.length;r++){var i=e[r];void 0===n[i]&&(n[i]=t,t++)}return n.length=t,n},e.Utils.filledArray=function(e,t,n){for(var r=[];t--;)r[t]=n?new n(e):e;return r},e.Utils.arrSum=function(e){for(var t=0,n=e.length,r=0;r<n;r++)t+=e[r];return t},e.Utils.haveIntersection=function(e,t){var n;return t.length>e.length&&(n=t,t=e,e=n),e.some((function(e){return t.indexOf(e)>-1}))},e.Utils.subFunctions=function(t,n){n=n||{};var r=[];return t.each((function(t){if(t.group===o||t.previousGroup===o){var i=e.Utils.text(t,"hash"),s=n[i];if(s)r.push(t.altVar(s));else{var a=t.fname+h(n).length;n[i]=a,r.push(t.altVar(a))}}else t.group===c||t.group===l||t.group===u?r.push(e.Utils.subFunctions(t,n)):r.push(t.text())})),t.group===u||t.group===l?t.altVar(e.Utils.inBrackets(r.join("+"))):t.group===c?t.altVar(e.Utils.inBrackets(r.join("*"))):t.text()},e.Utils.getFunctionsSubs=function(e){var n={};for(var r in e)n[e[r]]=t.parse(r);return n};var _=e.Algebra={version:"1.4.6",proots:function(n,r){r=r||7;var i=[],a=function(e,t,n){for(var r=C(e,0,n).concat(i),s=0;s<0;s++)r.unshift(0);return r};if(n instanceof y&&n.isPoly()){if(n.distributeMultiplier(),n.group===l){var o=e.Utils.arrayMin(h(n.symbols)),u=n.symbols[o].clone().toUnitMultiplier();n=t.expand(t.divide(n,u)),i.push(0)}if(n.group===e.groups.S)return[0];if(n.group===e.groups.PL){var c=h(n.symbols),p=e.Utils.arrayMin(c);n=e.PARSER.divide(n,e.PARSER.parse(n.value+"^"+p))}for(var f=h(n.symbols).sort().pop(),m=n.group===e.groups.PL?n.symbols:n.symbols[f],g=m.group,v=(c=g===s?[m.power.toDecimal()]:h(m.symbols),[]),b=e.Utils.arrayMax(c),x=1;x<=b;x++){var M=0;-1!==c.indexOf(x+"")&&(M=g===s?m.multiplier:m.symbols[x].multiplier),v.unshift(M)}return v.push(n.symbols[w].multiplier),m.group===s&&(v[0]=m.multiplier),a(v,0,b)}if(e.Utils.isArray(n)){var S=n,_=(v=[],c=[],0);for(x=0;x<S.length;x++){for(var E=S[x][0],T=S[x][1],A=T-_-1,L=0;L<A;L++)v.unshift(0);v.unshift(E),0!==T&&c.push(T),_=T}return a(v,0,b=Math.max.apply(void 0,c))}throw new e.exceptions.NerdamerTypeError("Cannot calculate roots. Symbol must be a polynomial!");function C(t,n,i){var s=t.slice(0);if(t.unshift(i),i>100)throw new e.exceptions.ValueLimitExceededError("This utility accepts polynomials of degree up to 100. ");var a=[],o={};for(o.Degree=i,x=0;x<i;x++)a.push(0);var l=a.slice(0);function u(e,t,n,r,i,s){i[0]=s.b=r[0],i[1]=s.a=-t*s.b+r[1];for(var a=2;a<e;a++)i[a]=-(t*s.a+n*s.b)+r[a],s.b=s.a,s.a=i[a]}function c(e,t,n,r,i,s,a,o,l){var c=new Object,h=3;return c.b=c.a=0,u(t,a,o,s,l,c),i.c=c.a,i.d=c.b,Math.abs(i.c)<=100*e*Math.abs(s[t-1])&&Math.abs(i.d)<=100*e*Math.abs(s[t-2])||(i.h=o*r,Math.abs(i.d)>=Math.abs(i.c)?(h=2,i.e=n/i.d,i.f=i.c/i.d,i.g=a*r,i.a3=i.e*(i.g+n)+i.h*(r/i.d),i.a1=-n+i.f*r,i.a7=i.h+(i.f+a)*n):(h=1,i.e=n/i.c,i.f=i.d/i.c,i.g=i.e*a,i.a3=i.e*n+(i.g+i.h/i.c)*r,i.a1=-n*(i.d/i.c)+r,i.a7=i.g*i.d+i.h*i.f+n)),h}function h(e,t,n,r,i,s,a,o,l){var u;if(3!=n)if(u=1==n?i:r,Math.abs(s.a1)>10*e*Math.abs(u))for(s.a7/=s.a1,s.a3/=s.a1,a[0]=l[0],a[1]=-l[0]*s.a7+l[1],c=2;c<t;c++)a[c]=-l[c-1]*s.a7+o[c-2]*s.a3+l[c];else for(a[0]=0,a[1]=-l[0]*s.a7,c=2;c<t;c++)a[c]=-l[c-1]*s.a7+o[c-2]*s.a3;else{a[1]=a[0]=0;for(var c=2;c<t;c++)a[c]=o[c-2]}}function p(e,t,n,r,i,s,a,o,l,u,c,h,p,f,m,d,g){var v,y,w,b,x,M,S,_;t.b=t.a=0,3!=e&&(2!=e?(v=n+p*a+h*u,y=o+(p+f*u)*l):(v=(n+c)*u+h,y=(u+p)*o+f*l),0!=(_=-(S=-((x=(w=-m[d-1]/g[d])*s)+(M=w*w*i))+f*(b=-(m[d-2]+w*g[d-1])/g[d])*r)+y+w*v)&&(t.a=-(p*(M+x)+f*(w*r+b*s))/_+p,t.b=f*(1+S/_)))}function f(e,t,n,r){var i,s,a;r.sr=r.si=r.lr=r.li=0,0!=e?0!=n?(i=t/2,Math.abs(i)<Math.abs(n)?(a=-(a=n>=0?e:-e)+i*(i/Math.abs(n)),s=Math.sqrt(Math.abs(a))*Math.sqrt(Math.abs(n))):(a=-e/i*(n/i)+1,s=Math.sqrt(Math.abs(a))*Math.abs(i)),a>=0?(s=i>=0?-s:s,r.lr=(-i+s)/e,r.sr=0!=r.lr?n/r.lr/e:r.sr):(r.lr=r.sr=-i/e,r.si=Math.abs(s/e),r.li=-r.si)):r.lr=-t/e:r.sr=0!=t?-n/t:r.sr}function m(e,t,n,r,i,s,a,o,l,m,d,g){var v,y,w,b,x,M,S,_,E,T,A,L=new Object,C=0,R=0;n.NZ=0,M=r,_=i;do{if(L.li=L.lr=L.si=L.sr=0,f(1,M,_,L),n.szr=L.sr,n.szi=L.si,n.lzr=L.lr,n.lzi=L.li,Math.abs(Math.abs(n.szr)-Math.abs(n.lzr))>.01*Math.abs(n.lzr))break;for(u(a,M,_,l,s,o),y=Math.abs(-n.szr*o.b+o.a)+Math.abs(n.szi*o.b),T=Math.sqrt(Math.abs(_)),v=2*Math.abs(s[0]),x=-n.szr*o.b,A=1;A<t;A++)v=v*T+Math.abs(s[A]);if(y<=20*(v=(9*(v=v*T+Math.abs(x+o.a))+2*Math.abs(x)-7*(Math.abs(o.a+x)+T*Math.abs(o.b)))*e)){n.NZ=2;break}if(++C>20)break;if(C>=2&&b<=.01&&y>=w&&!R){for(u(a,M-=M*(b=b<e?Math.sqrt(e):Math.sqrt(b)),_+=_*b,l,s,o),A=0;A<5;A++)h(e,t,c(e,t,o.a,o.b,d,g,M,_,m),o.a,o.b,d,g,m,s);R=1,C=0}w=y,h(e,t,c(e,t,o.a,o.b,d,g,M,_,m),o.a,o.b,d,g,m,s),p(c(e,t,o.a,o.b,d,g,M,_,m),o,o.a,d.a1,d.a3,d.a7,o.b,d.c,d.d,d.f,d.g,d.h,M,_,g,t,l),S=o.a,0!=(E=o.b)&&(b=Math.abs((-_+E)/E),M=S,_=E)}while(0!=E)}function g(e,t,n,r,i,s,a,o,l){var u,c,h,p,f,m,d,g,v,y,w,b=r-1;for(t.NZ=w=v=0,d=n.a;;){for(m=i[0],a[0]=m,y=1;y<s;y++)a[y]=m=m*d+i[y];for(h=Math.abs(m),p=Math.abs(d),u=.5*Math.abs(a[0]),y=1;y<s;y++)u=u*p+Math.abs(a[y]);if(h<=20*e*(2*u-h)){t.NZ=1,t.szr=d,t.szi=0;break}if(++w>10)break;if(w>=2&&Math.abs(g)<=.001*Math.abs(-g+d)&&h>f){v=1,t.a=d;break}for(f=h,l[0]=c=o[0],y=1;y<r;y++)l[y]=c=c*d+o[y];if(Math.abs(c)>10*Math.abs(o[b])*e)for(g=-m/c,o[0]=a[0],y=1;y<r;y++)o[y]=g*l[y-1]+a[y];else for(o[0]=0,y=1;y<r;y++)o[y]=l[y-1];for(c=o[0],y=1;y<r;y++)c=c*d+o[y];d+=g=Math.abs(c)>10*Math.abs(o[b])*e?-m/c:0}return v}function v(e,t,n,r,i,s,a,o,l,f,d,v){var y,w,b,x,M,S,_,E,T,A,L,C,R,N,P,I,O,k,D,U,z,B,F,q,H,G=new Object,V=new Object,W=new Array(t),j=new Array(t),X=1;for(v.NZ=0,x=b=.25,M=r,E=i,G.b=G.a=0,u(l,d,i,o,f,G),y=G.a,w=G.b,V.h=V.g=V.f=V.e=V.d=V.c=V.a7=V.a3=V.a1=0,F=c(e,a,y,w,V,s,d,i,W),U=0;U<n;U++){if(k=1,h(e,a,F,y,w,V,s,W,f),p(F=c(e,a,y,w,V,s,d,i,W),G,y,V.a1,V.a3,V.a7,w,V.c,V.d,V.f,V.g,V.h,d,i,s,a,o),P=G.a,O=I=G.b,A=0!=s[a-1]?-o[a]/s[a-1]:0,L=R=1,0!=U&&3!=F&&(q=(N=(R=0!=O?Math.abs((O-E)/O):R)<_?R*_:1)<x?1:0,(z=(C=(L=0!=A?Math.abs((A-M)/A):L)<S?L*S:1)<b?1:0)||q)){for(D=0;D<a;D++)j[D]=s[D];for(T=A,B=H=0;;){if(k&&0==(k=0)&&z&&(!q||C<N));else{if(m(e,a,v,P,I,f,l,G,o,W,V,s),y=G.a,w=G.b,v.NZ>0)return;if(X=H=1,x*=.25,B||!z)X=0;else for(D=0;D<a;D++)s[D]=j[D]}if(0!=X){if(G.a=T,X=g(e,v,G,a,o,l,f,s,W),T=G.a,v.NZ>0)return;if(B=1,b*=.25,0!=X){P=-(T+T),I=T*T;continue}}for(D=0;D<a;D++)s[D]=j[D];if(!q||H)break}u(l,d,i,o,f,G),F=c(e,a,y=G.a,w=G.b,V,s,d,i,W)}E=O,M=A,_=R,S=L}}!function(e,t,n,r){var i,s,a,o,l,u,c,h,p,m,d,g,y,w,b,x,M,S,_,E,T,A,L,C=e.Degree,R=.017453292519943295,N=Math.LN2,P=e.Degree+1,I=new Array(P),O=new Array(P),k=new Array(P),D=new Array(P),U=new Object,z=new Object;g=1;do{s=g,y=1+(g/=2)}while(y>1);var B=Number.MIN_VALUE/s,F=Math.cos(94*R),q=Math.sin(94*R),H=Math.sqrt(.5),G=-H;for(z.NZ=S=0,z.szr=z.szi=z.lzr=z.lzi=0;0==t[C];)n[S]=r[S]=0,C--,S++;for(A=C+1;C>=1;){if(C<=2){C<2?(n[e.Degree-1]=-t[1]/t[0],r[e.Degree-1]=0):(U.li=U.lr=U.si=U.sr=0,f(t[0],t[1],t[2],U),n[e.Degree-2]=U.sr,r[e.Degree-2]=U.si,n[e.Degree-1]=U.lr,r[e.Degree-1]=U.li);break}for(c=0,h=Number.MAX_VALUE,V=0;V<A;V++)(m=Math.abs(t[V]))>c&&(c=m),0!=m&&m<h&&(h=m);if(((p=B/h)<=1&&c>=10||p>1&&Number.MAX_VALUE/p>=c)&&(p=0==p?Number.MIN_VALUE:p,E=Math.floor(Math.log(p)/N+.5),1!=(l=Math.pow(2,E))))for(V=0;V<A;V++)t[V]*=l;for(var V=0;V<A;V++)O[V]=Math.abs(t[V]);O[C]=-O[C],T=C-1,m=Math.exp((Math.log(-O[C])-Math.log(O[0]))/C),0!=O[T]&&(m=(d=-O[C]/O[T])<m?d:m),d=m;do{for(d=.1*(m=d),u=O[0],V=1;V<A;V++)u=u*d+O[V]}while(u>0);o=m;do{for(a=u=O[0],V=1;V<C;V++)a=m*a+(u=m*u+O[V]);m-=o=(u=m*u+O[C])/a}while(Math.abs(o/m)>.005);for(i=m,V=1;V<C;V++)I[V]=(C-V)*t[V]/C;for(I[0]=t[0],g=t[C],y=t[T],L=0==I[T]?1:0,_=0;_<5;_++)if(w=I[T],L){for(V=0;V<T;V++)I[S=T-V]=I[S-1];I[0]=0,L=0==I[T]?1:0}else{for(x=-g/w,V=0;V<T;V++)I[S=T-V]=x*I[S-1]+t[S];I[0]=t[0],L=Math.abs(I[T])<=Math.abs(y)*s*10?1:0}for(V=0;V<C;V++)D[V]=I[V];for(_=1;_<=20;_++){if(M=-q*G+F*H,G=q*H+F*G,v(s,P,20*_,b=i*(H=M),i,I,C,t,A,k,-2*b,z),0!=z.NZ){for(n[S=e.Degree-C]=z.szr,r[S]=z.szi,C=(A-=z.NZ)-1,V=0;V<A;V++)t[V]=k[V];1!=z.NZ&&(n[S+1]=z.lzr,r[S+1]=z.lzi);break}for(V=0;V<C;V++)I[V]=D[V]}if(_>20){e.Degree-=C;break}}}(o,s,l,a);var y=a.length;for(x=0;x<y;x++){var w=d(a[x],r+8),b=d(l[x],r+8),M=w<0?"-":"";0===(b=r-String(b).length>2?b:l[x])&&(b=""),0===w&&(w=""),w=1===Math.abs(w)?M+"i":w?w+"*i":"";var S=b&&w?b+"+"+w:b+w;l[x]=S.replace(/\+\-/g,"-")}return l}},roots:function(n){if(n.isConstant(!0,!0))return e.Utils.nroots(n);var r=_.proots(n).map((function(e){return t.parse(e)}));return e.Vector.fromArray(r)},froot:function(t,n,r){return function(n){for(var i=r||e.Utils.build(e.Calculus.diff(t.clone())),s=t instanceof Function?t:e.Utils.build(t),a=!1,o=0;!a;){var l=n-s(n)/i(n),u=Math.abs(l)-Math.abs(n);n=l,Math.abs(u)<1e-12?a=!0:o>1e4&&(n=null,a=!0),o++}return n}(Number(n))},quad:function(e,n,r){var i=function(e,n,r,i){return t.parse("-("+n+"+"+i+"*sqrt(("+n+")^2-4*("+e+")*("+r+")))/(2*"+e+")")};return[i(e,n,r,1),i(e,n,r,-1)]},sumProd:function(e,t){return _.quad(-t,e,-1).map((function(e){return e.invert()}))},coeffs:function(e,n,r){n=String(n),e=t.expand(e),r=r||[new y(0)],e.group===a&&e.contains(n,!0)&&t.error("Unable to get coefficients using expression "+e.toString());var i=f(e);if(1!==i.length||i[0]!==n||e.isImaginary())if(n||t.error("Polynomial contains more than one variable. Please specify which variable is to be used!"),-1===i.indexOf(n))r[0]=t.add(e,r[0]);else if(r=r||[new y(0)],e.group===c){var s=e.symbols[n];s||t.error("Expression is not a polynomial!");var o=Number(s.power);((d=t.divide(e.clone(),s.clone())).contains(n,!0)||o<0||!v(o))&&t.error("Expression is not a polynomial!"),(m=r[o])&&(d=t.add(m,d)),r[o]=d}else e.group===u&&e.each((function(e){_.coeffs(e.clone(),n,r)}),!0);else for(var l=new x(e).coeffs.map((function(e){return new y(e)})),h=0,p=l.length;h<p;h++){var m,d=l[h];(m=r[h])&&(d=t.add(m,d)),r[h]=d}for(h=0,p=r.length;h<p;h++)void 0===r[h]&&(r[h]=new y(0));return r},polyPowers:function(t,r,i){if(i=i||[],(p=p=t.group)===l&&r===t.value)i=i.concat(h(t.symbols));else if(p===u)for(var a in t.symbols){var o=t.symbols[a],p=o.group,f=o.value;if(p===s&&r===f)i.push(o.power);else if(p===l||p===u)i=_.polyPowers(o,r,i);else if(p===c&&o.contains(r)){var m=o.symbols[r];m&&i.push(m.power)}else p!==n&&r===f||i.push(0)}else p===c&&t.contains(r)&&i.push(e.Utils.decompose_fn(t,r,!0).x.power);return e.Utils.arrayUnique(i).sort()},Factor:{split:function(e){var n=new y(1),r=new y(1);return _.Factor.factor(e,new M).each((function(e){var i=t.parse(e);e.isConstant(!0)?n=t.multiply(n,i):r=t.multiply(r,i)})),[n,r]},mix:function(e,t){for(var n=h(e),r=n.length,i=[],s=0;s<r;s++){for(var a=n[s],o=e[a],l=i.length,u=0;u<l;u++){var c=i[u]*a;i.push(c),t&&i.push(-c)}for(u=1;u<=o;u++)i.push(Math.pow(a,u))}return i},common:function(n,r){try{if(n.group===u){for(var i=t.expand(n.clone(),!0).collectSymbols(null,null,(function(e,t){return(t.length||1)-(e.length||1)})),s={},a=[],o=0;o<i.length;o++){var l=i[o];a.push(l.multiplier.clone()),l.each((function(e){var t=Number(e.power);if(isNaN(t))throw new Error("exiting");e.value in s?(t<s[e.value][0]&&(s[e.value][0]=t),s[e.value][1].push(e)):s[e.value]=[t,[e]]}))}var c=new y(1);for(var h in s)s[h][1].length===i.length&&(c=t.multiply(c,t.pow(new y(h),new y(s[h][0]))));var p=e.Math2.QGCD.apply(null,a);if(!p.equals(1))for(r.add(new y(p)),o=0;o<i.length;o++)i[o].multiplier=i[o].multiplier.divide(p);if(!c.equals(1))for(r.add(c),n=new y(0),o=0;o<i.length;o++)n=t.add(n,t.divide(i[o],c.clone()))}}catch(e){}return n},zeroes:function(n,r){var i=function(){throw new e.exceptions.ValueLimitExceededError("Exiting")};try{var s,a,o,l,c;c=(n=t.expand(n.clone())).toString(),s=f(n),o=new y(0);for(var h=[],p=[],m=0,d=s.length;m<s.length;m++){for(var w={},b=0;b<d;b++)m!==b&&(w[s[b]]=0);var x=(a=t.parse(c,w)).power;v(x)||i(),h.push(a),p.push(a.power)}if(e.Utils.allSame(p)){var M=n.length,S=h.length;2===S&&(l=new g(p[0]/(M-1))),3===S&&(l=new g(p[0]/Math.round((Math.sqrt(8*M-1)-3)/2)))}else l=e.Math2.QGCD.apply(null,p);for(v(l)||i(),m=0;m<h.length;m++){var E=h[m],T=E.power.clone().divide(l);E.multiplier=new g(Math.pow(E.multiplier,1/T)),E.power=l.clone(),o=t.add(o,E)}if(o.group!==u)return n;for(;;){var A=_.div(n.clone(),o.clone());if(!A[1].equals(0))break;if(n=A[0],r.add(o.clone()),n.equals(1))break}}catch(c){}return n},factor:function(n,r){if(n.isConstant())return e.Math2.factor(n);var i=t.parse(n),s=_.Factor._factor(i,r);if(s.equals(n))return s;if(s.group===c){var a=new y(1),o=t.parse(s.power),l=t.parse(s.multiplier);s.toUnitMultiplier(),s.multiplier.lessThan(0)&&(a.negate(),s.negate()),s.each((function(e){var n=t.parse(_.Factor._factor(e));n.group===c?(l=t.multiply(l,y.create(n.multiplier)),n.each((function(e){var n=t.parse(_.Factor._factor(e));a=t.multiply(a,n),n.group===c&&(l=t.multiply(l,y.create(n.multiplier)))}))):a=t.multiply(a,n)})),s=t.pow(t.multiply(l,a),o)}return s},quadFactor:function(n,r){if(n.isPoly()&&_.degree(n.equals(2))){var i=e.Utils.variables(n)[0],s=_.coeffs(n,i),a=_.Factor._factor(s[2].clone());if(a.group===c){var o=a.collectSymbols();if(o.length>2)return n;var l=t.multiply(t.parse(s[0]),t.parse(o[0])),u=t.parse(s[1]).negate(),h=t.parse(o[1]),p=_.quad(h,u,l).filter((function(t){if(e.Utils.isInt(t))return t}));if(1===p.length){var f=p[0],d=t.divide(s[0],t.parse(f));e.Utils.isInt(d)&&(r.add(t.parse(m("({0})*({1})+({2})",o[1],i,d))),r.add(t.parse(m("({0})*({1})+({2})",o[0],i,f))),n=new y(1))}}}return n},cubeFactor:function(e,n){if(e.isComposite()){var r=e.collectSymbols();if(2===r.length){var i=r[0].sign(),s=r[0].clone().abs(),a=r[1].sign(),o=r[1].clone().abs();if(s.isCube()&&o.isCube()){i<a&&([i,a]=[a,i],[s,o]=[o,s]);var l=t.parse(s.getNth(3)),u=t.parse(o.getNth(3)),c=t.multiply(t.expand(t.pow(s.clone().toUnitMultiplier(),t.parse("1/3"))),l),h=t.multiply(t.expand(t.pow(o.clone().toUnitMultiplier(),t.parse("1/3"))),u);1===i&&-1===a?(n.add(t.parse(m("(({0})-({1}))",c,h))),n.add(t.parse(m("(({0})^2+({0})*({1})+({1})^2)",c,h))),e=y(1)):1===i&&1===a&&(n.add(t.parse(m("(({0})+({1}))",c,h))),n.add(t.parse(m("(({0})^2-({0})*({1})+({1})^2)",c,h))),e=y(1))}}}return e},_factor:function(n,r){if(n.group===o){var i=n.args[0];if(i.group===s&&i.isSimple())return n}else if(n.group===s&&n.isSimple())return n;if(n.group===u){n.distributeMultiplier(!0);var a=new y(0);n.each((function(e){(e.group===u&&e.power.greaterThan(1)||e.group===c)&&(e=t.expand(e)),a=t.add(a,e)})),a.power=n.power,n=a}n.group===o&&"sqrt"!==n.fname&&(n=e.Utils.evaluate(n));var l=n.clone();try{if(n.group===c){var m,d,g,w,b,x,S=t.parse(n.power);if(m=_.Simplify.strip(n.getDenom()),d=_.Simplify.strip(n.getNum()),g=m.pop(),(w=d.pop()).equals(n))return n;x=_.Factor.factor(w),b=_.Factor.factor(g);var E=_.Simplify.unstrip(d,x),T=_.Simplify.unstrip(m,b);return t.divide(E,T)}if(n.group===s)return n;if(n.isConstant())return n.equals(1)?n.clone():e.Math2.factor(n);if(S=n.power.clone(),v(S)&&(!S.lessThan(0)||n.group!==o)){var A=S.sign();n.toLinear(),r=r||new M;var L={};n=t.parse(e.Utils.subFunctions(n,L)),h(L).length>0&&(r.preAdd=function(n){return t.parse(n,e.Utils.getFunctionsSubs(L))}),n.isLinear()||(r.pFactor=n.power.toString(),n.toLinear());var C=f(n);n.isImaginary()&&C.push(e.Settings.IMAGINARY);var R=C.length>1;if(R){var N=!0,P=!0;if(n.each((function(e){e.group!==s&&(N=!1),e.multiplier.equals(1)||(P=!1)})),N&&P)return t.pow(t.parse(n,e.Utils.getFunctionsSubs(L)),t.parse(S))}var I=new M;n=_.Factor.coeffFactor(n,I),I.each((function(e){p(S)&&e.lessThan(0)&&e.negate(),A<0&&e.invert(),r.add(e)}));var O=new M;if(n=_.Factor.powerFactor(n,O),O.each((function(e){A<0&&e.invert(),r.add(e)})),R)n=_.Factor.cubeFactor(n,r),n=_.Factor.mfactor(n,r),r.each((function(e){A<0&&e.power.negate()}));else{var k=C[0];n=_.Factor.squareFree(n,r,k);var D=new M;n=_.Factor.trialAndError(n,D,k);var U=D.toSymbol();if(U.equals(l))return U;for(var z in D.factors){var B=D.factors[z];r.add(t.pow(B,t.parse(S)))}n.equals(l)&&(n=_.Factor.quadFactor(n,r))}return n=t.parse(n,e.Utils.getFunctionsSubs(L)),r.add(t.pow(n,t.parse(S))),r.toSymbol()}return n}catch(e){return l}},reduce:function(e,n){if(e.group===u&&2===e.length){var r=e.collectSymbols().sort((function(e,t){return t.multiplier-e.multiplier}));if(r[0].power.equals(r[1].power)){var i=t.parse(r[0].power),s=r[0].clone().toLinear(),a=r[1].clone().toLinear();n.add(t.add(s.clone(),a.clone())),a.negate();for(var o=Number(i),l=new y(0),c=1;c<=o;c++){var h=t.pow(s.clone(),t.subtract(i.clone(),new y(c))),p=t.pow(a.clone(),t.subtract(new y(c),new y(1)));l=t.add(l,t.multiply(h,p))}return l}}return e},squareFree:function(e,t,n){if(e.isConstant()||e.group===s)return e;var r=new x(e,n).squareFree(),i=r[2];if(1!==i){var a=r[1].toSymbol();return a.power=a.power.multiply(new g(i)),t.add(_.Factor.factor(a)),_.Factor.squareFree(r[0].toSymbol(),t)}return e},powerFactor:function(n,r){if(n.group!==l||n.previousGroup===a)return n;var i=h(n.symbols);if(!e.Utils.allNumeric(i))return n;var s=e.Utils.arrayMin(i),o=new y(0),u=t.parse(n.value+"^"+s);return n.each((function(e){e=t.divide(e,u.clone()),o=t.add(o,e)})),r.add(u),o},coeffFactor:function(t,n){if(t.isComposite()){var r=e.Math2.QGCD.apply(null,t.coeffs());if(r.equals(1)){var i=function(e){var t;return e.group===c?(t=0,e.each((function(e){t+=e.power}))):t=Number(e.power),t},s=t.collectSymbols(null,null,null,!0).sort((function(e,t){return e.isConstant(!0)?1:t.power-e.power})),a=s[0];(i(a)>i(s[1])||s[1].isConstant(!0))&&a.multiplier.lessThan(0)&&(n.add(new y(-1)),t.each((function(e){e.negate()}),!0))}else t.each((function(e){e.isComposite()?e.each((function(e){e.multiplier=e.multiplier.divide(r)})):e.multiplier=e.multiplier.divide(r)})),t.updateHash();n&&n.add(new y(r))}return t},trialAndError:function(t,n,r){var i=t.clone();try{var a=[];if(t.isConstant()||t.group===s)return t;for(var o=new x(t,r),l=o.coeffs[0],u=e.Math2.ifactor(l),c=_.proots(t),h=0;h<c.length;h++){var p=c[h],f=1;if(!isNaN(p)){for(var m in u){var d=e.Utils.round(Math.log(m)/Math.log(Math.abs(p)),8);if(v(d)){p=m,f=d;break}}var y=new g(p),w=[new g(y.num).negate()];w[f]=new g(y.den);var b=x.fromArray(w,o.variable).fill(),M=o.divide(b);M[1].equalsNumber(0)&&(o=M[0],a.push(b.toSymbol()))}}return o.equalsNumber(1)||(o=_.Factor.search(o,n)),a.forEach((function(e){n.add(e)})),o.toSymbol()}catch(e){return i}},search:function(t,n,r){r=r||10;var i=t.variable,s=function(e,s,a,o){var l=x.fit(e,s,a,r,o,i);if(l&&l.coeffs.length>1){var u=t.divide(l);if(u[1].equalsNumber(0))return n.add(l.toSymbol()),[u[0],l]}return null},a=t.coeffs[0],o=e.Math2.ifactor(a),l=t.lc(),u=e.Math2.ifactor(l),c=t.sub(r),h=e.Math2.ifactor(c),p=_.Factor.mix(h,c<0),f=Math.ceil(t.coeffs.length/2),m=l.lessThan(0),d=a.lessThan(0);for(u[1]=1,o[1]=1;f--;)for(var g in u)for(var v in o)for(var y=0;y<p.length;y++){var w=s(g,v,p[y],f);if(w)return t=w[0],e.Utils.isPrime(t.sub(r))||(t=_.Factor.search(t,n)),t;w||(m&&d?w=s(-g,-v,p[y],f):m?w=s(-g,v,p[y],f):d&&(w=s(g,-v,p[y],f)))}return t},mSqfrFactor:function(t,n){if(t.group!==o)for(var r=f(t).reverse(),i=0;i<r.length;i++)do{if(r[i]!==t.value){var s=e.Calculus.diff(t,r[i]),a=_.Factor.coeffFactor(s);if(a.equals(0))break;var l=!0;if(a.isConstant()&&t.isComposite()&&t.each((function(e){e.multiplier%a!=0&&(l=!1)}),!0),l){var u=_.div(t,a.clone()),c=u[1].equals(0);if(u[0].isConstant()){n.add(u[0]);break}}else c=!1;c&&(n.add(u[0]),t=a)}else n.add(t),t=new y(1)}while(c);return t},sqdiff:function(n,r){if(n.isConstant("all"))return n;try{var i=function(t){return e.Utils.block("POSITIVE_MULTIPLIERS",(function(){return y.unwrapPARENS(b.sqrt(b.abs(t)))}),!0)},a=e.Utils.separate(n.clone()),o=[];for(var l in a)"constants"!==l&&o.push(a[l]);if(o.sort((function(e,t){return t.power-e.power})),2===o.length){var u,c;if(u=o.pop(),c=o.pop(),p(u.power)&&p(c.power)&&u.sign()===c.sign()&&u.group===s&&c.group===s)throw new Error("Unable to factor");if(u.isComposite()&&c.power.equals(2)){c=i(c);var h=_.Factor.factor(t.add(u,a.constants));h.power.equals(2)&&(h.toLinear(),r.add(t.subtract(h.clone(),c.clone())),r.add(t.add(h,c)),n=new y(1))}else if(u=u.powSimp(),c=c.powSimp(),(u.group===s||""===u.fname)&&u.power.equals(2)&&(c.group===s||""===c.fname)&&c.power.equals(2)&&!a.constants){if(u.multiplier.lessThan(0)){var f=c;c=u,u=f}u.multiplier.greaterThan(0)&&(u=i(u),c=i(c)),r.add(t.subtract(u.clone(),c.clone())),r.add(t.add(u,c)),n=new y(1)}}}catch(e){}return n},mfactor:function(n,r){if(n.group===o)if("sqrt"===n.fname){var i=new M,s=_.Factor.common(n.args[0].clone(),i);s=_.Factor.coeffFactor(s,i),n=t.multiply(t.symfunction("sqrt",[s]),t.parse(n.multiplier)),i.each((function(r){n=t.multiply(n,t.parse(e.Utils.format("sqrt({0})",r)))}))}else r.add(n);else{n=_.Factor.mSqfrFactor(n,r);for(var a=f(n),l=n.collectSymbols().map((function(e){return y.unwrapSQRT(e)})),u={},c={},h=a.length,p=l.length,m=0;m<h;m++){var d=a[m];u[d]=new y(0);for(var g=0;g<p;g++){var w=l[g];if(w.contains(d)){var b=w.value===d?w.power.toDecimal():w.symbols[d].power.toDecimal();(!c[d]||b<c[d])&&(c[d]=b),u[d]=t.add(u[d],w.clone())}}}for(var x in u){var S=t.parse(x+"^"+c[x]),E=t.divide(u[x],S),T=t.expand(E);if(T.equals(1))break;var A=_.div(n.clone(),T);if(A[0].equals(0))break;if(A[1].equals(0)){var L=!1;if(A[0].each((function(e){v(e.multiplier)||(L=!0)})),L){A[1]=t.expand(t.multiply(A[1],T));break}}var C=v(T)&&T.lessThan(0);if(A[1].equals(0)&&!C){var R=_.div(n.clone(),A[0].clone());if((S=R[0]).equals(0))return n;if(n=R[1],S.equals(-1)&&!n.equals(0))return n;var N=A[0];if(n.equals(N)){var P=_.Factor.reduce(N,r);return n.equals(P)?P:_.Factor.mfactor(P,r)}return r.add(N),n.equals(0)?S:S.isConstant("all")?(r.add(S),S):_.Factor.mfactor(S,r)}}}return n=_.Factor.sqdiff(n,r),n=_.Factor.zeroes(n,r)}},allLinear:function(e){for(var t=e.length,n=0;n<t;n++)if(!_.isLinear(e[n]))return!1;return!0},isLinear:function(e){var t=!1,r=e.group;if(r===l||r===u)for(var i in t=!0,e.symbols){var h=e.symbols[i],p=h.group;if(p!==o&&p!==a||(t=!1),p===c)t=1===f(h).length;else if(p===l||p===u)t=_.isLinear(h);else if(h.group!==n&&"1"!==h.power.toString()){t=!1;break}}else r===s&&1===e.power&&(t=!0);return t},gcd:function(){var n;if(0===(n=1===arguments.length&&arguments[0]instanceof e.Vector?arguments[0].elements:e.Utils.arguments2Array(arguments)).length)return new y(1);if(1===n.length)return n[0];for(var r=[],i=!1,s=0;s<n.length;s++)if(n[s].group===o&&"gcd"===n[s].fname)(n=n.concat(arguments[s].args)).splice(s,1);else{var a=f(n[s]);if(e.Utils.haveIntersection(a,r)){i=!0;break}r=r.concat(a)}if(i||0===r.length){if(n.every((function(e){return e.getDenom().equals(1)}))){var l=n[0];for(s=1;s<n.length;s++)l=_.gcd_(n[s],l);return l}return t.divide(_.gcd.apply(null,n.map((function(e){return e.getNum()}))),_.lcm.apply(null,n.map((function(e){return e.getDenom()}))))}return t.symfunction("gcd",n)},gcd_:function(n,r){if(n.group!==o&&n.group!==i||(n=e.Utils.block("PARSE2NUMBER",(function(){return t.parse(n)}))),r.group===o&&(r=e.Utils.block("PARSE2NUMBER",(function(){return t.parse(r)}))),n.isConstant()&&r.isConstant())return new y(e.Math2.QGCD(new g(+n),new g(+r)));var s=t.multiply(n.getDenom()||new y(1),r.getDenom()||new y(1)).invert();if(n=t.multiply(n.clone(),s.clone()),r=t.multiply(r.clone(),s.clone()),n=t.expand(n),r=t.expand(r),n.group===c||r.group===c){var l=t.divide(n.clone(),r.clone());if(!(m=t.multiply(r.clone(),l.getDenom().invert())).equals(1))return m}if(n.group===a||r.group===a){var u=new y(e.Math2.GCD(n.multiplier,r.multiplier)),h=_.gcd_(n.value===w?new y(1):t.parse(n.value),r.value===w?new y(1):t.parse(r.value)),p=_.gcd_(t.parse(n.power),t.parse(r.power));return t.multiply(u,t.pow(h,p))}if(n.length<r.length){var m=n;n=r,r=m}var d=f(n),v=f(r);if(d.length===v.length&&1===d.length&&d[0]===v[0]||1===d.length&&0===v.length||0===d.length&&1===v.length)return n=new x(n),r=new x(r),t.divide(n.gcd(r).toSymbol(),s);var b,M=[];for(n.each((function(e){M.push(e.multiplier)})),r.each((function(e){M.push(e.multiplier)}));!r.equals(0);){if(m=r.clone(),n=n.clone(),b=_.div(n,m),r=b[1],b[0].equals(0))return t.divide(new y(e.Math2.QGCD(n.multiplier,r.multiplier)),s);n=m}var S=e.Math2.QGCD.apply(void 0,M);return S.equals(1)||n.each((function(e){e.multiplier=e.multiplier.divide(S)})),!n.equals(1)||n.isConstant()||r.isConstant()?t.divide(n,s):t.divide(t.symfunction("gcd",arguments),s)},lcm:function(){var n;1===arguments.length?arguments[0]instanceof e.Vector?n=arguments[0].elements:t.error("lcm expects either 1 vector or 2 or more arguments"):n=e.Utils.arguments2Array(arguments);var r,i=n.reduce((function(e,n){return t.multiply(e,n.clone())}),new y(1)),s=function(e,t){t=Number(t);var n,r,i,s=[],a=Math.pow(2,e.length);for(r=t;r<a;r++){n=[],i=e.length-1;do{0!=(r&1<<i)&&n.push(e[i])}while(i--);n.length===t&&s.push(n)}return s}(arguments,arguments.length-1).map((function(e){return e.reduce((function(e,n){return t.multiply(e,n.clone())}),new y(1))}));r=n.every((function(t){return e.Utils.isVariableSymbol(t)}))?t.symfunction("gcd",e.Utils.arrayUnique(s)):_.gcd.apply(null,s);var a=t.divide(i,r);return a},divide:function(n,r){var i,s,a,o;return(o=(a=e.Algebra.Factor.factor(n.clone())).getDenom()).isConstant("all")?o=new y(1):n=t.expand(y.unwrapPARENS(t.multiply(a,o.clone()))),i=_.div(n,r),s=t.divide(i[1],r),t.divide(t.add(i[0],s),o)},div:function(n,r){var i,a,o=[new y(0),n.clone()];try{if(r.isConstant("all"))return n.each((function(e){e.multiplier=e.multiplier.divide(r.multiplier)})),[n,new y(0)];if(n=t.expand(n),r=t.expand(r),n.group===s&&r.group===u){var l=n.value,c=e.Utils.decompose_fn(r.clone(),l,!0);if(n.isLinear()&&c.x&&c.x.isLinear()&&r.isLinear()){var h=y.create(n.multiplier);return[t.divide(h.clone(),c.a.clone()),t.divide(t.multiply(h,c.b),c.a).negate()]}}if(n.group===s&&r.group===s){var p=t.divide(n.clone(),r.clone());return p.isConstant()?[p,new y(0)]:[new y(0),n.clone()]}var m=n.hasFunc(),d=r.hasFunc(),v=!1;if(m||d){v=!0;var b={},M=(n=t.parse(e.Utils.subFunctions(n,b)),r=t.parse(e.Utils.subFunctions(r,b)),e.Utils.getFunctionsSubs(b))}var _,E,T=e.Utils.arrayUnique(f(n).concat(f(r)));if((n.isImaginary()||r.isImaginary())&&T.push(e.Settings.IMAGINARY),1===T.length)_=(Y=new x(n).divide(new x(r)))[0].toSymbol(),E=Y[1].toSymbol();else{T.push(w);var A=function(e){for(var n=new y(0),r=0;r<e.length;r++){var i=e[r].toSymbol();n=t.add(n,i)}return n},L=function(e,t){var n,r=Math.max.apply(null,e.terms),i=0;if(!t)for(var s=0;s<e.terms.length;s++)if(e.terms[s].equals(r)&&(n=s,i++),i>1)return;if(t)for(s=0;s<e.terms.length;s++)if(e.terms[s].equals(r)){n=s;break}return[r,n,e]},C=function(e,t){var n=e[t=t||0],r=e.length;if(n){for(var i,s,a=L(n),o=t+1;o<r;o++){var l=e[o],u=n.sum.equals(l.sum);if(!u&&a)break;if(u){for(var c,h,p,f,m=n.terms.length,d=0;d<m;d++){var g=n.terms[d],v=l.terms[d];(void 0===c||g.greaterThan(c))&&(c=g,p=d),(void 0===h||v.greaterThan(h))&&(h=v,f=d)}var y=c.subtract(l.terms[p]),w=h.subtract(n.terms[f]);if(w>y){a=[h,f,l];break}if(y>w){a=[c,p,n];break}}else if(a=L(l))break;a=L(l)}if(!a)return L(e[0],!0);for(o=0;o<O.length;o++){var b=O[o].terms;if((s=a[1])===b.length-1)return;if(!(i=b[s]).equals(0))break}return i.equals(0)?C(e,++t):a}},R=e.Utils.toMapObj(T),N=function(e,t){return t.sum.subtract(e.sum)},P=function(e,t){if(!e||!t)return!1;for(var n=0;n<e.terms.length;n++)if(e.terms[n].lessThan(t.terms[n]))return!1;return!0},I=n.tBase(R).sort(N),O=r.tBase(R).sort(N),k=P(I[0],O[0])&&I[0].count>O[0].count?O:I,D=C(k),U=[];if(D){var z=D[1],B=function(e,t){var n=e.len(),r=t.len(),i=t.terms[z],s=e.terms[z];return r>n&&i.greaterThan(s)?r-n:i.subtract(s)};z=function(e,t,n){for(var r=[],i=0;i<e.length;i++)for(var s=e[i],a=0;a<s.terms.length;a++){var o=r[a],l=s.terms[a];0===i?r[a]=l:o&&!o.equals(l)&&(r[a]=void 0)}for(i=0;i<r.length;i++)if((s=r[i])&&!s.equals(0))return i;return n}(I,0,z),I.sort(B),O.sort(B);var F=O[0],q=I[0],H=new S(new g(1),[],q.map);if(F.sum.greaterThan(q.sum)&&q.len()>1)for(var G=0;G<q.terms.length;G++){var V=F.terms[G].subtract(q.terms[G]);if(V.equals(0))H.terms[G]=new g(0);else{var W=V.add(new g(1));H.terms[G]=V;for(var j=0;j<I.length;j++)I[j].terms[G]=I[j].terms[G].add(W)}}for(var X=P(I[0],O[0]),Z=0;X&&(a=O,!(i=I)[0].sum.equals(a[0].sum)||i.length>=a.length);){if(Z++>200)throw new e.exceptions.InfiniteLoopError("Unable to compute!");var Y=I[0].divide(O[0]);for(U.push(Y),I.shift(),G=1;G<O.length;G++){var J=O[G].multiply(Y).generateImage(),$=I.length;for(0===$&&(J.coeff=J.coeff.neg(),I.push(J),I.sort(B)),j=0;j<$;j++){var Q=I[j];if(Q.getImg()===J.getImg()){Q.coeff=Q.coeff.subtract(J.coeff),Q.coeff.equals(0)&&(e.Utils.remove(I,j),j--);break}j===$-1&&(J.coeff=J.coeff.neg(),I.push(J),I.sort(B))}}if(!(X=P(I[0],O[0]))&&I.length>=O.length)for(G=1;G<I.length;G++)if(X=P(I[G],O[0])){I.unshift(e.Utils.remove(I,G));break}}}_=A(U),E=A(I),void 0!==H&&(H=H.toSymbol(),_=t.divide(_,H.clone()),E=t.divide(E,H))}return v&&(_=t.parse(_.text(),M),E=t.parse(E.text(),M)),[_,E]}catch(e){return o}},line:function(n,r,i){e.Utils.isArray(n)&&(n=e.Utils.convertToVector(n)),e.Utils.isArray(r)&&(r=e.Utils.convertToVector(r)),i=t.parse(i||"x"),e.Utils.isVector(n)&&e.Utils.isVector(r)||t.error('Line expects a vector! Received "'+n+'" & "'+r+'"');var s=t.subtract(r.e(1).clone(),n.e(1).clone()),a=t.subtract(r.e(2).clone(),n.e(2).clone()),o=t.divide(a,s),l=t.multiply(i,o.clone()),u=t.multiply(n.e(1).clone(),o);return t.add(t.subtract(l,u),n.e(2).clone())},PartFrac:{createTemplate:function(e,n,r,i){var a,l,u,c,h,p,f;(e=_.Factor.factor(e)).each((function(t,n){if(t.group===o&&""===t.fname&&t.args[0].group===s){var r=t.args[0];this.symbols?(delete this.symbols[n],this.symbols[r.value]=r):e=t.args[0]}})),a=n.collectFactors(),l=[],p=[],f=new y(1);for(var m=0;m<a.length;m++){var d=y.unwrapPARENS(a[m]);if(d.power.greaterThan(1)){c=Number(d.power),u=d.clone().toLinear(),h=Number(_.degree(u,i));for(var g=0;g<c;g++){var v=t.pow(u.clone(),new y(g+1));r.push(v.clone());var w=t.divide(e.clone(),v.clone());p.push(h),l.push(w)}}else h=Number(_.degree(d,i)),r.push(d),w=t.divide(e.clone(),d.clone()),w=t.expand(y.unwrapPARENS(w)),p.push(h),l.push(w)}return[r=r.map((function(e){return t.multiply(e,f.clone())})),l,p]},partfrac:function(n,r,i){var s=f(n);r=r||t.parse(s[0]);try{var a,o,l,u,c,h,p,m,d,g,v,w,b,x,M,S,E,T,A;if(a=t.expand(n.getNum()),o=t.expand(n.getDenom().toUnitMultiplier()),a.multiplier=n.multiplier,c=a.groupTerms(r),Number(_.degree(a,r))>=Number(_.degree(o,r))?(b=(w=_.div(a.clone(),t.expand(o.clone())))[0],c=(a=w[1]).groupTerms(r)):b=new y(0),1===Number(_.degree(o,r))){var L=t.divide(a,o);return i?[b,L]:t.add(b,L)}u=_.Factor.factor(o),S=_.PartFrac.createTemplate(o.clone(),u,[],r),E=S[0],x=S[1],h=S[2],v=[c.length],p=[],l=[],M=[],x.map((function(e,n){T=E[n],A=h[n];for(var i=0;i<A;i++){l.push(T.clone());var s=y.create(r,i),a=t.expand(t.multiply(e,s.clone())).groupTerms(r),o=a.length;v.push(o),p.push(a),M.push(s.clone())}})),m=e.Utils.arrayMax(v),g=new e.Matrix(e.Utils.fillHoles(c,m)).transpose(),d=new e.Matrix;for(var C=0;C<p.length;C++)d.elements.push(e.Utils.fillHoles(p[C],m));var R=t.multiply(d.transpose().invert(),g),N=i?[b]:b;return R.each((function(e,n){var r=t.multiply(M[n],t.divide(e,l[n]));i?N.push(r):N=t.add(N,r)})),N}catch(e){try{if(n.isComposite()){var P={};n.each((function(e){var n=e.getDenom(),r=e.getNum(),i=P[n];P[n]=i?t.add(i,r):r}));var I=new y(0);for(var O in P)I=t.add(I,t.divide(P[O],t.parse(O)));n=I}}catch(e){}}return n}},degree:function(n,r,i){if(i=i||{nd:[],sd:[],depth:0},!r){var o=f(n);if(o.length>1)throw new Error("You must specify the variable for multivariate polynomials!");if(0===o.length)return new y(0);r=t.parse(o[0])}var l=n.group;n.isComposite()?((n=n.clone()).distributeExponent(),n.each((function(e){i.depth++,_.degree(e,r,i),i.depth--}))):n.group===c?n.each((function(e){i.depth++,_.degree(e,r,i),i.depth++})):l===a&&n.value===r.value?i.sd.push(n.power.clone()):l===s&&n.value===r.value?i.nd.push(t.parse(n.power)):i.nd.push(new y(0));var u=i.nd.length>0?e.Utils.arrayMax(i.nd):void 0;return 0===i.depth&&i.sd.length>0?(void 0!==u&&i.sd.unshift(u),t.symfunction("max",i.sd)):(e.Utils.isSymbol(u)||(u=t.parse(u)),u)},sqComplete:function(n,r,i){e.Utils.isSymbol(r)||(r=t.parse(r));var s,a,o,l,u,c,h,p,f,m,d,g=function(t){throw t=t||"Stopping",new e.exceptions.ValueLimitExceededError(t)};return n.isPoly(!0)||g("Must be a polynomial!"),f=e.Utils.inBrackets,n=n.clone(),(s=e.Algebra.degree(n,r)).equals(2)||g("Cannot complete square for degree "+s),a=(h=e.Algebra.coeffs(n,r))[2],p=h[1].sign(),o=t.divide(h[1],new y(2)),l=t.pow(o.clone(),new y(2)),i?[a,o,u]:(d=b.sqrt(a),c=t.divide(b.sqrt(l),d.clone()),u=t.subtract(h[0],t.pow(c.clone(),new y(2))),{a:m=t.parse(f(d.clone()+"*"+r+(p<0?"-":"+")+c)),c:u,f:t.add(t.pow(m.clone(),new y(2)),u.clone())})},Simplify:{strip:function(e){var n=t.parse(e.multiplier);e.toUnitMultiplier();var r=t.parse(e.power);return e.toLinear(),[n,r,e]},unstrip:function(e,n){var r=e[0],i=e[1];return t.multiply(r,t.pow(n,i))},complexSimp:function(e,n){var r,i,s,a,o,l,u,c,h;return l=e.realpart(),c=e.imagpart(),u=n.realpart(),h=n.imagpart(),r=t.multiply(l.clone(),u.clone()),i=t.multiply(c.clone(),h.clone()),s=t.multiply(u.clone(),c),a=t.multiply(l,h.clone()),o=t.add(t.pow(u,new y(2)),t.pow(h,new y(2))),t.divide(t.add(t.add(r,i),t.multiply(t.subtract(s,a),y.imaginary())),o)},trigSimp:function(n){if(n.containsFunction(["cos","sin","tan"])){n=n.clone();var r=_.Simplify.strip(n),i=(n=r.pop()).clone();if(n.group===u){var s=new y(0);n.each((function(e){var n=_.Simplify.trigSimp(e.fnTransform());s=t.add(s,n)}),!0),i=t.pow(t.multiply(new y(n.multiplier),s),new y(n.power))}else if(n.group===c){var a=n.getNum(),o=n.getDenom();if("sin"===a.fname&&"cos"===o.fname&&a.args[0].equals(o.args[0])&&a.power.equals(o.power)&&(i=t.parse(e.Utils.format("({0})*({1})*tan({2})^({3})",o.multiplier,a.multiplier,a.args[0],a.power))),i.group===c){var l=new y(1);i.each((function(n){"tan"===n.fname&&(n=t.parse(e.Utils.format("({0})*sin({1})^({2})/cos({1})^({2})",n.multiplier,_.Simplify.simplify(n.args[0]),n.power))),l=t.multiply(l,n)})),i=l}}n=i=_.Simplify.unstrip(r,i).distributeMultiplier()}return n},fracSimp:function(e){var n=e.getDenom();if((f=e.getNum()).isImaginary()&&n.isImaginary()&&(e=_.Simplify.complexSimp(f,n)),e.isComposite()){e.power>1&&(e=t.expand(e));var r,i,s,a,o,l,u,c,h,p,f,m=e.collectSymbols();for(i=m.pop();m.length;)s=m.pop(),a=t.parse(i.getDenom()),o=t.parse(s.getDenom()),l=i.getNum(),u=s.getNum(),p=t.multiply(a.clone(),o.clone()),c=t.multiply(l,o),h=t.multiply(u,a),i=t.divide(t.add(c,h),p);return n=t.expand(i.getDenom()),(r=(f=t.expand(i.getNum())).isImaginary()&&n.isImaginary()?_.Simplify.complexSimp(f,n):t.divide(f,n)).equals(e)?e:_.Simplify.simplify(r)}return e},ratSimp:function(e){if(e.group===c){var n=e.getDenom(),r=e.getNum().distributeMultiplier(),i=_.Simplify.fracSimp(n),s=_.Simplify.fracSimp(r);e=t.divide(s,i)}return e},sqrtSimp:function(e,r){if(e.isSQRT()){var i,s=_.Factor.factor(e.args[0].clone()),a=t.parse(s.multiplier),o=a.sign(),l=t.sqrt(a.abs());if(v(l)){if(s.group===c){var u=new y(1);s.each((function(e){if(e.group===n){var r=t.sqrt(e.clone());v(r)?l=t.multiply(l,r):u=t.multiply(u,e)}else u=t.multiply(u,e)}));var h=t.multiply(u,t.parse(o));(i=t.sqrt(h.clone())).isImaginary&&(i=t.sqrt(t.expand(h.clone())))}else i=t.sqrt(s.clone().toUnitMultiplier());return t.multiply(l,i)}}else e.isComposite()&&e.isLinear()?(l=new y(0),e.each((function(e){l=t.add(l,_.Simplify.sqrtSimp(e))}),!0),l=t.multiply(l,t.parse(e.multiplier))):e.group===c&&(l=t.parse(e.multiplier),e.each((function(e){var n=_.Simplify.sqrtSimp(e);l=t.multiply(l,n)}),!0),l=t.pow(l,t.parse(e.power)));return l||t.parse(e)},patternSub:function(t){var n={},r=function(e){var t=!1;return e.each((function(e){e.group===u?t=!0:e.symbols&&(t=r(e))})),t},i=function(s){s.each((function(s){if(s.symbols||s.group===o)if(r(s))i(s);else if(!n[s.value]){var a=e.Utils.getU(t);n[s.value]=a,t=t.sub(s.value,a)}}),!0)};return i(t),[t,n]},simplify:function(n){var r=_.Simplify.strip(n);if(n=r.pop(),(n=_.Simplify.fracSimp(n)).isConstant()||n.group===e.groups.S)return r.push(n),_.Simplify.unstrip(r,n);var i=n.clone();if(i=_.Simplify.trigSimp(i),i=_.Simplify.ratSimp(i),(i=_.Factor.factor(i)).group===e.groups.CP&&i.isLinear()){var s=i.multiplier.clone();i.toUnitMultiplier();var a=new y(0);i.each((function(e){var n=_.Simplify.simplify(e);a=t.add(a,n)})),i=a,a.multiplier=a.multiplier.multiply(s)}return _.Simplify.unstrip(r,i)}},Classes:{Polynomial:x,Factors:M,MVTerm:S}};e.Expression.prototype.simplify=function(){return _.Simplify.simplify(this.symbol)},r.useAlgebraDiv=function(){var n=_.divideFn=t.divide,r=0;t.divide=function(t,i){var s;return s=1==++r?e.Algebra.divide(t,i):n(t,i),r=0,s}},r.useParserDiv=function(){_.divideFn&&(t.divide=_.divideFn),delete _.divideFn},r.register([{name:"factor",visible:!0,numargs:1,build:function(){return _.Factor.factor}},{name:"simplify",visible:!0,numargs:1,build:function(){return _.Simplify.simplify}},{name:"gcd",visible:!0,numargs:[1],build:function(){return _.gcd}},{name:"lcm",visible:!0,numargs:[1],build:function(){return _.lcm}},{name:"roots",visible:!0,numargs:-1,build:function(){return _.roots}},{name:"divide",visible:!0,numargs:2,build:function(){return _.divide}},{name:"div",visible:!0,numargs:2,build:function(){return _.div}},{name:"partfrac",visible:!0,numargs:[1,2],build:function(){return _.PartFrac.partfrac}},{name:"deg",visible:!0,numargs:[1,2],build:function(){return _.degree}},{name:"coeffs",visible:!0,numargs:[1,2],build:function(){return function(){var t=_.coeffs.apply(_,arguments);return new e.Vector(t)}}},{name:"line",visible:!0,numargs:[2,3],build:function(){return _.line}},{name:"sqcomp",visible:!0,numargs:[1,2],build:function(){return function(e,t){try{return t=t||f(e)[0],_.sqComplete(e.clone(),t).f}catch(t){return e}}}}]),r.api()}()},426:(e,t,n)=>{if(void 0===r){var r=n(407);n(374)}!function(){"use strict";var e=r.getCore(),t=e.PARSER,n=e.Frac,i=e.Settings,s=e.Utils.isSymbol,a=e.groups.FN,o=e.Symbol,l=e.Utils.text,u=e.Utils.inBrackets,c=e.Utils.isInt,h=e.Utils.format,p=e.Utils.even,f=e.Utils.evaluate,m=e.groups.N,d=e.groups.S,g=(a=e.groups.FN,e.groups.PL),v=e.groups.CP,y=e.groups.CB,w=e.groups.EX,b=e.groups.P,x=i.LOG,M="abs",S="sqrt",_="sin",E="cos",T="tan",A="sec",L="csc",C="cot",R="asin",N="acos",P="atan",I="asec",O="acsc",k="acot",D="sinh",U="cosh",z="tanh",B="csch",F="sech",q="coth",H="asech",G="acsch",V="acoth";function W(e){this.message=e||""}W.prototype=new Error,o.prototype.hasIntegral=function(){return this.containsFunction("integrate")},o.prototype.fnTransform=function(){if(this.group!==a)return this;var e,n=this.args[0],r=new o(this.multiplier),i=this.clone().toUnitMultiplier();if(this.isLinear())switch(this.fname){case D:e=t.parse(h("(e^({0})-e^(-({0})))/2",n));break;case U:e=t.parse(h("(e^({0})+e^(-({0})))/2",n));break;case z:e=t.parse(h("(e^({0})-e^(-({0})))/(e^({0})+e^(-({0})))",n));break;case T:e=t.parse(h("sin({0})/cos({0})",n));break;case L:e=t.parse(h("1/sin({0})",n));break;case A:e=t.parse(h("1/cos({0})",n));break;default:e=i}else if(this.power.equals(2))switch(this.fname){case _:e=t.parse(h("1/2-cos(2*({0}))/2",n));break;case E:e=t.parse(h("1/2+cos(2*({0}))/2",n));break;case T:e=t.parse(h("sin({0})^2/cos({0})^2",n));break;case U:e=t.parse(h("1/2+cosh(2*({0}))/2",n));break;case D:e=t.parse(h("-1/2+cosh(2*({0}))/2",n));break;case z:e=t.parse(h("(1+cosh(2*({0})))/(-1+cosh(2*({0})))",n));break;case A:e=t.parse(h("(1-cos(2*({0})))/(1+cos(2*({0})))+1",n));break;default:e=i}else if(this.fname===A)e=t.parse(h("1/cos({0})^({1})",this.args[0],this.power));else if(this.fname===L)e=t.parse(h("1/sin({0})^({1})",this.args[0],this.power));else if(this.fname===T)e=this.power.lessThan(0)?t.parse(h("cos({0})^(-({1}))/sin({0})^({1})",this.args[0],this.power.negate())):t.parse(h("sin({0})^({1})/cos({0})^({1})",this.args[0],this.power));else if(this.fname===_&&this.power.lessThan(0))e=t.parse(h("csc({0})^(-({1}))",this.args[0],this.power.negate()));else if(this.fname===E&&this.power.lessThan(0))e=t.parse(h("sec({0})^(-({1}))",this.args[0],this.power.negate()));else if(this.fname===_&&this.power.equals(3))e=t.parse(h("(3*sin({0})-sin(3*({0})))/4",this.args[0]));else if(this.fname===E&&this.power.equals(3))e=t.parse(h("(cos(3*({0}))+3*cos({0}))/4",this.args[0]));else if(this.fname!==E&&this.fname!==_||!p(this.power))e=i;else{var s=this.power/2,l=t.pow(this.clone().toLinear(),t.parse(2)).fnTransform(),u=t.expand(t.pow(l,t.parse(s)));e=new o(0),u.each((function(n){var r=n.fnTransform();e=t.add(e,r)}),!0)}return t.multiply(e,r)},o.prototype.hasTrig=function(){if(this.isConstant(!0)||this.group===d)return!1;if(this.fname&&(e.Utils.in_trig(this.fname)||e.Utils.in_inverse_trig(this.fname)))return!0;if(this.symbols)for(var t in this.symbols)if(this.symbols[t].hasTrig())return!0;return!1},e.Expression.prototype.hasIntegral=function(){return this.symbol.hasIntegral()},e.Utils.toCommonDenominator=function(n){if(n.isComposite()&&n.isLinear()){var r=new o(n.multiplier),i=new o(1),s=new o(0);return n.each((function(e){i=t.multiply(i,e.getDenom())}),!0),n.each((function(e){var n=e.getNum(),r=e.getDenom(),a=t.multiply(n,t.divide(i.clone(),r));s=t.add(s,a)})),t.multiply(r,e.Algebra.divide(t.expand(s),t.expand(i)))}return n},e.Utils.in_inverse_trig=function(e){return-1!==[R,N,P,O,I,k].indexOf(e)},e.Utils.in_trig=function(e){return-1!==[E,_,T,A,L,C].indexOf(e)},e.Utils.in_htrig=function(e){return-1!==[D,U,z,G,H,V].indexOf(e)},e.Matrix.jacobian=function(t,n){var r=new e.Matrix;return n||(n=e.Utils.arrayGetVariables(t)),n.forEach((function(n,i){t.forEach((function(t,s){var a=e.Calculus.diff(t.clone(),n);r.set(s,i,a)}))})),r},e.Matrix.prototype.max=function(){var e=new o(0);return this.each((function(t){var n=t.abs();n.gt(e)&&(e=n)})),e},e.Matrix.cMatrix=function(n,r){var i=new e.Matrix;return r.forEach((function(e,r){i.set(r,0,t.parse(n))})),i};var j=e.Utils.all_functions=function(e){for(var t=0,n=e.length;t<n;t++)if(e[t].group!==a)return!1;return!0},X=e.Utils.cosAsinBtranform=function(e,n){var r,i;return r=e.args[0],i=n.args[0],t.parse(h("(sin(({0})+({1}))-sin(({0})-({1})))/2",r,i))},Z=e.Utils.cosAsinAtranform=function(e,n){return 1!==Number(n.power)?t.multiply(e,n):(r=e.args[0],t.parse(h("(sin(2*({0})))/2",r)));var r},Y=e.Utils.cosAsinBtranform=function(e,n){var r,i;return r=e.args[0],i=n.args[0],t.parse(h("(cos(({0})+({1}))-cos(({0})-({1})))/2",r,i))},J=e.Utils.trigTransform=function(e){for(var n,r,i={},s=new o(1),l=0,u=e.length;l<u;l++)if((n=e[l]).group===a){var c=n.fname;c===E&&i.sin?(r=i.sin.args[0].toString()!==n.args[0].toString()?X(n,i.sin):Z(n,i.sin),delete i.sin,s=t.multiply(s,r)):c===_&&i.cos?(r=i.cos.args[0].toString()!==n.args[0].toString()?X(n,i.cos):Z(n,i.cos),delete i.cos,s=t.multiply(s,r)):c===_&&i.sin?(i.sin.args[0].toString()!==n.args[0].toString()?(r=Y(n,i.sin),delete i.sin):(r=t.multiply(n,i.sin),delete i.sin),s=r):i[c]=n}else s=t.multiply(s,n);for(var h in i)s=t.multiply(s,i[h]);return s};e.Settings.integration_depth=10,e.Settings.max_lim_depth=10;var $=e.Calculus={version:"1.4.6",sum:function(n,r,i,s){if(r.group!==e.groups.S)throw new e.exceptions.NerdamerTypeError("Index must be symbol. "+l(r)+" provided");var a;if(r=r.value,e.Utils.isNumericSymbol(i)&&e.Utils.isNumericSymbol(s)){var u=s-i<200?"":"PARSE2NUMBER";i=Number(i),s=Number(s),a=e.Utils.block(u,(function(){for(var a=n.text(),l={"~":!0},u=new e.Symbol(0),c=i;c<=s;c++){l[r]=new o(c);var h=t.parse(a,l);u=t.add(u,h)}return u}))}else a=t.symfunction("sum",arguments);return a},product:function(n,r,i,s){if(r.group!==e.groups.S)throw new e.exceptions.NerdamerTypeError("Index must be symbol. "+l(r)+" provided");var a;if(r=r.value,e.Utils.isNumericSymbol(i)&&e.Utils.isNumericSymbol(s)){var u=s-i<200?"":"PARSE2NUMBER";a=e.Utils.block(u,(function(){i=Number(i),s=Number(s.multiplier);for(var a=n.text(),l={},u=new e.Symbol(1),c=i;c<=s;c++)l[r]=new o(c),u=t.multiply(u,t.parse(a,l));return u}))}else a=t.symfunction("product",arguments);return a},diff:function(r,c,p){if(e.Utils.isVector(r)){var f=new e.Vector([]);return r.each((function(e){f.elements.push($.diff(e,c,p))})),f}if(e.Utils.isMatrix(r)){var D=new e.Matrix;return r.each((function(e,t,n){D.set(t,n,$.diff(e,c,p))})),D}var U=s(c)?c.text():c;if(p=s(p)?p.multiplier:p||1,void 0===U&&(U=e.Utils.variables(r)[0]),r.group===a&&r.fname===S){var W=r.args[0],j=r.power.clone();W.group===m&&W.group===b||(W.power=s(W.power)?t.multiply(W.power,t.multiply(new o(.5)),j):W.power.multiply(new n(.5)).multiply(j),W.multiplier=W.multiplier.multiply(r.multiplier)),r=W}if(r.group!==a||s(r.power))r=J(r);else{var X=J(t.parse(r)),Z=$.diff(r.args[0].clone(),U);r=t.multiply(X,Z)}return p>1&&(p--,r=$.diff(r,c,p)),r;function Y(e){return(e.value===U||e.contains(U,!0))&&(e.multiplier=e.multiplier.multiply(e.power),e.power=e.power.subtract(new n(1)),e.power.equals(0)&&(e=o(e.multiplier))),e}function J(e){var r,p,f=e.group;if(f===m||f===d&&e.value!==U||f===b)e=o(0);else if(f===d)e=Y(e);else{if(f===y){var S=e.multiplier.clone();e.toUnitMultiplier();var D=t.multiply(function(e){for(var n=e.collectSymbols(),r=new o(0),i=n.length,s=0;s<i;s++){for(var a=$.diff(n[s].clone(),U),l=0;l<i;l++)s!==l&&(a=t.multiply(a,n[l].clone()));r=t.add(r,a)}return r}(e),Y(e));return D.multiplier=D.multiplier.multiply(S),D}if(f===a&&e.power.equals(1))switch(e.fname){case x:p=e.clone(),(e=e.args[0].clone()).power=e.power.negate(),e.multiplier=p.multiplier.divide(e.multiplier);break;case E:e.fname=_,e.multiplier.negate();break;case _:e.fname=E;break;case T:e.fname=A,e.power=new n(2);break;case A:e=Q(e,T);break;case L:e=Q(e,"-cot");break;case C:e.fname=L,e.multiplier.negate(),e.power=new n(2);break;case R:e=t.parse("(sqrt(1-("+l(e.args[0])+")^2))^(-1)");break;case N:e=t.parse("-(sqrt(1-("+l(e.args[0])+")^2))^(-1)");break;case P:e=t.parse("(1+("+l(e.args[0])+")^2)^(-1)");break;case M:S=e.multiplier.clone(),e.toUnitMultiplier(),(r=e.args[0].clone()).toUnitMultiplier(),(e=t.parse(u(l(e.args[0]))+"/abs"+u(l(r)))).multiplier=S;break;case"parens":e=o(1);break;case"cosh":e.fname="sinh";break;case"sinh":e.fname="cosh";break;case z:e.fname=F,e.power=new n(2);break;case F:e=Q(e,"-tanh");break;case B:var W=String(e.args[0]);return t.parse("-coth("+W+")*csch("+W+")");case q:return W=String(e.args[0]),t.parse("-csch("+W+")^2");case"asinh":e=t.parse("(sqrt(1+("+l(e.args[0])+")^2))^(-1)");break;case"acosh":e=t.parse("(sqrt(-1+("+l(e.args[0])+")^2))^(-1)");break;case"atanh":e=t.parse("(1-("+l(e.args[0])+")^2)^(-1)");break;case H:W=String(e.args[0]),e=t.parse("-1/(sqrt(1/("+W+")^2-1)*("+W+")^2)");break;case V:e=t.parse("-1/(("+e.args[0]+")^2-1)");break;case G:W=String(e.args[0]),e=t.parse("-1/(sqrt(1/("+W+")^2+1)*("+W+")^2)");break;case I:W=String(e.args[0]),e=t.parse("1/(sqrt(1-1/("+W+")^2)*("+W+")^2)");break;case O:W=String(e.args[0]),e=t.parse("-1/(sqrt(1-1/("+W+")^2)*("+W+")^2)");break;case k:e=t.parse("-1/(("+e.args[0]+")^2+1)");break;case"S":W=String(e.args[0]),e=t.parse("sin((pi*("+W+")^2)/2)");break;case"C":W=String(e.args[0]),e=t.parse("cos((pi*("+W+")^2)/2)");break;case"Si":W=e.args[0],e=t.parse("sin("+W+")/("+W+")");break;case"Shi":W=e.args[0],e=t.parse("sinh("+W+")/("+W+")");break;case"Ci":W=e.args[0],e=t.parse("cos("+W+")/("+W+")");break;case"Chi":W=e.args[0],e=t.parse("cosh("+W+")/("+W+")");break;case"Ei":W=e.args[0],e=t.parse("e^("+W+")/("+W+")");break;case"Li":W=e.args[0],e=t.parse("1/"+i.LOG+"("+W+")");break;case"erf":e=t.parse("(2*e^(-("+e.args[0]+")^2))/sqrt(pi)");break;case"atan2":var j=String(e.args[0]),X=String(e.args[1]);e=t.parse("("+X+")/(("+X+")^2+("+j+")^2)");break;case"sign":e=new o(0);break;case"sinc":e=t.parse(h("(({0})*cos({0})-sin({0}))*({0})^(-2)",e.args[0]));break;case i.LOG10:e=t.parse("1/(("+e.args[0]+")*"+i.LOG+"(10))");break;default:e=t.symfunction("diff",[e,c])}else if(f===w||f===a&&s(e.power)){var Z;Z=f===w?e.value:f===a&&e.contains(U)?e.fname+u(l(e.args[0])):e.value+u(l(e.args[0])),t.multiply(t.parse(x+u(Z)),e.power.clone()),r=$.diff(t.multiply(t.parse(x+u(Z)),e.power.clone()),U),e=t.multiply(e,r)}else if(f!==a||e.power.equals(1)){if(f===v||f===g){var K=e.clone(),ee=new o(0);for(var te in e.symbols)ee=t.add(ee,$.diff(e.symbols[te].clone(),U));e=t.multiply(Y(K),ee)}}else(r=e.clone()).toLinear(),r.toUnitMultiplier(),e=t.multiply(Y(e.clone()),J(r))}return e.updateHash(),e}function Q(e,n,r){return t.multiply(e,t.parse(n+u(r||l(e.args[0]))))}},integration:{u_substitution:function(n,r){function i(e,n,i){var s=$.diff(n,r),a=i?i(e,n):t.divide(e.clone(),s);return a.contains(r,!0)?null:a}function s(e,n){var r=$.integrate(t.symfunction(e,[new o(f)]),f,0);return(r=r.sub(new o(f),n)).updateHash(),r}var l,u=n[0].clone(),c=n[1].clone(),h=u.group,p=c.group,f="__u__";if(h===a&&p!==a){if(l=i(c,(m=u.args[0]).clone()))return t.multiply(l,s(u.fname,m));if(l=i(c,u))return $.integration.poly_integrate(u)}else if(p===a&&h!==a){var m;if(l=i(u,(m=c.args[0]).clone()))return t.multiply(l,s(c.fname,m))}else if(h===a&&p===a){if(l=i(u.clone(),c.clone()))return t.multiply($.integration.poly_integrate(c),l);if(l=i(c.clone(),u.clone()))return t.multiply($.integration.poly_integrate(c),l)}else{if(h===w&&p!==w){if(!(l=i(c,(M=u.power).clone()))){var d=$.integration.decompose_arg(M.clone(),r),g=$.diff(d[2].clone(),r),v=$.integration.decompose_arg(g.clone(),r);if(t.multiply(d[1],v[1]).power.equals(c.power)){var y=t.divide(d[0].clone(),v[0].clone()),b=t.multiply(y.clone(),t.pow(new o(u.value),t.multiply(d[0],new o(f))));return b=t.multiply(b,new o(f)),$.integration.by_parts(b,f,0,{}).sub(f,d[1].clone())}}var x=$.integrate(u.sub(M.clone(),new o(f)),f,0);return t.multiply(x.sub(new o(f),M),l)}var M;if(p===w&&h!==w)return l=i(u,(M=c.power).clone()),x=$.integrate(c.sub(M,new o(f)),f,0),t.multiply(x.sub(new o(f),M),l);if(u.isComposite()||c.isComposite()){var S=function(n,i){var s=$.diff(i,r),a=e.Algebra.Factor.factor(n),o=e.Algebra.Factor.factor(s);return t.divide(a,o)},_=u.isComposite()?u.clone().toLinear():u.clone(),E=c.isComposite()?c.clone().toLinear():c.clone();if(l=i(_.clone(),E.clone(),S))return t.multiply($.integration.poly_integrate(c),l);if(l=i(E.clone(),_.clone(),S))return t.multiply($.integration.poly_integrate(u),l)}}},poly_integrate:function(e){var n=e.power.toString(),r=e.multiplier.toDecimal(),i=e.toUnitMultiplier().toLinear();return-1===Number(n)?t.multiply(new o(r),t.symfunction(x,[i])):t.parse(h("({0})*({1})^(({2})+1)/(({2})+1)",r,i,n))},stop:function(t){throw t=t||"Unable to compute integral!",e.Utils.warn(t),new W(t)},partial_fraction:function(n,r,i,a){var l,u;return s(r)||(r=t.parse(r)),l=new o(0),(u=e.Algebra.PartFrac.partfrac(n,r)).group===y&&u.isLinear()?(u.each((function(e){e.isLinear()||$.integration.stop()})),u.each((function(e){l=t.add(l,$.integrate(e,r,i,a))}))):l=t.add(l,$.integrate(u,r,i,a)),l},get_udv:function(n){var r=[[],[],[],[],[]],i=function(t){var n=t.group;if(n===a){var i=t.fname;e.Utils.in_trig(i)||e.Utils.in_htrig(i)?r[3].push(t):e.Utils.in_inverse_trig(i)?r[1].push(t):i===x?r[0].push(t):$.integration.stop()}else n===d||t.isComposite()&&t.isLinear()||n===y&&t.isLinear()?r[2].push(t):n===w||t.isComposite()&&!t.isLinear()?r[4].push(t):$.integration.stop()};n.group===y?n.each((function(e){i(o.unwrapSQRT(e,!0))})):i(n);for(var s,l=new o(1),u=0;u<5;u++){var c,h=r[u],p=h.length;if(p>0){if(p>1){c=new o(1);for(var f=0;f<p;f++)c=t.multiply(c,h[f].clone())}else c=h[0].clone();s?l=t.multiply(l,c):(s=c).multiplier=s.multiplier.multiply(n.multiplier)}}return[s,l]},trig_sub:function(n,r,i,s,a,o){(a=a||$.integration.decompose_arg(n.clone().toLinear(),r))[3],a[2];var l=a[0],c=a[1];if(c.power.equals(2)&&l.greaterThan(0)){var h=e.Utils.getU(n),p=t.parse(T+u(h)),f=t.parse(A+u(h)+"^2"),m=t.multiply(n.sub(c,p),f),d=$.integrate(m,h,i,s).sub(p,c);return e.Utils.clearU(p),d}},by_parts:function(n,r,i,s){var a,l,u,c,h,p,f,m,d,g,v,y;if(s.previous=s.previous||[],l=(a=$.integration.get_udv(n))[0],u=a[1],v=(c=o.unwrapSQRT(t.expand($.diff(l.clone(),r)),!0)).clone().stripVar(r),c=t.divide(c,v.clone()),h=$.integrate(u.clone(),r,i||0),y=(p=t.multiply(h.clone(),c)).toString(),-1!==s.previous.indexOf(y)&&e.Utils.in_trig(l.fname)&&u.isE())return s.is_cyclic=!0,new o(1);if(s.previous.push(y),f=t.multiply(l,h),g=p.multiplier.clone(),p.toUnitMultiplier(),(d=t.multiply($.integrate(p.clone(),r,i,s),v)).multiplier=d.multiplier.multiply(g),m=t.subtract(f,d),s.is_cyclic&&(s.previous.pop(),0===s.previous.length)){m=t.expand(m);var w=new o(0);m.each((function(e){e.contains(r)||(w=t.add(w,e.clone()))})),m=t.divide(t.subtract(m,w.clone()),t.subtract(new o(1),w))}return m},decompose_arg:e.Utils.decompose_fn},integrate:function(r,l,f,m){if(!l){var b=e.Utils.variables(r);1===b.length&&(l=b[0]),l=l||"x"}if(e.Utils.isVector(r)){var X=new e.Vector([]);return r.each((function(e){X.elements.push($.integrate(e,l))})),X}return isNaN(l)||t.error("variable expected but received "+l),r.isConstant(!0)?t.multiply(r.clone(),t.parse(l)):(m=m||{},e.Utils.block("PARSE2NUMBER",(function(){f=f||0;var b,X=s(l)?l.toString():l,Z=o.unwrapSQRT(r.clone(),!0),Y=Z.group;try{if(++f>e.Settings.integration_depth&&$.integration.stop("Maximum depth reached. Exiting!"),Z.contains(X,!0)){if(Y===d)b=$.integration.poly_integrate(Z,X,f);else if(Y===w)if(Z.previousGroup===a&&"sqrt"!==Z.fname&&Z.fname!==i.PARENTHESIS&&$.integration.stop(),Z.contains(X)&&Z.previousGroup!==a)Z.power.contains(X)?$.integration.stop():((Ye=$.diff(Z.clone().toLinear(),X)).contains(X)&&$.integration.stop(),b=$.integration.poly_integrate(Z,X,f));else{if((se=$.diff(Z.power.clone(),X)).contains(X)){var Q=se.stripVar(X);if((ae=t.divide(se.clone(),Q.clone())).group===d&&ae.isLinear())return Q.multiplier=Q.multiplier.divide(new n(2)),t.parse(h("({2})*(sqrt(pi)*erf(sqrt(-{0})*{1}))/(2*sqrt(-{0}))",Q,X,Z.multiplier));$.integration.stop()}if(Z.isE())se.isLinear()?b=Z:se.isE()&&se.power.group===d&&se.power.power.equals(1)?b=t.multiply(t.symfunction("Ei",[Z.power.clone()]),Z.power):$.integration.stop();else{var K=t.symfunction(x,[t.parse(Z.value)]);b=t.divide(Z,K)}b=t.divide(b,se)}else if(Z.isComposite()&&Z.isLinear()){var ee=t.parse(Z.multiplier);Z.toUnitMultiplier(),b=new o(0),Z.each((function(e){b=t.add(b,$.integrate(e,X,f))})),b=t.multiply(ee,b)}else if(Y===v)if(Z.power.greaterThan(1)&&(Z=t.expand(Z)),Z.power.equals(1))b=new o(0),Z.each((function(e){b=t.add(b,$.integrate(e,X,f))}),!0);else{var te=Number(Z.power);ee=Z.multiplier.clone(),Z.toUnitMultiplier();var ne=Z.clone().toLinear(),re=(Ot=$.integration.decompose_arg(ne,X))[3],ie=Ot[2],se=Ot[0],ae=Ot[1];if(-1===te&&ae.group!==g&&ae.power.equals(2)){var oe=!c(re)||re>0;if(ae.group===d&&ae.power.equals(2)&&oe){var le=function(e){var n=new o(1);return e.each((function(e){n=t.multiply(n,"abs"===e.fname?e.args[0]:e)})),n},ue=se.clone(),ce=re.clone();ue=t.pow(ue,new o(.5)),ce=t.pow(ce,new o(.5)),K=t.multiply(le(ce),le(ue));var he=t.symfunction(P,[t.divide(t.multiply(se,ae.toLinear()),K.clone())]);b=t.divide(he,K)}else if(ae.group===d&&ae.isLinear())b=t.divide($.integration.poly_integrate(Z),se);else if(ae.power.equals(4)){var pe,fe,me,de,ge,ve,ye=u;ue=t.parse(S+ye(se)+"*"+X+"^2"),ce=t.parse(S+ye(2)+"*"+ye(se)+"^"+ye("1/4")+"*"+ye(re)+"^"+ye("1/4")+"*"+X),pe=t.parse(S+ye(re)),Ne=t.add(t.add(ue.clone(),ce.clone()),pe.clone()),et=t.add(t.subtract(ue,ce),pe),fe=t.parse(S+ye(2)+"*"+ye(re)+"^"+ye("3/4")),me=t.parse(S+ye(re)+"*"+ye(re)+"^"+ye("1/4")+"*"+X),de=t.parse("2*"+ye(re)+"*"+S+ye(2)+"*"+ye(re)+"^"+ye("1/4")),ge=t.divide(t.subtract(fe.clone(),me.clone()),t.multiply(de.clone(),et)),ve=t.divide(t.add(fe,me),t.multiply(de,Ne.clone())),b=t.add($.integrate(ge,X,f,m),$.integrate(ve,X,f,m))}else b=$.integration.partial_fraction(Z,X,f)}else if(-.5===te)if(ae.group===d&&ae.power.equals(2))if(ie.multiplier.lessThan(0)&&!re.multiplier.lessThan(0))if(se.negate(),re.isConstant()&&se.isConstant()){K=t.symfunction(S,[se.clone()]);var we=t.symfunction(S,[t.multiply(se.clone(),re)]);b=t.divide(t.symfunction(R,[t.divide(ie.toLinear(),we)]),K)}else{var be=t.symfunction(S,[se]),xe=t.multiply(be.clone(),ae.clone().toLinear());b=t.divide(t.symfunction(P,[t.divide(xe,t.symfunction(S,[ne.clone()]))]),be)}else $.integration.stop();else $.integration.stop();else if(ae.isLinear()&&ae.group!==g)b=t.divide($.integration.poly_integrate(Z),se);else{if(ae.power.equals(2)&&se.greaterThan(0)){var Me,Se,_e,Ee,Te,Ae;Me=t.parse(S+u(se)),Se=t.parse(S+u(re)),_e=t.multiply(Me.clone(),Se.clone()).invert(),Ee=t.pow(re,new o(Z.power)),Ae=e.Utils.getU(Z),De=t.multiply(_e,ae.clone().toLinear()),Te=t.parse(P+u(De));var Le=2*(Math.abs(Z.power)-1),Ce=$.integrate(t.parse(E+u(Ae)+"^"+Le));return e.Utils.clearU(Ae),t.multiply(Ce.sub(Ae,Te),Ee)}if(Z.group===y||Z.power.lessThan(0)){he=Z.clone().toLinear();var Re=e.Algebra.Factor.factor(he).toString()!==he.toString();if(e.Algebra.degree(he,t.parse(X)).equals(2)&&!Re)try{var Ne,Pe,Ie;Ie=e.Algebra.sqComplete(he,X),De=e.Utils.getU(he),Ne=Ie.f.sub(Ie.a,De),Pe=t.pow(Ne,t.parse(Z.power)),b=$.integrate(Pe,De).sub(De,Ie.a)}catch(e){$.integration.stop()}else b=$.integration.partial_fraction(Z,X,f,m)}else b=$.integration.by_parts(Z,X,f,m)}b.multiplier=b.multiplier.multiply(ee)}else if(Y===a){var Oe=Z.args[0];ee=Z.multiplier.clone(),Z.toUnitMultiplier(),se=(Ot=$.integration.decompose_arg(Oe,X))[0],ae=Ot[1];var ke=Z.fname;if(ke===x||ke===R||ke===N||ke===P&&ae.isLinear())if(te=Z.power.toString(),c(te)&&(f-=te),Oe.isComposite()){var De=e.Utils.getU(Z),Ue=(he=t.pow(t.parse(x+u(De)),new o(te)),$.diff(Oe,X)),ze=t.multiply(he,Ue);Ce=$.integrate(ze,De,f,m),b=t.multiply(t.parse(ee),Ce.sub(De,Oe))}else b=t.multiply(t.parse(ee),$.integration.by_parts(Z,X,f,m));else{if(ke===T&&Z.power.lessThan(0))return(Wt=Z.clone()).power.negate(),Wt.fname=C,t.multiply(t.parse(ee),$.integrate(Wt,X,f));if(!se.contains(X,!0)&&Z.isLinear())if(ke===M)if((ae=t.divide(Oe.clone(),se.clone())).group!==d||ae.power.lessThan(0))$.integration.stop();else if(e.Utils.even(ae.power))b=$.integrate(Oe,X,f);else{var Be=$.integrate(ae,X,f);Be.power=Be.power.subtract(new n(1)),b=t.multiply(t.multiply(t.symfunction(M,[ae.toLinear()]),Be),se)}else{var Fe=Z.args[0].group,qe=$.integration.decompose_arg(Oe,X);switch((Fe!==v&&Fe!==d&&Fe!==y||!qe[1].power.equals(1)||Oe.hasFunc())&&$.integration.stop(),ke){case E:b=t.symfunction(_,[Oe]);break;case _:(b=t.symfunction(E,[Oe])).negate();break;case T:b=t.parse(h(i.LOG+"(sec({0}))",Oe));break;case A:b=t.parse(h(i.LOG+"(tan({0})+sec({0}))",Oe));break;case L:b=t.parse(h("-"+i.LOG+"(csc({0})+cot({0}))",Oe));break;case C:b=t.parse(h(i.LOG+"(sin({0}))",Oe));break;case D:b=t.symfunction(U,[Oe]);break;case U:b=t.symfunction(D,[Oe]);break;case z:b=t.parse(h(i.LOG+"(cosh({0}))",Oe));break;case I:case O:case k:case H:case G:case V:b=$.integration.by_parts(Z,X,f,m);break;case F:b=t.parse(h("atan(sinh({0}))",Oe));break;case B:b=t.parse(h(i.LOG+"(tanh(({0})/2))",Oe));break;case q:b=t.parse(h(i.LOG+"(sinh({0}))",Oe));break;case"exp":b=$.integrate(t.parse(h("e^({0})",Oe)),X,f);break;case"S":Oe=Z.args[0].clone();var He=(Ft=$.integration.decompose_arg(Oe,X))[1],Ge=Ft[0],Ve=Ft[3];b=t.parse(h("(cos((1/2)*pi*(({1})+({0})*({2}))^2)+pi*(({1})+({0})*({2}))*S(({1})+({0})*({2})))/(({0})*pi)",Ge,Ve,ae));break;case"C":Oe=Z.args[0].clone(),He=(Ft=$.integration.decompose_arg(Oe,X))[1],Ge=Ft[0],Ve=Ft[3],b=t.parse(h("(pi*(({1})+({0})*({2}))*C(({1})+({0})*({2}))-sin((1/2)*pi*(({1})+({0})*({2}))^2))/(({0})*pi)",Ge,Ve,He));break;case"erf":Oe=Z.args[0].clone(),He=(Ft=$.integration.decompose_arg(Oe,X))[1],Ge=Ft[0],b=t.parse(h("e^(-(({2}))^2)/(({0})*sqrt(pi))+(1/({0})+({1}))*erf(({2}))",Ge,He,Oe));break;case"sign":b=t.multiply(Z.clone(),Oe.clone());break;default:$.integration.stop()}b=t.divide(b,se)}else if(ae.isLinear())if(ke===E||ke===_)if((te=Number(Z.power))<0)Z.fname=ke===_?L:A,Z.invert().updateHash(),b=$.integrate(Z,X,f);else{Oe=Z.args[0];var We=Z.clone(),je=Z.clone(),Xe=new o((te-1)/te),Ze=t.multiply(se.clone(),new o(te)).invert();We.power=We.power.subtract(new n(1)),je.power=je.power.subtract(new n(2));var Ye=t.symfunction(ke===E?_:E,[Oe.clone()]);ke===_&&Ye.negate(),b=t.add(t.multiply(t.multiply(Ze,We),Ye),t.multiply(Xe,$.integrate(t.parse(je),X,f)))}else if(ke===T||ke===C){if(Z.args[0].isLinear(X)){Le=Z.power.subtract(new n(1)).toString();var Je=Z.clone().toUnitMultiplier(),$e=t.parse(h((ke===C?"-":"")+"1/({2}*{0})*{3}({1})^({0})",Le,Oe,se,ke));Je.power=Je.power.subtract(new n(2)),Je.power.equals(0)&&(Je=t.parse(Je)),b=t.subtract($e,$.integrate(Je,X,f))}}else if(ke===A||ke===L){var Qe=Z.power.subtract(new n(1)).toString(),Ke=Z.power.subtract(new n(2)).toString(),et=ke===A?T:C,tt=(Je=Z.clone().toUnitMultiplier(),h((ke===L?"-":"")+"1/({0}*{1})*{4}({3})^({2})*{5}({3})",se,Qe,Ke,Oe,ke,et));$e=t.parse(tt),Je.power=Je.power.subtract(new n(2)),Je.power.equals(0)&&(Je=t.parse(Je)),b=t.add($e,t.multiply(new o(Ke/Qe),$.integrate(Je,X,f)))}else ke!==U&&ke!==D||!Z.power.equals(2)?$.integration.stop():b=$.integrate(Z.fnTransform(),X,f);else $.integration.stop();b.multiplier=b.multiplier.multiply(ee)}}else if(Y===g)b=$.integration.partial_fraction(Z,X,f);else if(Y===y){Z.getDenom().group===d&&(Z=t.expand(Z));var nt=Z.stripVar(X),rt=t.divide(Z.clone(),nt.clone());if(nt.contains(X)&&(rt=t.multiply(rt,nt),nt=new o(1)),rt.group!==y){if(rt.equals(1))return $.integrate(t.expand(Z),X,f);rt.clone().toLinear().isPoly(!0)&&e.Utils.variables(rt).length>1&&(rt=e.Algebra.Factor.factor(rt)),b=$.integrate(rt,X,f)}else{var it=rt.collectSymbols().sort((function(e,t){return e.group===t.group?Number(e.power)===Number(t.power)?e<t?1:-1:t.power-e.power:t.group-e.group})).map((function(e){var n=o.unwrapSQRT(e,!0);return"exp"===n.fname?t.parse(h("({1})*e^({0})",n.args[0],n.multiplier)):n})),st=it.length;if(Z.power<0){if(2===st)return $.integrate(t.expand(Z),X,f,m)}else if(2===st){try{b=$.integration.u_substitution(it,X)}catch(e){}if(!b){var at=it[0].group,ot=it[1].group,lt=it[0],ut=it[1],ct=lt.fname,ht=ut.fname;if(Z=t.multiply(lt.clone(),ut.clone()),at===a&&ot===a)if(ct===x||ht===x)b=$.integration.by_parts(Z.clone(),X,f,m);else{it.sort((function(e,t){return t.fname>e.fname}));var pt=lt.args[0];(!pt.isLinear()||pt.group!==v&&pt.group!==y&&pt.group!==d)&&$.integration.stop(),ae=(Ot=$.integration.decompose_arg(pt,X))[1],se=Ot[0],ae.isLinear()||$.integration.stop();var ft=ut.args[0];if(pt.equals(ft))if(ct===_&&ht===E||ct===E&&ht===_)if(lt.power.lessThan(0)&&$.integration.stop(),ct===_&&lt.power.add(ut.power).equals(0))lt.fname=T,lt.updateHash(),b=$.integrate(lt,X,f);else if(p(lt.power)&&ht===E&&ut.power.lessThan(0)){Le=Number(lt.power)/2;var mt=t.parse(h("(1-cos({0})^2)^({1})",lt.args[0],Le));b=$.integrate(t.expand(t.multiply(mt,ut.clone())),X,f,m)}else if(p(lt.power)&&ht===_&&ut.power.lessThan(0))Le=Number(lt.power)/2,mt=t.parse(h("(1-sin({0})^2)^({1})",lt.args[0],Le)),b=$.integrate(t.expand(t.multiply(mt,ut.clone())),X,f,m);else{var dt=e.Utils.even(lt.power),gt=e.Utils.even(ut.power);if(b=new o(0),dt&&gt){var vt=function(e){var n,r=e.power/2;return n=e.fname===E?"((1/2)+(cos(2*("+e.args[0]+"))/2))^"+r:"((1/2)-(cos(2*("+e.args[0]+"))/2))^"+r,t.parse(n)};return se=vt(lt),re=vt(ut),Ye=t.multiply(se,re),(Wt=t.expand(Ye)).each((function(e){b=t.add(b,$.integrate(e,X,f))})),t.multiply(b,nt)}dt?(De=lt,Je=ut):(De=ut,Je=lt);var yt=De.fname===E?-1:1,wt=((Le=Je.power)-1)/2,bt=t.parse("(1-"+De.fname+e.Utils.inBrackets(pt)+"^2)^"+wt);(Wt=t.expand(t.multiply(new o(yt),t.multiply(De.clone(),bt)))).each((function(e){b=t.add(b,$.integration.poly_integrate(e.clone()))}))}else if(ct===A&&ht===T&&ae.isLinear()&&ut.isLinear())b=t.parse(h("sec({0})^({1})/({1})",lt.args[0],lt.power));else if(ct===T&&ht===A&&ae.isLinear())lt.isLinear()&&ut.isLinear()?b=t.divide(t.symfunction(A,[pt.clone()]),se):p(lt.power)?(te=Number(lt.power)/2,Ye=t.parse(h("(sec({0})^2-1)^({1})",lt.args[0],te)),b=$.integrate(t.expand(t.multiply(Ye,ut)),X,f)):$.integration.stop();else if(ct===A&&ht===E)lt.fname=E,lt.invert().updateHash(),b=$.integrate(t.multiply(lt,ut),X,f);else if(ct===_&&ht===L)ut.fname=_,ut.invert().updateHash(),b=$.integrate(t.multiply(lt,ut),X,f);else if(ct!==T||ht!==E&&ht!==_||!ut.power.lessThan(0))Ye=t.multiply(lt.fnTransform(),ut.fnTransform()),b=$.integrate(t.expand(Ye),X,f);else{Ye=t.multiply(lt.fnTransform(),ut);b=$.integrate(t.expand(Ye),X,f)}else if(ct!==_&&ct!==E||ht!==_&&ht!==E)$.integration.stop();else if(lt.isLinear()&&ut.isLinear())if(lt.args[0].isLinear()&&ut.args[0].isLinear())ht===_?(ie=lt.args[0],qt=ut.args[0]):(qt=lt.args[0],ie=ut.args[0]),he=t.parse(h("(sin(({1})+({0}))+sin(({1})-({0})))/2",ie.toString(),qt.toString())),b=$.integrate(he,X,f);else{var xt=J(it);b=$.integrate(t.expand(xt),X,f)}else xt=new o(1),it.map((function(e){var n=e.fnTransform();xt=t.multiply(xt,n)})),Ye=t.expand(xt),(b=$.integrate(Ye,X,f)).hasIntegral()&&(b=$.integrate(J(xt.collectSymbols()),X,f))}else if(at===a&&ot===d){var Mt=lt.isLinear();lt.fname===E&&Mt&&ut.power.equals(-1)?b=t.symfunction("Ci",[lt.args[0]]):lt.fname===E&&ut.power.equals(-1)?b=$.integrate(t.multiply(lt.fnTransform(),ut.clone()),X,f):lt.fname===U&&Mt&&ut.power.equals(-1)?b=t.symfunction("Chi",[lt.args[0]]):lt.fname===U&&ut.power.equals(-1)?b=$.integrate(t.multiply(lt.fnTransform(),ut.clone()),X,f):lt.fname===_&&Mt&&ut.power.equals(-1)?b=t.symfunction("Si",[lt.args[0]]):lt.fname===_&&ut.power.equals(-1)?b=$.integrate(t.multiply(lt.fnTransform(),ut.clone()),X,f):lt.fname===D&&Mt&&ut.power.equals(-1)?b=t.symfunction("Shi",[lt.args[0]]):lt.fname===D&&ut.power.equals(-1)?b=$.integrate(t.multiply(lt.fnTransform(),ut.clone()),X,f):lt.fname===x&&ut.power.equals(-1)?b=$.integration.poly_integrate(lt,X,f):"erf"===lt.fname?ut.power.equals(1)&&(Ge=(Ft=$.integration.decompose_arg(lt.args[0],X))[0],He=Ft[1],Oe=lt.args[0].toString(),b=t.parse(h("(e^(-(({2}))^2)*(sqrt(pi)*e^((({2}))^2)*(2*({0})^2*({1})^2-3)*erf(({2}))+2*({0})*({1})-2))/(4*sqrt(pi)*({0})^2)",Ge,He,Oe))):b=$.integration.by_parts(Z,X,f,m)}else if(at===w&&ot===d)ae=ct===x?$.integration.decompose_arg(lt.args[0],X)[1]:null,b=lt.isE()&&(lt.power.group===d||lt.power.group===y)&&ut.power.equals(-1)?t.symfunction("Ei",[lt.power.clone()]):ct===x&&ae.value===ut.value?$.integration.poly_integrate(lt,X,f):$.integration.by_parts(Z,X,f,m);else if(at===g&&ot===d){if(ut.value===lt.value&&lt.power.equals(-1)){var St=Math.min.apply(null,e.Utils.keys(lt.symbols)),_t=Math.min(St,ut.power),Et=ut.clone();Et.power=new n(_t),ut=t.divide(ut,Et.clone()),Ye=new o(0),lt.each((function(e){Ye=t.add(Ye,t.divide(e.clone(),Et.clone()))})),Ye.multiplier=lt.multiplier,Z=t.divide(ut,Ye)}else Z=t.expand(Z);b=$.integration.partial_fraction(Z,X,f)}else if(at===v&&ot===d){he=lt.clone().toLinear();var Tt=e.Algebra.degree(he,t.parse(X)).equals(1);if(lt.power.equals(-.5)){se=(Ot=$.integration.decompose_arg(lt.clone().toLinear(),X))[0].negate(),ae=Ot[1],re=Ot[3];var At=Number(lt.power),Lt=Number(ut.power);if(c(Lt)&&e.Utils.even(Lt)&&ae.power.equals(2)){var Ct=t.divide(t.multiply(t.pow(re.clone(),new o(2)),t.symfunction(S,[t.divide(re.clone(),se.clone())])),t.pow(se.clone(),new o(2)));Ct=t.multiply(Ct,t.symfunction(S,[re]).invert());var Rt=t.parse("sin(u)");Rt.power=Rt.power.multiply(ut.power),Ce=$.integrate(Rt,"u",f);var Nt=t.parse("asin(sqrt("+se+"/"+re+")*"+X+")");b=t.multiply(Ct,Ce.sub(new o("u"),Nt))}else if(-.5===At){var Pt=function(e,n){var r=t.parse($.integrate(e,X,f,m).sub(X,h(n,X)));if(!r.hasIntegral())return r};-1===Lt?b=Pt(t.expand(t.expand(t.pow(t.multiply(lt.invert(),ut.invert()),new o(2)))).invert(),"sqrt(1-1/({0})^2)"):-2===Lt&&(b=Pt(t.sqrt(t.expand(t.divide(t.pow(Z,new o(2)).invert(),t.pow(new o(X),new o(2))).negate())).invert(),"sqrt(1-1/({0})^2)"))}}else if(lt.power.equals(-1)&&ut.isLinear()&&Tt)b=$.integration.partial_fraction(Z,X,f);else if(!lt.power.lessThan(0)&&c(lt.power)){var It=t.expand(lt);b=new o(0),It.each((function(e){e.group===g?e.each((function(e){b=t.add(b,$.integrate(t.multiply(ut.clone(),e),X,f))})):b=t.add(b,$.integrate(t.multiply(ut.clone(),e),X,f))}))}else if(lt.power.lessThan(-2))b=$.integration.by_parts(Z,X,f,m);else if(lt.power.lessThan(0)&&ut.power.greaterThan(1)){var Ot;if(se=(Ot=$.integration.decompose_arg(lt.clone().toLinear(),X))[0].negate(),ae=Ot[1],re=Ot[3],ne=lt.clone().toLinear(),ae.group!==g&&ae.isLinear()){te=Number(ut.power),De=new o(Ue="_u_");var kt=t.expand(t.divide(t.pow(t.subtract(De.clone(),re.clone()),new o(te)),De.clone())),Dt={};Dt[Ue]=ne;var Ut=t.parse(kt,Dt);b=$.integrate(Ut,X,0)}else if(ut.power.greaterThan(ae.power)||ut.power.equals(ae.power)){var zt=new e.Algebra.Classes.Factors;lt=e.Algebra.Factor.coeffFactor(lt.invert(),zt);var Bt=e.Algebra.divide(ut,lt);Bt.group!==y?(b=new o(0),Bt.each((function(e){b=t.add(b,$.integrate(e,X,f))})),zt.each((function(e){b=t.divide(b,e)})),b=t.expand(b)):b=$.integration.by_parts(Z,X,f,m)}else b=$.integration.partial_fraction(Z,X,f)}else if(lt.power.den.equals(2)){se=(Ft=$.integration.decompose_arg(lt.clone().toLinear(),X))[3],ae=Ft[1],re=Ft[0];var Ft,qt=Ft[2];if(ae.power.equals(2)&&re.lessThan(0)){se.equals(1)||(nt=t.multiply(nt,t.pow(se,new o(2)))),De=X,Ct=t.divide(t.pow(re.clone().negate(),new o(.5)),t.pow(se,new o(.5))),Ue=t.symfunction(E,[new o(De)]);var Ht=t.pow(t.symfunction(E,[new o(De)]),new o(lt.power.num)),Gt=t.pow(t.symfunction(_,[new o(De)]),new o(ut.power)),Vt=t.multiply(t.multiply(Ht,Ue),Gt);Ce=$.integrate(Vt,De,f),b=Ce.sub(De,t.symfunction(R,[t.multiply(new o(X),Ct)]))}else b=$.integration.partial_fraction(Z,X,f,m)}else Tt&&(b=$.integration.partial_fraction(Z,X,f))}else if(lt.isComposite()&&ut.isComposite())if(b=new o(0),lt.power.greaterThan(0)&&ut.power.greaterThan(0)){var Wt;(Wt=t.expand(Z)).each((function(e){b=t.add(b,$.integrate(e,X,f))}),!0)}else At=Number(lt.power),Lt=Number(ut.power),At<0&&Lt>0&&(Ye=lt,lt=ut,ut=Ye),-1===At&&-1===Lt?b=$.integration.partial_fraction(Z,X):lt.each((function(e){var n=t.multiply(e,ut.clone()),r=$.integrate(n,X,f);b=t.add(b,r)}));else if(at===v&&it[0].power.greaterThan(0))lt=t.expand(lt),b=new o(0),lt.each((function(e){b=t.add(b,$.integrate(t.multiply(e,ut.clone()),X,f))}),!0);else if(at===a&&ot===w&&e.Utils.in_htrig(lt.fname))lt=lt.fnTransform(),b=$.integrate(t.expand(t.multiply(lt,ut)),X,f);else if(at===a&&ot===v||ot===a&&at===v){var jt,Xt,Zt;if(ot===a&&at===v&&(Ye=lt,lt=ut,ut=Ye),Ue=o.unwrapSQRT($.diff(lt.clone(),X),!0),jt=o.unwrapSQRT(ut,!0),Ue.power.equals(jt.power)){if(te=new o(ut.power),Xt=Ue.clone().toLinear(),Zt=ut.clone().toLinear(),(Xe=e.Algebra.divide(Xt.toLinear(),Zt)).isConstant()){var Yt=t.pow(Xe,te.negate());b=t.multiply(Yt,$.integration.poly_integrate(lt.clone()))}}else b=$.integration.by_parts(Z,X,f,m)}else{var Jt=lt.clone().toLinear(),$t=ut.clone().toLinear();b=at===w&&ot===w&&lt.power.contains(X)&&ut.power.contains(X)&&!Jt.contains(X)&&!$t.contains(X)?t.parse(h("(({0})^(({2})*({4}))*({1})^(({3})*({4})))/(log(({0})^({2}))+log(({1})^({3})))",Jt.toString(),$t.toString(),lt.power.multiplier.toString(),ut.power.multiplier.toString(),X)):$.integration.by_parts(Z,X,f,m)}}}else if(3===st&&(it[2].group===d&&it[2].power.lessThan(2)||it[0].group===v)){var Qt=it[0];Qt.group===v?(Qt.power.greaterThan(1)&&(Qt=t.expand(Qt)),Je=t.multiply(it[1],it[2]),b=new o(0),Qt.each((function(e){var n=t.multiply(e,Je.clone()),r=$.integrate(n,X,f);b=t.add(b,r)}),!0)):b=$.integration.by_parts(Z,X,f,m)}else if(j(it)){Ye=new o(1);var Kt=0;for(st=it.length;Kt<st;Kt++)Ye=t.multiply(Ye,it[Kt].fnTransform());Ye=t.expand(Ye),b=$.integrate(Ye,X,f)}else xt=J(it),b=$.integrate(t.expand(xt),X,f)}b=t.multiply(b,nt)}}else b=t.multiply(Z.clone(),t.parse(X));if(b)return b}catch(t){if(!(t instanceof W||t instanceof e.exceptions.DivisionByZero))throw t}return t.symfunction("integrate",[r,l])}),!1))},defint:function(n,r,i,s){s=s||"x";var a,l,u=function(e,n,r){try{return t.parse(e,n)}catch(t){return $.Limit.limit(e,s,r)}},c=e.Utils.variables(n),h=n.hasTrig();if(1!==c.length||s||(s=c[0]),h||(l=$.integrate(n,s)),h||l.hasIntegral())if(1===c.length&&r.isConstant()&&i.isConstant()){var p=e.Utils.build(n);a=new o(e.Math2.num_integrate(p,Number(r),Number(i)))}else a=t.symfunction("defint",[n,r,i,s]);else{var f,m,d={},g={};d[s]=i,g[s]=r,f=u(l,d,i),m=u(l,g,r),a=t.subtract(f,m)}return a},Limit:{interval:function(e,n){return t.parse(h("[{0}, {1}]",e,n))},diverges:function(){return $.Limit.interval("-Infinity","Infinity")},divide:function(n,r,s,a,l){if(!(l++>i.max_lim_depth)){n.clone();var u=r.clone();if(r.fname===M){var c=n.sign(),h=a.sign();if(a.isInfinity)return t.multiply(new o(c),new o(h));if(a.equals(0)){var p=t.parse(n.multiplier),m=t.parse(r.multiplier);return t.divide(t.multiply(p,$.Limit.interval("-1","1")),m)}$.Limit.diverges()}var d=function(t){if(e.Utils.isVector(t)){for(var n=0;n<t.elements.length;n++)if(!t.elements[n].isInfinity)return!1;return!0}return t.isInfinity},g=function(t,n){return!e.Utils.isVector(t)&&t.equals(n)};do{var v=f($.Limit.limit(n.clone(),s,a,l)),y=f($.Limit.limit(r.clone(),s,a,l)),w=d(v)&&d(y)||g(v,0)&&g(y,0);if(w){var b=$.diff(n.clone(),s),x=$.diff(r.clone(),s),S=t.expand(t.divide(b,x));n=S.getNum(),r=S.getDenom()}}while(w);var _=y.equals(0),E=Number(u.power);return a.isConstant(!0)&&_?o.infinity(e.Utils.even(E)&&v.lessThan(0)?-1:void 0):_?$.Limit.diverges():t.divide(v,y)}},rewriteToLog:function(e){var n=e.power.clone();return e.toLinear(),t.pow(new o("e"),t.multiply(n,t.symfunction(i.LOG+"",[e])))},getSubbed:function(e,t,n){var r;e.group===w&&(e=$.rewriteToLog(e));try{r=e.sub(t,n)}catch(t){r=e}return r},isInterval:function(t){return e.Utils.isVector(t)},isConvergent:function(e){return!($.Limit.isInterval(e)&&e.elements[0].isInfinity&&e.elements[1].isInfinity||e.containsFunction("limit"))},limit:function(n,r,s,l){if(n.isLinear()&&n.isComposite()){var u=new o(0);return n.each((function(e){u=t.add(u,$.Limit.limit(e,r,s,l))}),!0),u}if(n=e.Algebra.Simplify.simplify(n),l=l||1,!(l++>i.max_lim_depth)){var c=t.parse(n.multiplier);n.toUnitMultiplier();try{var p;if(n.isConstant(!0))p=n;else{var m={};m[r]=s;try{var g=t.parse(n.sub(r,s),m);(g.isConstant(!0)||g.isInfinity)&&(p=g)}catch(e){}if(!p){var v=n.getNum(),b=n.getDenom();if(b.isConstant(!0)){if(n.group===w){var M=n.clone().toLinear(),S=(n.power.clone(),M.getNum()),A=M.getDenom(),L=e.Utils.decompose_fn(A,r,!0);if(S.group===d&&S.multiplier.isOne()&&L.ax.group===d&&L.b.isConstant(!0)&&L.a.isOne()&&L.b.isConstant(!0))p=t.parse(h("(1/e^({0}))",L.b));else{var C=$.Limit.rewriteToLog(n.clone()),R=C.power.clone(),N=C.clone().toLinear(),P=$.Limit.limit(N,r,s,l),I=$.Limit.limit(R,r,s,l);p=t.pow(P,I)}}else if(n.group===a&&1===n.args.length){var O,k=$.Limit.limit(n.args[0],r,s,l);if(e.Utils.isVector(k))return p=k.map((function(e){return n.clone().args[0]=e,$.Limit.limit(t.symfunction(n.fname,[e]),r,s,l)})),t.multiply(c,p);if(k.isConstant(!0)){var D=t.symfunction(n.fname,[k]);try{f(D),O=!0}catch(e){O=!1}}if(O)p=D;else if($.Limit.isConvergent(k))if(n.fname===x)switch(k.toString()){case"0":p=o.infinity().negate();break;case"Infinity":case"-Infinity":p=o.infinity()}else if(n.fname!==E&&n.fname!==_||!s.isInfinity){if(n.fname===T){var U=n.args[0],z=U.getNum(),B=U.getDenom(),F=z.toUnitMultiplier();(s.isInfinity||F.equals("pi")&&B.equals(2))&&(p=divergent())}else if(n.fname===i.FACTORIAL&&k.isInfinity)return o.infinity()}else p=$.Limit.interval(-1,1)}else if(n.group===d){if(n.power>0)return t.parse(n,m);p=e.Utils.even(n.power)?o.infinity():$.Limit.diverges()}else if(n.group===y){var q,H;for(M=(W=n.collectSymbols().sort((function(e,t){return e.group-t.group}))).pop(),q=f($.Limit.limit(M,r,s,l));W.length;){var G=W.pop();H=f($.Limit.limit(G,r,s,l)),q.isInfinity||!$.Limit.isConvergent(q)&&H.equals(0)||q.equals(0)&&$.Limit.isConvergent(H)?(G.containsFunction(x)&&(G=[M,M=G][0]),G.invert(),q=q.isInfinity&&H.isInfinity?o.infinity():$.Limit.divide(M,G,r,s,l)):(q=t.multiply(q,H),M=t.multiply(M,G))}p=q}else if(n.isComposite()){var V;n.isLinear()||(n=t.expand(n)),p=new o(0);for(var W=n.collectSymbols().sort((function(e,t){return t.group-e.group})),j=[],X=new o(0),Z=0,Y=W.length;Z<Y;Z++)(J=W[Z].clone()).group===a||J.group===y&&J.hasFunc()?X=t.add(X,J):j.push(J);for(j.unshift(X),1!==j.length&&(W=j),Z=0,Y=W.length;Z<Y;Z++){var J=W[Z];try{V=$.Limit.limit(J,r,s,l)}catch(e){V=$.Limit.diverges()}try{p=t.add(p,V)}catch(e){if(l++>i.max_lim_depth)return;p=$.Limit.limit($.diff(n,r),r,s,l)}}}}else p=$.Limit.divide(v,b,r,s,l)}}p||(p=t.symfunction("limit",[n,r,s]))}catch(e){p=t.symfunction("limit",[n,r,s])}return t.multiply(c,p)}}},Fresnel:{S:function(e){return e.isConstant(!0)?$.defint(t.parse("sin(pi*x^2/2)"),o(0),e,"x"):t.symfunction("S",arguments)},C:function(e){return e.isConstant(!0)?$.defint(t.parse("cos(pi*x^2/2)"),o(0),e,"x"):t.symfunction("C",arguments)}}};r.register([{name:"diff",visible:!0,numargs:[1,3],build:function(){return $.diff}},{name:"sum",visible:!0,numargs:4,build:function(){return $.sum}},{name:"product",visible:!0,numargs:4,build:function(){return $.product}},{name:"integrate",visible:!0,numargs:[1,2],build:function(){return $.integrate}},{name:"defint",visible:!0,numargs:[3,4],build:function(){return $.defint}},{name:"S",visible:!0,numargs:1,build:function(){return $.Fresnel.S}},{name:"C",visible:!0,numargs:1,build:function(){return $.Fresnel.C}},{name:"limit",visible:!0,numargs:[3,4],build:function(){return $.Limit.limit}}]),r.api()}()},108:(e,t,n)=>{var r=n(407);n(426),n(374),function(){"use strict";var e=r.getCore(),t=e.PARSER,n=e.Symbol,i=e.Utils.format,s=e.Utils.isVector,a=e.Utils.isArray,o=(e.Vector,e.groups.S),l=(e.groups.EX,e.groups.CP),u=e.groups.CB,c=e.groups.FN;e.Settings.Laplace_integration_depth=40,n.prototype.findFunction=function(e){if(this.group===c&&this.fname===e)return this.clone();var t;if(this.symbols)for(var n in this.symbols)if(t=this.symbols[n].findFunction(e))break;return t};var h=e.Extra={version:"1.4.2",LaPlace:{transform:function(r,s,a){r=r.clone(),s=s.toString();var l,p=(r=n.unwrapSQRT(r,!0)).stripVar(s),f=r.group;if((r=t.divide(r,p.clone())).isConstant()||!r.contains(s,!0))l=t.parse(i("({0})/({1})",r,a));else if(f===o&&e.Utils.isInt(r.power)){var m=String(r.power);l=t.parse(i("factorial({0})/({1})^({0}+1)",m,a))}else if(r.group===o&&r.power.equals(.5))l=t.parse(i("sqrt(pi)/(2*({0})^(3/2))",a));else if(r.isComposite())l=new n(0),r.each((function(e){l=t.add(l,h.LaPlace.transform(e,s,a))}),!0);else if(!r.isE()||r.power.group!==o&&r.power.group!==u)if(r.group!==c||-1===["sin","cos","sinh","cosh"].indexOf(r.fname)||r.args[0].group!==o&&r.args[0].group!==u){var d=e.Settings.integration_depth<e.Settings.Laplace_integration_depth;if(d){var g=e.Settings.integration_depth;e.Settings.integration_depth=e.Settings.Laplace_integration_depth}e.Utils.block("PARSE2NUMBER",(function(){var i=s,o=r.sub(s,i),u=t.parse("e^(-"+a+"*"+i+")*"+o);if((l=e.Calculus.integrate(u,i)).hasIntegral())return t.symfunction("laplace",arguments);l=l.sub(s,0),l=(l=t.expand(t.multiply(l,new n(-1)))).sub(i,s)}),!1),l=e.Utils.block("PARSE2NUMBER",(function(){return t.parse(l)}),!0),d&&(e.Settings.integration_depth=g)}else switch(v=r.args[0].stripVar(s),r.fname){case"sin":l=t.parse(i("({0})/(({1})^2+({0})^2)",v,a));break;case"cos":l=t.parse(i("({1})/(({1})^2+({0})^2)",v,a));break;case"sinh":l=t.parse(i("({0})/(({1})^2-({0})^2)",v,a));break;case"cosh":l=t.parse(i("({1})/(({1})^2-({0})^2)",v,a))}else{var v=r.power.stripVar(s);l=t.parse(i("1/(({1})-({0}))",v,a))}return t.multiply(l,p)},inverse:function(r,s,a){var c=r.clone();return e.Utils.block("POSITIVE_MULTIPLIERS",(function(){if(r.group===u&&(r=e.Algebra.PartFrac.partfrac(t.expand(r),s)),r.group===o||r.group===u||r.isComposite()){var p,f,m,d,g,v,y,w=function(){(d=t.multiply(d,p)).multiplier=d.multiplier.multiply(r.multiplier),d=t.divide(d,g.a)};if(v=r.multiplier.clone(),r.toUnitMultiplier(),p=r.getNum(),(f=r.getDenom().toUnitMultiplier()).group===l?(y=f.power.clone(),f.toLinear()):y=new e.Frac(1),m=s.toString(),g=e.Utils.decompose_fn(f,m,!0),e.Utils.decompose_fn(t.expand(p.clone()),m,!0),p.multiplier=p.multiplier.multiply(v),(f.group===o||f.group===u)&&g.x.value===m&&g.b.equals(0)&&e.Utils.isInt(g.x.power))_=g.x.power-1,E=e.Math2.factorial(_),d=t.divide(t.pow(a,new n(_)),new n(E)),w();else if(f.group===l&&y.equals(1)){if(g.x.group===e.groups.PL&&e.Algebra.degree(f).equals(2)){var b=e.Algebra.sqComplete(f,m),x=e.Utils.getU(f),M=e.Utils.decompose_fn(b.a,m,!0).b,S=h.LaPlace.inverse(t.parse(`1/((${x})^2+(${b.c}))`),x,a);d=t.multiply(S,t.parse(`(${v})*e^(-(${M})*(${a}))`))}else if(g.x.isLinear()&&!p.contains(m)){a=t.divide(a,g.a.clone());var _,E=0==(_=y-1)||1===_?"1":`(${y}-1)!`;d=t.parse(i("(({0})^({3}-1)*e^(-(({2})*({0}))/({1})))/(({4})*({1})^({3}))",a,g.a,g.b,y,E)),w()}else if(g.x.group===o&&g.x.power.equals(2))if(p.contains(m)){if(M=new n(1),p.group===u){var T=new n(1);p.each((function(e){e.contains(m)?T=t.multiply(T,e):M=t.multiply(M,e)})),p=T}var A,L,C,R,N,P,I,O,k,D,U=e.Utils.decompose_fn(p,m,!0);A=U.a,L=U.b,C=A.containsFunction("sin"),N=A.containsFunction("cos"),R=L.containsFunction("cos"),P=L.containsFunction("sin"),U.x.value===m&&U.x.isLinear()&&!(C&&R||N||P)?d=t.parse(i("(({1})*cos((sqrt(({2})*({3}))*({0}))/({2})))/({2})",a,U.a,g.a,g.b)):C&&R&&(I=A.findFunction("sin"),O=L.findFunction("cos"),I.args[0].equals(O.args[0])&&!I.args[0].contains(m)&&(z=t.divide(L,O.toUnitMultiplier()).toString(),k=I.args[0].toString(),B=g.b,D=t.divide(A,I.toUnitMultiplier()),F="(({1})*({2})*cos({3})*sin(sqrt({4})*({0})))/sqrt({4})+({1})*sin({3})*({5})*cos(sqrt({4})*({0}))",d=t.parse(i(F,a,M,z,k,B,D))))}else d=t.parse(i("(({1})*sin((sqrt(({2})*({3}))*({0}))/({2})))/sqrt(({2})*({3}))",a,p,g.a,g.b))}else if(g.x.power.num&&g.x.power.num.equals(3)&&g.x.power.den.equals(2)&&p.contains("sqrt(pi)")&&!p.contains(m)&&p.isLinear()){var z=t.divide(p.clone(),t.parse("sqrt(pi)"));d=t.parse(i("(2*({2})*sqrt({0}))/({1})",a,g.a,z,p))}else if(y.equals(2)&&g.x.power.equals(2)){var B,F;if(p.contains(m))if((U=e.Utils.decompose_fn(t.expand(p.clone()),m,!0)).x.isComposite()){var q=[],H=p.collectSymbols((function(t){t=n.unwrapPARENS(t);var r=e.Utils.decompose_fn(t,m,!0);return r.symbol=t,r})).sort((function(e,t){var n;return n=e.x.value!==m?0:e.x.power,(t.x.value!==m?0:t.x.power)-n}));M=new n(-1);for(var G=0;G<H.length;G++){var V=H[G];V.x.value===m?q.push(V):M=t.multiply(M,V.symbol)}q[0].x.power.equals(2)&&q[1].x.power.equals(1)&&q[1].b.equals(0)&&!q[0].b.equals(0)&&(z=q[0].a.negate(),F="-(({1})*({2})*({5})*({0})*sin((sqrt(({4})*({5}))*({0}))/({4})))/(2*({4})^2*sqrt(({4})*({5})))-(({1})*({3})*({0})*sin((sqrt(({4})*({5}))*({0}))/({4})))/(2*({4})*sqrt(({4})*({5})))+(({1})*({2})*cos((sqrt(({4})*({5}))*({0}))/({4})))/({4})^2",d=t.parse(i(F,a,M,z,q[0].b,g.a,g.b)))}else U.x.isLinear()?(M=t.divide(U.a,new n(2)),F="(({1})*({0})*sin((sqrt(({2})*({3}))*({0}))/({2})))/(({2})*sqrt(({2})*({3})))",d=t.parse(i(F,a,M,g.a,g.b))):U.x.power.equals(2)&&(U.b.equals(0)?(M=t.divide(U.a,new n(2)),F="(({1})*sin((sqrt(({2})*({3}))*({0}))/({2})))/(({2})*sqrt(({2})*({3})))+(({1})*({0})*cos((sqrt(({2})*({3}))*({0}))/({2})))/({2})^2",d=t.parse(i(F,a,M,g.a,g.b))):(M=t.divide(U.a,new n(2)),B=U.b.negate(),F="-((({2})*({4})-2*({1})*({3}))*sin((sqrt(({2})*({3}))*({0}))/({2})))/(2*({2})*({3})*sqrt(({2})*({3})))+(({4})*({0})*cos((sqrt(({2})*({3}))*({0}))/({2})))/(2*({2})*({3}))+(({1})*({0})*cos((sqrt(({2})*({3}))*({0}))/({2})))/({2})^2",d=t.parse(i(F,a,M,g.a,g.b,B))));else M=t.divide(p,new n(2)),F="(({1})*sin((sqrt(({2})*({3}))*({0}))/({2})))/(({3})*sqrt(({2})*({3})))-(({1})*({0})*cos((sqrt(({2})*({3}))*({0}))/({2})))/(({2})*({3}))",d=t.parse(i(F,a,M,g.a,g.b))}else r.isComposite()&&(y.equals(2)&&g.x.group===o?d=t.parse(`(${v})*(${a})*e^(-(${g.b})*(${a}))`):(d=new n(0),r.each((function(e){d=t.add(d,h.LaPlace.inverse(e,s,a))}),!0)))}return d||(d=t.symfunction("ilt",[c,s,a])),d}),!0)}},Statistics:{frequencyMap:function(e){for(var t={},n=0,r=e.length;n<r;n++){var i=e[n].toString();t[i]||(t[i]=0),t[i]++}return t},sort:function(e){return e.sort((function(e,n){return e.isConstant()&&n.isConstant()||t.error("Unable to sort! All values must be numeric"),e.multiplier.subtract(n.multiplier)}))},count:function(e){return new n(e.length)},sum:function(e,r){for(var i=new n(0),s=0,a=e.length;s<a;s++){var o=e[s].clone();i=r?t.add(t.pow(t.subtract(o,r.clone()),new n(2)),i):t.add(o,i)}return i},mean:function(){var e=[].slice.call(arguments);return s(e[0])?h.Statistics.mean.apply(this,e[0].elements):t.divide(h.Statistics.sum(e),h.Statistics.count(e))},median:function(){var n,r=[].slice.call(arguments);if(s(r[0]))return h.Statistics.median.apply(this,r[0].elements);try{var i=h.Statistics.sort(r),a=r.length;if(e.Utils.even(a)){var o=a/2;n=h.Statistics.mean(i[o-1],i[o])}else n=i[Math.floor(a/2)]}catch(e){n=t.symfunction("median",r)}return n},mode:function(){var n,r=[].slice.call(arguments);if(s(r[0]))return h.Statistics.mode.apply(this,r[0].elements);var i=h.Statistics.frequencyMap(r);if(1===e.Utils.keys(i).length)n=r[0];else{var o={};for(var l in i){var u=i[l];if(u in o){var c=o[u];a(c)?c.push(l):o[u]=[l,o[u]]}else o[u]=l}var p=o[Math.max.apply(null,e.Utils.keys(o))];n=a(p)?t.symfunction("mode",p.sort()):t.parse(p)}return n},gVariance:function(e,n){var r=h.Statistics.mean.apply(h.Statistics,n),i=h.Statistics.sum(n,r);return t.multiply(e,i)},variance:function(){var e=[].slice.call(arguments);if(s(e[0]))return h.Statistics.variance.apply(this,e[0].elements);var r=t.divide(new n(1),h.Statistics.count(e));return h.Statistics.gVariance(r,e)},sampleVariance:function(){var e=[].slice.call(arguments);if(s(e[0]))return h.Statistics.sampleVariance.apply(this,e[0].elements);var r=t.divide(new n(1),t.subtract(h.Statistics.count(e),new n(1)));return h.Statistics.gVariance(r,e)},standardDeviation:function(){var e=[].slice.call(arguments);return s(e[0])?h.Statistics.standardDeviation.apply(this,e[0].elements):t.pow(h.Statistics.variance.apply(h.Statistics,e),new n(.5))},sampleStandardDeviation:function(){var e=[].slice.call(arguments);return s(e[0])?h.Statistics.sampleStandardDeviation.apply(this,e[0].elements):t.pow(h.Statistics.sampleVariance.apply(h.Statistics,e),new n(.5))},zScore:function(e,n,r){return t.divide(t.subtract(e,n),r)}},Units:{table:{foot:"12 inch",meter:"100 cm",decimeter:"10 cm"}}};r.register([{name:"laplace",visible:!0,numargs:3,build:function(){return h.LaPlace.transform}},{name:"ilt",visible:!0,numargs:3,build:function(){return h.LaPlace.inverse}},{name:"mean",visible:!0,numargs:-1,build:function(){return h.Statistics.mean}},{name:"median",visible:!0,numargs:-1,build:function(){return h.Statistics.median}},{name:"mode",visible:!0,numargs:-1,build:function(){return h.Statistics.mode}},{name:"smpvar",visible:!0,numargs:-1,build:function(){return h.Statistics.sampleVariance}},{name:"variance",visible:!0,numargs:-1,build:function(){return h.Statistics.variance}},{name:"smpstdev",visible:!0,numargs:-1,build:function(){return h.Statistics.sampleStandardDeviation}},{name:"stdev",visible:!0,numargs:-1,build:function(){return h.Statistics.standardDeviation}},{name:"zscore",visible:!0,numargs:3,build:function(){return h.Statistics.zScore}}]),r.api()}(),e.exports=r},195:(e,t,r)=>{var i=r(407);r(426),r(374),function(){var e,t=i.getCore(),r=t.PARSER,s=t.Algebra,a=t.Calculus,o=a.integration.decompose_arg,l=t.Utils.evaluate,u=t.Utils.remove,c=t.Utils.format,h=t.Utils.build,p=t.Utils.knownVariable,f=t.Symbol,m=t.Utils.isSymbol,d=t.Utils.variables,g=t.groups.S,v=t.groups.PL,y=t.groups.CB,w=t.groups.CP,b=t.groups.FN,x=t.Settings,M=t.Utils.range,S=t.Utils.isArray;function _(e,n){if(n.isConstant()&&e.isConstant()&&!e.equals(n)||e.equals(t.Settings.IMAGINARY)||n.equals(t.Settings.IMAGINARY))throw new t.exceptions.NerdamerValueError(e.toString()+" does not equal "+n.toString());this.LHS=e,this.RHS=n}t.Settings.SOLVE_RADIUS=1e3,t.Settings.ROOTS_PER_SIDE=10,t.Settings.make_pi_conversions=!1,t.Settings.STEP_SIZE=.1,t.Settings.EPSILON=1e-13,t.Settings.MAX_NEWTON_ITERATIONS=200,t.Settings.MAX_NON_LINEAR_TRIES=12,t.Settings.NON_LINEAR_JUMP_AT=50,t.Settings.NON_LINEAR_JUMP_SIZE=100,t.Settings.NON_LINEAR_START=.01,t.Settings.NEWTON_SLICES=200,t.Settings.NEWTON_EPSILON=2*Number.EPSILON,t.Settings.SOLUTION_PROXIMITY=1e-14,t.Settings.FILTER_SOLUTIONS=!0,t.Settings.MAX_SOLVE_DEPTH=10,t.Settings.ZERO_EPSILON=1e-9,t.Settings.MAX_BISECTION_ITER=2e3,t.Settings.BI_SECTION_EPSILON=1e-12,t.Symbol.prototype.hasTrig=function(){return this.containsFunction(["cos","sin","tan","cot","csc","sec"])},t.Symbol.prototype.hasNegativeTerms=function(){if(this.isComposite())for(var e in this.symbols){var t=this.symbols[e];if(t.group===v&&t.hasNegativeTerms()||this.symbols[e].power.lessThan(0))return!0}return!1},_.prototype={toString:function(){return this.LHS.toString()+"="+this.RHS.toString()},text:function(e){return this.LHS.text(e)+"="+this.RHS.text(e)},toLHS:function(e){var t,n=(t=(e=void 0===e)?this.removeDenom():this.clone()).LHS,i=t.RHS;n.isConstant(!0)&&!i.isConstant(!0)&&([n,i]=[i,n]);var s=r.subtract(n,i);return e?r.expand(s):s},removeDenom:function(){var e=this.LHS.clone(),t=this.RHS.clone(),n=r.multiply(e.getDenom(),t.getDenom());if(e=r.expand(r.multiply(e,n.clone())),(t=r.expand(r.multiply(t,n))).group===w&&t.group!==w){var i=e;e=t,t=i}if(e.group===y){i=new f(e.multiplier);var s=t.clone();e.each((function(e){e.power.lessThan(0)?s=r.divide(s,e):i=r.multiply(i,e)})),e=i,t=s}else if(e.group===w)for(var a in e.symbols){var o=e.symbols[a];if(o.group===y)for(var l in o.symbols){var u=o.symbols[l];if(u.power.lessThan(0))return new _(r.expand(r.multiply(u.clone().toLinear(),e)),r.expand(r.multiply(u.clone().toLinear(),t)))}}return new _(e,t)},clone:function(){return new _(this.LHS.clone(),this.RHS.clone())},sub:function(e,t){var n=this.clone();return n.LHS=n.LHS.sub(e.clone(),t.clone()),n.RHS=n.RHS.sub(e.clone(),t.clone()),n},isZero:function(){return t.Utils.evaluate(this.toLHS()).equals(0)},latex:function(e){return[this.LHS.latex(e),this.RHS.latex(e)].join("=")}},r.equals=function(e,t){return new _(e,t)},e=r.functions.simplify[0],r.functions.simplify[0]=function(t){return t instanceof _?(t.LHS=e(t.LHS),t.RHS=e(t.RHS),t):e(t)},t.Expression.prototype.equals=function(e){return e instanceof t.Expression&&(e=e.symbol),new _(this.symbol,e)},t.Expression.prototype.solveFor=function(e){var n;if(this.symbol instanceof _){if(this.symbol.LHS.isConstant()&&this.symbol.RHS.equals(e))return new t.Expression(this.symbol.LHS);if(this.symbol.RHS.isConstant()&&this.symbol.LHS.equals(e))return new t.Expression(this.symbol.RHS);n=this.symbol.toLHS()}else n=this.symbol;return L(n,e).map((function(e){return new t.Expression(e)}))},t.Expression.prototype.expand=function(){if(this.symbol instanceof _){var e=this.symbol.clone();return e.RHS=r.expand(e.RHS),e.LHS=r.expand(e.LHS),new t.Expression(e)}return new t.Expression(r.expand(this.symbol))},t.Expression.prototype.variables=function(){return this.symbol instanceof _?t.Utils.arrayUnique(d(this.symbol.LHS).concat(d(this.symbol.RHS))):d(this.symbol)};var E=function(e,t){return r.equals(e,t)};t.Equation=_;var T=t.Utils.checkAll=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return!1;return!0},A=t.Solve={version:"2.0.3",solutions:[],solve:function(e,n){var r=L(e,String(n));return new t.Vector(r)},toLHS:function(e,t){if(m(e))return e;if(!(e instanceof _)){var n=e.split("=");n[1]=n[1]||"0",e=new _(r.parse(n[0]),r.parse(n[1]))}return e.toLHS(t)},solveCircle:function(e,n){for(var i=n.map((function(e){return r.parse(e)})),s=[],a=[],o=0;o<e.length;o++){for(var l=[],u=0;u<i.length;u++)l.push(Number(t.Algebra.degree(e[o],i[u])));l.push(t.Utils.arraySum(l,!0)),s.push(l)}var c=e[0],h=e[1];if(s[0][2]>s[1][2]&&([h,c]=[c,h],[s[1],s[0]]=[s[0],s[1]]),1===s[0][0]&&2===s[0][2]&&2===s[1][0]&&4===s[1][2]){var f=n[0],m=n[1],d=L(r.parse(h,p(f,L(r.parse(c),f)[0])),m).map((function(e){return e.toString()})),g=[L(r.parse(c,p(m,d[0])))[0].toString()];d[1]&&g.push(L(r.parse(c,p(m,d[1])))[0].toString()),x.SOLUTIONS_AS_OBJECT?((a={})[f]=g,a[m]=d):(d.unshift(m),g.unshift(f),a=[g,d])}return a},solveNonLinearSystem:function(e,i,s){if(i<0)return[];s=void 0===s?t.Settings.NON_LINEAR_START:s;var a=t.Settings.MAX_NON_LINEAR_TRIES,o=Math.floor(a/2);i=void 0===i?a:i;var l,u,c,p,f,m,d,g,v=t.Settings.NON_LINEAR_JUMP_AT,y=t.Settings.NON_LINEAR_JUMP_SIZE,w=function(e,t){return e.map((function(e,n){return Number(t.get(n,0))}))},b=t.Utils.arrayGetVariables(e),x=t.Matrix.jacobian(e,b,(function(e){return h(e,b)}),!0),M=t.Settings.MAX_NEWTON_ITERATIONS,S=e.map((function(e){return h(e,b)})),_=x.map((function(e){return h(e,b)}),!0);p=t.Matrix.cMatrix(0,b);var E=t.Matrix.cMatrix(s,b);c=0;do{if(c>M)break;l=w(b,E),d=E.clone(),S.forEach((function(e,t){E.set(t,0,e.apply(null,l))}));var T=new t.Matrix;if(_.each((function(e,t,n){var r=e.apply(null,l);T.set(t,n,r)})),T=T.invert(),g=(u=r.multiply(T,E).negate()).subtract(p,(function(e){return r.parse(Number(e))})),p=d.add(u,(function(e){return r.parse(Number(e))})),E=p,c>=v&&f>1){i===o&&(s=0);var L=i>o?1:-1;return n=i%Math.floor(o)+1,s+=L*n*y,A.solveNonLinearSystem(e,--i,s)}if(m=f,c++,f=g.max(),Number(f)===Number(m))break}while(Number(f)>=Number.EPSILON);return A.systemSolutions(E,b,!0,(function(e){return t.Utils.round(Number(e),14)}))},systemSolutions:function(e,n,i,s){var a=t.Settings.SOLUTIONS_AS_OBJECT?{}:[];return e.each((function(e,o){var l=(i?r.expand(e):e).valueOf();s&&(l=s.call(e,l));var u=n[o];t.Settings.SOLUTIONS_AS_OBJECT?a[u]=l:a.push([u,l])})),a},solveSystemBySubstitution:function(e){var n=d(e[0]),r=d(e[1]);return 2===e.length&&2===n.length&&t.Utils.arrayEqual(n,r)?A.solveCircle(e,n):[]},solveSystem:function(e,n){for(var a=0;a<e.length;a++)e[a]=A.toLHS(e[a]);var l,c=e.length,h=new t.Matrix,p=new t.Matrix,m=!1;if(void 0===n){if(!s.allLinear(e))try{return A.solveNonLinearSystem(e)}catch(b){if(b instanceof t.exceptions.DivisionByZero)return A.solveSystemBySubstitution(e)}if((l=t.Utils.arrayGetVariables(e)).length<e.length){var d=[],g=e.length;for(a=0;a<g-1;a++)d.push(r.parse(e[a]));var v={},y=A.solveSystem(d,l);Array.isArray(y)?y.forEach((function(e){v[e[0]]=e[1]})):v=y;var w=!0;for(a=g-1;a<g;a++)r.parse(e[a],v).equals(0)||(w=!1);if(w)return y}for(a=0;a<l.length;a++)i.setVar(l[a],"delete");for(a=0;a<c;a++){for(var b=e[a],x=0;x<l.length;x++){var M=l[x],S=[];b.each((function(e){e.contains(M)&&(S=S.concat(e.coeffs()))}));var _=t.Utils.arraySum(S);h.set(a,x,_)}var E=b.clone();l.map((function(e){E=E.stripVar(e,!0)})),p.set(a,0,E.negate())}}else for(l=n,m=!0,a=0;a<c;a++){for(p.set(a,0,new f(0)),b=r.expand(e[a]).collectSymbols(),x=0;x<n.length;x++){h.set(a,x,new f(0)),M=n[x];for(var T=0;T<b.length;T++){for(var L=b[T],C=!1,R=0;R<n.length;R++)L.contains(n[R])&&(C&&t.err("Multiple variables found for term "+L),C=!0);if(L.contains(M)){var N=o(u(b,T),M);h.set(a,x,r.add(h.get(a,x),N[0]))}}}for(T=0;T<b.length;T++)p.set(a,0,r.add(p.get(a,0),b[T]))}if(l.length!==e.length||h.determinant().equals(0))throw new t.exceptions.SolveError("System does not have a distinct solution");var P=(h=h.invert()).multiply(p);return t.Utils.isArray(n)&&P.each((function(e){return e.negate()})),A.systemSolutions(P,l,m)},quad:function(e,t,n){var i=r.subtract(r.pow(t.clone(),f(2)),r.multiply(r.multiply(n.clone(),e.clone()),f(4))),s=r.pow(i,f(.5)),a=r.parse(r.multiply(new f(2),n.clone()));return[r.parse(c("(-({0})+({1}))/({2})",t,s,a)),r.parse(c("(-({0})-({1}))/({2})",t,s,a))]},cubic:function(e,t,n,i){var s=i.text(),a=n.text(),o=t.text(),l=`(-(${a})^3/(27*(${s})^3)+(${a})*(${o})/(6*(${s})^2)-(${e.text()})/(2*(${s})))`,u=`((${o})/(3*(${s}))-(${a})^2/(9*(${s})^2))`,c=`((${l})+sqrt((${l})^2+(${u})^3))^(1/3)+((${l})-sqrt((${l})^2+(${u})^3))^(1/3)-((${a})/(3*(${s})))`,h="1/2+sqrt(3)/2*i";return[r.parse(c),r.parse(`(${c})(${h})`),r.parse(`(${c})(${h})^2`)]},quartic:function(e,n,i,s,a){var o,l,u,h,p,f={};return t.Utils.arrayUnique(d(a).concat(d(s)).concat(d(i)).concat(d(n)).concat(d(e))).map((function(e){f[e]=1})),a=a.toString(),s=s.toString(),i=i.toString(),n=n.toString(),e=e.toString(),o=r.parse(c("(8*({0})*({2})-3*({1})^2)/(8*({0})^2)",a,s,i)).toString(),l=r.parse(c("(({1})^3-4*({0})*({1})*({2})+8*({0})^2*({3}))/(8*({0})^3)",a,s,i,n)).toString(),u=r.parse(c("12*({0})*({4})-3*({1})*({3})+({2})^2",a,s,i,n,e)).toString(),h=r.parse(c("2*({2})^3-9*({1})*({2})*({3})+27*({1})^2*({4})+27*({0})*({3})^2-72*({0})*({2})*({4})",a,s,i,n,e)).toString(),p=r.parse(c("((({1})+(({1})^2-4*({0})^3)^(1/2))/2)^(1/3)",u,h)).toString(),g=r.parse(c("(1/2)*(-(2/3)*({1})+(1/(3*({0}))*(({2})+(({3})/({2})))))^(1/2)",a,o,p,u)).toString(),[r.parse(c("-(({1})/(4*({0})))-({4})+(1/2)*sqrt(-4*({4})^2-2*({2})+(({3})/({4})))",a,s,o,l,g)),r.parse(c("-(({1})/(4*({0})))-({4})-(1/2)*sqrt(-4*({4})^2-2*({2})+(({3})/({4})))",a,s,o,l,g)),r.parse(c("-(({1})/(4*({0})))+({4})+(1/2)*sqrt(-4*({4})^2-2*({2})-(({3})/({4})))",a,s,o,l,g)),r.parse(c("-(({1})/(4*({0})))+({4})-(1/2)*sqrt(-4*({4})^2-2*({2})-(({3})/({4})))",a,s,o,l,g))]},divideAndConquer:function(e,n){var r=[],i=t.Algebra.Factor.factor(e);return i.group===y&&i.each((function(e){e=f.unwrapPARENS(e),r=r.concat(L(e,n))})),r},csolve:function(e,n){return t.Utils.block("IGNORE_E",(function(){var i,s,a,o,l,u,h,p;if(p=[],(i=t.Utils.decompose_fn(e,n,!0)).x.group===g){var m,d;s=r.parse(i.x.power),a=Number(s),o=r.pow(r.divide(i.b.negate(),i.a),s.invert()),u=(l=f.toPolarFormArray(o))[0],l[1],h=u.toString(),s.toString();for(var v=0;v<a;v++)d=c("({0})*e^(2*{1}*pi*{2}*{3})",h,v,s,t.Settings.IMAGINARY),m=r.parse(d),p.push(m)}return p}),!0)},getPoints:function(e,n,r){n=n||.01,r=r||[];var i=h(e),s=Math.round(0),a=i(s),o=a/Math.abs(a),l=t.Settings.ROOTS_PER_SIDE,u=l;r.push(Math.floor(s/2)),r.push(Math.abs(s)),r.push(s),e.each((function(e){e.containsFunction(t.Settings.LOG)&&r.push(.1)}));var c=M(-t.Settings.SOLVE_RADIUS,s,n),p=M(s,t.Settings.SOLVE_RADIUS,n),f=function(e,t){for(var n,s,a,l=[],u=0,c=e.length;u<c;u++)n=e[u],a=(s=i(n))/Math.abs(s),isNaN(s)||!isFinite(s)||l.length>t||(a!==o&&l.push(n),o=a);r=r.concat(l)};return f(c,u),f(p,l),r},bisection:function(e,n){var r=e-1,i=e+1;if(Math.sign(n(r))!==Math.sign(n(i))){var s,a,o=0;do{if(s=Math.abs(i-r),o++>t.Settings.MAX_BISECTION_ITER||isNaN(s))return;a=(r+i)/2,n(r)*n(a)>0?r=a:i=a}while(s>=x.EPSILON);var l=(r+i)/2,u=n(l);if(!isNaN(u)&&Math.abs(u)<=t.Settings.BI_SECTION_EPSILON)return t.Utils.round(l,13)}},Newton:function(e,n,r){var i,s=t.Settings.MAX_NEWTON_ITERATIONS,a=0,o=e;do{var l=n(o);if(0===o&&0===l){i=0;break}if(++a>s)return;i=o-l/r(o);var u=Math.abs(i-o);o=i}while(u>x.NEWTON_EPSILON);if(Math.abs(n(i))<=x.EPSILON)return i},rewrite:function(e,n,i){if(n=n||new f(0),e.isComposite()&&e.isLinear()){var s=[],a=[];e.each((function(e){"sqrt"===(e=e.clone()).fname&&e.contains(i)?s.push(e):a.push(e)}),!0),1===s.length&&(n=r.expand(r.pow(r.subtract(n,t.Utils.arraySum(a)),new f(2))),e=r.expand(r.pow(f.unwrapSQRT(s[0]),new f(2))))}else e=f.unwrapSQRT(r.expand(e));var o=0,l=e.length;if(e.group===w&&e.contains(i)&&e.isLinear()){e.distributeMultiplier();var u=new f(0);return e.each((function(e){e.contains(i)?(o++,u=r.add(u,e.clone())):n=r.subtract(n,e.clone())})),e=u,o!==l?A.rewrite(e,n,i):[e,n]}if(e.group===y&&e.contains(i)&&e.isLinear())return e.multiplier.lessThan(0)&&(e.multiplier=e.multiplier.multiply(new t.Frac(-1)),n.multiplier=n.multiplier.multiply(new t.Frac(-1))),n.equals(0)?new f(0):(u=new f(1),e.each((function(e){e.contains(i)?u=r.multiply(u,e.clone()):n=r.divide(n,e.clone())})),e=u,A.rewrite(e,n,i));if(!e.isLinear()&&e.contains(i)){var c=r.parse(e.power.clone().invert());return e=r.pow(e,c.clone()),n=r.pow(r.expand(n),c.clone()),A.rewrite(e,n,i)}return e.group===b||e.group===g||e.group===v?[e,n]:void 0},sqrtSolve:function(e,t){var n=new f(0),i=new f(0);if(e.isComposite()&&(e.each((function(e){"sqrt"===e.fname&&e.contains(t)?n=r.add(n,e.clone()):i=r.add(i,e.clone())})),!n.equals(0))){var s=r.expand(r.multiply(r.parse(e.multiplier),r.subtract(r.pow(i,new f(2)),r.pow(n,new f(2))))),a=L(s,t);return a.filter((function(n){if(n.isImaginary())return n;var r={};return r[t]=n,l(e,r).equals(0)?n:void 0}))}}},L=function(e,n,i,u,c){if(u=u||0,u++>x.MAX_SOLVE_DEPTH)return i;if(e instanceof _){if(e.isZero())return[new f(0)];if(e.LHS.equals(n)&&!e.RHS.contains(n))return[e.RHS];if(e.RHS.equals(n)&&!e.LHS.contains(n))return[e.LHS]}if(e instanceof t.Vector&&(e=e.elements),n=n||"x",S(e))return A.solveSystem.apply(void 0,arguments);i=i||[];var p={},d={};if(d[n]=0,m(e)&&!0===l(e.getDenom(),d).equals(0))return i;var M=function(e,n){var s=m(e);if(!(void 0===e||"number"==typeof e&&isNaN(e)))if(S(e))e.forEach((function(e){M(e)}));else if("null"!==e.valueOf()){if("function"==typeof t.Settings.PRE_ADD_SOLUTION&&(e=t.Settings.PRE_ADD_SOLUTION(e)),s||(e=r.parse(e)),t.Settings.make_pi_conversions&&n){var a=r.divide(e.clone(),new f(Math.PI)),o=a.multiplier,l=Math.abs(o.num),u=Math.abs(o.den);l<10&&u<10&&(e=r.multiply(a,new f("pi")))}var c=e.toString();p[c]||i.push(e),p[c]=!0}};if(e.group===g&&e.contains(n)){try{var E={};E[n]=0,l(c,E,"numer"),M(new f(0))}catch(e){}return i}if(e.group===y){var C=e.getNum();if(C.group===y){var R=String(n);return C.each((function(t){t.contains(R)&&L(t,n,i,u,e)})),i}return L(C,n,i,u,c)}e.group===b&&"sqrt"===e.fname&&(e=r.pow(f.unwrapSQRT(e),new f(2)));var N=(t.Utils.isSymbol(e)?e:A.toLHS(e,!1)).getNum(),P=t.Utils.variables(N),I=P.length;if(t.Utils.isInt(N.power)&&N.power>0&&(N=r.parse(N).toLinear()),N.group===g||N.group===y&&N.contains(n))return[new f(0)];var O,k={},D=function(e){var i=(e=r.expand(e,{expand_denominator:!0,expand_functions:!0})).clone();if(e.symbols)for(var s in e.symbols){var a=e.symbols[s],l=a.getDenom();if(!l.isConstant(!0)&&e.isComposite()){var u=new f(0);return e.each((function(e){u=r.add(u,r.multiply(e,l.clone()))})),D(r.multiply(r.parse(e.multiplier),u))}var c=o(a,n),h=c[1].fname===t.Settings.SQRT,p=f.unwrapSQRT(c[1]),d=p.power.clone();if(!m(d)&&!d.equals(.5))if(d.den.gt(1)){if(h)return e=r.subtract(e,a.clone()),e=r.add(e,r.multiply(c[0].clone(),p)),D(e);var g=k[d.den];k[d.den]=g?g++:1}else{if(-1===d.sign()){var y=r.parse(n+"^"+Math.abs(d));return e.each((function(t,i){t.contains(n)&&(e.symbols[i]=r.multiply(t,y.clone()))})),k={},D(r.parse(e))}if(a.group===v){var w=t.Utils.arrayMin(t.Utils.keys(a.symbols));if(w<0){y=r.parse(n+"^"+Math.abs(w));var b=new f(0);return i.each((function(e){b=r.add(b,r.multiply(e.clone(),y.clone()))}),!0),b}}}}return e},U=function(e){var t=new f(0),i=new f(0);return e.each((function(e){e.contains(n,!0)?t=r.add(t,e.clone()):i=r.subtract(i,e.clone())})),[t,i]};if(A.inverseFunctionSolve=function(e,t,i){var s=o(t.args[0],n);if(s[1].group===g)return r.divide(r.symfunction(e,[r.divide(i,r.parse(t.multiplier))]),s[0])},(N=D(N)).equals(0))return[N];var z=t.Utils.keys(k);if(1===z.length&&(O=z[0],N.each((function(e,i){if(e.contains(n)){var s=o(e,n),a=s[1],l=a.power;l.den.gt(1)&&(a.power=l.multiply(new t.Frac(O)),N.symbols[i]=r.multiply(a,s[0]))}})),N=r.parse(N)),M(A.sqrtSolve(N,n)),1===I)if(N.isPoly(!0)){var B=new t.Algebra.Classes.Factors;if(t.Algebra.Factor.factor(N,B),B.getNumberSymbolics()>1)for(var F in B.factors)M(L(B.factors[F],n));else{var q=(re=t.Utils.getCoeffs(N,n)).length-1,H=!1;if(P[0]===n){if(T(re,(function(e){return e.group!==t.groups.N}))){var G=t.Algebra.proots(N);T(G,(function(e){return!t.Utils.isInt(e)}))&&(H=!0,G.map((function(e){M(new f(e))})))}if(!H)if((e=r.parse(e))instanceof t.Equation&&(e=e.toLHS()),1===q)M(r.divide(re[0],re[1].negate()));else if(2===q)M(r.expand(A.quad.apply(void 0,re)));else if(3===q){i=[];var V=t.Algebra.Factor.factor(e);(i=[]).length>0?M(i):M(A.cubic.apply(void 0,re))}else s.proots(N).map(M)}}}else try{var W,j,X,Z=N.hasTrig(),Y=A.getPoints(N,.1),J=A.getPoints(N,.05),$=A.getPoints(N,.01),Q=t.Utils.arrayUnique(Y.concat(J).concat($)).sort((function(e,t){return e-t})),K=h(N.clone()),ee=[];for(W=0;W<Q.length;W++)j=Q[W],void 0!==(X=A.bisection(j,K))?M(X,Z):ee.push(j);Q=ee;var te=a.diff(N.clone()),ne=h(te);for(W=0;W<Q.length;W++)j=Q[W],M(A.Newton(j,K,ne),Z);i.sort()}catch(e){console.log(e)}else if(!N.hasFunc(n)&&N.isComposite())try{if((V=t.Algebra.Factor.factor(N.clone())).group===y)V.each((function(e){M(L(e,n))}));else{var re,ie=(re=t.Utils.getCoeffs(N,n)).length;switch(q=ie-1){case 0:var se=(ce=U(N))[0],ae=ce[1];se.group===t.groups.EX&&M(r.parse(t.Utils.format(t.Settings.LOG+"(({0})/({2}))/"+t.Settings.LOG+"({1})",ae,se.value,se.multiplier)));break;case 1:M(r.divide(re[0],re[1].negate()));break;case 2:M(A.quad.apply(void 0,re));break;case 3:M(A.cubic.apply(void 0,re));break;case 4:M(A.quartic.apply(void 0,re));break;default:M(A.csolve(N,n)),0===i.length&&M(A.divideAndConquer(N,n))}0===i.length&&M(L(V,n,i,u))}}catch(e){}else try{var oe=A.rewrite(N,null,n);if(se=oe[0],ae=oe[1],se.group===b)if("abs"===se.fname)M([ae.clone(),ae.negate()]);else if("sin"===se.fname)M(A.inverseFunctionSolve("asin",se,ae));else if("cos"===se.fname)M(A.inverseFunctionSolve("acos",se,ae));else if("tan"===se.fname)M(A.inverseFunctionSolve("atan",se,ae));else if(se.fname===t.Settings.LOG){var le=o(se.args[0],n);(F=le[1]).group===g&&(N=new _(F,ae=r.divide(r.subtract(r.pow(se.args.length>1?se.args[1]:new f("e"),r.divide(ae,r.parse(se.multiplier))),le[3]),le[0])).toLHS(),M(L(N,n)))}else M(r.subtract(se,ae));else{var ue=new _(se,ae).toLHS();if(ue.equals(N))throw new Error("Stopping. No stop condition exists");M(L(ue,n))}}catch(e){try{if(N.group===y)M(0);else if(N.group===w){var ce;if(se=(ce=U(N))[0],ae=ce[1],se.group===t.groups.EX&&se.value===n){var he=se.power.clone().invert();M(r.pow(ae,he))}}}catch(e){}}if(O&&(i=i.map((function(e){return r.pow(e,new f(O))}))),m(e)){var pe={};i=i.filter((function(t){try{pe[n]=t;var r=Number(l(e,pe));return isNaN(r),!0}catch(e){return!1}}))}return i};i.register([{name:"solveEquations",parent:"nerdamer",numargs:-1,visible:!0,build:function(){return L}},{name:"solve",parent:"Solve",numargs:2,visible:!0,build:function(){return t.Solve.solve}},{name:"setEquation",parent:"Solve",visible:!0,build:function(){return E}}]),i.api()}()},307:(e,t,n)=>{var r=n(407);n(374),n(426),n(195),n(108),e.exports=r},462:function(e,t,r){var i;e=r.nmd(e);var s,a=function(e){"use strict";var t=new Be,n=e.bigInt,r=e.bigDec;r.set({precision:250});var i={},s=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083],o={},l={callPeekers:!1,init_primes:1e3,exclude:[],suppress_errors:!1,PARSE2NUMBER:!1,SAFE:!1,IMAGINARY:"i",FUNCTION_MODULES:[Math],ALLOW_CHARS:["π"],USE_MULTICHARACTER_VARS:!0,POWER_OPERATOR:"^",VALIDATION_REGEX:/^[a-z_αAβBγΓδΔϵEζZηHθΘιIκKλΛμMνNξΞoOπΠρPσΣτTυϒϕΦχXψΨωΩ∞][0-9a-z_αAβBγΓδΔϵEζZηHθΘιIκKλΛμMνNξΞoOπΠρPσΣτTυϒϕΦχXψΨωΩ]*$/i,IMPLIED_MULTIPLICATION_REGEX:/([\+\-\/\*]*[0-9]+)([a-z_αAβBγΓδΔϵEζZηHθΘιIκKλΛμMνNξΞoOπΠρPσΣτTυϒϕΦχXψΨωΩ]+[\+\-\/\*]*)/gi,ALIASES:{π:"pi","∞":"Infinity"},POSITIVE_MULTIPLIERS:!1,CACHE:{},SILENCE_WARNINGS:!1,PRECISION:21,VECTOR:"vector",PARENTHESIS:"parens",SQRT:"sqrt",ABS:"abs",FACTORIAL:"factorial",DOUBLEFACTORIAL:"dfactorial",LONG_PI:"3.14159265358979323846264338327950288419716939937510582097494459230781640628620899862803482534211706798214808651328230664709384460955058223172535940812848111745028410270193852110555964462294895493038196",LONG_E:"2.71828182845904523536028747135266249775724709369995957496696762772407663035354759457138217852516642742746639193200305992181741359662904357290033429526059563073813232862794349076323382988075319525101901",PI:Math.PI,E:Math.E,LOG:"log",LOG10:"log10",LOG10_LATEX:"log_{10}",MAX_EXP:2e5,SCIENTIFIC_MAX_DECIMAL_PLACES:14,SCIENTIFIC_IGNORE_ZERO_EXPONENTS:!0};function u(e){function t(t){this.name=e,this.message=void 0!==t?t:"",(t=new Error(this.message)).name=this.name,this.stack=t.stack}return t.prototype=Object.create(Error.prototype),t}function c(e){return-1!==I.indexOf(e)}function h(e){return e instanceof ke}function p(e){return(e=G(e)?e.multiplier:e).lessThan(0)}function f(e){return Math.min.apply(void 0,e)}function m(e,t){if(J(e))for(var n=e.length,r=0;r<n;r++)t.call(e,r);else for(var i in e)e.hasOwnProperty(i)&&t.call(e,i)}function d(e){for(var t=e.length,n=[],r=0;r<t;r++){var i=e[r];-1===n.indexOf(i)&&n.push(i)}return n}function g(e){for(var t=s[s.length-1]||2;t<e;t++)F(t)&&s.push(t)}!function(){l.CACHE.roots={};for(var e=2;e<=40;e++)for(var t=2;t<=40;t++){var r=n(e).pow(t);l.CACHE.roots[r+"-"+t]=e}}();var v=i.N=1,y=i.P=2,w=i.S=3,b=i.EX=4,x=i.FN=5,M=i.PL=6,S=i.CB=7,_=i.CP=8,E=l.CONST_HASH="#",T=l.PARENTHESIS,A=l.SQRT,L=l.ABS,C=l.FACTORIAL,R=l.DOUBLEFACTORIAL,N=[],P={},I=[],O=[],k=function(e,t){if(!l.suppress_errors)throw new(t||Error)(e)},D=function(e){for(var t=e[0],n=1,r=e.length;n<r;n++)if(!e[n].equals(t))return!1;return!0},U=function(e){O.push(e),l.SHOW_WARNINGS&&console&&console.warn&&console.warn(e)},z=function(e,t){if(t=t||"variable",-1===l.ALLOW_CHARS.indexOf(e)&&!l.VALIDATION_REGEX.test(e))throw new Ae(e+" is not a valid "+t+" name")},B=function(e){var t,n,r,i=Math.sign(e);return e=Math.abs(e),/\d+\.?\d*e[\+\-]*\d+/i.test(e)&&(r=(r=(n=String(e).toLowerCase().split("e")).pop())/(t=Math.abs(r)),n=n[0].split("."),e=-1==r?(t-=n[0].length)<0?n[0].slice(0,t)+"."+n[0].slice(t)+(2===n.length?n[1]:""):"0."+new Array(t+1).join("0")+n.join(""):((r=n[1])&&(t-=r.length),t<0?n[0]+r.slice(0,t)+"."+r.slice(t):n.join("")+new Array(t+1).join("0"))),i<0?"-"+e:e},F=function(e){for(var t=Math.floor(Math.sqrt(e)),n=2;n<=t;n++)if(e%n==0)return!1;return!0},q=function(e){return/^\d+\.?\d*$/.test(e)},H=function(e){return G(e)?H(e.multiplier.toDecimal()):e%1!=0},G=function(e){return e instanceof ze},V=function(e,t,n){if(n=n||{c:[],add:function(e){-1===this.c.indexOf(e)&&isNaN(e)&&this.c.push(e)}},G(e)){var r=e.group,i=e.previousGroup;if(r===b&&V(e.power,t,n),r===_||r===S||i===_||i===S)for(var s in e.symbols)V(e.symbols[s],t,n);else if(r===w||i===w)"e"!==e.value&&"pi"!==e.value&&e.value!==l.IMAGINARY&&n.add(e.value);else if(r===M||i===M)V(ne(e.symbols),t,n);else if(r===b)isNaN(e.value)||n.add(e.value),V(e.power,t,n);else if(r===x&&!t)for(var a=0;a<e.args.length;a++)V(e.args[a],t,n)}return n.c.sort()},W=function(e,n){function r(e,r){n[e]||(n[e]=new ze(0)),n[e]=t.add(n[e],r.clone())}return e=t.expand(e),n=n||{},e.each((function(e){if(e.isConstant("all"))r("constants",e);else if(e.group===w)r(e.value,e);else if(e.group!==x||e.fname!==L&&""!==e.fname){if(e.group===b||e.group===x)throw new Error("Unable to separate. Term cannot be a function!");r(V(e).join(" "),e)}else W(e.args[0])})),n},j=function(e){return e instanceof He},X=function(e){return e instanceof Ge},Z=function(e){return e instanceof Ve},Y=function(e){return e.group===v||e.group===y},J=function(e){return Array.isArray(e)},$=function(e){return/^[-+]?\d+e?\+?\d*$/gim.test(e.toString())},Q=function(e){return e&&String(e)},K=function(e){return"("+e+")"},ee=function(){var e=[].slice.call(arguments);return e.shift().replace(/{(\d+)}/g,(function(t,n){return"function"==typeof(n=e[n])?n():n}))},te=Object.keys,ne=function(e,t,n){for(var r in e)break;return t?r:n?{key:r,obj:e[r]}:e[r]},re=function(e,n,r){return z(e),c(e)?null:(n=n||V(t.parse(r)),t.functions[e]=[t.mapped_function,n.length,{name:e,params:n,body:r}],r)},ie=function(e,n,r){var i,s;return n=String(n),e.group===_?(s=t.expand(e.clone()).stripVar(n),i=t.subtract(e.clone(),s.clone()),s=s):i=e.clone(),e=i.stripVar(n),n=t.divide(i.clone(),e.clone()),s=s||new ze(0),r?{a:e,x:n,ax:i,b:s}:[e,n,i,s]},se=function(e,t){return $(e)?e>=Number.MAX_VALUE?e.toString():Number(e):(t=void 0===t?14:t,Math.round(e*Math.pow(10,t))/Math.pow(10,t))},ae=function(e){return e%2==0},oe=function(e){return 1/(e%1)%2==0},le=function(e){function t(e){-1===I.indexOf(e)&&I.push(e)}"string"==typeof e?t(e):m(e,(function(e){t(e)}))},ue=function(e,t){var n;return J(e)?n=e.splice(t,1)[0]:(n=e[t],delete e[t]),n},ce=function(e,t,n,r){var i=l[e];return l[e]=void 0===n||!!n,r=t.call(r),l[e]=i,r},he=function(e){return[].slice.call(e)},pe=function(e,n){return ce("PARSE2NUMBER",(function(){return t.parse(e,n)}),!0)},fe=function(e){if(J(e)){for(var n=new He([]),r=0;r<e.length;r++)n.elements.push(fe(e[r]));return n}return G(e)?e:t.parse(e)},me=function(e){for(var t=0;t<e.length;t++)if(e[t].group!==v)return!1;return!0},de=function(e){for(var t=0;t<e.length;t++)if(!e[t].isPi()&&!e[t].isE()&&!e[t].isConstant(!0))return!1;return!0},ge=function(e,n,r){(n.isComposite()&&!e.isComposite()||n.isLinear()&&!e.isLinear())&&([e,n]=[n,e]);var i=new ze(0);return e.isLinear()?e.each((function(e){var s;n.isComposite()?n.isLinear()?n.each((function(n){n=t.multiply(t.parse(e),t.parse(n)),n=t.expand(t.parse(n),r),i=t.add(i,n)}),!0):i=t.add(i,t.multiply(e,t.parse(n))):(s=t.multiply(t.parse(e),t.parse(n)),i=t.add(i,t.expand(s,r)))}),!0):i=t.multiply(e,n),i},ve=u("DivisionByZero"),ye=u("ParseError"),we=u("UndefinedError"),be=u("OutOfFunctionDomainError"),xe=u("MaximumIterationsReached"),Me=u("NerdamerTypeError"),Se=u("ParityError"),_e=u("OperatorError"),Ee=u("OutOfRangeError"),Te=u("DimensionError"),Ae=u("InvalidVariableNameError"),Le=u("ValueLimitExceededError"),Ce=u("NerdamerValueError"),Re=u("SolveError"),Ne=(e=u("InfiniteLoopError"),u("UnexpectedTokenError")),Pe=(e={DivisionByZero:ve,ParseError:ye,OutOfFunctionDomainError:be,UndefinedError:we,MaximumIterationsReached:xe,NerdamerTypeError:Me,ParityError:Se,OperatorError:_e,OutOfRangeError:Ee,DimensionError:Te,InvalidVariableNameError:Ae,ValueLimitExceededError:Le,NerdamerValueError:Ce,SolveError:Re,InfiniteLoopError:e,UnexpectedTokenError:Ne},{csc:function(e){return 1/Math.sin(e)},sec:function(e){return 1/Math.cos(e)},cot:function(e){return 1/Math.tan(e)},acsc:function(e){return Math.asin(1/e)},asec:function(e){return Math.acos(1/e)},acot:function(e){return Math.PI/2-Math.atan(e)},erf:function(e){var t=1-(t=1/(1+.5*Math.abs(e)))*Math.exp(-e*e-1.26551223+t*(1.00002368+t*(.37409196+t*(.09678418+t*(t*(.27886807+t*(t*(1.48851587+t*(.17087277*t-.82215223))-1.13520398))-.18628806)))));return 0<=e?t:-t},diff:function(e){return function(t){return(e(t+.001)-e(t-.001))/.002}},median:function(...e){e.sort((function(e,t){return e-t}));var t=Math.floor(e.length/2);return e.length%2?e[t]:(e[t-1]+e[t])/2},fromContinued:function(e){for(var t=e.fractions.slice(),n=1/t.pop(),r=0,i=t.length;r<i;r++)n=1/(t.pop()+n);return e.sign*(e.whole+n)},continuedFraction:function(e,t){t=t||20;for(var n=Math.sign(e),r=Math.abs(e),i=Math.floor(r),s=r-i,a=0,o=!1,l={whole:i,sign:n,fractions:[]};!o&&0!==s;){var u=1/s,c=Math.floor(u);if(1e7<c&&Pe.fromContinued(l)-e<=Number.EPSILON)break;l.fractions.push(c),((s=u-c)<=1e-14||t-1<=a)&&(o=!0),a++}return n=l.fractions.length-1,1===l.fractions[n]&&(l.fractions.pop(),l.fractions[--n]++),l},bigpow:function(e,t){e instanceof Ue||(e=Ue.create(e)),t instanceof Ue||(t=Ue.create(t));var n,r=new Ue(0);return t.isInteger()?(r.num=e.num.pow(t.toString()),r.den=e.den.pow(t.toString())):(n=Ue.create(Math.pow(e.num,t.num)),e=Ue.create(Math.pow(e.den,t.num)),r.num=Pe.nthroot(n,t.den.toString()),r.den=Pe.nthroot(e,t.den)),r},gamma:function(e){var t=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7];if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*Pe.gamma(1-e));--e;for(var n=t[0],r=1;r<9;r++)n+=t[r]/(e+r);var i=e+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(i,e+.5)*Math.exp(-i)*n},bigfactorial:function(e){for(var t=new n(1),r=2;r<=e;r++)t=t.times(r);return new Ue(t)},bigLog:function(e){var t=["-253631954333118718762629409109262279926288908775918712466601196032/39970093576053625963957478139049824030906352922262642968060706375","0","24553090145869607172412918483124184864289170814122579923404694986469653261608528681589949629750677407356463601998534945057511664951799678336/35422621391945757431676178435630229283255250779216421054188228659061954317501699707236864189383591478024245495110561124597124995986978302375","369017335340917140706044240090243368728616279239227943871048759140274862131699550043150713059889196223917527172547/335894053932612728969975338549993764554481173661218585876475837409922537622385232776657791604345125227005476864000","24606853025626737903121303930100462245506322607985779603220820323211395607931699126390918477501325805513849611930008427268176602460462988972957593458726734897129954728102144/17750092415977639787139561330326170936321452137635322313122938207611787444311735251389066106937796085669460151963285086542745859461943369606018450213014148175716400146484375","399073568781976806715759409052286641738926636328983929439450824555613704676637191564699164303012247386095942144825603522401740680808466858044/247958349743620302021733249049411604982786755454514947379317600613433680222511897950658049325685140346169718465773927872179874971908848116625","1468102989495846944084741146947295378041808701256909016224309866143294556551407470861354311593351276612463858816796714569499021375899793849136855085849133702029337910502448189055357182595424959360/819363879309286303497217527375463120404739098260200279520788950777458900438307356738082930586032462601215802636320993648007907724899611296693997216938989854861043298494990214825163523387600982777","5896704855274661767824574093605344871722790278354431422729640950821239030785642943033153793245906863203822369276271050164634206965056233097479117980782641839669/3030306850569309344013726745100070601277982132543905537366562638553198167007159067544789592089960911065181606283478843359856123992707598685058297067179343872000","76631772943534985713873427262830314617912556928476573358548256872141516989538374761909611879922349479420014771499018155447198112155515453671128814488139633810493264352294560043912066253026059140653027326566801398784/36852092933388988649396042883218509607503204211148493545892849595498822817623842579026942621098851631842754395231561679671400197056377380063233740202370686144673585955581403046886083948450136247134308381940165804875","3159076083816399509754948610929467278257473888282947311280653574634802580912280940686954763313882823327077171624015737719617373932318151594325834524000275847475866299387913048/1437757485694188822758304467756419845842037623148461107362957994816554782989250555362514354661961482939226272309026092009962414616417412938087494467254146002233028411865234375","22266067259907364984531611601870291368272674573653403965630628996687370994139884833897773468149149664829922302484782423514167405397665098388400450149078982462318781750661005833037235183394221496186539779712428265837926417581952/9670030144664428565128962309657100138096047028794689249320859276197340398920725569428532293373676415359965773460364494998334259893079003125373872108770534788283842907318071170285038777091588292539102269617376180390982915567375","14604654564989239958569331443385369522850975185358647132770022716433280072271007767111036877803328768910274400515590151934676819262085211828028638417329558229123989556376108454497813055/6090614019162516693013973409650613208227889078878781039105047015752493519149314227721984436973374032279421344818329285207124280297611253861173835238379831004010748379874393292231671808","1901241885407696031217292877862925220917660047127261026827869027159993239567933534052663335498281439239753018507182016153657409777749792228538380379703411298411623469292891476969894084838876001545818141543890273256985768690847587711270930688/765116019778838839812655402103512685695769161212360553099732689795578904762091216998790589926057819838537805856579109910198553330075924857419395160755642371550113347465300208422126945265887065434116781678702741657275181694851670325469434625","139459806786604751793737926146840623607010208216289543036026206208962059593900745886202214788747453279179283344350478734275973878932538430194363355795823581315329311220701640235653288975569812161436/54371368534412517053056101353618694718215711767266376573138772968257303578467926450212293233332401067673270853953399269852376592855992724934941173346260129257754416412476202526978443681584633116375","1045669091124493070709683241190022970908640501171378776604126771144008324358233819560649021940145166254659028524319517244711645162132513416238958170819347361185944945680269442845829390112062101255500836072082817820950448463314034677353723256969344/396228259004446234921310936915931611736815598535963504660076315228798989932959459406702091180060429080345146735173591749448509810270759531977278642135591672189002006272326131885315743181289970885337574780897529347356567086535505950450897216796875","9912919238915437302006264477931031611447467070103973106567538528951878797932559935860738745374437522819124347510590800370471910492338584284092534264608801221235029062881964101996762011296996851893455828946521/3660537472668264151218961634689665210933936249986285290553357254224360417386515311493310199319523687171757653216994741150377508234317025158302057758196429623723072084157928224798322861732880034847243894784000","9263710175433181746575186369318246002919895649622127410824041370079225200282403368319370743363303164313395723904510539050157032684710468364067204876434546848634842333436957245275217583248805993142227630297924119330553308466662488683624783307023014909360640/3341177182697517248552428837661919299725031035849865632511882688786226888137634168024976033652753689210700218163621739078534353578510364301481093730054725078138658805025014615651043313990684347632166030359086885561104034510990826655289288319840595753002771","5116082230713622171832327542439052727465114322479570603905499496221224653983960598946033081212909066917137546065542953865612718836914393275681318667667521726785633638189373998191090501201427906618075889744489190209584/1805752553736060443820406101277706970767657006346276183748749630179442318063568286372320188433843729960294965366346522303898609655762491623098453269916163621089005711823488749297418113474056676109581110715068124438875","246569125619713282434448566970352231845414317018379160824176638351574938993535464763890962336882760882398479702237564384291290459961036068916857265499633061660562532011248501476114401629839742058389195725393702000011860799793778295606988057303225493814005789533570432/85307063020836305797178273029353623060860009152114361453434032434699636078115114412588719432277441055049132559782203988387794711585368296817222565434951256788867244687081233632650953850383220864394261763844194948389861147622944651546912394593164406926489862036343375","133672026303452911046163998480860917119290576658330909785707604886881155606725822685088929236266583416708668502760907677019598002175122453170574729028452721476464728566191464897928696630979863154661704374206171469014225143/45398130975270785045482567762871405072140548998125471025451666500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","6041693953360002800224091673336562508913199995987479264605216252220579740134601435770085920869376641180763419907442721705887169884230643795126568815123647603047739799302562095542459344811429882053086550900803768964612193941424128649976704727183797495759082741166938351872/2016766992122395667828553277997478570503475626107286343497917705446132017125079612756035254750822860815515899557855166824523851779156336235294914777307802256439645525835223691751931866188957324792276149549076500784191791380803500156776088683900346065830066370370083309875","705868391597244582764749229356331441978820024796066870551110486625729826111158236686696326058778874201639006234449557592353247542995871491078308187261304930042019640830629526023972693107193897009168955674240659026247094657679060/231848642748474339277532000336338632910990823562381469441716922006107433404523316252618490265927265734670539384485699132080062215196462178933963957679882342083893417545858074378754089719547920901917516016346211301054206383643383","101832160604157943093944673541651013907278188571533075311673249923948856034633446617630054761681006062910980371900782781226979391765818325065031889334563981235894369036439929651260587335544056975715076598739977065390678221999918899003881778449092038750712969437519295878491018112/32944277910571666002449086492515464541550138004002141571670657643770713783329063548790202120805341989608877739811787937782240802963962520261844114327432160788193314874913687387269408387417806176202979244637915812905426565263196954203487934225589622864145960079736633434831996625","10655703119271468913597640479490594180964700448340778168715956712130636958373270202484276402718566314881119559090842449610957974112230306343486091910217340665146602598568991520563987490686996746558858366002301982443029430290679385551/3398412687366638541233365137084722368200311117891192348532156645374786104142009695796409107380345795998400850838706661851176885183144928701608654514812261697598380070746520197171576610572921007069104300695592751543563472456384512000","1903039332876763837419920240543738799531131775028971323439870868730321221615515008394327723508670975623498588291298064320786970626232668956372004004897872810230178526101184611242511193415796638694370503100219710864543168952682617801833318493436174387568067811938490953495819438108686336/598806534367503338307287246320963280558134937382149405305466709787179429317914803617527827862441615350396864359976273212272586892074799651088317544101755361439294687323233086696182687664637422796995789967075271448560870681210580691574924544896656175563265378514188341796398162841796875","525573915563826130963525826191411949262846916750432019596028344808298471293378917508549164993368392834023782480702893643486699787870059946429810070222126260200026332874480239090370088123833491499400991181659445914352500247596757005142623368/163278727324937389095822405034435687776345799835442022795533783889356344755225815267819508608559076191292900367982490827396869405536484846115955581043091229202052407483776587687967125885665493681707461345895999542381476164157058393971431375","9263815657177858787273494705338516861045771674838057329170239610953039987023429736752079544014780707408666628475997291124805562998227296677616204140605356257712022384368492575381355563976330347792504605666631512343447560301417325154003481040250148561839861837778597346623630046623751094400/2843321709948499955095590862256744532227698001408929142548057792217790532624003190447363578048562448168721539177458065482170148482375585867230123873178100117094533143052886527452665480614620123764036974180917207421482431983407742154634391264619615289225747664532332469783301704643254076601","407959339726114455622180187758753007349209016396248763075759257357925636039752474207685682218422721827857994768023399625060206708378433960993946156803948655098667156937949174400873748557248801874735834957795040139401560494087476967548060208243867/123780218751812156744401121690996305978134694678934447237402511116731459214498784497436358160964198336874043702652746834763131444030185151143987331404604087778514863973633941401826334750268416015224906056576641018962863645043976537664227639296000","2547676391598917379516698439971914695230548782904479778605691338364453606537643088857116141939170899135026552016969320061900926954008522781162186995856580955090548471448276736878300717869625651893741316530109438876067419826217901657017506157997588944233677467357220316084583383623602865379325184/764562034757392298786420374672266498815021229519853724850874576419885380830752931701831256959159800764672605004880389358601658343203513177084389490286723240185146570925957286083025676875197029662038213216541352875570101363668917766225709569356861275434470568767077844675593176178611021135573625","186545352286463730559933346565311535598243666022232037054735807289501173444103692309735768703898330430135399033529355360391658728987379385732098960609744313878477967971557204207043802935782878745271859468248704012618254203101767841517569443555143252/55399179641621656233589820996143825959365789093262978988289445625153099592463372579496245442338653053662134699646413817866770218574795378644415019944304868289119443774932782235638737888469746745621382139263856603239588594078668393194675445556640625","664884440164786473344854955309049113269357314957985265728106924238588705533437169796551912202931185746193155801905841712503407258166135075966280435780812714252670362202091663287095423712596462690753468682634261029392794173636943978404002804413009590005984736612421172979101972556772005594499779860608/195485517776407145286424460448995460754674039560651791192647586550615878988380153730602665795647187884543361218962125172808792176382956599256188706636727418572541254480798303566840010217729386905041217793614214518363859058348249961790104618910877813067510758225302884815410347238200133693756493703875","2614957283934314904315471338485451166053664494383241929385424599389309215073267052860464009981063483440201193771607520572077231889699858482582363845275452280606276949653970992719332472370351170732899676316967244504534154616036371979031399425846100527685/761493664432749089312665480773496290658029971027686543404885407644062485746072719559288231362060149626237939029641098328278650939665665969011529293869562636656650999759724704272743235210867676873525147820749560155294022488994426729939894753293900972032","124843380518493746761140367283007507854364503961156704095198010255465940085534099747297600085903814014415830785663764373057896014399822131175202342399536439284123918855893825207202244831315575594886675813256448846863723093240955901916229136393454605455444105444987028391748121054399538064686074523506176/36022228212051654395480210378626648518430280334458144892889271272122662467638331091863215146548048144675657239846337165813938424387499358852301016926312083940212100001220180762189978024821166744964908871443681332664798940660421469519997746775275873085770018269706847741064037876137315001228315806659875","827992369063043155578730871896750570951766628472810506926098505028264552046829097082095665194000002802661600196840639204300804225352337632259980703832713031790922485730615305441309917696044954289187837653933158950774246017223571461858939407386087081525130831392/236805932823686534991153393869288530368011574665859226704279685567723830696754821658770176385138917722808377962346690757191122309876922069867472518117628639913077442806147910884267694879089753138429767401700283014143248445966474839193628309668702223994071394625","17347276886878323736540051321582548724378497839789943634071026331001588645519865992773157565595886250230140452154269197770615097377486013097979087647774513500701793885978192218455687078883766086309728287172567466406449372659680040183273634701092561727514713494914793425407149186041796935055187281744386432/4919325621804683623339606849970832094714371903709195539440424738973575902329797546592497378000858196173718145883783709223158260700365224756081275272021856393735663399552166737690038832550853145831185979094979556715294990257315369124065787473707136464772247917156232366320267601622617803514003753662109375","137984231830526866236186357461458917020538108058615632801298091031540729111527734872044790487396302545910108285921421417358113055522725197998483383380192391312304647004240060970929072498293210057120617332323445379424867965764749534125081131327565507524502163460761/38810445792642817561168950890315210470940006613819790543653745327778579787694809782601777514116858514049585074667085399925278459138508514838268321349069481334967221455722811414399738756151414906092225265355449011152267068726417045644222323488445626292574879744000","746567120547823334914136339633766098626636643449144032626270358619125402826113269699709721071135471625588981126637674402048519990010499180844665151971356149292818375448504122545400227696621572263621729512461528550588108384619064912224884465737417596190735966915167530332762203074440688676123756162572829692160/208334337057923929636884170505570363171441147899816815785150954417598643614152856767186132467069365605496210036171429712485182162940460120834349006784956522600679357307849981862006710239311750261522832996877712350330290831638640913932265004107623954913155144975252743257846945609734368518424172846119306643431","64649371728330695076928013661001819989330953381731372450140483779536126948957993261299287753791770622512248630224724990234903928056275080682537641377393210728546364176267034339221558641084730052304770498929958838997239635790469536857863963589118888238069738647239076/17903951498200212327802847425913723358452100686246224008745414214690047078122925247086521362329833307849817944645647750649290248110509395628305970523384831671737569872597295947593410067364379687588919135621621162007748635920864926867870502568935739725312687094047375","2454918942158003099688922026016393688092399295166304634317616773083386087532869193458590448918958337530406410803840837646465522656670050113548208618655070231274778592766244282964463702354872753657766121825196898916725498553882689210280080206627916046484942827487726300822318764058084323314109595329304407466188383616/674880185931325925966586583820010578979699141814417326552629206140252348822939845006845669570885271576698771404162512001549922909048916000017837898649100825976232784446638776021483802989797501705685620612986771521390439936066527738682396560462899753657942715306792783283782238662155922082005591512296007820682995125","74018558041066162916454010680594042518462756234254788158141115244349044958441521749277686851928706433556285971088455226217644009628399441967508838553345152310730562224910795446341601049647392069373970101491741830623078126344928804029524181578945586663110848142571149861/20204153620006780689923328634586091101021423979622170579036140596085566172775051595588438592742563923428900864000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","2127032036758045513335690185608563023954009095206088224487365541995326714285119384743928987635752931664240752323937321097955456543854943206092931247498833001499955456190701695430459583885125382086777607021670447795321669948733328973350279846928613949120929250312666393359442423066212311060931469017737106028339882830848/576612418511902928757340062840968526862381326698309578771238715462180282212422302261044980131594522407066369222998903808960617461164985318633518680304995784614308979881735537678182134128319596636920719106506829571072447362052319438091347699720147003209417806230149598345068078717948025207635448205253184540936478445125","35289653975561083576641954928762116897061274899517309102784750384002335187117263273488751066569234386120759866204372398611196356888479036949053282301027789530999737306501029700128744408015642211359442183943916106790666114870974212159410284751571905275610921784716184508440/9503006066880728386808143045924119024212377150217533250562188228062174064693375135306438120385877320162710918716613546077156389583384656340709638430674364232343609717735574035535102953482366914421205216675248471695111720986346092738728929878538430662191272737183832556131","102633551023964794485575491065909467125458972250222581133681080524371507544152979467328048718122409841060527545925136196267751819689935599599321090571687632103850847605493223603751038996548520557330016046032671961857623066292962260173840972332108111505971231021442896036760967107060309991355545554631003681544611731245475968/27459658121882266328752886605529964804078316737648012166874496015808620265471203512606463219297059547428855195782384236337998738233668399173746663289852416697917397644234441300570212555870401420579737973722145663287124151049692290432756231390864184491891697469874600345958989433125942336757049639797225309327019275689074625","10034393558388390065766795008210457368713365491566387292163814915435906649268119060550511145023450790393353937124495488860451123302412204483570913557762460385297770427946219119911920640306914453207097103853766023934602534502476962159682750262143380527529536498215384467975023/2667919902603322771586358077760621955455470781865624844984169443739075976572061827709528710108877015489050369589117491611045518221354793418884447632063538994046714401229510497599783726376490260140723032102883617341970952663947646017489439179953454964374887388652792446976000","248528145263843375390386172800048509380966183384567983242213959113927668429802237067505890436957693495616107089384741585283620097982859345081736730899912519273262934785992235852866637878831878448348444611412764161078458068549719800733237024285525816723480868704742804077255242682077291713092790250511567621735004237450946304/65676865669148624809340872151906045781446981664561196686217551358486802274698228825404698950974939545099727242259547145392352658637333562345477931951890984276718673618736565926663528625796412420753961231404680876558659735251469326707567479071881966875336951133475135427640218972722939427821842173216282390058040618896484375","7805448718805635696495809414501206964843262114470109146341305656318015059743127114324245035489577134938579856003956861881125856595981500593426840968087618241785931128978516340812066502964561231235073012672356530509663384739132686548934288703179479011016719045530855033205271548/2050525178024039744126592505352202216905491833360272553169520915020715464206141942151086176509423406413311520838568324134077402841030113427309725873344806030836314500267104070131451720947531994814710189000076651895520222646974590481497382830325485174899169093049299764813276375","3355325071293197839434119105039673324264765809771192815982246040415580387729382404624613875653005261578877047405365032178619450963731719777167015959920645055600439987161800547901539269321100559393048973255388860193948274255340335876890491746900991668165565729269698196233805991206691196045182214641935483083662356666996922240/876402579119117579582569839757462461050855174353108858954282915644790659429341853404829661899850841645529640454766173209897510988090318303454542547519850473808789222552969933222203420847859171250332350076509996295844203965564448154484566493395403967626596213792922784509892086361572955175655987334882030766001799867659814117","218871061991045868372866381545267589365410350294028138778572466235486397478028823720846191998825628156716190463263492304639890659254282445466806224943413446008645087186307985343574807361972238230520975439736199291019544576443791916302825193643774360055545186783819367378492631806297/56849560726416896431557940314760680962653658127458002233782028041537121216487790008085876994020812492987733987414743604239935223783349870516284048368761617736127892160849065895223288023531930411718807065209903593668117085505482007061969339237404945180379460053180570404846043136000","5008685108365226931582937964451700746853986170633433728409171904803795018146152804690759530990140552460596075588463394200510044617816085275660078502126507209302951286606953039953843685800941558212440519542602092919776366067720586295390886070120828199562643208637974347390938772070049344991272621102622931576339988103674070876518912/1293888539680354282541277646947380627241979967611883341823378331667976045287311988103163380651334828012840330710760757271860219584371109472132211215957402251594055009937397184768184517621978947384029376766290498101728971145633139541827544539988344772578184316843734267915665730981857376872622787627370859411909330227080697966353375","15388340113525711660227566446101909585796746979396093776960989868457211684028149502578116456785221720682202816140911944661051001675127262774824593420825587319436537346311831003212424497488485098543512314062112948777572038731823948224734505930748371522309451168088057190162878224801232/3954220582960831691377435160890656173654063611768428458807273708040518769541211737927975894584024448193835165167801976423275767590502552964407494549049777006346189436817215329891530811451811864579644894987864267389290848598289794977382504890216219362031324635609053075313568115234375","5099039333987561374222193551155323470675617979816941646196895589439391685938046865391119484510329634015275893520725135141878751153360264368353595348921951280561029028912953500944814771064409611917475818956659775131751121312316084465321917769679881052144364834485866477379437705913911371481828140817759401117780199246301705600020671104/1303503600297679371136943454060319958680553228879031326679449263682048703103464872914972900105569835004878963701599765030590097739639045890060548760692125546754294514068052902543220382104483822438283040090444827980927544440984823535260277595466339403795403200720622852069244768910603820007632395190204569927612348189089161551951106625","4902837141334073026145827027361937996261324349722726869116185158777439337041263482852376194988371853413467559557923410949898048139830183335197992754748294810838187068126867611615800383834975563313220497573778480109264178673389149671194149749735833378557143135481387904961537942569904075/1247045310545991266291285730016853118981099516935251861146038369985109288084420528171217942065832292739130145780833406014673689119563698528225048800794718789218267628507713621235056538202070171596177775095071513194885568843375526804796016261173388452184505503341132236719484809714335744","38114743522716832107917466438257616720476488812538316101658139632867788464381862291240727309611460187159930652186486096300862388591521625093237019662273764387591494074792574929490381910446287947994150655077877204446864004067956087975012773988833339521775463977233068498404144221045837190392670308437391686081418318624745039402145439223552/9647001083383999453668111809775451078976046488746916070976218645431946648087171586252172936600115032316383427265217993193444199863138429602138841976586190525451324093772097241349417938578878934577091671046050326087898259692917931230974174799815198493279413438192301437068820185757869608523761456160341754512329264442115351926967120404125","573695055225225727008803730767518906490704995929177617646275646884555707960986625481944101622708415415988844740028718027554452662358957933526173824325955904005404113684003841990198157072540659184995738719040024647370869010473254071681533880576462368600901824622431045529064651675640055917092/144509482511118816399089096021290587489594541280398871255876563615464628718527634679330291741479135415168539765887291789615790513527330600394937614433502341116068305347468133950204152174094704092402978083370792135432486240914953928188835819767755172666693219213868545854371103120604946200875","23876960329653589647925126180903391687666378233201794403339630995420215267415575142266707357255726330536094448314199602616026935251126469221925945960901748679919435908556550271504767784553484434363646489174587463466333864577705745452492395785557425904735048180164697040313528831173448025400634629163795223739061661461986923675833880378496/5986312408594306954013526197465608559068621248896320652512228238115589875514604632230098997609482248000888567135685167138762172475788060284232459813998201719590208742091697294562538265829954186149162974972471533202880368317237508987477069872431064075005305838801862900501819963793062041081601844759452202282545840716920793056488037109375","58168289917567723171226992383559866214094157894992327555495441698028867727845766488121900626912848698952863438654895252811583144479300382761129433911280049009362667380001406579175563745824368613319103673817094498117944856004415812877213722455299491145649879676787079744410765053845551958756701/14517067289347903655500020160671113450349743650636953726251191692074385521975132268313263723831804150872238173602847065423463131917373356798750100313145228608894881457107689499956903046984443545789053438946050974567665049237414588435796381674590098629779384355275820782532479708807512981504000","728621890568281859295409481422447012528302594365693410763821707074444799793690738137592101239862736313347273167450056625929591960610208335290882047413011571781161008296084630072829079783328937418641417642857196346026366370059522990813537731394823630207433267854616768658990289454635793326766697884798538576055949457122067828153655416688640/181030730759516991863708593747964787874073354051675597050399087612142539517308720603687322924426591889179726492403913356461908748733972707460063017057809060190437917851790767968877215795679844983288935075688219234885360839984681619084834228226744165610073685719017596630302462070188937998558312507638434329299017584329479516410907786681093","86855946923438322218622470067224691860808273886184997065663554841573982963995340977083049132518812923329423480393306918856650577072525633920456721265953575424233701929892019410099166322511413146891121248381648145391642571638857576890568882512129960291171866772665863159474602604647289052079991768/21485753507365901947528588896402264670781310878547726104482740647554738151100954835784115119035980523529677083504495839730499664052882400915208251594384038810917282207449860876251558307288700200910747338758723324686939379138206117634546981163355060740270734146780942696291669461182599512320099625","2158989152301022938148680102142188531448821359505188055264665167313418619665693092337665573150374231484840948447637297247277576415460889296724813940128955070240137590073233263168835678714131062764247434144994737610229909964847568491446606012581370840699582055341626266533733744293929658949697805855362114229666626620766245630122333733703618176/531794915405164005613733454597931482878479882704956110685223892325074211694837836221759995948610212818642789132749082430059593652854659130217225506942675608692701447738732031302987802196501895840510235161825501235133794449421919927396142470196961877376701957829921152848178076410141813926924749057304222282687697297216661687583257901415465125","139432548574396829074586704387656697097760057897628994548358619815052936481650396157428747411173567801047221928593253479330480454469358220685854351236980383914223693722868233819483137401339800304943891968050399345430243790898955416907228948287367356990263740207046902209563417267686591994743547621/34201151688775214071963206765436083445901621442002061707492082843232231754829227303539041286301398668437202547003300396162741375435703188500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","11008517174872833286150985180322584448162884832099344969609291070844193524816852920942383850580217443209402836100467940651581092350600329145627967515818684442171571156446321228596914355704205623857871497315955269266498229823278800717909321269179839084452384509142712677235552103459737790674103994445173074670347080506698168482564009465276165824768/2689223396936080856855299215659204161946704205931885125148201643087176556822542895325191478283706585400237901215485150928036895428721912118467760766508162631903585126377676412573187912443878232521444786090510891599171741773242011017926658231638022943018461086517502584854390836347781674626615709751386455292026775663545470794167629144456268750125","16108638074211260588800537540680707641986073914251424878121255234668558067988171568946079848860335948991834525552515669040163026131919804987340113244760738846884911038097907756220945883750502673899084880578229601870882631165510396775126850307838505063922101682333806284668762825609556049426829531780/3919363961344261777100658318137884299575193089462944554282218278496298610828757650104922583359642384253066896538203596057302203635134833545580869871333892935330950583664400555463557735723364497947986885146043017010159347046389604172186788902608216894094289769850517098027486468084407618748895626853","34420755849180279597302103726180110022640946692592540634353734157479505420320000324260530767186132260970572450489530034440214259559325114511265075416512316229177952140217732655405289808326341696986755141965043719344169685611217958619102774617224847284122901023774956887687026904767714958090256282893003000752947427857703259704682455375442735857024/8342030311716679826889917494957593165464748884572298173556257652389845294530325764837124998293398445804458613956489096007564811101361266196542129764287084823604897187311540561857741285793447174119667215803837719660675298308873496219385226998078648428368061868944322478384684509466965129972030932418920415308276430355882329457342937549162000252625","345888075261020004071220843714060353763382280664960929903544964118831237876694384053904571498830068831026644303797377762345709976595360421502594656308937649239978525713471393570536680412814805076323426256584504251728507416368609420882442293831684681071553766603478479006495757222912500012444787804577811/83505703731469734628961395063481893801938371516752417759131774530720075262459158384433785006689548434701904106312038822969658455364219435022841597243178757423598248565463985786213156556523685666430799283870548238467817226915680747412191245046634279766450629886904716776719219698922088211154187845632000","1061717830619177527082296723099890392273896386613997004874669053445943252046748251883532634529759169500795452576392700472771365240996842610207274128102329096619028487369622001737128463631016494371635687841733644339636164570819431573829173533941056258744442930643735587780907310433371453992062647737259587563398111688659657406089003293576961475848704/255359631537215747979895955806995352799574790340218399351168178555478073997876110889483456972687438702262017800167048243754141722496276537685853311434069991222324039005160057724073156957530106623908696241268268096879569794431919729620178375212905203484165745866913773304319069321426245521467122472046370356725530914587807274074293673038482666015625","274122944106300296738399632684955400761495830361663966466225652918683099779465438024846903286816813856490888796372134557295699980528187779624865098445756013563535339056233912394908544185885547842235097677765325396255649207317018754967666450708249125316192200151505568416495274671679500594656671785202496/65687592621976546250581560102201535533608158256953087745856906437400149205693427285162333502528793675585022025602144243543064185647792948495372442630333800126269123531636800213405254045262127593759539706750242430153456891792533267948231185296091297979933562727112487057234422009426868531651634706262125","7842680480716516803148821198697967237136721860017131244266974996267074742248599085253569637183007740566941125452215834642683053334607896723447140851344501084122965014242091312411884985569341166545074688756440728922408743841592658677792796881188604773469108807869960161395759837407978596679911066586626885830991556090978327508459276025943279064965688960/1872528612245648675720382138045071131304652050696842872529163720558126655075937845539792108048310219395746259570506175902206215101518698490144716531697689534559827422735649881381597761684154409796315455445459537515308174919488497154409643876490472215352056502193150125644288086294418253309947229151074464928874881827227706992859640236086417889990541889","5300824422251242070074569186825929119848111723012841627275830216301188228660779008353049603527567784119877706984722171178137272986345560485784907345500893648715341273841147320288851034078863843374665850852481747000237834238703248634174397792745914847774297223176674917912406659831206869442510948965571661/1261140476013707338477604677428573831791396352814802149994640617701773078174882455512668089072441176857892331468691160991310474734143842336092636848492066592397892638052212250229129355009939118431643425836944282456647571558383755315238500832868535816144280088644939696339160092963629012001958205063168000","2220223718762215584659309059880106334425515875615107369399767892051551634000614327272260081056973863669004224981561870246078120862256383581012183852291444462730018546753183156982897386563561418424093883164027305254176874653780425452987066512563140531367766900610414277825262239199580925879453806414860409441845631158680721091621460775043562065815179617536/526383206607841251253861841374779803798480623722760367843070466043030228662340154304405180907941079883976168609082254331465595267209149963786388600028701073430773581228212441424400748220833542964971495005714483235359479470452593264280645360131482713147116366500300066771223383007216182988263355451923333319170174755334598973202740108032097242475554128875","521891797109626296684891455959263713257353500867652268541535940159815152120871142196535233326890353914761242025931373491906127275561002910157909306979093246574207104081108188995072105948138299097848175016082947174156278439986705241571619793059501724269644447572323501261424770743329858038040685313621446524/123310256826873923765604825413207481739886340225713108649758575106598510022338480189649787216845041382860899099250547657534972156328080736149239332330143771138115695598493059325064119176038137294863053148618656356436332991079150723235214278848602671333076219529535123842212129829931654967367649078369140625","66086044538329677372986118727999622900471937619891337714357792768200341519193500393739322894033303245376225584865369486696276607060432449792893028061817203932068085863800494054274423512956136695211796751845295921015953538329385253280866669403169919614982155350899648626481405781514434761541281229159396787287553493046927448595964103589100429722948913403008/15562137339474350565671240515273666798063901504051979980452491653975250630723677279081058884163396938548780856293034775459223871281049026140999055923743471466471830572672766633086347312178711643724485955576579988182546105048041649947277672869613992334541438784737993706482731696809943027528882927942967419447250586964258807454003775693567366165507144866375","335377615394100148751647837967017467711612297170079949298328061159559939969228226474615711044891085626519877634842694983669611974807129333052471799687426665556738316626171408219730853872410792831871526174987402129691897433888027072807302411474690613948951673562473758814664346259109886876538510453475290967835/78715592752271462306588358880337347638000605031000575876214116610339827495261512281635361568951675037834544811575026718101166562072917855004822606752296233435017284127594847656529606648345533195437635894948829857913798336356647286032372695130461573940500785137424365840081503133157308796505622439791698116608","20090879701618729602554170716780970848925039917987945471322994867171660307998603515745066411687983450400412739285577269751603921163835619296822801840348319742203974023505186187060251544248644338412667631232247108675504629538319425769464277309915502144443973397371136256151336255138506001292355330875114245901820438821732843540725116728866301271466614762497024/4700223519410528857298732096729483544820841497820611795617923063440946097326817340637303431283005509904481323205480729806879570430868897342398783028649633951362398196137429076844504529051072393709154483678349272930361110568616112723747726853614661953537957117231900032044221535502745676310313569997665352252492568100075191900969170979460298189170486601502625","2904778979985524171206573028445379872240558084236464200857594814631031581387804621371822074061289363372523364167184697785570324832815972970658633551879143187709707164796663015180877412717910872234647704536817108676736661804878068078543241390828229923424191204586313620612539678930999769543756218765870513049986792/677408099044823641581658869221044375312077929976719183424865834811543737800956896926637625166844372424044003929341361734886232742770909683021563822987505236295727478159938135467975522336774471915167606673489722102077041330652185811196423400701795791669780695158730756241178262962515917389382302757366325768069625","31270155809329751863885224732454397292230969002004953832354065319735530624996254695453061851449600345977646455072512400760539747054003851289540339425848681804190284451253462663731135337775088379954403740058084949675460445909826322297817535400604180338201322667139062500269285493417563095365899631360901732684124930296643108551710704785906431324876072470231424/7269578038000504017073007978844992319987411732848567116655821196644382777088703228960020894756722675887473977480537577509061256138261063926845643360849217556370868752909531088361229374467207196928745673402380473721018157327193509586295879051411183657185176812738231456253321187419224704301236205478184115996135940848503487199394612616742961108684539794921875","432538822079707760382094121020421735679118830363764570640789368235407853152380328891350816400541189148550353337874309885334920995713154225799660601389784410911658967499100610376065640785585342035058364676314084595283850213942576431310823836792440218271879354669291052589804956435743500204185107215929849054782893113/100246574739326291035824954677502591279343311051719151327066341370995390423713403739043396503785261917771859220535505691760472395306543276314938287868734009582906895763073519374099272340577921671298878837400921045252035507925021904954445172372479744465666760762909731237634082051855588025732494461939980856983552000","1914333673689206389116942789116917579088664511118582610293383428712902211612554212779880638065888518488492298586641997844141510832940409501694726851666478650414191249534733087933879981733561565249818572204932715347752949087800778646065986244657260832234479202201129845117955957242616947361016603702640821256099895469088229339240402478576285854783063612307200/442333801076281757298117784528962837115323835962460661601905131618341609371649347131724700192551574625400701487125984359494804828935577124602622582550626336986871791407398609915208114339012374456785705161994343348351473385887949809051796407340988735853810174589261300681030826392672282630613354461927208579993042968520650313621522933214063366558703422757071","5704691626402072213006354545292364761246893919997531024861408248746241619817955824682639582830486790618668221530365426203424888737658778881721063941495350237419723855000515747725926735319471480027293210991869255971365522170749568996651406002311020883635577590045650037569906001924971041810547543163363976464780729932/1314240362076792592671773873754757443276256223533339004339330559325754574023619698171225777585408160438834449576526997055649849875516310105297894855264038450585295422343454458568152668980131977005808840141079502436391909349182185596381509091427752151860204235071122788499996991078935216686010888734471173124487937875","451219364084386208718456142329444023337343409261545444643031014769484085278440612677813682892926852469540118625738238137458321112005189595703619178533263706811689687213128887082197330137502064260105387500552856851972124172206996205919556553246133218441769325133725631665593372188755090094541462474970525820334385058333756591222492801647110594428922046641945259392/103648250172203340865458115839764297558925693061798169434516001775068769911768281084188883278842546791612199025413573394167639925287068809631958006622842716869211374513136766899877504136929177267362862319748507372147243911522667591375015611312165464514308451222180272935398828092646393830572838772085366567154646425598388620105539619174837489536378605144891769625","1591076564577634575701791393842535460875733974464805197283632670013516183281542903377750304419996681222758401497321278555686661981435637461350320471258386388843198706277657208526372100698700615835733712519332548607115875288787602084336341594576426630670911478276101702119972195558314357975365863803265163991961173/364433108410193393847203348728981296285742202617988970384277162225847256295865554341611171460436362780497179090329831885853324392923449579538286804729856000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","5307507148709435807261229345132535134848030343901300324623409721698217134932866488937772986386501538026693956121121771089740095760486362654754229904633476234090792827930433598453200536551779789049352131005222659995845427680686677324963223653949277037520711609343166926627713758990384011274777087968799793410506391884872456420041494598273703914689586637995139580794368/1212244290381524115082005575105703496583315188540177702780216570265159923654197746388568151706509243638302707511238539845531608313334248788980188054651601536067740709977678222790481348003085034888244447626347312094586389347535167903408519024105748523384932942441843118813819781347089702286481924493361058339731949844620763272778960860509570622673048786968660129650125","3046577098843580578619955603029073328361298436129791931304665777036152915858575282362742008136721284817899542475666054101957899858138590963789072530710775790433466847100422875906866496318804986202089528198912098377828580031852152997907433335176267300286466072997014023120087988748396598176622765923059385876855303940720/693911859077752895978833241338902695755528613729508555938416419864772385336777924892434701804078893822446727762077537955240605927550548046309823051841326355655848406646248595628715185413852040295631448250459076043816328082561248420925930431777502622148019371383254316636979070731427737764160145097293260938978413488819","155310926743873343426312607182060072939030765297630534544899230213054714482456829198485999782086944271490229412707980997432528653509945301574794242118433868747172279224118534460563400440670015323324602117517342201640016853927923976796453577048995243600967202462466681112804476672348206491490513419336308575442086511015101999847896197546900512764233674747415844045184/35278162986589659300679088538176070649273991865663041616088851923111175518405117391134863644540911005782372831496121355954470744169969774540892096320978686548284501139861783292226140413769665461494668479430833892857992401391262903582109993838728281915806394747833588629467613308837196269424421131934859079260185052081536487462257809987002198437182539441349474426375","46729591025621874782758519074451728476386657576036360734358719976400940301493939192083339293779149127132651616972817165172116269307276487158069293114860391502484125554406945249728802484128756924044633825692779783425628292959170597009935305429239702926898931975023598456207165067568919757902764815108751735753431153581849/10585868084079030838651390738371141142245086465033459640458366146849314274285871375459898014414833295804139979016362796357043372316321872357817727821559232353993714062535883074661734509440994664726425399880995133711038483607773782532430879196405793694658185175583691180757783597895616920432527125993118171361116684288000","3736372348124144720852190769710129461145889011598636925228657393934132828633132357232883470466940330848177425542748100211498184494252714616379450272611850068867816250209867530921278645286769418080018709947826876461419654782341309127709703626401211996255743831998918894661053669189312375159058718767082163156988766821194002596331826150321864927832618126580509732359424/844176851007504003627016945212023239308348428094023437269532743221937069345682900884618378849283002998220513307273333096775669556093005637615012750733216460458689282791632437851364674879152695438589692227159038555722539345972833161146108367329370564838671791241431125003401861887477969954740544092178721327724620450947646209914621007186497081420384347438812255859375","1258774755828991281578968023382624723772927642002016270484090409043454336040857926581316994594109169123354553321469500848146015719851609220423736153365139804086413284787598253618361769125996755159571523632747129480387254164008968993734442164892486441152227433281625391753702577143985047832519062595123255569172968685060844/283659859661671181526547833415653453506477950678651675193210969173130116121017723360258249430884213011988678011357458727603413521688184521573094783291496368005697481333739504490647194454695504722542014845706216224432373442438242355188461951883454664693262684873988061018976711201351382163527093784753398257094429403691625","84932063355292829988908961192574710493098897148701473172754949846455626381329456661808566365329266898990829247446356970454502007127269708487563279536825277374133681167235811080298134899629580318813382668399644553111080625918213250223197440426147821225593304993621451053135332451997633132772608233430131400186571793929377129211228689703376067763625568623535588709576320/19089978133324852910950469658566458037096027722326716800113107848115231563787455584278193954518442601810776347091253561956877155673550458955562102935555510392954425196165785410319126098393353878286400877305164869548380670204577544630353859009177051698096136470072137579698473017257397949994722015089768745013713383769765609613514021200888647472804720456494757423299627","802638881530832431828249604040579750916118423833791608589560402449036920165704012070349537114920882938466635598602387718300074733476150548724726460209016834416094317724261857969955414000155807312852092720310159572547644569797512233899495300028159721348599816083166712365215075728968005941610056018023633235372936903015771583/179951197386119079732438617407921535065140503043429174394605652913879982486051627760652197484142547447000508189455126493868229565647284332735552462525598465192073558793335913005459266977086104359621022691931002488052727597513413492393525660272900161375677499228252863529934576881596384036401784035248649026076581302370304000","25208742399375362881099811032135575360109715964024747212026245529087599633280142314962581193303683759605084995818253124445773115574470717199218828756449187055537877478033129862600982068782249943150019637186466260707552416433010545437321814115233841687700051830170191107127799355485920046505591193770164750886037885397478191534797655616745528343172318318678405576430544896/5637713398995569614196397857525646325234056219513202928587580534159596897880731043336790273040813044077153051260989730372846713618900145444802234629922717464041261370803598799826604841654608724727320798324006129524610666235998113655193642594744544226880944882342204407750193512869672849910003246504052298022468012594459974209940607450480609190841893267203392880360823875","732332637178584560220688900268566130246820235956768724845747830959547501950765063982943061181526237061809052444110437930100210105274824607344902764184151030827266142225894655531497849161692760385938786736436977268616029862577293984376170905024712952813234949508186306774257035535805330366742322777611063402455261391021097128/163377988152179636922409938163005948596822656868040662831003991395905185823836089887990201522673196719628247106777881741843786365701135555917263285268753605514812568258179391272113405920369587922702002732667842511108732068683407168090725712401954314293193572654347237716691784386690948494003094992876867763698101043701171875","22391374854299462107923583267570593886002658786775211597896252879708753450794332301142909715845151746786016535157797023153041007263258732991465037648536702217273897876864351559736449481285518249846264600935543582562018874574655740660800634883403597181876364712521253650744197321080655028374602772696770227741610874399454362583980465225235674816785988164157351243193265401728/4983275997188967758382167867656806681565521964135131710678447245984239733544941881418957694612909599261843693554043504855207170782744518943778096768859337980470219783210191765678908537645270392500777411134164918803949155037581108678968701961544979451081836872425574123683574475790997414488641534074873248802450108535183413970057319247033379016606809226547805269752123746375","21252344995592269775107236774689012760750850598567799560343535731251766780016530978663079386453430272698006977668063208502408607227544322945446079708000304179073184745623740466334127867464883762843346619853325415963062181018736410570113171387891518398846617197097407612852037905687899800932343156979591740310928257766081697645/4718515378484509142377558412184183991357747235892194234377932213613746008373918923611236346330189287336493794499188640380975364991548794341177060325509698404571318037298112293926833877103554546466055612498927474225619680186119313129604319096374924037870803554153458104225741255753314955115645304948564151765516183663634546688","76703085666560609319365659209445044957052359500745196718269665234646121134787807938680787341023203786904308047981099228357850016602203539979246579454229078497537148799349353250167621935384193502383187510928609818011142642954550330069991570983902841318203794113898871515702445720207144863877026526025447819537396146822201819435536435835285098485990260677737192230985069824/16989892821104122916312992616665764943723222199277412857053896319814438961475117951904867066845412639236790762432996309717924037467863024360211163971190006272168845197000304328480920483651558672879967350982199768255256753110375467976246339260326422891913564151453729285191351273342206198366624882195135056176502724912849575385576554208844814085228696838834665339811027625","40153831166521391225489894857551838468150576827129133168972859441122728710165233865309084872159583787083130713473702296122465319276461991457173085312407612757280915853584698420083436946976844240063731333638150599017886937783470942007376523947840104246927580254612991191040951001539641947153847776050138532219595746056076776809812/8873576113581065493273519627544307418139908640325227196912114520903505426722086265723900326735989771660987609604507503750212298754414472822477243293638486047313990878348820573874809636084574108909615044524663712495422565151340037564156235745628465172219286664653343193162657374410926171153516871765680561505768223660055617934625","200736374277835272485186523480177159453030082779872429648449412313247640312479214261681899286513818912991945046297334418102711629933437654377760028476767482162031641781499114859553677502002901248124750539270235098492377826240319766677856465093871367817683734079621359186477306173620331748496369122143019303740252461824523590096923561928354020960176605008889579578495073283712/44259440065125442964014453739391594153290923937737136823355312892557975399035370631521014554980129291582486968083228888083079118116286312583989433037097397252506140224404130371160608365777625538148303917306340620019882928744151294738308047800711028158277500317134537540772759486365658024194428796846364486187105343266398338060080611643110071184992193593643605709075927734375","488459049325494693259159444507437983381645757291858092983371672334043029615965882574409808932509285079401239403272414271652617474184321852388397021836909585659327974611273820676128650810907598106588433939541654215766888212287311943387232664417347883717203611092450971786083806323404432266197250919880225892099146722474124874256523/107455855466267410923480140898552598306699341366032095904938430084768624148829473848763761936703072253841751966906142283640379336131083461646777390874405323298406517250231389493084918065243079819898691146841695350589992171102939046740169198394671965069747042621265775948217054519855346617967866614303497258042439052681849864192000","8430374068596413768975326329313648683222744787097373111477788794692418932056901235174019333392845529821722488982447683794746518712070635063397464904489452840169472596494433874412726723065560358405027764015273789053064830528919091414531400589850704395887250756457780868677553068164933299802944396576360356896758745030955907258232257358056931680617626606715393885378887657377280/1850480358582748412767893656294669486390769246349349706200869446679212812264400876685764762211659843658541567071977813110496329850010288179702589501255367345935389050373021591572539260951149696801665953123597521983257852207280970577287472932167362521740230973547070264273850381896786822127290397075758780174083415923482640313277341120938690594859118603017930500014640169211239","58273615882491925540881784328370957720539797010816130007322211512070634295154626813477498607761260613353633996451797686143131893884559909668805628269959901044961666535533876340116728982072626875010391195372759135469446048394835148654407846242721443845351855234347422256700864370273092971804207514736924787577569355949601385705517152/12763172138328432984573837529764902730448666594097466544652830703737195804747682450548488162227364538052585484418491914323658215406327363805353540266048943197822838925184942600367647278764952826664684839953902567694832690683467635727409976388280092262839126779730168889686628630302519063225007497707028600865624133968363921915016625","2685278694947152969468407055109959900160804835228466214479525891103128459065131221736713585038130737099067040196326815283171857977706979990467444622550497565521863441617001097354649972660183038850033950647594754644997436624623325003537308428828750008305464174443210079059253920383411910911594636045517662796811001285984447671371943267419151220518726940455756833040934506414133888/586864816044968996825907488721678304211296267371936463272955488077666796280028127333229453342355554450708284934221461946991556216095213627059047984199091625921432110913096253352065238765240063555347292393427726758010888546427415276046238297382474708612526770055488323003698641493939145624184943388159614111350839555141202024991876221874110644879676602924730506882384603409121625","27700345710264347957758638741952394530538598225904772664391173119594616680996031886665218221392453628824570256438960349220263575741495285780845399187013582169907518462437966962923592601721119258663490655013419675469864809004562272799012227293974254329929404036071055528766397079743200179924243479370594973626764330855493789112414191/6040997839051213541001279276287478343874107660287651711609067205111574718442229224212245187655300348484144001298428958025052162253854676210451657425437588244676589965820312500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","80160269787574270953020489212619791839643207793889009503234879683494928396231769167082355143564723274576166638869430572977442020236299319718643894871736539109822173538266278165276591962215927816541165548699380129014840956895931285215480350321259054359835472320394089646764361802445068798451796525897304221529850133401768027469126408090577121172238802281079916258951770135485696/17444957084936455555074876721808241311651668802091828589911310253709517226715880722948267977560381436307152342821304525073651379763144281678911047276389231713860392794975453518107055568765009486973017341479560154792340888780337029481646046233967923289468141293699236815196553819373828280398488966665994092877680860643266914861837639322607761804740256920429518434353839878280875","2352816897072623416220002134476921108405735955266703519252095150412419264317091785317803024028565851487861978477208755211589867803009700996828082850796103789009194767813611798769297617674631277847910238088040257037678126316866517601388289837575778165301828137259948173292658462765645645868094197736382683775415645307647043205988394700/510973411316690313485681833991645423802776865720580280058344111363363091616558230182669376841383375321912553771027107891991318313938505988903735114191313214327683449514676737796942389784957658395806951715454372568523597420866050825822028817422805046287798054682484158011143949412956697442991898914560191411624040490122951328364833797","6403295584873165688372907494046202150046769667837790834896334486679541887567517050446119511695248926941383207478170182650927368177009669717288184903306689332746127845953193587519575304974203099873732502605739219028995266139383163062837007982999189114810534856227848568800302527760100163350814120545587074865568436789021082619398126713943637898657861949091545516403987546145915409024/1387794272010111535893205703999712437783041553900341112488641528986385462810448493444968969845352401058333929711237978223214186693177251566069419805757440174840170213159651962686467523533938145629444468366235554597245713128812532716616087753947246800626006504878203666972651384731498770435755225220796872155249202960801768048854869001310722927230237083418017482134588865244642658875","82993247683514419570466529457059660634483860665557779709153549045427987672829778520201315148149878525274005978368939092115193636113741972236218502664881450367443614971109677363668874484696543982239492409231870942414193419634675024621942196087473557914167832058111113476295926250739099284241826553737074679953551191767148712684157318697/17950946423927357725787689855263532224005643859095168852729513034456208872420513601894508438640531171097082516559962755244698695622824386001219435651555513795509616906355363573638916895074349491513539093024980575852693293474288638209680085037286354050958859425647536735341886663074581909148323105020337857959651624760873736590065664000","584891611376763781852144397260140844977346305541197362434227194779766612939978629636198589818106137319267243431810481928639442343946346034433828599323416877248326356345631611148749005937144684862502198147087702668524450709118588741606955966569427636630159793409544653944608958808602551061186799401212712216156799273254257486955348236914237644151956226336750212957092204830385441792/126256710861549838395499078249922986417488985866522660521294610280820007499099176190820291214370699289977888813109514854178180265382471972583921477022411657285850911270389720508719377071949050253246021921916685716353393018411683757067093259101151481189635423399611625009617884983318141463140199839724797412514785751549277231259345923662499623640886881048572831787168979644775390625","4743054867460856425399742072925732465660626340183690464743217147109403130730445842673866624947360862438925194786600531200056131309608642363389833474026007798643235346104937733349791667694862514383520689594596660275306247615314272223660862212527346572811422915223417783887717426641317921972456913534338708745549252254865615725859881457906376/1021840037832289788284691535543138164288462770384961802287250236519983887262771944174557087207566030730743075334169628971336358708580124427857321953981475719503574867471090607795242192417162791762511940848493176847925838738242153177311649130718886794249673254183907621449520415060660496225939963471753122766421338241291756892571824984344625","3784664074155769467702999785016514468281913375341134899878893061325465790589101335015569840325786070795267055386681356241209412947116340524588831510768864231937929260236754881829005065056310226407358204278658699999612596866156294195316867934035877283950841910726224355461522065773816109849107487214275801829843762482082803559183694631856772777313673086715631547326400170962722842240/813783281473223559981291694175087508812520505931454895884442580280342455516154674683217348039336712901850738745276445107477919518905155156380620466135946654952837573797479076027688866326359448543065305071605591497778941561986579230698384305536224430794233462949056326864499827444363206162251104552740175503996670997705423888382328014210171324376593090187604268086334796245552762333","1946671258536842642381655747294621776070051525209940130115769153666368932042152311477746728678182920842238801763565726086459485050237860693394471644023999467670017470376746609892484192072297938254898880354014176373253875722410186683852253828299669530022166361304397631667133689128358365296701757782382475692465977794960109690362462330857/417774039698408581013003883929127512062321623871486379101498968145670269174833505080260389860863417408848209525427705249526516766731427603641806256289098209429110794311660844125377702016056984573671024035213045475132134896835814746425864304907974005950155657789157496389234919107772201305672421982198984613601511388413381215220924416000","328578487723377153600821813410631465225159589727320893988991729306688663770697528156625398176929288628930496338036815910669579019719633124832162035588583242320537435554101841406566009219059042888412893352417446437227440076869427577701706713564212185163005644118869496869980925214424591264870388237079776503547314587137721633918824664946974571838634860386893404364499977966899068777016064/70382695927096628347637455030970644630942872888311870124896575877585692281624151103204551947776906510366521972834357031777287506848887607457751667816514216907338309372900327919413372044625602555866294337672022362865161523684052940126509854895320132828009551012639156341878073682501185688461720664801829933689280752623773789373199210473995823367199793407048741191786377993390965297664875","2617201476921368517857942326432090876874414269689140439151907982631768946799200744678055980827789859579196832718849393046147656447672531861353456343821196812881882023188898815179947651274131166835133965629115749368441605680383605331300030886676081418867305170012032824011912531673468215561506423833911621270680104083533917562622600478548/559567121085534865189976875600841717161617153776904752351231210970240323460800785728739412474960421770806162360125774000625035522428160837855944215417821324758873127567654244465281354654299068546570789547691342609793050301258532586131013585959164719533123826201937801986942606844854123769532447570107525081084531848318874835968017578125","636225736038986537559880265988431731529837451289737542395494683393492040808565905376235074534207026537145408562785279823547657299565440309510931336394031904920056464959974743525662459433889398003683078967642651812081450227654478095420306880762753401111260630654049389197602389949892636943971690212484981672010398108426002137114819838399222096538921225458913266993881960732663394566024064/135776510176793971074115131648637508758953050390591773574951317807919051619690313331192027871176160424663811116849856489187562728496099757910540362703888937768555824513740118941387831822900198029266206334350448626733139136083404404120210893986654422850183837974770675600952078956326317698998103770833069712616832650406225828969036781514645731022616236082175582937900731419575337473384125","266695771933124633677367149389643417608461366874310588884377151539325854547826373711099517873721616543570605935954334944030816383858485296542260152894035979141266909050267414072982042090341712035518685997484257326212454742816979806460287972757626105526907510197321350895873473656215941034605746494172316089636216915825022339855304925515685/56811706665210352283362623728191218698295056176625217939528332247537278605113496147630185544004654583441448319260578659922931798845493756189402805173037491645434052737405379674607517658118427614090338938517963215812444779184193933749520313676564187507594274551791388039139409235056119788261689087831209441779870873305232021728002651979776","3511806683161697708497547617957719390189982761002154386881580160856792742952365159764830433511949678304281539875366378131195670004345568047690216126001067194904446295336734931691743477531830892015690816210752795806120303198745685394015161323982229908105397857791180342330098240702332072396030780386362735967021055250450666535422528637737695053315137238368787607412459874094164027214953984/746741569878639983491390741637813989978804202898438708743258000150996080386381281307609038830698579358879333079215327202911977568726258527646560497079622703052765164031089590965199628534477381843079892123440214378949632707668935001371616475282883095939750704292616758568964786737752325652839226013335092148777788733453702438432279149298482004122593243860829060557386699231448957232420125","499543951252504651717279461487337168721376180441322735807713499521878076780205427598086756686061009718016175215146305489885835839673419698751530207404115002383180054704927695269921072232395828258826213554806570423602966743337801741633869267620843626804016742412046844770601322513184123515405692795346790813502805238635003099976693786012816/106032986203682550514602969462803214831559442358811656484036951559991322084935692953211120289352600484987931812632505499612220494311324679562152078883141464406938524087376964935494245010636163705698220308243980789514815579319533341929989455211613890905485981353837321342730307819060825125980500975023479813757024395422041501208805339176375","8540849722242122835873311629952985285477986765819584558233324868363310302206006773828897816547299245727087876984857726652932481899766510637403577175623031467933486823994040576431755172220921921877192006685053572215922347418846423419683723609799729359551828522978186208983138345476801247634773975311405913274552616037005854836040162212761099347518242200807692224460514057530656658616850816/1809694575992816440924165741094996511361288430727981159314194000585536832192004274726651828760263522962868944612215633976203596150606503849595633388319338251977160257979846235995654357082321611719654136058257458753105122024859078420173515189641515736029725847315662215778251370398007468665986604529263071981040014321717598469319370651877296085250322599247141397427185438573360443115234375","51377057693118720457387330519321684810411289582445982078756989158447711080414032055843805733348558621949380554029375294451303430269197115810494758213980833379214402452992657502777067850631862453239349835215260705131864911194740832694498014048717871429797341104227759557199716944554347879767916801106279081864127192611546757627038037780244683/10867246748205139797826516105458406878398263495890048637741584969144406206902037615496936724683237700974333817527350121106320991054058406504571347680049945745432432384570515723033245430148177097144850158758462968940525568041926860856763884474605057056550146491001458649244094211354153171337463406192651150028767064600270112838159624568832000","2517199821548153657910904242290029026229621935918771922146425373057248090467388430999870036608278542449661971830076845113363443421757278612394167195431759807908413353743377586893872930828548256216510734912027450642648789925142482023713336937258932978503310551945630359646777080073329099268529064437120002567758664419443374110941824106727218341795100740316967386497091058915066147604481280/531524260324016969370728057738851340792702640911631807178654723224511108065633433027773388768889035083734041289308124943130099580765995149865288328550751289346866467755881013217287175392101334538392596956248952430438673292186779006015549928829953979591250274457658042926539541422697852390294886719770034058916886894408015624288115732154492554105512936468520265305162358665491880968652687","937159485027553069020805864547349554547661693803137696125140510201297417077233061462068930061915381468160677500445535971818609631674361074587732183297775728389124966713749450996643183965795829780345678634356741756033039293590264355732129789110416943789326482663579413229893878422643110852069225671783017610387570935863228248464396615988222968188/197552642195166614912991396771845374656891854357948006221100585931656016640982345159207601253599235265353060942313995345483862152489766993442419668492877390774016299878943454249209917002169480134131612530977452579520564400124908392339263545911443803619972765231094502745980083350567509014991735227390978850048088378721210219321877150756855372125","5119346675109082499980756672052066247676641510661024682574296075659671743397880591881419516307292610449161239233139088348510165442597278965718490070997173182184417648987611422446347235659085092530927312760229499083348217392125906851921500360553758600756698605047197529446594606336369425040236883171542367713951500007600355406492128741649090501989105696576697387613035366083536629358444229248/1077349190930018641197987339365056771667455373500846354778079878558146320193384166982231171317419356136237346389570422332278447217033773023556383420372685049620361481309067017697564760747047839930422553324681218253359586320952896352245366885171583221864112040038531116947187482413031483309534553461613717398523132176948321964066833901215878133594739833910960843185464241840039390204295097875","58469980853327028628854378052548435225264353747414624620847476036979290604604988637469977624105451959796142112200285366199247075503424204044884512269071061176877225315884188402954249683107639777479663275428465242905314418930053869461904934138752031124685541853599407727446896558064252696813370692668496452783003306386669962110734257851955001481/12284458784412533668960387046583440199646081362484321078872891438551639470826582933879934711861551014258493898870867541349962531447724393381011633785884743889445407749238183080941846528000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","632694338036291086868292541736272151517212971647680989553388199374739841494700315711180961760384484042159533979873604395621016272772109619401112452105475906812313548587880899058905419220497456502543971131226430775692744506047039958551641270070996110661036371362526401525207493270590999387476275629412687473362310414634469788979236895300129227082421021999210841384596617452097273320509348159488/132710874087075221626157136110978536488168313127228703025408943153782802265472978945703742152954881438058373686972477195846162708986982742647038014147903817539418442869011995988024638278746664230046452545499722614320284478925059527086663455478374200352375121910000967044366831275681254530914306064535110528723482282501358749001657608122307686482720926189537227492041135055090784059994118192625","2022422468242151190347511883185841333968390991430363660248687284021524206079162212007263606819387821055183192871951076644707111802972354128011904720586729919826758651167984507804867954970064938022106484656560866447290934136610214175516487579122328055482392137619829739560923807880779865442016530712986750711199998190148885726144596663143651240/423528009127070458603837580844559347493775236970253513203186912091140251858605354218715508091394564000304400858761758838182654201653901408046974668599216804223721114331085507752600832390227068985693006017591304916519540245902645712532993889000048992026931475754508248265356181099817467608863068068953756055334213584649136541490530849577363647","150542201776735231618709653388506394887777837646651406023174643241783006776019388336318216053045300417086929061565868663031237502137150880313922488106751241006715449458736723129545400133450376339156062387859536289694727635468338235084533552501618659272047966040838509286942825414463511175531001410923014751124732748099355476332649458471135027773371541572374016038525336728276024676601778299264/31475618522527975728853391146702172347290819252268551219771201846701658848754300838383637247014705706066050673096278897933831272607774110183488615338021656923433335661890414740664480671162459271850877855521869741833030384682549648626038314686632195158507693321505500888988183270276134667071014075017317692121986144742473139078857816578133693776368882596780120407949076129685719314703426278875","162664351499283182546788129866259011542529017155637405328005084357078048074065548349602626724265307733005745244338982661090506394708170105916177679714664432754153795772811389612700051002336719842784098507498286260450939289109123759859710248621544296008356071415713931721102824434964336667980062728653562369697289761913925215639430496443820411811651/33956433298509232632327667206936379248172049619640091186698677954874297837764235300806836350019565970550533206216590639008637925266405524715041372407701947953283803854153876844320283735281209725651036513491246238622967031979233265136280687995181375582844780830517825595245506321879177965868747546127685256867456319112247572348416655367667187712000","27228583713734183629451808889147559240254570554044667607519238865891084165382075658707675405673276615039702916443152954157535195508033284355580742761569101934821088036084480297442018005972653124248838420021440899368869744141698556359295489470499243402799483082406238128875386939389123336303631993557844565927960009744780823166462314116039469622216263221278402673028225214534859076857413557466368/5675134787340359276387085910732530678163604187009567576895331134521132071092293139167824957253050637085885426100206370974479279292804959049999647539684766632278449357893560561608633329561385765035738071726214510832066885156767060324427330401967034889966727638276371320401053302413136551142103678412692111973028587922399670456670380189570979581674699102934733563330382821732200682163238525390625","1340937726818688387636018677960518622106989311577445614347061615417831160296369500704524022869612973331444242000788110133157689786976834913297544087249593601420972111789552905846168933014570399562460789075871112224533723259660967481288525220689577290386781169316008987012566216235876842757183233207943071523447855623001920854571597886491163165150556/279054368814522483241446594911968519760869180429079780837994812436395792594449929617293503975169489945136244602350941695478861584261665582123038340824700224583170270427163469762789603657025958695551448477050958557681299495041994050951692916032501884523150972841782658389836059236040091605838583126400660344344601879969354053137568588338096589095875","8910951660339249479517731530773509037034977353457185453617569046885132434552771722727442649095007828468878374139001808825741829728375370140505088133244952288239619141544661695065318568074863317054989982620944602245967155400712702259180443238473885690297281525960618905625084639870407113029712510345262279507055197024677292523214467306898573956604928730377318210588837126450942086527893437954864000/1851573255256476362977604759655284263358595254392797078730401113550522214182030016660458780180636930591149034499142464357511158868625309442843792189394292787657774627425816694628839987456477799348874853555586931850788645677998004186437300173080088839930384424797706381282430208961565555953254145002318893188197561315855286173276564036402546798318351229978103276843822345004757661005876638005274037","84997663352987536417038496128111159210386455419431137931308301989414462311135708114322046234708053448098538629166672456703651524480738219822858469100454933583774404032968304328859365484249897913676382909050450855222567147661842184538302991526635974158862033287154321908483007506326807469239745851379559259262425675035790574846229470041596801343087041/17634687575122715507915388096857069366146981156897230620371714518707518105157483283253374797127075689236298114335734874553183291806268149747826050838089931351158483980735336772879045027213982661634865556129548356487722537193914986994283729746578044621115589195066212043187229606921062007047940293972381121200723292297716621231320254309060321476608000","1648849257486312935416274009474520589799750757877252390543329851029437452988499485179026845292068377957697884739052491455807688429630524210823560524122596610276957537756142278585091315141096146341773982302888007751632401090642472506538817998043326415693840862261701364114923327286462650797963969289743571514890723145251583881752876340628073395708716735192690808352188867334842743895738955762067968/341580411902962140529547622267381834425264893226447658723654120920549166416114849731588552578626041597847002946105459812230979900480135423787717825697955152193526724029890829615845314765605770060975538542976523177976182401820926854406945392167140347444433885786340415437006775075196031433365827874254477351374236932624514469241634422312990555534789607377023339236417434574755566856489013828206625","4899626659231633406569362199187192352933567344960498139854460545644210119722856870634652562532083546344965166340063297647520613455037240144734014575196764021102614748218834054157165781057405100578668000290493431869797883155764963238760612333048336953434663867580862692267574574465371615023999531030446250351305046572267686566999209229202587258144318592/1013522377571209303732207048597964555261512342860326827024786500686692475697570284120359840724596444209277948648863014479460188496587721578075151793081823795161404110811480269106846359964436993190293615381593756076515012514100289406862487971220020752628653845345780766244842386136740768474703009091552043945843632199999007070800871588289737701416015625","362903847358088423032098939589019598036593525722040887883164115981767777873860799955715587436566233010543937498922435963385091400670303956612881974450548904906949032005878241638546734597308786514086678561900713741746905742866635779432216761799371793260025549698865319760786921444505323758235164807966277024031605673481480590193724980659448692487108892154809490199414370023696404259691299614147712/74959603173756091922435708504751461448318819548943586676159545028063979695880930926805574951275602951047845904770828900645717477098988124553474616764040938121171776556999069351772286262529729056288451037717198273521810585868307402693261479298923209587143468206907278220909447483738730657438961435587752873879244136801168836767273934997417156543866722171766794171623224855358640156858606843576125","8521348154958613550574095745596657249924328336262127244827955886474742319277424381360677655239017583606851483318951440691757875270001283229585075137091617073509041644097526047127618954293881264113694362598157456878784814696577083997902588926421675843291157049153701100218784481406086810264243143337016042301806376864424632290226377881206765051896745/1757584673254145109614914862134217345456065873908262753169404848658913774363650863904627183104777337461445063704655164325930891269843669860409763569362863600932267319335889540453302785099532688264425988677082044905948179153286276609910158854349711054144968131934713419772852663860893241364433872853338630216232313607969790083448433666334742108176384","1802461420562646993856730082999823508145602238125054717836501201545920604020389361370931345491160549787411668288359013059160331370751496329806488246135100776263777863399096485894306306621852596694700845918608199329091852956315870664531614358379176680326508877329862713333336188556181470928613423972314983964578645688876556351433429494008513812136152576866650152623510296911708111085518974142728903424/371238439252064016214448115231139360835481920731625321084601566992497057371416121407293286027832357816257507287295719261141426130159269433199862002841433235955835172774430690352481806933860390015899973299268361513643524088242973968537595085600335021120523852420135081643310663869327371821064862449426404044951571585406092523478861879148545678639697679215289523234342337347529225543852787599016265125","88795280670112240977945082069219541902481768504536167808816453021962616596410396813316064685579412429940019071114917828928080181638058444302439626425155946562362550070187433083541414569447612195370911498321149367969974762244140788494955146280201020345849385865084095189982291190135293114489407801749533448443222584092575861096946605418438181411489276/18262596223069549313969288693970246663726147886364354584825624311486557881239003216971630599389642752648815377795018130449384513824927138566203714891090017787258920529990523519479383032564209629983810866231367438270859421572641494420831435563580050954867101292568399107965982704216434467243223964964535464624988344342084084237484262612100980519602625","752911409358158070688133336918078236438086521781731735123294741731669530734909563155732092406099003582749182967246236657021875488130304108082404134004381196925042617909108654109138702993903561036987511410396567636331465803949049946947888490287210013788802287247422993384874670368649616782837096233384279817294778916419067404863458318451722971117669642134894906235066332205740872938406767767019265664/154635332883086377656813458754577288834216641577439356891585125701020579768315520324293435008561626926046988056302745604248220408154454267643222328696606367409715369481567213640103076112146615938180089303294709009813772509602954514391675152597458428326644988225555987883250642389550531163153338541870029415077982539614784206119074702022117790679351778993541426110436276530890609137713909149169921875","15286089077439918584953144558775765002061832952090847117286473868694909713791678395221438112006475047633028543501632631679316850512797978594476229228325228403849089079675681042224057234415951253954044235099139983386056610384489202589484570852048157272551098909455253037561994944665563291526597323199530997923272894119350512727802414680772513760081360291/3135161418037836259442831302977219750614726139657718770206960776514822107155928800694375522572523712277389679035632531727155957120566617736817225541673148354829212969778664144907503411589126111888917929495106029890532891919001138770210977012708107496187227751496980000137223047079127096028939624830654227758737339725345681745847598157538483308068864000","17723482381737693269787076798246423310802126092500438681864673375704464394105734049099094818738115345706100191580982712146882034618103161268453808819471603805345990162762722549964406042295355916458624836894291267553138041035528315839108252422478610879301656207772491548742981990469454529537049123948604931661837539943536878260665617524824604291547373872716194154198824107266275716083848262625068958720/3630091565725887087605600771358216927099748013831912080380983545872077197366172619225751217619097657405660172801849926220948413919823038425519006413005998509677472226729295278652284861834178791332630676772284971762683579047508016687969040658592436230062049051143001484384767836353233324570686249824980508520186643477313941054900197268584495128610811273834192099099592687485176400539748616360799518357","39160514032490258389003214587901781721548011632821053230881239001436341012396166857515197251499460842954863342641015306304854226194551189224721257664420778416733889030680295206179109679627522113592373938602737416822981698362363553492610842201005420727750505681358595340127099855823746410663750133019743170700888375554918213182862789028531284364877435896/8009919337434786244380818390213546866794958389603666737562053423775386173149395943310276429895991903753441584557917565343673605019989336264748588735390182130334278887642569515202100870042209261561001627386525182096090194076839370589780431326097965428311786635366819094633651297179987340498215947144870164066409654464551017761658775207392803825996394875","18188388167811476762477659006849121912679763597132233588170406666718758511478154418948855160838212151370453213943784067796172102916618102024199200086478021533171984254799008541948973652219533819511807681148179806051835318645591102296256347927018942348574774821478499092054497390790734798143983945096982240517058861467440217558586822663985584775920517755909444876443211404222400335500608733284461685888/3715278241795087610941547133490827711133909145414878217965273061493740719983191775105550559905283733134189195190321643965858771461560130864714477448011225816210219450040558581571206711791272284197614810026220745160693898421068168630870850392739817340370146186703867097982858560347971281142766235850971837330222970900661653800041795020382847588362774677568059355238174402415384788280852059532958121625","46353430636874284402376008361176880938798775506236714098123916668545331718677407145199311191108199195405139575147933283523305343027297808443653460575141799729554209181454676876263582758919969948546918471128299522715691694855904535448703118221685887195383025133924852224568922999317583667985459047407473419196367812949579858081181660610155317911318937349/9455890179897829052705408931064120820559254220394152447502395298827357144081378513080398823188243663943177539817982481713456798757563952162598464929784370305696420245648035222083207596797327498500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","13607414211126412689435920170832779523235279308039712294681570127241403406455725064605210473923965685858012114332021572088551127762628892611459785625407107300355287623761046438724706918300976102581928643740596336865698485838431972050267114940079353996100620311097561405192365496385584164725035842307146351211183443267583872067352881387294766804298681841402861626441205037637282007810811602289501477350144/2772205947240095684743358245950494400934136973845543049938212403703005150954425087866758842625041409060217562878157900197951382737615822655863548356735553650755342108183641353142157728364469706919993519071329069805875834057743793434164720370026073143626055293058601124362130539040404491770346043977106988100969901297669523170508321703496903672333781306743488573086901583022550356345156457496396749797875","23264350093315690507131500726914401771633259602904894387312742275462601574788485574913195967854009886824436237740789910851843045306673524324611130536719802717912615609109285261163220007241492964833933975789257681755002054890453747803418465119567389315754801791950553304034666399677630030683759466627797123971742061866928213780452325847848901682792886840980/4733430508316851445525799359992627142007028326865116523033957869609125212251136452396410236930025876982265915963089597825393317909648054808274488356887197933393799241941120691826916741647173843634076299630884655997401370400734954098249519111198509015387869462198674657171808841005212058822254513429836457539629035675822719720295352508916898476137111981397","538960934807826161927564251064896730663918579817797131801326848839524373936888402762331254883505157846659830555799909822861853145306547699817986010353774500545305596630924815657016569444824389893996399550343022444937690798126189162954188680257730893424775303801562327757655350002001080811866451425665301674688928515041429654624970707803336800125648742168380676815769457467038849213225206824671025803392/109517448833211208909213522579666376007937648875042608355810687327424621469323788799169718267715808580775296460944943658428295481347915131091297305260674731651980547668762317138753250458639043477453950774629862540017034566407286963562574188172753764978963685535201028286359818524519980885827473904574840285411260037264057197155527809916623487144493019982419606308144576939532055057697567269576800542875","24451481554350251656598350124163983489544445991992661049829014268366250968046589127810466483349378560701491445658725080497078590986743512397927747885285095846398852574219367580068049729894667374214861939897557930527646930793431512683750733092448862551580494245486308114129295467976874843852138144539250235632985676953662288536669286915983261820949386845806781/4962240683851186225340479316959605207278948397833849899236383273145853045488131674290332609876751222112917095096150531825255611911377071887145019702433883343849119017643117746273523770961304609989779231048095665388209125939879595509516490230961558353074751312876252070889983946768175488341370453053495319823381943793679003096504200440997908071027962806272000","166591964685609920525429719961758335887941461052357297159523350448241484106515158310298216150030768812873781356326923214637847449893575074813991141092681107583183275003570804134461187213143832123628701876041315736048451374824101256980832991214945762266748755723551899001458245164317581617731332466039757786839492869211248064662857987111284518155462148044812626055842061283907063784492325693994911811072/33765943466859756347231737285768516240749714264564410814839966011490233598006227246396923594069488496368994857718734549787000213944990695920130591750377483911116845697231074543526982580529937081378303555262933800375576494067959129682770065443667091668104132884375840812635624862495548888467575848428463895756394050252457592540570490061561616914443009224917652440212112452400106121785938739776611328125","142464729519206642943985715465196065680101634264787375740459792619754842396453535646509170066091478069799080172299369994438836484938378991283020978342879057271045033903518255546705211647900945143546293360496661466657600494787228476009216508124736254967761901224547269496682078470378676865981855568197705507111970901389105723589666709580851611656838285777566736/28839643075889294346635430272525349651555039807615358795334663734940126053968249608601725991946342449660829847322517564370606746964714098508298705743689729306507554363954348780144675937510900983622836770223945538844314468550644543502501484521561567788992156632892028591678742014134130878101553633195551605796158103033794695984958987367799607407626319024034625","380457154857422076784416625436182734840012277442496600178664323821064977485271288502806124740204295811759917468598315932331219906040253463960961995849761235911145436552991677050565022181516596464968316292789048809559129516930574340710998611088996508613850407294743457197519091160170604426002924022923388338999324182261954685794522778833029950214443271526469607532589775916381786492089432407550224137344640/76922142291839859196033215395526448408989799722090330866256930898223012427332209054699494033511478050536463051459450844520020426942553107946282832072826069342120835351421637970462054707566481086202287686453371483126873188020538661871147778312986131920021929455276187425940666580158173676284545586944833678819622895550345083175685846944633982680908505900099388037050135210936852210263717185637166725605577","79999800708369666670693340813609265988600461251844239982904928629083975986385235816587497657678297663151298709076884516168798694292862559083730259839524968813932151813233366175091317046758260934357096757322369138747731224414176608247605314668045838769433811781490030635374856042786947109101585097035794969502111354126773165391577217071956928171336060247633607/16154850265413610119312596299635391433380319311682208755390341659152160578366244774029302281068833963848811596545791104919556346810193385001196395489740571188884873246131813864782581356887110499639544662322008824704830818136660544673293865921754569356583698951612797219776290835161780326945625621758204931298948625885081325268123344406261740843197232316416000","26517014004241498798848003208133111307300592620947908933072661812816683085261359696887064436611747292468717739609776825664344064024535028242737616786238200200498291226984541942836459188328346609549239724653950302145388877472274074665166631509490297630344351573245265440164082334092997307729007429218385933622623935704482371360985836659823269511115937443161532987660855490906546130131716829909388620539153152/5348257529530073524280989257577050878033239486885664777340947102417077875628238501791711336803418503616042922880218860266611595594400020206192599559925169589023339295256084579966533260861249529670141854632965231468533448709363477120437277477668173149958267956654411822360053335695956270719680086524322530514249891157439878407417971839744392044064720476417844056346174795601710447583861127956455406902139625","71197348290771978405602732839537012310626009318133570890482364371056186523989330157966045289127980687764218363064941391483781008265266963537623770685390148810455244349859354857421474277963009857011653865476081389968122418691934354122230780300833008753686234433642072919923583176333668289998661499146617277981691372057042930131717336250309680764289256080895092/14342680993892886303954853579883363225921109635079605392320944523109187641283117181461662846411912306480691901515655220490850586434947504504317080144378185989596578890875561336496479576651516902048606328604696610314441229321219627021610788398730173161473456954861916116391687748151443335513249810808309201830214153565966339609616397865465842187404632568359375","342401018754023891059352629509715357053454506037284788725127073168445189422181540408896452651232759821766616850264122591225331120588918865882061344322996688880669665450231982002597398732201789017495427566260651180470635467002453249479483900268320570004293679361696197905823690145326531180324429318916092471863347575533714871355651558610515931373080997536792242278529575700808878786732127630024064418468916608/68894647682461956089382461406499759613691148650738957016015844830333168307020284281532026442272618372290646283794122772122665531108484704223311663270836645399554940741928358317884620420886609705267248656765357348477857852684140561714900614303731786621656041881975328169543884661780531057279582784036689401206706069028229798913082362331334839997133771880514515972024899408556517159759907883793675672065360125","190286571838805495686895463752492174798162827967490343625540320679760700551286395956241059969689020885714190883323266375067607282890063444652926151862650426323339187596278760962390404656342309737428214493422028545912504503974763216230927196187743439226243880933947417760147785405444976177822143722569696182520826218120595298059020305548681823408268556482981325/38242608291912408815838081993045123864617058390583394828737640036167893859507494091864963383596867701436244007905770284939991912884465101575490548813894148831966132970730263562113961685364216989999844961688441914455435934703797359360780356482629495214859917249465567846934284121032247250332634283689409883499295469118485912489058982596725212975311140618764288","15345379701153714436938289567639102307887273898834051456693981514956329731572600026866162286097662958712922836383881840211072389867463987895894067288699955858337488812343674818565432780224654423872618380928462939482247900055572079914753652915184313685270722583926261499687728814560680092231526501970431280783177357735398580700300402036873780385926225005561766822479878280891130232036389707452005183370152749056/3080426623087819678602049171756961824196425548529619576972793653585089380165862889092832375934535464160425580449193072125955685099151500755278763306599307218302635233595329082702148677300945556130106197481236122437978375963261172524503625593066102601042060541617791008722569799735202779005407381267021641545644264334109052258081225159748043792288699674153722046659880085850980843460715080965607434114275256125","36443601662144279337033484452272105547257065463167427418525882851507989449375452076227652634440476502702584889057376829320548464677623038648843251719168810701744338735202853412651160681259533015293997501525430222870696235141468274274064390273214484922080219643095978640300874086585386991338440415203863901714217818222666715642467237183267303214471854472286478344/7307237990148312451155090506264642657872224684879860008436735430879314349554023096366846856470375025555139219961666754780864835035902856314981482268319886395881809659368275720375576152008289949085453326722156553603358879420820012964006978808113307340321824660484441618487292138631579616351777191144073820686595597986548374588839763719082323114663844043046087375","1575294930860663922843149113097927168024893739962464327016763741314068438447271326302129681931564068796631337571133444163024224071270063174829664848259482066723104251718808936762938249028582992557822551950212098797718627418782376027133576209718376784834456568694813577764300716139817031545408608110880973380162736536313173329973171844528083756524804574267826691156368696436273087171467254161930265910972517504/315498546654512047637461608750018349421492986465373840347519942494904200733840189483934245529561231604050629653992944140351106887747105945984325466452136415067807666316202346895657914393512001212656936450425268507235863153258769360296536050028695266363553141327896064944506216017933135251875087069031098099192325817395958019524956320840925176589616439477134480262100237057953933117460110224783420562744140625","7692057599553133417225997786980128299372439542315125030077404519679450372805989755158000864378924877036225189784045171045139667691524763609840822628706422918926410377185494048355128046783294954373197082851501927410350313585640237550107070936498164597231431242858771457898152684298047446530220873884022213114819556822050178579707210264243087257050468000092842761/1538814487241112760739561704846381585063002784795057066438330325566843108114787083741788078680861495340026117682606689156065008672344707615420501964123121620401073675430690541617930520947170306763541251152854304975131871537939618684186766168376514664494488691311397307418298556185724993104760692216619178358268934740746932420562664234738576394742559349407744000","15190836470550557926140012263310230378455340797095100474720776113765300081463960235506950799869073894127884189857505951314428810423734978025409205413789025720642609035117121385453856877706229778165533034683130064865256448444765902482146676668197546098809055341050873494446231793312407516463576380102073171090898973046611572020564659042146465345334273595086941562425006763960197801018796906114925005810069684480/3035556598829526968124942916297025416522606357010637652635799096498208643970273828496655227572100159414352020909846298817521082538898702393916708804775798552206401718323929157863173504795127180177622667376867235806208021329981136637175570409791442328468473111768140746895005561471574356889047981458002257872092408771959478275534098789982899056118498417649167444480913552548249005268380838457505944462494874581","2923754549090941424546974281011770689534961442264350984393235983189168024079617848190236639328676436485460311093391982825027512234467853098757486086492333410753919927528867817406389678461354257841007722472106464785557179844602277350411593959136520732862935740433163383885526249897183805981219416420390137516812715245569037561966929572448247077578419534651990827044/583599691615378545100950777601104007812792435102945248411439102112424251478512952087517463400054567832353967731887062349496616445419782499817548928078665212077449420216892583997505908858360011413290038645573504472422610780073975450391707084016931661068694024023083417126286468909117254531307085545768412513447197205482285022417611018126886491416133665625891075125","441922815213568908489589193556560586318864326425397702047965372289295962228254658331201274291697626694859414786292266008476137667843874780506886929181835469302142365772763129838217316953835831059616268288399119642314758261677639945004547833810080700127847214666763863338091523753898362699222880772298183760217731228628442782431573977490761665091005756534420789258276075174436091798475838370152192077494553263232/88113527373573049332749294663402406454524640221866407165839162576979477138694653404281889227416977618913249275712917582743426231744980461918772793673202077716234026090308791893409200158969108910565467273725064769890443408324386897017825489615600787634985397885230455168591240328585041836771921929567914891379235573982442311269392541694564675053636078990836491104116280492254795616055818375774141667319774630875","91197133767962483852278456285591810579974783077874307589555559715577599604626819245000672929518645004771085106770784762994476973842713035791487204122653245797126906189270204029735872508462106527240320932458036231707311992868347221176460407003487373754014365881209649632547685657666691589606571865740595829983849941049450471212387808617247938941417000965198123059467/18163679611214677813643455199979098261849405189805364986036911945012016248297645596270602508015864371788974684317239728239847888960155365342460843559658233069613218442910226128113196984801126248862273503232000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","733396724434554481470656964167233690851279923085197144879644750437402627936723531635898542414136943003236478432848965516925891956615111678444586384493883113385335463639674699443808084827715994137410743992130712903997815471369201406683862985677774155704267039224546352414417632475628136460919900347977754644214725932476856018335195927604771408949980634142255497812566866795799230501026066145434755838336990365184/145912495644159810313026420025053989609942265686388630266226856650796088768164358961644113076809511566125145395699271530802891523741636707532676065833327082092521989958971154798465784847092870457944857590623097781956884297103961713362268264159015928554707158239398721416218953003215109202771651993622244788505649098445109438104466256408060944298437033058380804126574878377874459371251056800895394904459469832875","167606423853658713615749101123336326908381619586838606922565378505211386185130407423587264776519589295420758009764678759213587906216543160801059029133457062067529468464636376639307690657945597847080706144898920305379653754920571797771178341550808041652360635584401789901525709166172283390177673009483341826911179861584213314395893323035527116283758445038413646757280/33310364848744488727470761889861069993071965180756187311178124887286133554324042422503263994717993129539448310743598138364172889305532401505890384806078790034557049074169245078416704866867380089103064821732673967120808611636618526737138435792818828990403374766228037003927569643972203993263329403469747342204808360947840103843317533210523853631711601450617095736473","22466735478643771803624909352181817912387732117378538284107485621001246177152644141853604633676939694208131243081227668237716194316732125445041260568403752325416203858329469477774720998849334961751541191761521224644520742691981372782009394826739249604257098248751626957528543558542443122470657230835176462612530464044652140581367666271771882198747182114685116336512604038833327707163107207664705120728068987996560512/4460342260599110071819142535903990817893424192972341872394014748315090430999224107274777695306032783105944721337053156074851240201179902835353097683269298594190456286888326067932777720561181760369783486872666974623910515795208353605697065447942804414120030678603538761538385793829787734830129764152263691296719726909633580318897787729004972323599773548689272008712427926734258913271101899780538635213826239542884125","1972862002066252798837977155272535342727415329632252213508267781390870646909686724955861608046325765650407340102472833428905279473185818898693854344138403744757857928883601637909604082588338869612221777263582365745419719805587946558326048087138197694016224613118304623864709183681172362693106460535117459192992832969130895829916210933710820035479169562970982784580861/391262854245936198649509275719624152305206807261382621390946060636032376057385723427601113233050260359684153963520782285097664628279596618521963444574543409076428660874564026651742234728997339844161514273669735686516761239076529088145208958938384732800586298943281728435207452253170935715239392534815683367114290676180839217919539381651841151674859715992309727232000","25408691426286653276004556426513401767718328640048945917745783225459709487487356095164164652218100925888847689099153320777389381851598236046402124684511968385325107497047025485302333503075085562533472482645023963717347867696861885363417595298751490212495932766872748125111115039311507374363000062513977436921772096443948159289707996749061007112458126301618769295162649600673247799961118662602756889448152517364992/5033870770817104909025512331238419776407331281944565644457345507262881100618908405924951559853352841154730802006750688581603270849880756026262217651685813584900300357685874044482329601894134443542753690048962260914642678445058891387041919581376195543193199307524572671344323361282633828144708683536721118910549933336800461248338059209853766305058943888965279863852107507075916981165164543199352920055389404296875","616565940481577765011174617619124841631603944267256178093555235591208387588894068005162766513720546626399308168923904625210748051788652328072241494243040185611373035059619136712559505023703153194815611268503291295059648269772663939137446253437248541496631852986499688052678961495116210133458596866684413931188348798244969797973846568160999564540652111599082181871436/122025682149627484528651507368051367620578469392233875493556828623437869650284356703295836998178256875766319508797903923638967073687991229708051285605187358616531926112736402511567721889845693991963610192161413692928378708223712791930113386840109729368772998347036090902364801014045328348830748307179590755723160142468563977011700764517880467116766150322736003147125","979882056834583241477188686550561625289337025747787132773853690143359657519481397575561812727394470125172272246774578404543257210124412718725081536309818383310896102958167337333430555168671327992395916735022711297435263157670501117734412587691271084981140167017421900852550822579410636184333142944411060788723653596377015359036101170054828623669169047118551010102258802465554033173968468183492058271365801755986560/193732066620504775981759812703028757608600125742477178751189607602983198559778039141192492589734277739017909889924488699372940787977794555519474807920198944109549023547259912324279741006975129518191081373554817584214941629021088206977532599055014150433581544599721903881284581257812850697423350805715586436114842183295730680490110793225514602133304729484547181740290534056445482186430729398701311563285494964645419","1138059441890428903336718712159907364975959482163004276901676063186939296217569849990951930955270849692775077813359573394435924934540269310629731801376134549169322946310756738187834128956671195358413024062230774111935109203207768898525882417078119314003162592087920755572050993355843681931139257303484526223461840939880759908449181135029327442039666513325916729112853/224777393704985303260433439401503507705148576727364388720387174977154204629336985298082893443205223017966145098064861566754244624732671470935725326043491911142467178027013112527668183783450932992534517827863293825061296257420183669383719043873666284378647952385401303733274771042385666436214517205678674213118374889121542369996042313879258622144464565403138392064000","614262617634904509410555695398092190166323289787703954329113412647342230855826568873946233136303566178604275296873234926652080462259552775254755109931312516616838091852915397846984381183732773411263828600108443070778861986849272794442105107285234729077818614332155890946804257724112143631642663084660012362691100872465148864413343598067567142977134846266425075195546265101720326272502009234689388355365794889444257557504/121200854655310345878069155190734381476914416893031941761756379148622591310152793328910334357724762079139509813381997287954319983165971628429295803162563856219211627796200599196263868781937234015821367575512548522790158101892507996780675863234181700253545912643548466256938936835469646114659598727592390628209362096738343417775009361678599075671154405137663077798419897932404104579113056038271753988669813988076515476125","106893445531995430131837569895703697604978445859412739331042151546083234373443601923983714252801103551874986033841637079479794895452077803182698291822629713500021995241940133037200268381793282318691568234728329378829301282121562652452936297422136961147432559766896143081059518238234777055931999714973999553456547746825617168005650221542417216291412324174772893635832/21070287546583154895102927029203125577385528350171457634203261197137238923923245382493868134869009844094435068284335909266152042903157700510534904847257436666980671067329084409346149729385625108233234542133838924281113454526471855573271066865534480974484196644173270141056470857666632902827625475719738076524047736123182255306429677688129231682978570461273193359375","1112742798776748551928744983308584493817112400536084744850969025063360679785378789764875076529575583792571198510306186417773101346425704969671256564494135750783642910394213727189639661184379341961737135764570942961692159177189753139209638929302928699705042832922774012622017270172331722295881412111812933593370743210214549038212395941675257558442878012136484052827439007483777859391215222647499741572327725689840850048/219121905514652575155579185322367175400669386131891843382447432851122462422992147756333729893028362013318264155489537138133372703295804002840920402482110260590055749843170064921843460498824128274420925357547023876488939786863662801268798987685503391058250902634999352652063668663245829496836853509616873246554292796823779397317819134891873583857621623143253788854530146303641400986028503534408870194989478421253057625","983995170259637497940121707857673268620603982844439610076334749792119502557380361624096960070148627663305171311646851566811683351232268240169848810658089698606409195744471343416197434926513684882439596141368794175162315633192028977211909698595778839497844847281262559899914504080092844816319298286511436690429175757804604673752838786852277255064434365401871903307643705/193579499709739777577893639665643417521924510242119561765932078835121983190401762561436208758210519231103767232899529457440602166918701550386152070813526760823513884391055054076485295945972185402977095815609448651316824455250005505410192101148149284756928250258632031981439345164037318129987999546683113483700660879431801728391911161900686707231543216283304182063038464","30691013076836380319652884848585431917439358375118437035944950498156836885409110087616602043242747413728866747975631727566613593257623099549583001362246649928075859944695060947434885707102684568632559339383409378997568182445019183928058902445738702610436187907199482604867148445903921474846103586253320950728989228898324829144701782792767763794895137313050381112872972806712570559942583906619373159053654481250809168128/6031936190594376585238407905469035598668211679521553144958053099463931217856780171872253258738635531385711702176347575597387389685526098889278278029314982721284691198967204664771178761416891317672705719303088746953644978471289001577698554025410820041497108311270431130911021653860874238212040640737171103823631718483572464361276703378587106311153455557896527384426327053165214814954154328483257657424873929502112904625","33633002641218571027682690377239300567277297301791434890431645909447040830457253186262970747405514897340315490970846553666201190386457221846694126637998462873786334837901001833771510353365825087187582807843940479192544772559118293851131234910638705258664901225494129023244916125545283621607920983287799648992632814461828998517949449887522866259724675318233522060729654796/6603800575190864815125307817934327053530311915572323544225173935830559756077637251538096164499112411672913910767032482188570876526606118068929913515497400397562722669603861813453418621246538114872330536044519242663538662076583511078523573320035084744399535581216815034837553165853576616422592790103728141443697362408727056813977234078214386771115586436985105038873998875","9090550743395453237608373761422705922989356346696677314277463900103283296889488490217663400349361962695279888433677856471792856853109469433355422802663947305503479561493033851081993247556828544308258821557994512133708656174864544457143793106703578476914924328960109390350040954158797845288786321215010324565010420734044059968931558099077932776525974187717655105951506223649947806568984848883258144616897526257038550656/1783219994432430133950472014582130883873515063182143523712063859964133099770763874744121895885645346884371273930727450069430704145915261127061538288702855011220545530326588799412076879985026006593893648911637986337776174555198865379578424838210466703683642106934154603710587408512357351455891557594977191641529451749437270208258072920514602243985184744955476557012910446023911358037761232253615162335336208343505859375","396226087129511787616470716244996965529391571019620342657409150252952330537366537352182763477820160355931003174946109480036915624974500187179367618457008802667089004678925595775249725629495848146669773574395699032785024522882892752987825063933573399691764866816284097232869198405981830106568826923407996367321353003569052419999880089180418759265274331299787468134974811/77651132902382550540201641628906752945078964002822585000619340261128555048628863996784740469908853602590877726845475670110127527874088625214912598995012971630852593597027649154487264595100300180591016581254965295280089902497540043916128232871685159131211213497239568483141031137909208031392464815187505714066235868748950184065923236670418822911614780061752905170944000","1288523130900767412477856952035690867153496584747510253984686336382980221603917538996138294311274357713893956725672062832264871415025750136690143411884111580335458539824573239771267043414225271729141508235839982033182605445173050590151912297720800168687369852280323356691345317649445843078291369394324862039143247087442309135074453265658730028145500871559458519282433012494054724678302957276371418936282902434203225600/252284450515080370603949213084529993395050575951188044032908270470514999880554862449223347761507020354321422785760279154913310488296485989979706208254206974075438570521939826124860483842758137231373182496438568202110337751291106165654945352183167578675508602832478752400011567482434301614269579368882858973850914513870297071866544875650189106576672289734326492492059816669288907018095832842249738081022227281715919357","559506782175368748187145067236900803925823792088293851453005882621173124590368101213652371965740365119375069053747415415684193092607523211636912074219215053809881814859129515591479780669511533619258835199715146655774919418434080807837587396115955105126806762961292429904380132116986984435528307613054828929294602185927322238461491059740342387266084431988727321711184308176/109446188216864405154936682374609448082436347600301765944233278303643744736544109262794383069197271409398615846380701459882784547857821831816863216080069944818453908760476475874319791512782445408136169878207358663250499628002971644430164185578966399908622640732411885568638054229180673755690889471388585521113862492432946110902070139679164884208988489955874131206343597375","365842109776085256207829452385781129402656684569922320812625438296958174120084800064669048017227033185969596458778213306152397766619692644694641677223213185977626940193107608138827771259334379895020377700759789774994800008933137569543592829220611543060189849601828342989023692876182148818363689293009174358168826340010491728715549904988196347316703985894355217235339548078187164176255405596310602921647203428200269666176/71497266937783826306774367225149833789788300609530680399994804704196212252148324552193149332755057982662844988588678159610516634667597707204818296457616315484973288944637139939912166034691155272078609876888919170894915224022982785138928008133003473320018151370486895637936102520353951511525996197267572355782608352075229547764732602557133494648237258900273354364050662921889937355682486287799239363976556848320046933875","59378684894605773397070783936113244261297966863668546282887298999811950599772732377979382620766180662159460666220894896896564357533604962977968843474062092083279165837424210591042655271577974272394203253875965589611493384384257117088518521598379301169916060951350650621757237206805037261878212424267780312614942173870651684587166691539909068452932891649554575072205080763/11593916877920131260484148322810317629326850763057953025674154928920977965095141485536566217873796019006709247938019404840440511433467040918770165456925609124166970862430104329357419669175323763143377917913760028500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","440706629842402075137926797732405268015915199334341565218443748798479563505125605478061664327658137598204192554352688830679475840386882350034150077506804799859586772904929402683276898098601814091430598259347980573084686932949502809068565420937301632494387691284902026088950093888426872222813857928092871267130505744095697172494119689779474840037266295586359244899477781345249657455186847452249040895151288114085352974933708544/85971876318334010542313048056773419567285701852816309711738644074302467763075671531248793080425349570584102078764464196653843973936119037322000695949209283327606280423406302517302874806092835694196353778161663338667091195199032831587897410329509487165187753418615356836636352319310103639079123698118997500068644500893282438137614420288839230827096109835206605385673197123994357393257304049093683934224826006704198171592304125","13220371178312284248107863849287558696210741535280184003301555188086761767176560823174196915070378763091889333203635784037294769747641959860810039816533609140662043493962707445564057197150603226797446933532133956054671103942520142568674339411250001585991743608723150284270101326419464088290151483823061613403673956918458456165552482913079283537536214967294211244361353060/2576683013797055224377707713704899315377379548630511095136568220145808780162671473907260623503552385384482723173913562423316997528913651044277418227616447815609873991028073011738113927961824632868956802271260292075825561646156680740323686126811928372672670917332613490241615850953660246271541592056143611581223295045062157404996958100136358649109693659623847024011265147","1538372578072246705266078247950089219881197139399081643650271348770110178217959856819170325400476655944115553238940541695152110949081675985299189913515975242840473616169775880272489805123124548256666658584129873597192213080038937409046114908719298170078476325423466734429870048697383304265342125425087105698152643145531760853127801123272389134514333752173173161562273487752064850461823726948588221913540799816489566883798912/299566102446745552813544808169323270315327122249327394279467999308669285416179486075255023523726449428151807672528368606071047812907935426406886253284580296349349558797128593446316786243666290649442956134448480598303527795996222703837663605600624271807461605295956674925277658331760000117761013381199880905748188151556184620779667670278558839116983636972680749836497346863752662521197700717702790359162307617024566689271625","281696937222363685333688097915539146272117417024070728031063821781398985795813333650547982965341298894634762289669256129805545549280355643122501181852136332529515756074502902204877664395456278205770206019663082511098956468724829475220996427130295010430751942126263620206886404244432409164651524408198286831329682605959881993845189585640874220032515465014097345759490750307207/54806274927935495596891312029173862473687610099325998583092091915101265393157631244775387832621032230434007486602816972765210205596482942091518459849775458089575743699797096697542306049628939919466378189656065461708686421130956996965004776108499273871055615413566043083634090083096967567965373203683231171594922347812966905149873265654962896456451681332216735396249206784000","228506238533410805238253122961471637501498406104430046727793420497895852412513560203475440156216063574654372726194215013407325207763369075250819386897086702757125418327084312933061738392406321003231853349865003322697360659712771167066453430309997639548320673279964210730701373707765051246595806673865646607841876463608039111252607452843372970797479959213447237540830563469297144446069689149549515457318899981763489792/44418759813188470246596822974281932219088697005123285598909329328419879212164564561558656547678211265529803086702843380128457744445765859393426675396393053094588240457569380155526179040891009717323059641035189017918495485630657360525410506453554255734005459614858972904374739673834145083512160883402151636664208253116362089211658645312778404886460203600762546810897889629330022309705583438699250109493732452392578125","2396110297187570506257836426251930521245117960980667897194680897478996322590925380310917400763581787981992131769075961259393685331523600287377841990678117113566991100720996059187144934569703045966210306282348527729533806882408323961336166190162075154579344185244957673138372347997134388801085788353482276257401005734929059700346687783400772331280644647089520646562669857652648/465370154262863030800729180763091967573522779260407615567563274096037297593764955820626213827962697601334935773802201919483657310282236100250543992334865461800976838791035335861420892967699843608855185710753433852279737724446294443337363478679601049432404435672469098850676302728116369979460222148206944323730586138087862719386327396334468302608499235112520318322763857676375","1188272888075247520453568790651819187486389546755745961952033150576243575862120569399808467067800830890874391487822723879717525264875722720416173276963170672622214121308038530968291758445510982186014289745026439477197148445087614813262170975056866881909056450023324743409114115141145340480846088869807540798073417035168139476153897066325127540609756310068558610112731607522096096821938163134080426356894899245575410494080/230586762395914863625709048789913840511134004337945700368117795195769576856434588144361459740833007125516905017415184787078710001969815416281381427387949263792200577791644278234661952852149216540491852757174842146376788280677956350901082838474705227642420261641783722891948710833898248566893322144435457967452449965772543077421407816225704952270697016152452032506898311260979594550143344971416786595888053149375287120733","1072184299258468249004114536023934869518152618369895613271618698908405514630154819453979477077738526673716264830106745031385951736108376866253955319711026042389282009348594845497252059906901748860111986811345742998968284077119165082435598381810306691078037018432766116865792677955520465319184311529667642995217214507658693259694586107847099911341219913576038605872218680562047/207882129535607118520818565811162643811811563516006836924341123976848022970024793004700710992938987476728640943834012473687892481059618823520721737479364352887178017866425027953255856440099446112508663603319745066750522936408781591578321031173620445865113295407603090322283539974563690157418931060565698315406021569491751612761888641141446406531645379264720684248398299136000","158094023904374464057702010126993231151433474361820266584020400101533651587072432728050776506672527718975042616651177034635188178967462982926261516748842073587981953038445977514446838733557926696939591069712397947055261777416704028506441173540338327591514650398349069348381309688677335132100441905603664282735310299686268721634369502296867409514777359935022301425165750780988231639828675424239931533849896744198012747670272/30626384366513923671063955469537776291182594080083494737341604579575446319190916924682809546024369330706012653799783122328775875399363759308193432327358837772825609356553955350401725689682838701996446404559005896479618311357573203081153855961484398360670837599853294627153740224543175497655414585918231215639906924313779933211774291565425360415684556655021031131349317390382320286092667852173815259422737956767922154798375","12216278924286401897470540169822542417611356797676160128176706721343511598951866107858729405615631246003458062949723290192242594609994613705183460814797527214549142043573863947658832694800184691222426521703728394203722420336773310908687071670107794543022567943478843065246011544888390757810534211554666736239506503613750756246364621509359804902243487113673014588325806249988332/2364584127734680580481708368927921125934330000162935118371174269642831409084634375654239735054363928748162229294829526339927907778510530444646754603322373712788147193691037688552857183116332292048731726305451516954679277320777955342295564000586923227775208580772868590742136150431152495718132142742153643081187691849828217592954519485869135930755646768375299870967864990234375","578939195017447864385837341975558679292903716580114421030538728778491606282153588930983966100514147976321305616196463174070345884292672842497715966933722088536619333912687108737657068701352918582656105418491672377271304970407730786932913490869797471081081431072836814581099271832696990064828717287258860166842791984158634684078346453202928137987930328826212011774670396356151265781053547412633310327737900786639842674288716416/111966291649651600701875186827360807558960817589719096407887999108024557254221008849510152469119211567152616745769256123968832250104006560061907741567034087109512483357851919402017950812795426393415409198268246337542639470834168040295134130657073201020340432236723824670803498949071870597039309004562024033656488150406105175401372709011082725359382691270659245312133919518760328422827067578306005644825927050994860723405473375","8041514821545833865350873212853873042112343327573364523948780030849543753072688526717886590013028227714585965095216381829914996539132359247488639692828639170075726301411777307168737667077730792892326979446426349813642680537699905651125068091362135055902152994216233622733424128982011248923051410141033146604688083721413402395290842738021365861670415833356403364696759583009635/1553937833499559104910551811592138833189892464446761247731330672284191313590708439680460540329836344767557599746234213006493842842879398684745864919973051635127080738612248150108793397855113122368507483429209127035263504194847798809612278864438287815470711036548695032421148125849669175729331459149833945183228413961985381338162155596008680906676498435954178226973272371625984","12059659399309169167301353842123191409306995788633965680414620302285606896146667751472818541537183787935352700725982053536032930866708413010971856856768384974849695774437178790890015242323873769697407411558706626105140596160049735605389301414460825674631122462760014451298494875244754354054447697502521388381253293175367558014453865905104467382184997528879171136492277222127399012368677604910497789360212571238146627048080568400384/2328494054002703067219004484782931471919751585969487160602269605916676223315055450845942763690581877771159615428854802721943114463834992106300185328876910271612375509166975628540839858771078495267566008071532876816826751069408153323840515037497664871689085370699991860738368371510578076683395101062439493831773194498579620513073693022191702398601471237166387045790480861932005012807234071429628725981935147069738988682858417182625","683009426705008850682549700382901603742691705123356866338951397347368059105140826655486518416578697931244347554322654428162554903861783227680935341690740579867651545205562690172425016836559678937794312287639193745517811234257062356826622207475918293015140472942579713388671782202262396642735640315948612572908444501108579457520714632371056288874351015666995549139003946314085696/131769214246522869780429817236150406548549044658474416909806179734873399109656411633488099249198882165279745627038984487365589625562901914030850178330133080409420340227179447548044572594184601425691821617928130423410997853384425373999967759499571890326740433081063424903098252502791477854302204200941376983295622430177445507316706609802292121282957519571162158620971952084486375","1418116259749091420309271913909337143756589314597557128553117870573928055109322864794169592355058370891251425125187770724828108988587888087023982451205475980371440423992838481547236638456717520835668859093413956339261802305597694403381021863258753441889536361061407579332570493634254542013337999844407181346815549594836374497512447969751514466481466717590255369810506813543577735080228718660747940956248427356785784199073569408/273368882980516556922532339653303822104510203916024760371844491705599093435133738774975538364241630079468712981056336655766117378160822393876348755370711942273876284944422610974149712212944211513462921649872232656449940987552227525504529710373144228818606127541937831103642415534318303187393593236209298242574677293352798419428712873685798636474667204083938875672934235816396371477146089168375198141802684403955936431884765625","546411077581845999248238069684194831621691193366466972898628141511422317954477211865167402284211971296286346492698354214043840080181702652132835681239302798339667835439189275457116051279366194551632712819028177402221815140045210690908631767786711675029194359998826252332434573121740830827417293557234891406021102083555472155479148332697839972702631641910213821827820374586459319/105246945889799140338072754365901705544530661781295362563214285953881890233987516230568663143342952799036341701952267011236663118111226623815975847494372076420199418712941018288738590264475520229651370015377608638075866459684692488079223686296541020897904588347083045723167762682959422858996673894180805702299907478685374065593161226849447131100462022089783265346597553176576000","2398330640958841474772606439916070050977544535580605737383995160447105736276950196885906408317628083110923322157113892928963237845914017845444295040924101784423382681801754191301860383927129006953354739240926643562987838836997453985855576402628166875869041032631651591871962852884189548538272285387092843044669499688035134181859376665409767886188304314888753894905317929877238322615838524354191263502347881033855441181420399360/461588070868590122892265681879734295007029130965626060552783760068897000195207878227714842617470320231527222074701444349530952699708435668339712860464533455345665068841333232359698449088497137068713309811942968433868609329301082001752617420002377892756821532220676085014874112083615054550278903960627185675459015343606391094523511117705747842645927349130302549554534056269331809016770715819934970200483161548527932617036185253","6041015879424725383006424536130409209607854044642113747266098198777011981328765528361630516108680392500990580908509403483891763219659726090675140672989657743882183951954294745396417829943469201306594018454995862321821016087416840247422350906412007336103086620396467456181771583200365740253389107968122850063607085957109965406634738740996318415514360956028575560979203447735121436/1161752799109428422288020947061281540989708937450568100764830251908850596717606701047413407636907934320789870175907792017513896999208892282137299070761467096211814586909598705615312819596495636017728313513520193786266452836805291464826226833593878504804389728477191170027729963773716267868284479768397603444919008915279522376004326398403851684761808785381609370767169521034383625","13240077436443988749179508462267267187169441948722358165090554769250505713747934643200804819418670147225695324432684266924694524337920816452346599774452681831320005286326986675907899608537972384924882996757503264622991355949039882526389342174307168805166215838138277557052303430492669193939212362638263582899713198716541723383138016564027766560215944409353427176135895982596327685665844815618402881202645610620284792793420780517248/2544223084468158291883698813309541801455311468982232546872485444308211415529998472787377800559884210837213042932180479090277285630234238711851480232520137856848809986631784843528381778520727465146661792797924458540957133423665746229799675650290296217658444899605236550972043549278128087645211909479009099766619355677984218929672461506691980442071860591767266913041147587815452007726513853820116629482732060593116624596368806566625","1953999166296955830935495158735359200362904181792947794529339487489730042568305997099959302322956898299616194932283060554261566410988618045107398092345476532371402134206635235570281738377188438407703089325315446371127042537576093536896282955524842632708645655481028161471313608974238110718242273935956977555610147714316158486553633871312187084618154014921190595222799283957140353/375191165084882521037046014569185165885459082629136124177286500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"];if(t[e])return Ue.quick.apply(null,t[e].split("/"));e=new Ue(e);for(var n=new Ue(0),r=e.subtract(new Ue(1)),i=e.add(new Ue(1)),s=0;s<80;s++){var a=new Ue(2*s+1),o=Pe.bigpow(r.divide(i),a);o=a.clone().invert().multiply(o),n=n.add(o)}return n.multiply(new Ue(2))},factorial:function(e){var t=e%1==0;if(t&&e<0)return NaN;if(!t)return Pe.gamma(e+1);for(var n=1,r=2;r<=e;r++)n*=r;return n},dfactorial:function(e){if($(e)){var t=e%2==0,n=t?e/2:(e+1)/2,r=new Ue(1);if(t)for(var i=1;i<=n;i++)r=r.multiply(new Ue(2).multiply(new Ue(i)));else for(i=1;i<=n;i++)r=r.multiply(new Ue(2).multiply(new Ue(i)).subtract(new Ue(1)))}else r=Math.pow(2,(1+2*e-Math.cos(Math.PI*e))/4)*Math.pow(Math.PI,(Math.cos(Math.PI*e)-1)/4)*Pe.gamma(1+e/2);return r},GCD:function(){for(var e=d([].slice.call(arguments).map((function(e){return Math.abs(e)}))).sort(),t=Math.abs(e.shift()),n=e.length;0<n--;)for(var r=Math.abs(e.shift());;){if(0==(t%=r)){t=r;break}if(0==(r%=t))break}return t},QGCD:function(){for(var e=[].slice.call(arguments),t=e[0],n=1;n<e.length;n++){var r=e[n],i=t.isNegative()&&r.isNegative()?-1:1;t=r.gcd(t),i<0&&t.negate()}return t},LCM:function(e,t){return e*t/Pe.GCD(e,t)},pow:function(e,t){return e<0&&Math.abs(t)<1?1/t%2==0?NaN:-Math.pow(Math.abs(e),t):Math.pow(e,t)},factor:function(e){e=Number(e);var t=Math.sign(e);e=Math.abs(e);var n,r=Pe.ifactor(e),i=new ze;for(n in i.symbols={},i.group=S,r){var s=new ze(1);s.group=y,s.value=n,s.power=new ze(r[n]),i.symbols[n]=s}return i.updateHash(),1===e&&(i=new ze(e)),t<0&&i.negate(),i},sfactor:function(e,t){t=t||{};var n=Math.floor(Math.sqrt(e));s[s.length-1]<n&&e<1e6&&g(n);for(var r=s.length,i=0;i<r;i++)for(var a=s[i];e%a==0;)e/=a,t[a]=(t[a]||0)+1;return 1<e&&(t[e]=1),t},ifactor:function(e){var t=new n(e);if("0"===(e=String(e)))return{0:1};var r=(e=new n(e)).sign?-1:1;e=e.abs();var i={};if(e.lt("65536"))i=Pe.sfactor(e,i);else{var s=function(e){e.isPrime()?i[e]=(i[e]||0)+1:i=Pe.sfactor(e,i)};try{for(var a=0;!e.abs().equals(1);){if(e.isPrime()){s(e);break}var o=function t(r){for(var i=new n(r),s=2,o=new n(r),l=new n(1);l.equals(1);){for(var u=0;u<=s&&l.equals(1);u++){if(a++>1e3)throw new Error("stopping");o=o.pow(2).add(1).mod(e),l=n.gcd(o.minus(i).abs(),e)}s*=2,i=o}return l.equals(e)?t(r+1):l}(2);s(o),e=e.divide(o)}}catch(r){i={},s(t)}}return-1==r&&(r=f(te(i)),i["-"+r]=i[r],delete i[r]),i},boxfactor:function(e,t){t=t||200;for(var n,r,i=Math.floor(5/12*e),s=0,a=!1;n=Math.floor(e/i),0!=(r=e%i);){if(a)return[e,1];i=Math.max(r,i-r),a=t<++s}return[n,i,s]},fib:function(e){var t=Math.sign(e);e=Math.abs(e),t=ae(e)?t:Math.abs(t);for(var n=0,r=1,i=1,s=2;s<=e;s++)i=n+r,n=r,r=i;return i*t},mod:function(e,t){return e%t},integer_part:function(e){return Math.sign(e)*Math.floor(Math.abs(e))},simpson:function(e,t,n,r){function i(e,t,n){var r=e(t);return isNaN(r)?e(1===n?t+1e-12:t-1e-12):r}r=r||1e-4;var s=Math.abs(Math.floor((n-t)/r));s%2!=0&&s++;for(var a=(n-t)/s,o=i(e,t,1),l=!1,u=t+a,c=1;c<s;c++)o+=(l?2:4)*i(e,u,1),l=!l,u+=a;return(o+i(e,u,2))*(a/3)},num_integrate:function(e,t,n,r,i){if(i<0)throw new Error("max depth cannot be negative");var s;try{s=function(e,t,n,r,i){var s={maxDepthCount:0,nanEncountered:!1};void 0===r&&(r=1e-9),void 0===i&&(i=45);var a=e(t),o=e(.5*(t+n)),l=e(n);if(r=function e(t,n,r,i,s,a,o,l,u,c,h){if(h.nanEncountered)return NaN;var p,f,m,d=r-n,g=t(n+.25*d),v=t(r-.25*d);if(isNaN(g))h.nanEncountered=!0;else if(isNaN(v))h.nanEncountered=!0;else if(o=((f=(m=d*(i+4*g+s)/12)+(p=d*(s+4*v+a)/12))-o)/15,!(h.maxDepthCount>1e3*u))return u<c?(h.maxDepthCount++,f+o):Math.abs(o)<l?f+o:(m=e(t,n,d=n+.5*d,i,g,s,m,.5*l,u,c+1,h),isNaN(m)?(h.nanEncountered=!0,NaN):(c=e(t,d,r,s,v,a,p,.5*l,u,c+1,h),isNaN(c)?(h.nanEncountered=!0,NaN):m+c))}(e,t,n,a,o,l,(a+4*o+l)*(n-t)/6,r,i,1,s),0<s.maxDepthCount&&U("integrate-adaptive-simpson: Warning: maximum recursion depth ("+i+") reached "+s.maxDepthCount+" times"),s.nanEncountered)throw new Error("Function does not converge over interval!");return r}(e,t,n,r,i)}catch(r){return Pe.simpson(e,t,n)}return se(s,12)},Ci:function(e){for(var t=0,n=1;n<20;n++){var r=2*n;t+=Math.pow(-1,n)*Math.pow(e,r)/(r*Pe.factorial(r))}return Math.log(e)+.5772156649015329+t},Si:function(e){for(var t=0,n=0;n<20;n++){var r=2*n;t+=Math.pow(-1,n)*Math.pow(e,1+r)/((1+r)*Pe.factorial(1+r))}return t},Ei:function(e){if(0===Number(e))return-1/0;for(var t=0,n=1;n<30;n++)t+=Math.pow(e,n)/(n*Pe.factorial(n));return.5772156649015329+Math.abs(Math.log(e))+t},Shi:function(e){for(var t,n,r=0,i=0;i<30;i++)n=1+(t=2*i),r+=Math.pow(e,n)/(n*n*Pe.factorial(t));return r},Chi:function(e){return Math.log(e)+.5772156649015329+Pe.num_integrate((function(e){return(Math.cosh(e)-1)/e}),.002,e,.001)},Li:function(e){return Pe.Ei(Pe.bigLog(e))},gamma_incomplete:function(e,t){for(var n=e-1,r=0,i=(t=t||0,0);i<n;i++)r+=Math.pow(t,i)/Pe.factorial(i);return Pe.factorial(n)*Math.exp(-t)*r},step:function(e){return 0<e?1:e<0?0:.5},rect:function(e){return.5===(e=Math.abs(e))?e:.5<e?0:1},sinc:function(e){return e.equals(0)?1:Math.sin(e)/e},tri:function(e){return 1<=(e=Math.abs(e))?0:1-e},nthroot:function(e,t){if(e instanceof Ue||(e=new Ue(e.toString())),(t=t instanceof Ue?t:new Ue(t.toString())).equals(1))return e;var n=e.divide(new Ue(2)),r=new Ue(1e-15),i=t.clone().invert(),s=t.subtract(new Ue(1));do{var a=Pe.bigpow(n,s),o=i.multiply(e.divide(a).subtract(n)).toDecimal(25);if(a=Ue.create(o),l)break;n=n.add(a),o=a.toDecimal();var l=!!u&&u===o,u=o}while(a.abs().gte(r));return n},sqrt:function(e){var t,n,r;e instanceof Ue||(e=new Ue(e));var i=0,s=!1,a=new Ue(1e-20),o=e.divide(new Ue(2));do{if(1e3<i)throw new Error("Unable to calculate square root for "+e)}while(o=o.add(e.divide(o)).divide(new Ue(2)),o=new Ue(o.decimal(30)),t=e.subtract(o.multiply(o)),r=!!n&&n.equals(t),(t.clone().abs().lessThan(a)||r)&&(s=!0),n=t,i++,!s);return o}});function Ie(e,t,r,i){var s="hash"===t,a=void 0,u=s?void 0:t,c="decimal"===u||"decimals"===u;function h(e){switch(t){case"decimals":case"decimal":return a=a||function(e){return!1},e.valueOf();case"recurring":a=a||function(e){return-1!==e.indexOf("'")};var r=e.toString();if(0===(v=/^-?\d+(?:\/\d+)?$/.exec(r)).length)return r;var i=v[0].split("/"),s=!1,o=Number(i[0]);o<0&&(o=-o,s=!0);var u=(u=Number(i[1]))||1,c=10*(o-(g=Math.floor(o/u))*u);for(g=g.toString()+".";c&&c<u;)c*=10,g+="0";for(var h="",p=[],f=0;;){if(void 0!==p[c])return(s?"-":"")+(g+h.slice(0,p[c])+"'"+h.slice(p[c])+"'").replace("'0'","").replace(/\.$/,"");var m=Math.floor(c/u),d=c-m*u;p[c]=f,h+=m.toString(),f+=1,c=10*d}case"mixed":if(a=a||function(e){return-1!==e.indexOf("/")},r=e.toString(),0===(v=/^-?\d+(?:\/\d+)?$/.exec(r)).length)return r;i=v[0].split("/"),r=new n(i[0]),(v=new n(i[1])).equals(0)&&(v=new n(1));var g=(r=r.divmod(v)).quotient,v=r.remainder;return r="-"===i[0][0]||g.equals(0)||v.equals(0)?"":"+",(g.equals(0)?"":g.toString())+r+(v.equals(0)?"":v.toString()+"/"+i[1]);case"scientific":return a=a||function(e){return!1},new De(e.valueOf()).toString(l.SCIENTIFIC_MAX_DECIMAL_PLACES);default:return a=a||function(e){return-1!==e.indexOf("/")},e.toString()}}if(c&&void 0===i&&(i=16),G(e)){var p,f,m="",d="",g="",E=e.group||r,A=e.value;switch(s||("-1"==(p=h(e.multiplier))&&"-1"===String(e.multiplier)&&(g="-",p="1"),"1"!=p&&(m=p),"1"!=(f=e.power?h(e.power):"")&&(d=G(f)?Ie(f,u):f)),E){case v:m="";var L=i&&c?e.multiplier.toDecimal(i):h(e.multiplier);A="-1"==String(e.multiplier)?"1":L,d="";break;case M:case _:A=e.collectSymbols().map((function(e){return"0"==(e=Ie(e,u,r,i))?"":e})).sort().join("+").replace(/\+\-/g,"-");break;case S:A=e.collectSymbols((function(e){var t=e.group;return(t===M||t===_)&&e.power.equals(1)&&e.multiplier.equals(1)?K(Ie(e,u)):Ie(e,u)})).join("*");break;case b:var C=e.previousGroup;L=e.power.group,C===M&&(A=e.collectSymbols(Ie,u).join("+").replace("+-","-")),C===v||C===w||C===x||s||(A=K(A)),L!==_&&L!==S&&L!==M&&"1"==e.power.multiplier.toString()||!d||(d=K(d))}E===x&&(A=e.fname+K(e.args.map((function(e){return Ie(e,u)})).join(","))),E===x&&e.fname in o&&(p=Ie(e.args[0]),f=Ie(e.args[1]),e.args[0].isComposite()&&(p=K(p)),e.args[1].isComposite()&&(f=K(f)),A=p+o[e.fname]+f),d&&E!==b&&a(d)&&(d=K(d)),((E===_||E===M)&&(m&&"1"!=m||"-"===g)||(E===S||E===_||E===M)&&d&&"1"!=d||!s&&E===y&&-1==A||e.fname===T)&&(A=K(A));var R=g+(m=i&&("decimal"===t||"decimals"===t&&m)?se(m,i):m);if(m&&a(m)&&(R=K(R)),m&&(R+="*"),d=d<0?K(d):d){if("e"===A&&l.E_TO_EXP)return R+"exp"+K(d);d=l.POWER_OPERATOR+d}return E=R+(A=E===b&&"-"===A.charAt(0)?K(A):A),(E=e.parens?K(E):E)+d}if(j(e)){for(var N=e.elements.length,P=(R=[],0);P<N;P++)R.push(e.elements[P].text(t));return"["+R.join(",")+"]"}try{return e.toString()}catch(e){return""}}function Oe(e){if(F(e))return[e];for(var t=e,n=1,r=[];n<t;){var i=e/n,a=Math.floor(i);if(i-a<=2220446049250313e-31&&1<n){if(F(n)&&(-1===s.indexOf(n)&&s.push(n),r.push(n)),F(a)){r.push(a);break}t=a}n++}return r.sort((function(e,t){return e-t}))}function ke(e){this.symbol=e}function De(e){return this instanceof De?((e=String(void 0===e?0:e)).startsWith("-")?(this.sign=-1,e=e.substr(1,e.length)):this.sign=1,De.isScientific(e)?this.fromScientific(e):this.convert(e),this):new De(e)}function De(e){return this instanceof De?((e=String(void 0===e?0:e)).startsWith("-")?(this.sign=-1,e=e.substr(1,e.length)):this.sign=1,De.isScientific(e)?this.fromScientific(e):this.convert(e),this):new De(e)}function Ue(e){if(e instanceof Ue)return e;if(void 0===e)return this;try{if($(e))try{this.num=n(e),this.den=n(1)}catch(t){return Ue.simple(e)}else{var t=e instanceof r?Fe.quickConversion(e):Fe.convert(e);this.num=new n(t[0]),this.den=new n(t[1])}}catch(t){return Ue.simple(e)}}function ze(e){var t="Infinity"===e;return this instanceof ze?(e instanceof r&&(e=e.toString()),/^(\-?\+?\d+)\.?\d*e?\-?\+?\d*/i.test(e)||e instanceof r?(this.group=v,this.value=E,this.multiplier=new Ue(e)):(this.group=w,z(e),this.value=e,this.multiplier=new Ue(1),this.imaginary=e===l.IMAGINARY,this.isInfinity=t),this.power=new Ue(1),this):new ze(e)}function Be(){var e=this,t={},n={names:[],actions:[]};function i(e,t){this.start=e,this.end=t}function s(){this.elements=[]}function a(e,t,n){if(this.type=t,this.value=e,void 0!==n&&(this.column=n+1),t===a.OPERATOR){var r,i=h[e];for(r in i)this[r]=i[r]}else t===a.FUNCTION&&(this.precedence=a.MAX_PRECEDENCE,this.leftAssoc=!1)}i.prototype.isConstant=function(){return this.start.isConstant()&&this.end.isConstant()},i.prototype.text=function(){return Ie(this.start)+":"+Ie(this.end)},s.prototype.append=function(e){this.elements.push(e)},s.prototype.getItems=function(){return this.elements},s.prototype.toString=function(){return e.pretty_print(this.elements)},s.create=function(e){var t=new s;return e&&t.append(e),t},a.prototype.toString=function(){return this.value},a.prototype.toString=function(){return this.is_prefix?"`"+this.value:this.value},a.OPERATOR="OPERATOR",a.VARIABLE_OR_LITERAL="VARIABLE_OR_LITERAL",a.FUNCTION="FUNCTION",a.UNIT="UNIT",a.KEYWORD="KEYWORD",a.MAX_PRECEDENCE=999,this.classes={Collection:s,Slice:i,Token:a};var o={prec:void 0,cos:function(t,n){var r=e.parse(Math.cos(t)*Math.cosh(n));return n=e.parse(Math.sin(t)*Math.sinh(n)),e.subtract(r,e.multiply(n,ze.imaginary()))},sin:function(t,n){var r=e.parse(Math.sin(t)*Math.cosh(n));return n=e.parse(Math.cos(t)*Math.sinh(n)),e.subtract(r,e.multiply(n,ze.imaginary()))},tan:function(t,n){var r=e.parse(Math.sin(2*t)/(Math.cos(2*t)+Math.cosh(2*n)));return n=e.parse(Math.sinh(2*n)/(Math.cos(2*t)+Math.cosh(2*n))),e.add(r,e.multiply(n,ze.imaginary()))},sec:function(t,n){return n=this.removeDen(this.cos(t,n)),e.subtract(n[0],e.multiply(n[1],ze.imaginary()))},csc:function(t,n){return n=this.removeDen(this.sin(t,n)),e.add(n[0],e.multiply(n[1],ze.imaginary()))},cot:function(t,n){return n=this.removeDen(this.tan(t,n)),e.subtract(n[0],e.multiply(n[1],ze.imaginary()))},acos:function(t,n){return t=this.fromArray([t,n]),n=e.pow(t.clone(),new ze(2)),n=e.expand(n),n=e.multiply(z(e.subtract(new ze(1),n)),ze.imaginary()),n=xe(e.expand(e.add(t.clone(),n))),e.expand(e.multiply(ze.imaginary().negate(),n))},asin:function(t,n){return e.subtract(e.parse("pi/2"),this.acos(t,n))},atan:function(t,n){return t.equals(0)&&(n.equals(1)||n.equals(-1))?e.parse(`${ze.infinity()}*${l.IMAGINARY}*${n}`):(t=o.fromArray([t,n]),n=e.expand(e.multiply(ze.imaginary(),t.clone())),t=xe(e.expand(e.subtract(new ze(1),n.clone()))),n=xe(e.expand(e.add(new ze(1),n.clone()))),e.expand(e.multiply(e.divide(ze.imaginary(),new ze(2)),e.subtract(t,n))))},asec:function(e,t){return(t=this.removeDen([e,t]))[1].negate(),this.acos.apply(this,t)},acsc:function(e,t){return(t=this.removeDen([e,t]))[1].negate(),this.asin.apply(this,t)},acot:function(e,t){return(t=this.removeDen([e,t]))[1].negate(),this.atan.apply(this,t)},cosh:function(t,n){var r=e.parse(Math.cosh(t)*Math.cos(n));return n=e.parse(Math.sinh(t)*Math.sin(n)),e.add(r,e.multiply(n,ze.imaginary()))},sinh:function(t,n){var r=e.parse(Math.sinh(t)*Math.cos(n));return n=e.parse(Math.cosh(t)*Math.sin(n)),e.add(r,e.multiply(n,ze.imaginary()))},tanh:function(t,n){var r=e.parse(Math.sinh(2*t)/(Math.cos(2*n)+Math.cosh(2*t)));return t=e.parse(Math.sin(2*n)/(Math.cos(2*n)+Math.cosh(2*t))),e.subtract(r,e.multiply(t,ze.imaginary()))},sech:function(t,n){return n=this.removeDen(this.cosh(t,n)),e.subtract(n[0],e.multiply(n[1],ze.imaginary()))},csch:function(t,n){return n=this.removeDen(this.sinh(t,n)),e.subtract(n[0],e.multiply(n[1],ze.imaginary()))},coth:function(t,n){return n=this.removeDen(this.tanh(t,n)),e.add(n[0],e.multiply(n[1],ze.imaginary()))},acosh:function(t,n){var r=this.fromArray([t,n]);return t=z(e.add(r.clone(),new ze(1))),n=z(e.subtract(r.clone(),new ze(1))),e.expand(xe(e.add(r,e.expand(e.multiply(t,n)))))},asinh:function(t,n){return t=this.fromArray([t,n]),n=z(e.add(new ze(1),e.expand(e.pow(t.clone(),new ze(2))))),e.expand(xe(e.add(t,n)))},atanh:function(t,n){return t=this.fromArray([t,n]),n=xe(e.add(t.clone(),new ze(1))),t=xe(e.subtract(new ze(1),t)),e.expand(e.divide(e.subtract(n,t),new ze(2)))},asech:function(e,t){return(t=this.removeDen([e,t]))[1].negate(),this.acosh.apply(this,t)},acsch:function(e,t){return(t=this.removeDen([e,t]))[1].negate(),this.asinh.apply(this,t)},acoth:function(e,t){return(t=this.removeDen([e,t]))[1].negate(),this.atanh.apply(this,t)},sqrt:function(t){var n=t.realpart(),r=t.imagpart();return t=ze.hyp(n,r),n=e.add(n.clone(),t),t=z(e.multiply(new ze(2),n.clone())),e.add(e.divide(n.clone(),t.clone()),e.multiply(e.divide(r,t),ze.imaginary()))},log:function(t,n){var i=xe(ze.hyp(t,n));return t=l.USE_BIG?ze(r.atan2(n.multiplier.toDecimal(),t.multiplier.toDecimal())):Math.atan2(n,t),t=e.parse(t),e.add(i,e.multiply(ze.imaginary(),t))},erf:(t,n)=>e.symfunction("erf",[t]),removeDen:function(t){var n,r=J(t)?(n=t[0],t[1]):(n=t.realpart(),t.imagpart());return t=Math.pow(n,2)+Math.pow(r,2),[e.parse(n/t),e.parse(r/t)]},fromArray:function(t){return e.add(t[0],e.multiply(ze.imaginary(),t[1]))},evaluate:function(t,n){var r,i,s=t.power.sign();return t.power=t.power.abs(),t.power.greaterThan(1)&&(t=e.expand(t)),i=s<0?(r=(i=this.removeDen(t))[0],i[1]):(r=t.realpart(),t.imagpart()),r.isConstant("all")&&i.isConstant("all")?this[n].call(this,r,i):e.symfunction(n,[t])}},u=this.trig={cos:function(t){if(t.equals("pi")&&t.multiplier.den.equals(2))return new ze(0);if(l.PARSE2NUMBER){if(t.equals(new ze(l.PI/2)))return new ze(0);if(t.isConstant())return l.USE_BIG?new ze(r.cos(t.multiplier.toDecimal())):new ze(Math.cos(t.valueOf()));if(t.isImaginary())return o.evaluate(t,"cos")}if(t.equals(0))return new ze(1);var n,i=!1,s=Ae(t.multiplier.toDecimal()),a=t.multiplier.abs();return t.multiplier=a,t.isPi()&&t.isLinear()&&($(a)?n=new ze(ae(a)?1:-1):(Number(a.num),2===(a=Number(a.den))?n=new ze(0):3===a?(n=e.parse("1/2"),i=!0):4===a?(n=e.parse("1/sqrt(2)"),i=!0):6===a?(n=e.parse("sqrt(3)/2"),i=!0):n=e.symfunction("cos",[t]))),!i||2!==s&&3!==s||n.negate(),n||e.symfunction("cos",[t])},sin:function(t){if(l.PARSE2NUMBER){if(t.isConstant())return t%Math.PI==0?new ze(0):l.USE_BIG?new ze(r.sin(t.multiplier.toDecimal())):new ze(Math.sin(t.valueOf()));if(t.isImaginary())return o.evaluate(t,"sin")}if(t.equals(0))return new ze(0);var n,i=!1,s=Ae(t.multiplier.toDecimal()),a=t.multiplier.sign(),u=t.multiplier.abs();return t.multiplier=u,t.equals("pi")?n=new ze(0):t.isPi()&&t.isLinear()&&($(u)?n=new ze(0):(u.num,2==(u=u.den)?(n=new ze(1),i=!0):3==u?(n=e.parse("sqrt(3)/2"),i=!0):4==u?(n=e.parse("1/sqrt(2)"),i=!0):6==u?(n=e.parse("1/2"),i=!0):n=e.multiply(new ze(a),e.symfunction("sin",[t])))),n=n||e.multiply(new ze(a),e.symfunction("sin",[t])),!i||3!==s&&4!==s||n.negate(),n},tan:function(t){if(l.PARSE2NUMBER){if(t%Math.PI==0&&t.isLinear())return new ze(0);if(t.isConstant())return l.USE_BIG?new ze(r.tan(t.multiplier.toDecimal())):new ze(Math.tan(t.valueOf()));if(t.isImaginary())return o.evaluate(t,"tan")}var n,i=!1,s=Ae(t.multiplier.toDecimal()),a=t.multiplier;if(t.multiplier=a,t.isPi()&&t.isLinear())if($(a))n=new ze(0);else{if(a.num,2==(a=a.den))throw new we("tan is undefined for "+t.toString());3==a?(n=e.parse("sqrt(3)"),i=!0):4==a?(n=new ze(1),i=!0):6==a?(n=e.parse("1/sqrt(3)"),i=!0):n=e.symfunction("tan",[t])}return n=n||e.symfunction("tan",[t]),!i||2!==s&&4!==s||n.negate(),n},sec:function(t){if(l.PARSE2NUMBER)return t.isConstant()?l.USE_BIG?new ze(new r(1).dividedBy(r.cos(t.multiplier.toDecimal()))):new ze(Pe.sec(t.valueOf())):t.isImaginary()?o.evaluate(t,"sec"):e.parse(ee("1/cos({0})",t));var n,i=!1,s=Ae(t.multiplier.toDecimal()),a=t.multiplier.abs();if(t.multiplier=a,t.isPi()&&t.isLinear())if($(a))n=new ze(ae(a)?1:-1);else{if(a.num,2==(a=a.den))throw new we("sec is undefined for "+t.toString());3==a?(n=new ze(2),i=!0):4==a?(n=e.parse("sqrt(2)"),i=!0):6==a?(n=e.parse("2/sqrt(3)"),i=!0):n=e.symfunction("sec",[t])}return!i||2!==s&&3!==s||n.negate(),n||e.symfunction("sec",[t])},csc:function(t){if(l.PARSE2NUMBER)return t.isConstant()?l.USE_BIG?new ze(new r(1).dividedBy(r.sin(t.multiplier.toDecimal()))):new ze(Pe.csc(t.valueOf())):t.isImaginary()?o.evaluate(t,"csc"):e.parse(ee("1/sin({0})",t));var n,i=!1,s=Ae(t.multiplier.toDecimal()),a=t.multiplier.sign(),u=t.multiplier.abs();if(t.multiplier=u,t.isPi()&&t.isLinear()){if($(u))throw new we("csc is undefined for "+t.toString());u.num,2==(u=u.den)?(n=new ze(1),i=!0):3==u?(n=e.parse("2/sqrt(3)"),i=!0):4==u?(n=e.parse("sqrt(2)"),i=!0):6==u?(n=new ze(2),i=!0):n=e.multiply(new ze(a),e.symfunction("csc",[t]))}return n=n||e.multiply(new ze(a),e.symfunction("csc",[t])),!i||3!==s&&4!==s||n.negate(),n},cot:function(t){if(l.PARSE2NUMBER)return t%(Math.PI/2)==0?new ze(0):t.isConstant()?l.USE_BIG?new ze(new r(1).dividedBy(r.tan(t.multiplier.toDecimal()))):new ze(Pe.cot(t.valueOf())):t.isImaginary()?o.evaluate(t,"cot"):e.parse(ee("1/tan({0})",t));var n,i=!1,s=Ae(t.multiplier.toDecimal()),a=t.multiplier;if(t.multiplier=a,t.isPi()&&t.isLinear()){if($(a))throw new we("cot is undefined for "+t.toString());a.num,2==(a=a.den)?n=new ze(0):3==a?(n=e.parse("1/sqrt(3)"),i=!0):4==a?(n=new ze(1),i=!0):6==a?(n=e.parse("sqrt(3)"),i=!0):n=e.symfunction("cot",[t])}return n=n||e.symfunction("cot",[t]),!i||2!==s&&4!==s||n.negate(),n},acos:function(t){if(l.PARSE2NUMBER){if(t.isConstant()){if(t.gt(1)||t.lt(-1)){var n=t.toString();return Re(pe(`pi/2-asin(${n})`))}return l.USE_BIG?new ze(r.acos(t.multiplier.toDecimal())):new ze(Math.acos(t.valueOf()))}if(t.isImaginary())return o.evaluate(t,"acos")}return e.symfunction("acos",arguments)},asin:function(t){if(l.PARSE2NUMBER){if(t.isConstant()){if(t.gt(1)||t.lt(-1)){var n=l.IMAGINARY,i=t.multiplier.toDecimal();return Re(pe(`${n}*log(sqrt(1-${i}^2)-${n}*${i})`))}return l.USE_BIG?new ze(r.asin(t.multiplier.toDecimal())):new ze(Math.asin(t.valueOf()))}if(t.isImaginary())return o.evaluate(t,"asin")}return e.symfunction("asin",arguments)},atan:function(t){var n;if(t.equals(0))n=new ze(0);else{if(l.PARSE2NUMBER)return t.isConstant()?l.USE_BIG?new ze(r.atan(t.multiplier.toDecimal())):new ze(Math.atan(t.valueOf())):t.isImaginary()?o.evaluate(t,"atan"):e.symfunction("atan",arguments);n=t.equals(-1)?e.parse("-pi/4"):e.symfunction("atan",arguments)}return n},asec:function(t){if(l.PARSE2NUMBER){if(t.equals(0))throw new be("Input is out of the domain of sec!");if(t.isConstant())return u.acos(t.invert());if(t.isImaginary())return o.evaluate(t,"asec")}return e.symfunction("asec",arguments)},acsc:function(t){if(l.PARSE2NUMBER){if(t.isConstant())return u.asin(t.invert());if(t.isImaginary())return o.evaluate(t,"acsc")}return e.symfunction("acsc",arguments)},acot:function(t){if(l.PARSE2NUMBER){if(t.isConstant())return new e.add(e.parse("pi/2"),u.atan(t).negate());if(t.isImaginary())return o.evaluate(t,"acot")}return e.symfunction("acot",arguments)},atan2:function(t,n){if(t.equals(0)&&n.equals(0))throw new we("atan2 is undefined for 0, 0");return l.PARSE2NUMBER&&t.isConstant()&&n.isConstant()?new ze(Math.atan2(t,n)):e.symfunction("atan2",arguments)}},c=this.trigh={cosh:function(t){if(l.PARSE2NUMBER){if(t.isConstant())return new ze(Math.cosh(t.valueOf()));if(t.isImaginary())return o.evaluate(t,"cosh")}return e.symfunction("cosh",arguments)},sinh:function(t){if(l.PARSE2NUMBER){if(t.isConstant())return new ze(Math.sinh(t.valueOf()));if(t.isImaginary())return o.evaluate(t,"sinh")}return e.symfunction("sinh",arguments)},tanh:function(t){if(l.PARSE2NUMBER){if(t.isConstant())return new ze(Math.tanh(t.valueOf()));if(t.isImaginary())return o.evaluate(t,"tanh")}return e.symfunction("tanh",arguments)},sech:function(t){return l.PARSE2NUMBER?t.isConstant()?new ze(Math.sech(t.valueOf())):t.isImaginary()?o.evaluate(t,"sech"):e.parse(ee("1/cosh({0})",t)):e.symfunction("sech",arguments)},csch:function(t){return l.PARSE2NUMBER?t.isConstant()?new ze(Math.csch(t.valueOf())):t.isImaginary()?o.evaluate(t,"csch"):e.parse(ee("1/sinh({0})",t)):e.symfunction("csch",arguments)},coth:function(t){return l.PARSE2NUMBER?t.isConstant()?new ze(Math.coth(t.valueOf())):t.isImaginary()?o.evaluate(t,"coth"):e.parse(ee("1/tanh({0})",t)):e.symfunction("coth",arguments)},acosh:function(t){return l.PARSE2NUMBER&&t.isImaginary()?o.evaluate(t,"acosh"):l.PARSE2NUMBER?pe(e.parse(ee(l.LOG+"(({0})+sqrt(({0})^2-1))",t.toString()))):e.symfunction("acosh",arguments)},asinh:function(t){return l.PARSE2NUMBER&&t.isImaginary()?o.evaluate(t,"asinh"):l.PARSE2NUMBER?pe(e.parse(ee(l.LOG+"(({0})+sqrt(({0})^2+1))",t.toString()))):e.symfunction("asinh",arguments)},atanh:function(t){return l.PARSE2NUMBER&&t.isImaginary()?o.evaluate(t,"atanh"):l.PARSE2NUMBER?pe(e.parse(ee("(1/2)*"+l.LOG+"((1+({0}))/(1-({0})))",t.toString()))):e.symfunction("atanh",arguments)},asech:function(t){return l.PARSE2NUMBER&&t.isImaginary()?o.evaluate(t,"asech"):l.PARSE2NUMBER?pe(xe(e.add(t.clone().invert(),z(e.subtract(e.pow(t,new ze(-2)),new ze(1)))))):e.symfunction("asech",arguments)},acsch:function(t){return l.PARSE2NUMBER&&t.isImaginary()?o.evaluate(t,"acsch"):l.PARSE2NUMBER?pe(e.parse(ee(l.LOG+"((1+sqrt(1+({0})^2))/({0}))",t.toString()))):e.symfunction("acsch",arguments)},acoth:function(t){return l.PARSE2NUMBER&&t.isImaginary()?o.evaluate(t,"acoth"):l.PARSE2NUMBER?t.equals(1)?ze.infinity():pe(e.divide(xe(e.divide(e.add(t.clone(),new ze(1)),e.subtract(t.clone(),new ze(1)))),new ze(2))):e.symfunction("acoth",arguments)}},h={"\\":{precedence:8,operator:"\\",action:"slash",prefix:!0,postfix:!(this.units={}),leftAssoc:!0,operation:function(e){return e}},"!!":{precedence:7,operator:"!!",action:"dfactorial",prefix:!1,postfix:!0,leftAssoc:!0,operation:function(t){return e.symfunction(l.DOUBLEFACTORIAL,[t])}},"!":{precedence:7,operator:"!",action:"factorial",prefix:!1,postfix:!0,leftAssoc:!0,operation:N},"^":{precedence:6,operator:"^",action:"pow",prefix:!1,postfix:!1,leftAssoc:!0},"**":{precedence:6,operator:"**",action:"pow",prefix:!1,postfix:!1,leftAssoc:!0},"%":{precedence:4,operator:"%",action:"percent",prefix:!1,postfix:!0,leftAssoc:!0,overloaded:!0,overloadAction:"mod",overloadLeftAssoc:!1,operation:function(t){return e.divide(t,new ze(100))}},"*":{precedence:4,operator:"*",action:"multiply",prefix:!1,postfix:!1,leftAssoc:!1},"/":{precedence:4,operator:"/",action:"divide",prefix:!1,postfix:!1,leftAssoc:!1},"+":{precedence:3,operator:"+",action:"add",prefix:!0,postfix:!1,leftAssoc:!1,operation:function(e){return e}},plus:{precedence:3,operator:"plus",action:"add",prefix:!0,postfix:!1,leftAssoc:!1,operation:function(e){return e}},"-":{precedence:3,operator:"-",action:"subtract",prefix:!0,postfix:!1,leftAssoc:!1,operation:function(e){return e.negate()}},"=":{precedence:2,operator:"=",action:"equals",prefix:!1,postfix:!1,leftAssoc:!1},"==":{precedence:1,operator:"==",action:"eq",prefix:!1,postfix:!1,leftAssoc:!1},"<":{precedence:1,operator:"<",action:"lt",prefix:!1,postfix:!1,leftAssoc:!1},"<=":{precedence:1,operator:"<=",action:"lte",prefix:!1,postfix:!1,leftAssoc:!1},">":{precedence:1,operator:">",action:"gt",prefix:!1,postfix:!1,leftAssoc:!1},"=>":{precedence:1,operator:"=>",action:"gte",prefix:!1,postfix:!1,leftAssoc:!1},",":{precedence:0,operator:",",action:"comma",prefix:!1,postfix:!1,leftAssoc:!1},":":{precedence:0,operator:",",action:"assign",prefix:!1,postfix:!1,leftAssoc:!1,vectorFn:"slice"},":=":{precedence:0,operator:",",action:"function_assign",prefix:!1,postfix:!1,leftAssoc:!0}},p={"(":{type:"round",id:1,is_open:!0,is_close:!1},")":{type:"round",id:2,is_open:!1,is_close:!0},"[":{type:"square",id:3,is_open:!0,is_close:!1,maps_to:"vector"},"]":{type:"square",id:4,is_open:!1,is_close:!0},"{":{type:"curly",id:5,is_open:!0,is_close:!1,maps_to:"Set"},"}":{type:"curly",id:6,is_open:!1,is_close:!0}},f=this.functions={cos:[u.cos,1],sin:[u.sin,1],tan:[u.tan,1],sec:[u.sec,1],csc:[u.csc,1],cot:[u.cot,1],acos:[u.acos,1],asin:[u.asin,1],atan:[u.atan,1],arccos:[u.acos,1],arcsin:[u.asin,1],arctan:[u.atan,1],asec:[u.asec,1],acsc:[u.acsc,1],acot:[u.acot,1],atan2:[u.atan2,2],acoth:[c.acoth,1],asech:[c.asech,1],acsch:[c.acsch,1],sinh:[c.sinh,1],cosh:[c.cosh,1],tanh:[c.tanh,1],asinh:[c.asinh,1],sech:[c.sech,1],csch:[c.csch,1],coth:[c.coth,1],acosh:[c.acosh,1],atanh:[c.atanh,1],log10:[,1],exp:[function(t){return t.fname===l.LOG&&t.isLinear()?e.pow(t.args[0],ze.create(t.multiplier)):e.parse(ee("e^({0})",t))},1],radians:[function(t){return e.parse(ee("({0})*pi/180",t))},1],degrees:[function(t){return e.parse(ee("({0})*180/pi",t))},1],min:[function(){var t=[].slice.call(arguments);return D(t)?t[0]:me(t)?new ze(Math.min.apply(null,t)):l.SYMBOLIC_MIN_MAX&&de(t)?fe("min",t):e.symfunction("min",t)},-1],max:[function(){var t=[].slice.call(arguments);return D(t)?t[0]:me(t)?new ze(Math.max.apply(null,t)):l.SYMBOLIC_MIN_MAX&&de(t)?fe("max",t):e.symfunction("max",t)},-1],erf:[,1],floor:[,1],ceil:[,1],trunc:[,1],Si:[,1],step:[,1],rect:[,1],sinc:[function(t){return l.PARSE2NUMBER?t.isConstant()?new ze(Pe.sinc(t)):e.parse(ee("sin({0})/({0})",t)):e.symfunction("sinc",[t])},1],tri:[,1],sign:[function(t){return t.isConstant(!0)?new ze(Math.sign(pe(t))):e.symfunction("sign",arguments)},1],Ci:[,1],Ei:[,1],Shi:[,1],Chi:[,1],Li:[,1],fib:[,1],fact:[N,1],factorial:[N,1],continued_fraction:[function(t,n){return(t=pe(t)).isConstant()?(t=Pe.continuedFraction(t,n),n=He.fromArray(t.fractions.map((function(e){return new ze(e)}))),He.fromArray([new ze(t.sign),new ze(t.whole),n])):e.symfunction("continued_fraction",arguments)},[1,2]],dfactorial:[,1],gamma_incomplete:[,[1,2]],round:[Me,[1,2]],scientific:[function(e,t){return e.scientific=t||10,e},[1,2]],mod:[I,2],pfactor:[V,1],vector:[function(){return new He([].slice.call(arguments))},-1],matrix:[function(){return Ge.fromArray(arguments)},-1],Set:[function(){return Ve.fromArray(arguments)},-1],imatrix:[function(e){return Ge.identity(e)},-1],parens:[function(t){return l.PARSE2NUMBER?t:e.symfunction("parens",[t])},-1],sqrt:[z,1],cbrt:[F,1],nthroot:[H,2],log:[xe,[1,2]],expand:[function(e,t){return Re(e,t=t||{expand_denominator:!0,expand_functions:!0})},1],abs:[E,1],invert:[function(e){if(X(e))return e.invert();k("invert expects a matrix")},1],determinant:[function(e){return X(e)?e.determinant():e},1],size:[function(e){var t;return X(e)?t=[new ze(e.cols()),new ze(e.rows())]:j(e)||Z(e)?t=new ze(e.elements.length):k("size expects a matrix or a vector"),t},1],transpose:[function(e){if(X(e))return e.transpose();k("function transpose expects a matrix")},1],dot:[function(e,t){if(j(e)&&j(t))return e.dot(t);k("function dot expects 2 vectors")},2],cross:[function(e,t){if(j(e)&&j(t))return e.cross(t);k("function cross expects 2 vectors")},2],vecget:[function(t,n){return n.isConstant()&&$(n)?t.elements[n]:e.symfunction("vecget",arguments)},2],vecset:[function(t,n,r){return n.isConstant?(t.elements[n]=r,t):e.symfunction("vecset",arguments)},3],vectrim:[function(t,n){return n=void 0===n?1e-14:n,t=t.clone(),n=Number(n),t.elements.sort((function(e,t){return t.group-e.group})),t.elements=function(e,t){var n=typeof t;"function"==n&&"undefined"!=n||(t=function(e,t){return e===t});for(var r=[];e.length;){var i=e[0];if(1===e.length){r.push(i);break}var s=[];r.push(i);for(var a=1;a<e.length;a++){var o=e[a];t(i,o)||s.push(o)}e=s}return r}(t.elements,(function(t,r){return Number(e.subtract(pe(t),pe(r)).abs())<=n})),t},[1,2]],matget:[function(t,n,r){return n.isConstant()&&r.isConstant()?t.elements[n][r]:e.symfunction("matget",arguments)},3],matset:[function(e,t,n,r){return e.elements[t][n]=r,e},4],matgetrow:[function(t,n){return n.isConstant()?new Ge(t.elements[n]):e.symfunction("matgetrow",arguments)},2],matsetrow:[function(t,n,r){if(!n.isConstant())return e.symfunction("matsetrow",arguments);if(t.elements[n].length!==r.elements.length)throw new Te("Matrix row must match row dimensions!");return(t=t.clone()).elements[n]=r.clone().elements,t},3],matgetcol:[function(t,n){if(!n.isConstant())return e.symfunction("matgetcol",arguments);n=Number(n);var r=Ge.fromArray([]);return t.each((function(e,t,i){i===n&&r.elements.push([e.clone()])})),r},2],matsetcol:[function(t,n,r){if(!n.isConstant())return e.symfunction("matsetcol",arguments);if(n=Number(n),t.rows()!==r.elements.length)throw new Te("Matrix columns must match number of columns!");return r.each((function(e,r){t.set(r-1,n,e.elements[0].clone())})),t},3],rationalize:[O,1],IF:[function(e,t,n){return"boolean"!=typeof e&&Y(e)&&(e=!!Number(e)),e?t:n},3],is_in:[function(e,t){if(X(e)){for(var n=0,r=e.rows();n<r;n++)for(var i=0,s=e.cols();i<s;i++)if(e.elements[n][i].equals(t))return new ze(1)}else if(e.elements)for(n=0,r=e.elements.length;n<r;n++)if(e.elements[n].equals(t))return new ze(1);return new ze(0)},2],realpart:[W,1],imagpart:[K,1],conjugate:[te,1],arg:[le,1],polarform:[function(t){var n;return t=(n=ze.toPolarFormArray(t))[1],n=n[0],t=e.parse(ee("e^({0}*({1}))",l.IMAGINARY,t)),e.multiply(n,t)},1],rectform:[function(t){var n,r,i,s,a,o=t.clone();try{return n=ie(t,"e",!0),r=e.divide(n.x.power,ze.imaginary()),i=pe(u.tan(r)),e.pow(n.a,new ze(2)),s=i.getDenom(!0),a=i.getNum(),ze.hyp(a,s).equals(n.a)?e.add(s,e.multiply(ze.imaginary(),a)):o}catch(t){return o}},1],sort:[function(e,t){t=t?t.toString():"asc";var n=function(e){return e.group===v?e.multiplier:e.group===x?""===e.fname?n(e.args[0]):e.fname:e.group===w?e.power:e.value};return new He((j(e)?e.elements:e.collectSymbols()).sort((function(e,r){return e=n(e),r=n(r),"desc"===t?r-e:e-r})))},[1,2]],integer_part:[,1],union:[function(e,t){return e.union(t)},2],contains:[function(e,t){return e.contains(t)},2],intersection:[function(e,t){return e.intersection(t)},2],difference:[function(e,t){return e.difference(t)},2],intersects:[function(e,t){return new ze(Number(e.intersects(t)))},2],is_subset:[function(e,t){return new ze(Number(e.is_subset(t)))},2],print:[function(){he(arguments).map((function(e){console.log(e.toString())}))},-1]};function m(e){this.type=e.type,this.value=e.value,this.left=e.left,this.right=e.right}function d(e){for(var t=0,n=[[]],r=0,i=e.length;r<i;r++)","===e[r]?n[++t]=[]:n[t].push(e[r]);return n}function g(e){return e.replace(/^\\left\((.+)\\right\)$/g,(function(e,t){return t||e}))}function E(t){if(t.isInfinity)return ze.infinity();if(t.multiplier.lessThan(0)&&t.multiplier.negate(),t.isImaginary()){var n=t.realpart(),r=t.imagpart();if(n.isConstant()&&r.isConstant())return z(e.add(e.pow(n,new ze(2)),e.pow(r,new ze(2))))}else if(Y(t)||ae(t.power))return t;var i;return t.isComposite()&&(i=[],t.each((function(e){i.push(e.multiplier)})),Pe.QGCD.apply(null,i).lessThan(0)&&(t.multiplier=t.multiplier.multiply(new Ue(-1)),t.distributeMultiplier())),r=e.parse(t.multiplier),t.toUnitMultiplier(),e.multiply(r,e.symfunction(L,[t]))}function N(t){if(j(t)){var n=new He;return t.each((function(e,t){n.set(t-1,N(e))})),n}if(X(t)){var r=new Ge;return t.each((function(e,t,n){r.set(t,n,N(e))})),r}if(l.PARSE2NUMBER&&t.isConstant())return Le($(t)?Pe.bigfactorial(t):Pe.gamma(t.multiplier.add(new Ue(1)).toDecimal()));if(t.isConstant()&&t.getDenom().equals(2)){var i,s=t.getNum(),a=t.multiplier.isNegative()?(a=e.subtract(s.negate(),new ze(1)).multiplier.divide(new Ue(2)),i=e.pow(new ze(-4),new ze(a)).multiplier.multiply(Pe.bigfactorial(a)),Pe.bigfactorial(new Ue(2).multiply(a))):(a=e.add(s,new ze(1)).multiplier.divide(new Ue(2)),i=Pe.bigfactorial(new Ue(2).multiply(a)),e.pow(new ze(4),new ze(a)).multiplier.multiply(Pe.bigfactorial(a)));return a=i.divide(a),e.multiply(e.parse("sqrt(pi)"),new ze(a))}return e.symfunction(C,[t])}function I(t,n){if(t.isConstant()&&n.isConstant()){var r=new ze(1);return r.multiplier=r.multiplier.multiply(t.multiplier.mod(n.multiplier)),r}return r=e.divide(t.clone(),n.clone()),$(r)?new ze(0):e.symfunction("mod",[t,n])}function O(t){if(t.isComposite()){var n,r,i,s,a=new ze(0);return t.each((function(t){i=t.getNum(),s=t.getDenom(),r=a.getNum(),n=a.getDenom(),r=e.multiply(s,r),i=e.multiply(i,n),i=e.expand(e.add(r,i)),s=e.multiply(n,s),a=e.divide(i,s)}),!0),a}return t}function z(t){if((t=G(t)?t:e.parse(t)).group===b)return e.symfunction(A,[t]);var n=(t=""===t.fname&&t.power.equals(1)?t.args[0]:t).multiplier.sign()<0;if(l.PARSE2NUMBER){if(t.isConstant()&&!n)return new ze(r.sqrt(t.multiplier.toDecimal()));if(t.isImaginary())return o.sqrt(t);if(t.group===w)return e.symfunction("sqrt",[t])}var i,s=t.isConstant();if(t.group===S&&t.isLinear()){var a=z(ze(t.multiplier));for(c in t.symbols){var u=t.symbols[c];a=e.multiply(a,z(u))}f=a}else if(t.fname===A){var c=t.args[0],h=t.multiplier;c.setPower(t.power.multiply(new Ue(.25))),f=c,h.equals(1)||(f=e.multiply(z(e.parse(h)),f))}else if(t.power.isInteger())if(t.multiplier<0&&t.group===w)var p=e.parse(t.multiplier).negate(),f=(h=e.parse(t).toUnitMultiplier().negate(),e.multiply(e.symfunction(l.SQRT,[h]),z(p)));else{p=t.power.sign(),t.power=t.power.abs(),s&&t.multiplier.lessThan(0)&&(i=ze.imaginary(),t.multiplier=t.multiplier.abs());var m=t.multiplier.toDecimal();if(s=Math.abs(m),s=Math.sqrt(s),$(s))a=new ze(s);else if($(m)){var d=Pe.ifactor(m),g=1;for(u in d){var v,y=(x=d[u])-x%2;y&&(v=Math.pow(u,y),g*=Math.pow(u,y/2),m/=v)}a=e.multiply(e.symfunction(A,[new ze(m)]),new ze(g))}else{for(var x,M=[new ze(t.multiplier.num),new ze(t.multiplier.den)],_=[new ze(1),new ze(1)],E=[new ze(1),new ze(1)],T=0;T<2;T++)V(x=M[T]).each((function(t){var n=(t=ze.unwrapPARENS(t)).clone().toLinear(),r=Number(t.power);t=r%2,_[T]=e.multiply(_[T],e.pow(n,new ze((r-t)/2))),E[T]=e.multiply(E[T],z(e.pow(n,new ze(t))))}));a=e.divide(e.multiply(_[0],E[0]),e.multiply(_[1],E[1]))}f=(t=t.toUnitMultiplier(!0)).isOne()?t:ae(t.power.toString())?e.pow(t.clone(),new ze(.5)):e.symfunction(A,[t]),p<0&&f.power.negate(),a&&(f=e.multiply(a,f)),i&&(f=e.multiply(i,f))}else t.setPower(t.power.multiply(new Ue(.5))),f=t;return n&&l.PARSE2NUMBER?e.parse(f):f}function F(t){if(t.isConstant(!0))return H(t,new ze(3));var n,r=t.power/3,i=e.pow(e.parse(t.multiplier),new ze(1/3));return t=t.toUnitMultiplier(),$(r)?n=e.pow(t.toLinear(),e.parse(r)):t.group===S?(n=new ze(1),t.each((function(t){n=e.multiply(n,F(t))}))):n=e.symfunction("cbrt",[t]),e.multiply(i,n)}function H(t,n,r,i){if((n=pe(e.parse(n))).equals(0))throw new we("Unable to calculate nthroots of zero");if(t<0&&ae(n))throw new Error("Cannot calculate nthroot of negative number for even powers");if(!t.isConstant(!0))return e.symfunction("nthroot",arguments);void 0===i&&(i=!0),r=r||25;var s,a=(t=t.group!==v?pe(t):t).sign();return a<0&&(t=E(t)),$(t)&&n.isConstant()?(n=t<0x10000000000000000?Ue.create(Math.pow(t,1/n)):Pe.nthroot(t,n),i&&(s=new ze(n)),s=new ze(n.toDecimal(r)),e.multiply(new ze(a),s)):void 0}function V(t){if(t.greaterThan(9999999999998891e26)||t.equals(-1))return t;if(t.equals(Math.PI))return new ze(Math.PI);if((t=pe(t.clone())).isConstant()){var n=new ze(1),r=t.toString();if($(r)){var i,s=Pe.ifactor(r);for(i in s){var a=s[i];n=e.multiply(n,e.symfunction("parens",[new ze(i).setPower(new Ue(a))]))}}else r=V(new ze(t.multiplier.num)),t=V(new ze(t.multiplier.den)),n=e.multiply(e.symfunction("parens",[r]),e.symfunction("parens",[t]).invert())}else n=e.symfunction("pfactor",arguments);return n}function W(e){return e.realpart()}function K(e){return e.imagpart()}function te(t){var n=t.realpart();return t=t.imagpart(),e.add(n,e.multiply(t.negate(),ze.imaginary()))}function le(t){var n=t.realpart();return t=t.imagpart(),n.isConstant()&&t.isConstant()?new ze(Math.atan2(t,n)):e.symfunction("atan2",[t,n])}function le(t){var n=t.realpart();return t=t.imagpart(),n.isConstant()&&t.isConstant()?t.equals(0)&&n.equals(-1)?e.parse("pi"):t.equals(1)&&n.equals(0)?e.parse("pi/2"):t.equals(1)&&n.equals(1)?e.parse("pi/4"):new ze(Math.atan2(t,n)):e.symfunction("atan2",[t,n])}function fe(e,t){var n,r;for(t.map((function(e){e.numVal=pe(e).multiplier}));;){if((r=t.length)<2)return t[0];n=t.pop(),r=t[r-2],("min"===e?n.numVal<r.numVal:n.numVal>r.numVal)&&(t.pop(),t.push(n))}}function xe(t,n){if(t.equals(1))return new ze(0);var r,i,s;if(t.fname===A&&t.multiplier.equals(1))return r=e.divide(xe(t.args[0]),new ze(2)),t.power.sign()<0&&r.negate(),r;if(t.equals(0))throw new we(l.LOG+"(0) is undefined!");return t.isImaginary()?o.evaluate(t,l.LOG):(t.isConstant()&&void 0!==n&&n.isConstant()?r=new ze(Math.log(t)/Math.log(n)):t.group===b&&t.power.multiplier.lessThan(0)||"-1"===t.power.toString()?(t.power.negate(),r=xe(t).negate()):"e"===t.value&&t.multiplier.equals(1)?(n=t.power,r=G(n)?n:new ze(n)):t.group===x&&"exp"===t.fname?(s=t.args[0],r=t.multiplier.equals(1)?e.multiply(s,new ze(t.power)):e.symfunction(l.LOG,[t])):l.PARSE2NUMBER&&Y(t)?((t=e.parse(t)).multiplier.lessThan(0)&&(t.negate(),i=e.multiply(new ze(Math.PI),new ze("i"))),r=new ze(Math.log(t.multiplier.toDecimal())),i&&(r=e.add(r,i))):(t.power.equals(1)||t.contains("e")||(s=t.group===b?t.power:new ze(t.power),t.toLinear()),r=1<arguments.length&&D(arguments)?new ze(1):e.symfunction(l.LOG,arguments),s&&(r=e.multiply(s,r))),r)}function Me(t,n){var r,i=n&&n.isConstant()||void 0===n;return t.isConstant()&&i?(i=t,n&&n.lessThan(0)&&(n=E(n),i=(r=Number(t).toExponential().toString().split("e"))[0],r=r[1]),n=new ze(se(i,Number(n||0))),e.multiply(n,e.pow(new ze(10),new ze(r||0)))):e.symfunction("round",arguments)}function Ae(e){return 0<=(e=(e%=2)<0?2+e:e)&&e<=.5?1:.5<e&&e<=1?2:1<e&&e<=1.5?3:4}function Le(e){if(!isFinite(e)){var t=Math.sign(e),n=new ze(String(Math.abs(e)));return n.multiplier=n.multiplier.multiply(new Ue(t)),n}if(G(e))return e;if("number"==typeof e)try{e=Ue.simple(e)}catch(t){e=new Ue(e)}return(n=new ze(0)).multiplier=e,n}function Re(t,n){if(Array.isArray(t))return t.map((function(e){return Re(e,n)}));if(n=n||{},t.group===x&&""===t.fname){var r=Re(t.args[0],n),i=Re(e.pow(r,e.parse(t.power)),n);return e.multiply(e.parse(t.multiplier),i).distributeMultiplier()}if(-1!==[v,y,w].indexOf(t.group))return t;i=t.clone();try{var s,a,o,l=t.multiplier.toString(),u=Number(t.power),c=t;if(t.isComposite()&&$(t.power)&&0<t.power){var h=u-1;r=new ze(0),t.each((function(t){r=e.add(r,Re(e.parse(t),n))}));for(var p=e.parse(r),f=0;f<h;f++)p=ge(p,r,n);c=e.multiply(e.parse(l),p).distributeMultiplier()}else t.group===x&&!0===n.expand_functions?(s=[],t.args.forEach((function(e){s.push(Re(e,n))})),c=e.pow(e.symfunction(t.fname,s),e.parse(t.power)),c=e.multiply(c,e.parse(t.multiplier))):t.isComposite()&&$(t.power)&&t.power<0&&!0===n.expand_denominator?(t=t.invert(),(c=Re(t,n)).invert()):t.group===S?(a=function(e){switch(e.group){case _:return 0;case M:return 1;case S:return 2;case x:return 3;default:return 4}},o=t.collectSymbols().sort((function(e,t){return a(t)-a(e)})).map((function(t){return Re(e.pow(t,e.parse(u)),n)})),r=o.pop(),(c=r.isComposite()&&r.isLinear()?(o.forEach((function(e){r=ge(r,e,n)})),r.isComposite()?(1<r.power&&(r=Re(e.pow(r,e.parse(r.power)),n)),e.multiply(e.parse(l),r).distributeMultiplier()):r):(c=r,o.forEach((function(t){c=e.multiply(c,t)})),e.multiply(c,e.parse(l)).distributeMultiplier())).group===S&&(c=e.parse(c))):c=t;return c}catch(t){return i}return i}function ke(e){if(G(e.power)||!e.power.absEquals(.5))return e;var t=e.power.sign();return e=z(e.group===y?new ze(e.value):e.toLinear()),t<0&&e.invert(),e}function De(e){return new ze(!0===e?1:0)}this.error=k,this.override=function(e,n){t[e]||(t[e]=[]),t[e].push(this[e]),this[e]=n},this.restore=function(e){this[e]&&(this[e]=t[e].pop())},this.extend=function(e,t,n){var r,i=this;"function"==typeof this[e]&&"function"==typeof t&&(r=this[e],this[e]=function(e,s){return G(e)&&G(s)&&!n?r.call(i,e,s):t.call(i,e,s,r)})},this.symfunction=function(e,t){var n=new ze(e);return n.group=x,"object"==typeof t&&(t=[].slice.call(t)),n.args=t,n.fname=e===T?"":e,n.updateHash(),n},this.callfunction=function(t,n,r){var i=f[t];i||k("Nerdamer currently does not support the function "+t);var s,a=i[1]||r,o=i[0];n instanceof Array||(n=void 0!==n?[n]:[]),-1!==a&&(s=(u=J(a))?a[0]:a,r=u?a[1]:a,a=t+" requires a {0} of {1} arguments. {2} provided!",(u=n.length)<s&&k(ee(a,"minimum",s,u)),r<u&&k(ee(a,"maximum",r,u)));var u=me(n);return o?o.apply(i[2],n):(o=function(e){for(var t=l.FUNCTION_MODULES,n=t.length,r=0;r<n;r++){var i=t[r];if(e in i)return i[e]}k("The function "+e+" is undefined!")}(t),l.PARSE2NUMBER&&u?Le(o.apply(o,n)):e.symfunction(t,n))},this.operator_filter_regex=(c="^\\"+Object.keys(h).filter((function(e){if(1===e.length)return e})).join("\\"),new RegExp("(["+c+"])\\s+(["+c+"])")),this.setOperator=function(t,n,r){var i=t.operator;if(h[i]=t,n&&(this[t.action]=n),e[i]=t.operation,t.action||t.prefix||t.postif||(t.action=i),"over"===r||"under"===r){var s,a=t.precedence;for(s in h){var o=h[s];("over"===r?o.precedence>=a:o.precedence>a)&&o.precedence++}}},this.getOperator=function(e){return h[e]},this.aliasOperator=function(e,t){var n,r={},i=h[e];for(n in i)r[n]=i[n];r.operator=t,this.setOperator(r)},this.getOperators=function(){return h},this.getBrackets=function(){return p},this.initConstants=function(){this.CONSTANTS={E:new ze(l.E),PI:new ze(l.PI)}},this.pretty_print=function(t){if(Array.isArray(t)){var n=t.map((t=>e.pretty_print(t))).join(", ");return"vector"===t.type?"vector<"+n+">":"("+n+")"}return t.toString()},this.peekers={pre_operator:[],post_operator:[],pre_function:[],post_function:[]},this.callPeekers=function(e){if(l.callPeekers)for(var t=this.peekers[e],n=he(arguments).slice(1).map(Q),r=0;r<t.length;r++)t[r].apply(null,n)},this.tokenize=function(t){for(var n in t=(t=String(t)).trim().replace(/\s+/g," "),p){var r=new RegExp(p[n].is_close?"\\s+\\"+n:"\\"+n+"\\s+","g");t=t.replace(r,n)}for(var i=0,s=t.length,o=0,l=[],u=[l],c=u[0],m=0,d=[],g=!1,v=function(e,t){var n=[];void 0!==e&&(n.type=e),n.column=t,u.push(n),c.push(n),c=n,m++},y=function(){u.pop(),c=u[--m]},w=function(n,r){(r=void 0===r?t.substring(o,n):r)in e.units?c.push(new a(r,a.UNIT,o)):""!==r&&c.push(new a(r,a.VARIABLE_OR_LITERAL,o))},b=function(e){c.push(new a(e,a.FUNCTION,o))},x=function(e){o=e+1};i<s;i++){var M=t.charAt(i);if(M in h){w(i);var S=c[0]&&q(c[0]);g&&o<i&&","!==M&&!(S&&"*"===M)&&(g=!1,y()),x(i+1);var _=function(e){for(var n=(e=void 0!==e?e:i)+1;t.charAt(n++)in h;);return t.substring(e,n-1)}(i);i=(o=o+_.length-2)-1,c.push.apply(c,function(e){for(var t=i-e.length,n=[],r=e.charAt(0),s=1,o=e.length;s<o;s++){var l=e.charAt(s),u=r+l;r=u in h?u:(n.push(new a(r,a.OPERATOR,t+s)),l)}return n.push(new a(r,a.OPERATOR,t+s)),n}(_))}else if(M in p){var E,T=p[M];if(T.is_open)d.push([T,o]),(E=t.substring(o,i))in f?b(E):""!==E&&c.push(new a(E,a.VARIABLE_OR_LITERAL,o)),v(T.maps_to,i);else if(T.is_close){var A=d.pop();if(!A)throw new Se("Missing open bracket for bracket at: "+(i+1));if(A[0].id!==T.id-1)throw new Se("Parity error");w(i),y()}x(i)}else" "===M&&(A=t.substring(o,i),T=t.charAt(i+1),g?(A in h?c.push(new a(A,a.OPERATOR,i)):(w(void 0,A),y(),((M=T in h)&&"-"===h[T].value||!M)&&c.push(new a("*",a.OPERATOR,i))),g=!1):(E=t.substring(o,i))in f?(g=!0,b(E),v()):E in h?c.push(new a(E,a.OPERATOR,i)):(w(void 0,E),T=t.charAt(i+1),""===A||""===T||A in h||T in h||c.push(new a("*",a.OPERATOR,i))),x(i))}if(d.length){var L=d.pop();throw new Se("Missing closed bracket for bracket at "+(L[1]+1))}return w(i),l},this.toRPN=function(e){for(var t=e.type,n=e.length,r=[],i=[],s=[],o=function(e,t){for(;e.length;)t.push(e.pop())},l=0;l<n;l++){var u=e[l];if(u.type!==a.OPERATOR)break;if(!u.prefix)throw new _e("Not a prefix operator");u.is_prefix=!0,i.push(u)}for(;l<n;l++){var c=e[l];if(c.type===a.OPERATOR){var h=c;for(h.overloaded&&(m=e[l+1])&&m.type===a.VARIABLE_OR_LITERAL&&(h.postfix=!1,h.action=h.overloadAction,h.leftAssoc=h.overloadLeftAssoc);i.length;){var p=i[i.length-1];if(!(p.precedence>h.precedence||!h.leftAssoc&&p.precedence===h.precedence))break;r.push(i.pop())}if(("vector"===t||"set"===t)&&"vectorFn"in h&&(h.action=h.vectorFn),h.postfix){var f=e[l-1];if(!f)throw new _e("Unexpected prefix operator '"+c.value+"'! at "+c.column);if(f.type===a.OPERATOR&&!f.postfix)throw new _e("Unexpected prefix operator '"+f.value+"'! at "+f.column)}else do{var m,d=!!(m=e[l+1])&&m.type===a.OPERATOR;if(d){if(!m.prefix)throw new _e("A prefix operator was expected at "+m.column);m.is_prefix=!0,s.push(m),l++}}while(d);for((h.is_prefix?s:i).push(h);s.length&&(h.leftAssoc||!h.leftAssoc&&s[s.length-1].precedence>=h.precedence);)i.push(s.pop())}else c.type===a.VARIABLE_OR_LITERAL?(0===r.length&&o(s,i),r.push(c),(f=i[i.length-1])&&f.leftAssoc||o(s,r)):c.type===a.FUNCTION?i.push(c):c.type===a.UNIT&&r.push(c);Array.isArray(c)&&(r.push(this.toRPN(c)),c.type&&r.push(new a(c.type,a.FUNCTION,c.column)))}return o(i,r),o(s,r),r},this.parseRPN=function(t,n){try{for(var r in n=n||{})n[r]=e.parse(n[r],{});l.PARSE2NUMBER&&("e"in n||(n.e=new ze(l.E)),"pi"in n||(n.pi=new ze(l.PI)));for(var o=[],u=0,c=t.length;u<c;u++){var h=t[u];if(h=Array.isArray(h)?this.parseRPN(h,n):h)if(h.type===a.OPERATOR)if(h.is_prefix||h.postfix)o.push(h.operation(o.pop()));else{var p=o.pop(),f=o.pop();if(void 0===f)throw new _e(h+" is not a valid postfix operator at "+h.column);var m="comma"===h.action;f instanceof Ve&&!m&&(f=He.fromSet(f)),p instanceof Ve&&!m&&(p=He.fromSet(p)),this.callPeekers("pre_operator",f,p,h);var d=e[h.action](f,p);this.callPeekers("post_operator",d,f,p,h),o.push(d)}else if(h.type===a.FUNCTION){var g=o.pop(),v=g.parent;g instanceof s||(g=s.create(g));var y=h.value,w=g.getItems();this.callPeekers("pre_function",y,w);var b=e.callfunction(y,w);this.callPeekers("post_function",b,y,w);var x=o[o.length-1],M=t[u+1];if(M&&M.type===a.OPERATOR&&","===M.value||!(b instanceof He)||!x||!x.elements||x instanceof s)v&&(b.parent=v),o.push(b);else{var S=o.pop(),_=b.elements[0];if(_.isConstant())if(_ instanceof i)o.push(He.fromArray(S.elements.slice(_.start,_.end)));else{var E=Number(_),T=S.elements.length;if((E=E<0?T+E:E)<0||T<=E)throw new Ee("Index out of range "+(h.column+1));var A=S.elements[E];S.getter=E,A.parent=S,o.push(A)}else S.getter=_,o.push(S),o.push(b)}}else{var L,C=h.value;C in l.ALIASES?h=e.parse(l.ALIASES[h]):h.type===a.VARIABLE_OR_LITERAL?h=new ze(C):h.type===a.UNIT&&((h=new ze(C)).isUnit=!0),C in e.CONSTANTS?(L=h,h=new ze(e.CONSTANTS[C])):C in n&&C!==n[C].toString()?(L=h,h=n[C].clone()):C in P&&(L=h,h=P[C].clone()),L&&(h.subbed=L),o.push(h)}}var R=o[0];if(-1!==["undefined","string","number"].indexOf(typeof R))throw new Ne("Unexpected token!");return R}catch(n){throw[be].forEach((function(e){if(n instanceof e)throw new e(n.message+": "+h.column)})),new ye(n.message+": "+h.column)}},m.prototype.toString=function(){var e=this.left?this.left.toString()+"---":"",t=this.right?"---"+this.right.toString():"";return e+"("+this.value+")"+t},m.prototype.toHTML=function(e,t){function n(e){return" ".repeat(t*e)}e=e||0,t=void 0===t?4:t;var r="",i=this.left?n(e+1)+"<li>\n"+this.left.toHTML(e+2,t)+n(e+1)+"</li> \n":"",s=this.right?n(e+1)+"<li>\n"+this.right.toHTML(e+2,t)+n(e+1)+"</li>\n":"";return r=n(e)+'<div class="'+this.type.toLowerCase()+'"><span>'+this.value+"</span></div>"+n(e)+"\n",(i||s)&&(r+=n(e)+"<ul>\n"+i+s+n(e)+"</ul>\n"),r+""},this.tree=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(Array.isArray(r))r=this.tree(r),t.push(r);else if(r.type===a.OPERATOR)r.is_prefix||r.postfix?(s=r.is_prefix?"left":"right",i=t.pop(),(r=new m(r))[s]=i):((r=new m(r)).right=t.pop(),r.left=t.pop()),t.push(r);else if(r.type===a.FUNCTION){r=new m(r);var i,s=t.pop();if(r.right=s,"object"===r.value&&(i=t[t.length-1])){for(;i.right;)i=i.right;i.right=r;continue}t.push(r)}else t.push(new m(r))}return t[0]},this.parse=function(e,t){return e=function(e){e=String(e);for(var t=0;t<n.actions.length;t++)e=n.actions[t].call(this,e);for(e=e.replace(/\s+/g," "),e=(e=/e/gi.test(e)?e.replace(/\-*\d+\.*\d*e\+?\-?\d+/gi,(function(e){return B(e)})):e).replace(l.IMPLIED_MULTIPLICATION_REGEX,(function(){var e=arguments[4],t=arguments[1],n=arguments[2],r=arguments[3],i="",s="*";return t+(s=(i=e.charAt(r).match(/[\+\-\/\*]/)?i:e.charAt(r-1)).match(/[a-z]/i)?"":s)+n})).replace(/([a-z0-9_]+)/gi,(function(e,t){return!1===l.USE_MULTICHARACTER_VARS&&!(t in f)&&isNaN(t)?t.split("").join("*"):t})).replace(/\)\(/g,")*(")||"0";e!==(e=e.replace(/([a-z0-9_]+)(\()|(\))([a-z0-9]+)/gi,(function(e,t,n,r,i){return i=n||i,(r=t||r)in f?r+i:r+"*"+i}))););return e}(e),t=t||{},e=this.tokenize(e),e=this.toRPN(e),this.parseRPN(e,t)},this.toObject=function(t){var n=function(t){for(var r=[],i=0,s=t.length;i<s;i++){var o,l=t[i],u=l.value;l.type===a.VARIABLE_OR_LITERAL?r.push(new ze(u)):l.type===a.FUNCTION?(i++,(o=e.symfunction(u,n(t[i]))).isConversion=!0,r.push(o)):l.type===a.OPERATOR?r.push(u):r.push(n(l))}return r};return n(e.tokenize(t))},this.toTeX=function(t,n){var r=!0===(n=n||{}).decimals?"decimals":void 0,i="string"==typeof t?this.toObject(t):t,s=[],a=void 0===n.cdot?"\\cdot":n.cdot;if(i=function(e){for(var t=[];e.length;){var n,r,i=e.shift(),s=e[0],a=J(s),o="-"===s;"^"===i&&("+"===s?e.shift():a&&"+"===s[0]&&s.shift(),a&&1===s.length&&e.unshift(e.shift()[0])),"^"===i&&(a&&"-"===s[0]||o)?(n=t.pop(),r="1","*"===(o=t[t.length-1])?(t.pop(),r=t.pop()):J(o)&&(r=t.pop()),t.push(r,"/",n,i),(a?s:e).shift(),a&&1===s.length&&t.push(e.shift()[0])):t.push(i)}return t}(i),J(i)){for(var o,u,c=[],h=0;h<i.length;h++)o=i[h],"^"===i[h+1]?(u=i[h+2],c.push(qe.braces(this.toTeX([o]))+"^"+qe.braces(this.toTeX([u]))),h+=2):c.push(o);i=c}h=0;for(var p=i.length;h<p;h++){var f=i[h];if(G(f="*"===f?a:f))if(f.group===x){var m,v=f.fname;if(v===A)w="\\sqrt"+qe.braces(this.toTeX(f.args));else if(v===L)w=qe.brackets(this.toTeX(f.args),"abs");else if(v===T)w=qe.brackets(this.toTeX(f.args),"parens");else if(v===l.LOG10)w="\\"+l.LOG10_LATEX+"\\left( "+this.toTeX(f.args)+"\\right)";else if("integrate"===v)var y=d(f.args),w="\\int "+(b=qe.braces(this.toTeX(y[0])))+"\\, d"+(M=this.toTeX(y[1]));else if("defint"===v){y=d(f.args);var b=qe.braces(this.toTeX(y[0])),M=this.toTeX(y[3]);w="\\int\\limits_{"+this.toTeX(y[1])+"}^{"+this.toTeX(y[2])+"} "+b+"\\, d"+M}else if("diff"===v){if(y=d(f.args),M="",b=qe.braces(this.toTeX(y[0])),1===y.length){for(var S=[],_=0;_<y[0].length;_++)3===y[0][_].group&&S.push(y[0][_].value);S.sort(),M=0<S.length?"\\frac{d}{d "+S[0]+"}":"\\frac{d}{d x}"}else M=2===y.length?"\\frac{d}{d "+y[1]+"}":"\\frac{d^{"+y[2]+"}}{d "+this.toTeX(y[1])+"^{"+y[2]+"}}";w=M+"\\left("+b+"\\right)"}else if("sum"===v||"product"===v){var E=[[],[],[],[]];for(_=0,h=0;h<f.args.length;h++)","!==f.args[h]?E[_].push(f.args[h]):_++;w=("sum"===v?"\\sum_":"\\prod_")+qe.braces(this.toTeX(E[1])+" = "+this.toTeX(E[2])),w+="^"+qe.braces(this.toTeX(E[3]))+qe.braces(this.toTeX(E[0]))}else w="limit"===v?(m=d(f.args).map((function(t){return Array.isArray(t)?e.toTeX(t.join("")):e.toTeX(String(t))})),"\\lim_"+qe.braces(m[1]+"\\to "+m[2])+" "+qe.braces(m[0])):v===C||v===R?this.toTeX(f.args)+(v===C?"!":"!!"):qe.latex(f,r);s.push(w)}else s.push(qe.latex(f,r));else J(f)?s.push(qe.brackets(this.toTeX(f))):"/"===f?s.push(qe.frac(g(s.pop()),g(this.toTeX([i[++h]])))):s.push(f)}return s.join(" ")},this.expand=Re,this.round=Me,this.clean=function t(n){var r,i,s,a,o,l,u,c=n.group;return c===_?(i=n.getNum(),s=n.getDenom()||new ze(1),a=Number(n.power),o=new ze(1),1===Math.abs(a)&&(s.each((function(n){n.group===S?o=e.multiply(o,t(n.getDenom())):n.power.lessThan(0)&&(o=e.multiply(o,t(n.clone().toUnitMultiplier())))})),l=new ze(0),s.each((function(t){l=e.add(e.divide(t,o.clone()),l)})),o.invert(),i.isComposite()?(u=new ze(0),i.each((function(n){u=e.add(e.multiply(t(n),o.clone()),u)}))):u=e.multiply(o,i),r=e.divide(u,l))):c===S?(r=new ze(1),n.each((function(t){r=e.multiply(r,e.clean(t))}))):c===x&&1===n.args.length&&n.args[0].isConstant()&&(r=ce("PARSE2NUMBER",(function(){return e.parse(n)}),!0)),r=r||n},this.sqrt=z,this.cbrt=F,this.abs=E,this.log=xe,this.rationalize=O,this.nthroot=H,this.arg=le,this.conjugate=te,this.imagpart=K,this.realpart=W,this.getFunction=function(e){return f[e][0]},this.addPreprocessor=function(e,t,r,i){var s=n.names,a=n.actions;if("function"!=typeof t)throw new PreprocessorError("Incorrect parameters. Function expected!");r?i?(s.splice(r,0,e),a.splice(r,0,t)):(s[r]=e,a[r]=t):(s.push(e),a.push(t))},this.getPreprocessors=function(){for(var e={},t=0,n=e.names.length;t<n;t++)e[e.names[t]]={order:t,action:e.actions[t]};return e},this.removePreprocessor=function(e,t){e=n.names.indexOf(e),t?(ue(n.names,e),ue(n.actions,e)):(n.names[e]=void 0,n.actions[e]=void 0)},this.mapped_function=function(){for(var t={},n=this.params,r=0;r<n.length;r++)t[n[r]]=String(arguments[r]);return e.parse(this.body,t)},this.add=function(t,n){var r=G(t),i=G(n);if(r&&i){if(t.unit||n.unit)return e.Unit.add(t,n);if(t.isInfinity||n.isInfinity){var s=t.multiplier.lessThan(0),a=n.multiplier.lessThan(0);if(t.isInfinity&&n.isInfinity&&s!==a)throw new we("("+t+")+("+n+") is not defined!");var o=ze.infinity();return a&&o.negate(),o}if(t.isComposite()&&t.isLinear()&&n.isComposite()&&n.isLinear()&&(t.distributeMultiplier(),n.distributeMultiplier(),n.length>t.length&&t.group===n.group&&([t,n]=[n,t])),t.multiplier.equals(0))return n;if(n.multiplier.equals(0))return t;if(t.isConstant()&&n.isConstant()&&l.PARSE2NUMBER)return new ze(t.multiplier.add(n.multiplier).toDecimal(l.PRECISION));var u=t.group,c=n.group,h=t.power.toString(),p=n.power.toString();if(u<c||u===c&&p<h&&0<p)return this.add(n,t);u===S&&c===M&&t.value===n.value&&(C=t,u=(t=n).group,c=(n=C).group,h=t.power.toString(),p=n.power.toString());var f,m,d,g,E=h===p;if(s=t.value,a=n.value,o=t.isComposite(),h=n.isComposite(),o&&(f=Ie(t,"hash")),h&&(m=Ie(n,"hash")),u===_&&c===_&&n.isLinear()&&!t.isLinear()&&f!==m)return this.add(n,t);if(u===M&&c===M&&(s=f,a=m),p=u===y&&c===v,h=t.value===n.multiplier.toString(),(h=s===a||f===m&&void 0!==f||p&&h)&&E&&u===c)if(p&&(n=n.convert(y)),u!==M||c!==w&&c!==y)if((d=t).multiplier.isOne()&&n.multiplier.isOne()&&u===_&&t.isLinear()&&n.isLinear())for(var T in n.symbols){var L=n.symbols[T];d.attach(L)}else d.multiplier=d.multiplier.add(n.multiplier);else t.distributeMultiplier(),d=t.attach(n);else if(h&&u!==M)u===_&&c===M?(n.insert(t,"add"),d=n):(d=ze.shell(M).attach([t,n])).value=u===M?f:s;else if(o&&t.isLinear())if(s=u===c,(o=u===M&&c===M)&&(s=t.value===n.value),t.distributeMultiplier(),n.isComposite()&&n.isLinear()&&s){for(var T in n.distributeMultiplier(),n.symbols)L=n.symbols[T],t.attach(L);d=t}else o&&t.value!==m||u===M&&!h?(d=ze.shell(_).attach([t,n])).updateHash():d=t.attach(n);else u===x&&t.fname===A&&c!==b&&n.power.equals(.5)&&(g=n.multiplier.clone(),(n=z(n.toUnitMultiplier().toLinear())).multiplier=g),2===t.length&&2===n.length&&ae(t.power)&&ae(n.power)?d=e.add(Re(t),Re(n)):(d=ze.shell(_).attach([t,n])).updateHash();return 1===(d=d.multiplier.equals(0)?new ze(0):d).length&&(g=d.multiplier,(d=ne(d.symbols)).multiplier=d.multiplier.multiply(g)),d}i&&!r&&(C=t,t=n,n=C,C=i,i=r,r=C);var C=X(n);if(r&&C){var R=new Ge;n.eachElement((function(n,r,i){R.set(r,i,e.add(t.clone(),n))})),n=R}else if(X(t)&&C)n=t.add(n);else if(r&&j(n))n.each((function(r,i){n.elements[--i]=e.add(t.clone(),n.elements[i])}));else if(j(t)&&j(n))n.each((function(r,i){n.elements[--i]=e.add(t.elements[i],n.elements[i])}));else{if(j(t)&&X(n))return e.add(n,t);if(X(t)&&j(n)){if(n.elements.length===t.rows()){R=new Ge;var N=t.cols();return n.each((function(n,r){for(var i=[],s=0;s<N;s++)i.push(e.add(t.elements[r-1][s].clone(),n.clone()));R.elements.push(i)})),R}k("Dimensions must match!")}}return n},this.subtract=function(t,n){var r=G(t),i=G(n);if(r&&i)return t.unit||n.unit?e.Unit.subtract(t,n):this.add(t,n.negate());if(i&&j(t))n=t.map((function(t){return e.subtract(t,n.clone())}));else if(r&&j(n))n=n.map((function(n){return e.subtract(t.clone(),n)}));else if(j(t)&&j(n))t.dimensions()===n.dimensions()?n=t.subtract(n):e.error("Unable to subtract vectors. Dimensions do not match.");else if(X(t)&&j(n)){if(n.elements.length===t.rows()){var s=new Ge,a=t.cols();return n.each((function(n,r){for(var i=[],o=0;o<a;o++)i.push(e.subtract(t.elements[r-1][o].clone(),n.clone()));s.elements.push(i)})),s}k("Dimensions must match!")}else{if(j(t)&&X(n))return s=n.clone().negate(),e.add(s,t);X(t)&&X(n)?n=t.subtract(n):X(t)&&i?(s=new Ge,t.each((function(t,r,i){s.set(r,i,e.subtract(t,n.clone()))})),n=s):r&&X(n)&&(s=new Ge,n.each((function(n,r,i){s.set(r,i,e.subtract(t.clone(),n))})),n=s)}return n},this.multiply=function(t,n){var i=G(t),a=G(n);if(i&&n instanceof s)return n.elements.push(t),n;if(i&&a){if(n.isUnit){var o=t.clone();return t.unit=n,o}if(t.unit||n.unit)return e.Unit.multiply(t,n);if(t.isInfinity||n.isInfinity){if(t.equals(0)||n.equals(0))throw new we(t+"*"+n+" is undefined!");if(n.power.lessThan(0)){if(t.isInfinity)throw new we("Infinity/Infinity is not defined!");return new ze(0)}var u=t.multiplier.multiply(n.multiplier).sign(),c=ze.infinity();if(t.isConstant()||n.isConstant()||t.isInfinity&&n.isInfinity)return u<0&&c.negate(),c}if(t.isConstant()&&n.isConstant()&&l.PARSE2NUMBER)return new ze(d=new r(t.multiplier.toDecimal()).times(new r(n.multiplier.toDecimal())).toFixed());if(t.isOne())return n.clone();if(n.isOne())return t.clone();if(t.multiplier.equals(0)||n.multiplier.equals(0))return new ze(0);if(n.group>t.group&&n.group!==_)return this.multiply(n,t);t.group===S&&n.group===M&&t.value===n.value&&(d=t,t=n,n=d);var h=t.group,p=n.group,f=n.multiplier.num,m=n.multiplier.den;h!==x||t.fname!==A||n.isConstant()||t.args[0].value!==n.value||t.args[0].multiplier.lessThan(0)?h===x&&t.fname===A&&t.multiplier.equals(1)&&t.power.equals(-1)&&n.isConstant()&&t.args[0].equals(n)&&(t=e.symfunction(A,[n.clone()]),n=new ze(1)):(T=t.power,E=e.parse(t.multiplier),(t=e.multiply(E,t.args[0].clone())).setPower(new Ue(.5).multiply(T)),h=t.group);var d,g=t.value,E=(c=n.value,u=new Ue(t.sign()),h===y&&p===v&&n.multiplier.equals(t.value)),T=(E?new Ue(1).multiply(t.multiplier):t.multiplier.multiply(n.multiplier)).abs();if(o=t.clone().toUnitMultiplier(),n=n.clone().toUnitMultiplier(!0),h===x&&p===x){var L=t.args[0].clone(),R=n.args[0].clone();if(t.fname===A&&n.fname===A&&t.isLinear()&&n.isLinear()){var N=e.divide(L,R).invert();N.gt(1)&&$(N)&&(o=e.multiply(t.args[0].clone(),z(N.clone())),n=new ze(1))}else if(t.fname===C&&n.fname===C&&!L.isConstant()&&!R.isConstant()&&n.power<0&&(N=e.subtract(L.clone(),R.clone())).isConstant())if(d=new ze(1),N<0){for(var P=0,I=Math.abs(N);P<=I;P++){var O=e.add(L.clone(),new ze(P));d=e.multiply(d,O)}o=e.multiply(e.pow(L,new ze(t.power)),e.pow(d,new ze(n.power))),n=new ze(1)}else{for(P=0,I=Math.abs(N);P<=I;P++)O=e.add(R.clone(),new ze(P)),d=e.multiply(d,O);o=e.multiply(e.pow(d,new ze(t.power)),e.pow(R,new ze(n.power))),n=new ze(1)}}if(g===c&&h===M&&h===p&&(g=t.text("hash"),c=n.text("hash")),(g=p===b&&n.previousGroup===M&&h===M?Ie(t,"hash",b):g)!==c&&!E||h===M&&(p===w||p===y||p===x)||h===M&&p===S)if(h===S&&t.isLinear())if(p===S&&n.distributeExponent(),p===S&&n.isLinear()){for(var O in n.symbols){var D=n.symbols[O];o=o.combine(D)}o.multiplier=o.multiplier.multiply(n.multiplier)}else o.combine(n);else h!==v?h===S?(o.distributeExponent(),o.combine(n)):n.isOne()||(F=n.multiplier.clone(),n.toUnitMultiplier(),(o=ze.shell(S).combine([o,n])).multiplier=o.multiplier.multiply(F)):o=n.clone().toUnitMultiplier();else{var U=t.power,B=n.power,F=G(U),q=G(B);q=F||q,h===M&&p!==M&&n.previousGroup!==M&&U.equals(1)?(o=new ze(0),t.each((function(t){o=e.add(o,e.multiply(t,n.clone()))}),!0)):(o.power=q?e.add(G(U)?U:new ze(U),G(B)?B:new ze(B)):h===v?U:U.add(B),o.power.equals(0)&&(o=o.convert(v)),q&&o.convert(b),t.imaginary&&n.imaginary&&ae(o.power%2)&&(o=new ze(1),T.negate()),o.group!==b&&o.previousGroup&&(o.previousGroup=void 0),o.multiplier=o.multiplier.multiply(n.multiplier))}return o.group===y&&(h=Math.log(o.value),U=Math.log(f)/h,B=Math.log(m)/h,q=T.num/f,h=T.den/m,0!=U&&$(U)&&$(q)&&(o.power=o.power.add(new Ue(U)),T.num/=f),0!=B&&$(B)&&$(h)&&(o.power=o.power.subtract(new Ue(B)),T.den/=m)),1===o.length&&(d=o.multiplier,(o=ne(o.symbols)).multiplier=o.multiplier.multiply(d)),m=o.power.toString(),ae(m)&&o.fname===A?(u*=o.sign(),m=o.power,o=o.args[0],o=e.multiply(new ze(T),e.pow(o,new ze(m.divide(new Ue(2))))),u<0&&o.negate()):(o.multiplier=o.multiplier.multiply(T).multiply(u),o.group===_&&o.isImaginary()&&o.distributeMultiplier()),o=o.group===y&&$(o.power.toDecimal())?o.convert(v):o}if(a&&!i&&(d=t,t=n,n=d,d=a,a=i,i=d),u=X(n),a=X(t),i&&u){var H=new Ge;n.eachElement((function(n,r,i){H.set(r,i,e.multiply(t.clone(),n))})),n=H}else if(a&&u)n=t.multiply(n);else if(i&&j(n))n.each((function(r,i){n.elements[--i]=e.multiply(t.clone(),n.elements[i])}));else if(j(t)&&j(n))n.each((function(r,i){n.elements[--i]=e.multiply(t.elements[i],n.elements[i])}));else{if(j(t)&&X(n))return this.multiply(n,t);if(X(t)&&j(n)){if(n.elements.length===t.rows()){H=new Ge;var V=t.cols();return n.each((function(n,r){for(var i=[],s=0;s<V;s++)i.push(e.multiply(t.elements[r-1][s].clone(),n.clone()));H.elements.push(i)})),H}k("Dimensions must match!")}}return n},this.divide=function(t,n){var r=G(t),i=G(n);if(r&&i){if(t.unit||n.unit)return e.Unit.divide(t,n);if(n.equals(0))throw new ve("Division by zero not allowed!");return t.isConstant()&&n.isConstant()?(s=t.clone()).multiplier=s.multiplier.divide(n.multiplier):(n.invert(),s=e.multiply(t,n)),s}var s,a,o=j(t),l=j(n);return r&&l?n=n.map((function(n){return e.divide(t.clone(),n)})):o&&i?n=t.map((function(t){return e.divide(t,n.clone())})):o&&l?t.dimensions()===n.dimensions()?n=n.map((function(n,r){return e.divide(t.elements[--r],n)})):e.error("Cannot divide vectors. Dimensions do not match!"):(s=X(t),o=X(n),s&&i?(a=new Ge,t.eachElement((function(t,r,i){a.set(r,i,e.divide(t,n.clone()))})),n=a):r&&o?(a=new Ge,n.eachElement((function(n,r,i){a.set(r,i,e.divide(t.clone(),n))})),n=a):s&&o?(a=new Ge,t.rows()===n.rows()&&t.cols()===n.cols()?(t.eachElement((function(t,r,i){a.set(r,i,e.divide(t,n.elements[r][i]))})),n=a):e.error("Dimensions do not match!")):s&&l&&(t.cols()===n.dimensions()?(a=new Ge,t.eachElement((function(t,r,i){a.set(r,i,e.divide(t,n.elements[r].clone()))})),n=a):e.error("Unable to divide matrix by vector."))),n},this.pow=function(t,n){var i,s=G(t),a=G(n);if(s&&a){if(t.unit||n.unit)return e.Unit.pow(t,n);if(t.group===x&&t.fname===L&&ae(n)){var o=t.multiplier.clone();return(d=e.pow(t.args[0],n)).multiplier=o,d}if(t.isInfinity||n.isInfinity){if(t.isInfinity&&n.isInfinity)throw new we("("+t+")^("+n+") is undefined!");if(t.isConstant()&&n.isInfinity){if(t.equals(0)){if(n.lessThan(0))throw new we("0^Infinity is undefined!");return new ze(0)}if(t.equals(1))throw new we("1^"+n.toString()+" is undefined!");if(n.lessThan(0))return new ze(0);if(!t.lessThan(0))return ze.infinity()}if(t.isInfinity&&n.isConstant()){if(n.equals(0))throw new we(t+"^0 is undefined!");return n.lessThan(0)?new ze(0):e.multiply(ze.infinity(),e.pow(new ze(t.sign()),n.clone()))}}var c=t.equals(0),h=n.equals(0);if(c&&h)throw new we("0^0 is undefined!");if(c&&n.isConstant()&&n.multiplier.greaterThan(0))return new ze(0);if(h)return new ze(1);var p,f=n.isConstant(),m=t.isConstant(),d=n.isInteger();if(o=t.multiplier,c=t.clone(),m&&f&&t.equals(0)&&n.lessThan(0))throw new we("Division by zero is not allowed!");if(l.PARSE2NUMBER&&m&&f&&t.sign()<0&&oe(n)){var g=Math.PI*n;return I=new ze(Math.cos(g)),R=e.multiply(ze.imaginary(),new ze(Math.sin(g))),e.add(I,R)}if(l.PARSE2NUMBER&&t.isImaginary()&&f&&$(n)&&!n.lessThan(0)&&(I=t.realpart(),R=t.imagpart(),I.isConstant("all")&&R.isConstant("all")))return h=l.USE_BIG?ze(r.atan2(C.multiplier.toDecimal(),P.multiplier.toDecimal()).times(n.toString())):Math.atan2(R,I)*n,p=new ze(h),P=e.pow(ze.hyp(I,R),n),g=e.multiply(P.clone(),e.trig.cos(p.clone())),h=e.multiply(P,e.trig.sin(p)),e.add(g,e.multiply(ze.imaginary(),h));if(c.toUnitMultiplier(),c.group!==x||c.fname!==A||f?(q=o.sign(),oe(n)&&q<0&&(c.negate(),(c=e.symfunction(T,[c])).negate()),c.multiplyPower(n)):((D=c.args[0]).multiplyPower(new ze(.5)),D.multiplier.multiply(c.multiplier),D.multiplyPower(n),c=D),m&&f&&l.PARSE2NUMBER)q<0&&(t.negate(),M=n.multiplier.den.equals(2)?new ze(l.IMAGINARY):$(n.multiplier)?ae(n.multiplier)?new ze(1):new ze(-1):ae(n.multiplier.den)?e.pow(e.symfunction(T,[new ze(q)]),n.clone()):new ze(Math.pow(q,n.multiplier.num))),c=new ze(Math.pow(t.multiplier.toDecimal(),n.multiplier.toDecimal())),M&&(c=e.multiply(c,M));else if(d&&!o.equals(1)){if(n.abs().gt(l.MAX_EXP))return n.sign()<0?new ze(0):ze.infinity();var w=n.multiplier.toDecimal(),M=Math.sign(w);w=Math.abs(w);var _=new Ue(1);_.num=o.num.pow(w),_.den=o.den.pow(w),M<0&&_.invert(),c.multiplier=c.multiplier.multiply(_)}else{var C,R,N,P,I,O,k,D,z,B,F,q=t.sign();n.isConstant()&&t.isConstant()&&!n.multiplier.den.equals(1)&&q<0?c=n.multiplier.den.equals(2)?(C=new ze(l.IMAGINARY),t.negate(),n.lessThan(0)&&(C.negate(),n.negate()),e.multiply(e.pow(t,n),C)):((N=t.clone()).multiplier.negate(),c=e.pow(e.symfunction(T,[new ze(q)]),n.clone()),_=e.pow(new ze(N.multiplier.num),n.clone()),C=e.pow(new ze(N.multiplier.den),n.clone()),P=e.divide(_,C),e.multiply(c,P)):l.PARSE2NUMBER&&n.isImaginary()?(I=n.realpart(),R=n.imagpart(),N=t.clone().toLinear(),P=e.pow(N.clone(),I),z=xe(N.clone()),I=u.cos(e.multiply(R.clone(),z)),z=e.multiply(u.sin(e.multiply(R,xe(N))),ze.imaginary()),c=e.multiply(P,e.add(I,z)),c=e.expand(e.parse(c))):(O=ke(new ze((z=t.group===v&&q<0)?o.num:Math.abs(o.num)).setPower(n.clone())),k=ke(new ze(o.den).setPower(n.clone()).invert()),t.imaginary&&(d?(D=Math.sign(n),w=E(n),c=new ze(ae(B=w%4)?-1:l.IMAGINARY),(0===B||D<0&&1===B||0<D&&3===B)&&c.negate()):(d=n.multiplier.multiply(Ue.quick(1,2)),D=Math.pow(-1,d.num),c=ae(d.den)?new ze(-1).setPower(d,!0):new ze(D))),q<0&&!z&&c.negate(),f&&t.group!==b&&(q=ae(n.multiplier.den),z=ae(t.power),B=c.power.toDecimal(),f=ae(B),q&&z&&!f&&(c=1===B?e.symfunction(L,[c]):$(B)?e.multiply(e.symfunction(L,[c.clone().toLinear()]),c.clone().setPower(new Ue(B-1))):(w=c.power,e.symfunction(L,[c.toLinear()]).setPower(w)),l.POSITIVE_MULTIPLIERS&&c.fname===L&&(c=c.args[0]))),n.equals(2)&&c.group===S&&(F=new ze(1),c.each((function(t){F=e.multiply(F,e.pow(t,n))})),c=F))}return c=ke(c),(c=O&&k?e.multiply(c,function(e){if(e.group===y){var t=e.value,n=Oe(t)[0];if(!n)return U("Unable to compute prime factors. This should not happen. Please review and report."),e;if((t=new Ue(Math.log(t)/Math.log(n)).multiply(e.power)).den>e.power.den)return e;e=$(t)?ze(Math.pow(n,t)):new ze(n).setPower(t)}return e}(e.multiply(O,k))):c).fname===A?(k=((O=c.group===b)?c.power.multiplier:c.power).toString(),ae(k)&&(O=O?e.divide(c.power,new ze(2)):new ze(c.power.divide(new Ue(2))),o=c.multiplier,(c=e.pow(c.args[0],O)).multiplier=c.multiplier.multiply(o))):!l.IGNORE_E&&c.isE()&&c.group===b&&c.power.contains("pi")&&c.power.contains(l.IMAGINARY)&&n.group===S&&(p=n.stripVar(l.IMAGINARY),c=e.add(u.cos(p),e.multiply(ze.imaginary(),u.sin(p)))),c}return j(t)&&a?t=t.map((function(t){return e.pow(t,n.clone())})):X(t)&&a?(i=new Ge,t.eachElement((function(t,r,s){i.set(r,s,e.pow(t,n.clone()))})),t=i):s&&X(n)&&(i=new Ge,n.eachElement((function(n,r,s){i.set(r,s,e.pow(t.clone(),n))})),t=i),t},this.comma=function(e,t){return(e=e instanceof s?e:s.create(e)).append(t),e},this.mod=I,this.slice=function(e,t){return new i(e,t)},this.equals=function(e,t){return e.group===w||e.isLinear()||k("Cannot set equality for "+e.toString()),P[e.value]=t.clone(),t},this.percent=function(t){return e.divide(t,new ze(100))},this.assign=function(t,n){if(t instanceof s&&n instanceof s)return t.elements.map((function(t,r){return e.assign(t,n.elements[r])})),He.fromArray(n.elements);if(t.parent){var r=t.parent;return r.elements[r.getter]=n,delete r.getter,r}if(t.group!==w)throw new Ce("Cannot complete operation. Incorrect LH value for "+t);return P[t.value]=n},this.function_assign=function(e,t){var n=e.elements.pop();return re(n,e.elements,t)},this.eq=function(e,t){return De(e.equals(t))},this.gt=function(e,t){return De(e.gt(t))},this.gte=function(e,t){return De(e.gte(t))},this.lt=function(e,t){return De(e.lt(t))},this.lte=function(e,t){return De(e.lte(t))},this.factorial=function(e){return this.symfunction(C,[e])},this.dfactorial=function(e){return this.symfunction(R,[e])}}l.FUNCTION_MODULES.push(Pe),le(Pe),Math.sign=Math.sign||function(e){return 0==(e=+e)||isNaN(e)?e:0<e?1:-1},Math.cosh=Math.cosh||function(e){return((e=Math.exp(e))+1/e)/2},Math.sech=Math.sech||function(e){return 1/Math.cosh(e)},Math.csch=Math.csch||function(e){return 1/Math.sinh(e)},Math.coth=Math.coth||function(e){return 1/Math.tanh(e)},Math.sinh=Math.sinh||function(e){return((e=Math.exp(e))-1/e)/2},Math.tanh=Math.tanh||function(e){return e===1/0?1:e===-1/0?-1:((e=Math.exp(2*e))-1)/(e+1)},Math.asinh=Math.asinh||function(e){return e===-1/0?e:Math.log(e+Math.sqrt(e*e+1))},Math.acosh=Math.acosh||function(e){return Math.log(e+Math.sqrt(e*e-1))},Math.atanh=Math.atanh||function(e){return Math.log((1+e)/(1-e))/2},Math.log10=Math.log10||function(e){return Math.log(e)*Math.LOG10E},Math.trunc=Math.trunc||function(e){return isNaN(e)?NaN:0<e?Math.floor(e):Math.ceil(e)},Oe(314146179365),ke.getExpression=function(e,t){return"last"!==e&&e||(e=N.length),(e=N[(e="first"===e?1:e)-1])&&new ke(e)},(ke.prototype={text:function(e,t){return t=t||19,e=e||"decimals",this.symbol.text_?this.symbol.text_(e):Ie(this.symbol,e,void 0,t)},latex:function(e){return this.symbol.latex?this.symbol.latex(e):qe.latex(this.symbol,e)},valueOf:function(){return this.symbol.valueOf()},evaluate:function(){if(j(this.symbol)&&0===this.symbol.dimensions())return this;var e,n=arguments[0],r=1;"string"==typeof n?e="%"===n.charAt(0)?ke.getExpression(n.substr(1)).text():n:n instanceof ke||G(n)?e=n.text():(e=this.symbol.text(),r--);var i=arguments[r]||{};return new ke(ce("PARSE2NUMBER",(function(){return t.parse(e,i)}),!0))},buildFunction:function(e){return We.build(this.symbol,e)},isNumber:function(){return Y(this.symbol)},isInfinity:function(){return Math.abs(this.symbol.multiplier)===1/0},isImaginary:function(){return pe(t.parse(this.symbol)).isImaginary()},variables:function(){return V(this.symbol)},toString:function(){try{return J(this.symbol)?"["+this.symbol.toString()+"]":this.symbol.toString()}catch(e){return""}},toDecimal:function(e){return l.precision=e,e=Ie(this.symbol,"decimals"),l.precision=void 0,e},isFraction:function(){return H(this.symbol)},isPolynomial:function(){return this.symbol.isPoly()},sub:function(e,n){return new ke(this.symbol.sub(t.parse(e),t.parse(n)))},operation:function(e,n){return h(n)?n=n.symbol:G(n)||(n=t.parse(n)),new ke(t[e](this.symbol.clone(),n.clone()))},add:function(e){return this.operation("add",e)},subtract:function(e){return this.operation("subtract",e)},multiply:function(e){return this.operation("multiply",e)},divide:function(e){return this.operation("divide",e)},pow:function(e){return this.operation("pow",e)},expand:function(){return new ke(t.expand(this.symbol))},each:function(e,t){if(this.symbol.each)this.symbol.each(e,t);else if(J(this.symbol))for(t=0;t<this.symbol.length;t++)e.call(this.symbol,this.symbol[t],t);else e.call(this.symbol)},eq:function(e){G(e)||(e=t.parse(e));try{return t.subtract(this.symbol.clone(),e).equals(0)}catch(e){return!1}},lt:function(e){G(e)||(e=t.parse(e));try{return pe(t.subtract(this.symbol.clone(),e)).lessThan(0)}catch(e){return!1}},gt:function(e){G(e)||(e=t.parse(e));try{return pe(t.subtract(this.symbol.clone(),e)).greaterThan(0)}catch(e){return!1}},gte:function(e){return this.gt(e)||this.eq(e)},lte:function(e){return this.lt(e)||this.eq(e)},numerator:function(){return new ke(this.symbol.getNum())},denominator:function(){return new ke(this.symbol.getDenom())},hasFunction:function(e){return this.symbol.containsFunction(e)},contains:function(e){return this.symbol.contains(e)}}).toTeX=ke.prototype.latex,De.prototype={fromScientific:function(e){return e=String(e).toLowerCase().split("e"),this.coeff=e[0],this.exponent=e[1],this},convert:function(e){var t=(n=e.split("."))[0]||"",n=(e=n[1]||"",t=De.removeLeadingZeroes(t),e=De.removeTrailingZeroes(e),t.length);return t+=e,e=De.leadingZeroes(t).length,this.exponent=n-(e+1),t=De.removeLeadingZeroes(t),this.coeff=t.charAt(0)+"."+(t.substr(1,t.length)||"0"),this},round:function(e){var t,n,r=this.copy();return 0===(e=Number(e))?r.coeff=r.coeff.charAt(0):(t=this.coeff.substring(0,e+1),e=(n=this.coeff.substring(e+1,e+3)).charAt(0),4<n.charAt(1)&&e++,r.coeff=t+e),r},copy:function(){var e=new De(0);return e.coeff=this.coeff,e.exponent=this.exponent,e.sign=this.sign,e},toString:function(e){return e=void 0===e?this.coeff:De.round(this.coeff,e),e=0===this.exponent&&l.SCIENTIFIC_IGNORE_INTS?this.coeff:e+"e"+this.exponent,(-1===this.sign?"-":"")+e}},De.isScientific=function(e){return/\d+\.?\d*e[\+\-]*\d+/i.test(e)},De.leadingZeroes=function(e){return(e=e.match(/^(0*).*$/))?e[1]:""},De.removeLeadingZeroes=function(e){return(e=e.match(/^0*(.*)$/))?e[1]:""},De.removeTrailingZeroes=function(e){var t=e.match(/0*$/);return t?e.substring(0,e.length-t[0].length):""},De.round=function(e,t){return e=se(e,t),0<(t-=String(e).split(".").pop().length)&&(e+=new Array(1+t).join(0)),e},De.prototype={fromScientific:function(e){return e=String(e).toLowerCase().split("e"),this.coeff=e[0],this.exponent=e[1],this},convert:function(e){var t=(i=e.split("."))[0]||"",n=i[1]||"",r=(t=De.removeLeadingZeroes(t),n=De.removeTrailingZeroes(n),t.length),i=(e=t+n,De.leadingZeroes(e).length);return this.exponent=r-(i+1),e=De.removeLeadingZeroes(e),this.coeff=e.charAt(0)+"."+(e.substr(1,e.length)||"0"),e=this.coeff.split(".")[1]||"",this.decp="0"===e?0:e.length,this.dec=n,this.wholes=t,this},round:function(e){var t,n,r=this.copy();return 0===(e=Number(e))?r.coeff=r.coeff.charAt(0):(t=this.coeff.substring(0,e+1),e=(n=this.coeff.substring(e+1,e+3)).charAt(0),4<n.charAt(1)&&e++,r.coeff=t+e),r},copy:function(){var e=new De(0);return e.coeff=this.coeff,e.exponent=this.exponent,e.sign=this.sign,e},toString:function(e){var t;return t=l.SCIENTIFIC_IGNORE_ZERO_EXPONENTS&&0===this.exponent&&this.decp<e?0===this.decp?this.wholes:this.coeff:(t=void 0===e?this.coeff:De.round(this.coeff,Math.min(e,this.decp||1)),0===this.exponent?t:t+"e"+this.exponent),(-1===this.sign?"-":"")+t}},De.isScientific=function(e){return/\d+\.?\d*e[\+\-]*\d+/i.test(e)},De.leadingZeroes=function(e){return(e=e.match(/^(0*).*$/))?e[1]:""},De.removeLeadingZeroes=function(e){return(e=e.match(/^0*(.*)$/))?e[1]:""},De.removeTrailingZeroes=function(e){var t=e.match(/0*$/);return t?e.substring(0,e.length-t[0].length):""},Ue.create=function(e){if(e instanceof Ue)return e;var t="-"===(e=e.toString()).charAt(0);return e=new Ue(e=t?e.substr(1,e.length-1):e),t&&e.negate(),e},Ue.isFrac=function(e){return e instanceof Ue},Ue.quick=function(e,t){var r=new Ue;return r.num=new n(e),r.den=new n(t),r},Ue.simple=function(e){for(var t=String(B(e)).split("."),n=(e=t.join(""),1),r=(t[1]||"").length,i=0;i<r;i++)n+="0";return Ue.quick(e,n).simplify()},Ue.prototype={multiply:function(e){if(this.isOne())return e.clone();if(e.isOne())return this.clone();var t=this.clone();return t.num=t.num.multiply(e.num),t.den=t.den.multiply(e.den),t.simplify()},divide:function(e){if(e.equals(0))throw new ve("Division by zero not allowed!");return this.clone().multiply(e.clone().invert()).simplify()},subtract:function(e){return this.clone().add(e.clone().neg())},neg:function(){return this.num=this.num.multiply(-1),this},add:function(e){var t=this.den,n=e.den,r=this.clone(),i=r.num;return e=e.num,t.equals(n)?r.num=i.add(e):(r.num=i.multiply(n).add(e.multiply(t)),r.den=t.multiply(n)),r.simplify()},mod:function(e){var t=this.clone();return e=e.clone(),t.num=t.num.multiply(e.den),t.den=t.den.multiply(e.den),e.num=e.num.multiply(this.den),e.den=e.den.multiply(this.den),t.num=t.num.mod(e.num),t.simplify()},simplify:function(){var e=n.gcd(this.num,this.den);return this.num=this.num.divide(e),this.den=this.den.divide(e),this},clone:function(){var e=new Ue;return e.num=new n(this.num),e.den=new n(this.den),e},decimal:function(e){var t=this.num.isNegative()?"-":"";if(this.num.equals(this.den))return"1";e=e||l.PRECISION,e++;for(var n=[],r=this.num.abs(),i=this.den,s=0;s<e;s++){var a=r.divide(i),o=r.subtract(a.multiply(i));if(n.push(a),o.equals(0))break;r=o.times(10)}var u=n.shift();if(0===n.length)return t+u.toString();if(s===e){var c=[];for(s=0;s<2;s++)c.unshift(n.pop());n.push(Math.round(c.join(".")))}return t+(u.toString()+".")+n.join("")},toDecimal:function(e){return(e=e||l.PRECISION)?this.decimal(e):this.num/this.den},qcompare:function(e){return[this.num.multiply(e.den),e.num.multiply(this.den)]},equals:function(e){return isNaN(e)||(e=new Ue(e)),(e=this.qcompare(e))[0].equals(e[1])},absEquals:function(e){return isNaN(e)||(e=new Ue(e)),(e=this.qcompare(e))[0].abs().equals(e[1])},greaterThan:function(e){return isNaN(e)||(e=new Ue(e)),(e=this.qcompare(e))[0].gt(e[1])},gte:function(e){return this.greaterThan(e)||this.equals(e)},lte:function(e){return this.lessThan(e)||this.equals(e)},lessThan:function(e){return isNaN(e)||(e=new Ue(e)),(e=this.qcompare(e))[0].lt(e[1])},isInteger:function(){return this.den.equals(1)},negate:function(){return this.num=this.num.multiply(-1),this},invert:function(){var e,t=this.den;return this.num.equals(0)||(e=this.num.isNegative(),this.den=this.num.abs(),this.num=t,e&&(this.num=this.num.multiply(-1))),this},isOne:function(){return this.num.equals(1)&&this.den.equals(1)},sign:function(){return this.num.isNegative()?-1:1},abs:function(){return this.num=this.num.abs(),this},gcd:function(e){return Ue.quick(n.gcd(e.num,this.num),n.lcm(e.den,this.den))},toString:function(){return this.den.equals(1)?this.num.toString():this.num.toString()+"/"+this.den.toString()},valueOf:function(){return l.USE_BIG?new r(this.num.toString()).div(new r(this.den.toString())):this.num/this.den},isNegative:function(){return this.toDecimal()<0}},ze.imaginary=function(){var e=new ze(l.IMAGINARY);return e.imaginary=!0,e},ze.infinity=function(e){var t=new ze("Infinity");return-1===e&&t.negate(),t},ze.shell=function(e,t){return(t=new ze(t)).group=e,t.symbols={},t.length=0,t},ze.unwrapSQRT=function(e,t){var n,r=e.power;return e.fname===A&&(e.isLinear()||t)&&((n=e.args[0].clone()).power=n.power.multiply(new Ue(.5)),n.multiplier=n.multiplier.multiply(e.multiplier),e=n,t&&(e.power=r.multiply(new Ue(.5)))),e},ze.hyp=function(e,n){return e=e||new ze(0),n=n||new ze(0),t.sqrt(t.add(t.pow(e.clone(),new ze(2)),t.pow(n.clone(),new ze(2))))},ze.toPolarFormArray=function(e){var n=e.realpart();return e=e.imagpart(),[ze.hyp(n,e),n.equals(0)?t.parse("pi/2"):t.trig.atan(t.divide(e,n))]},ze.unwrapPARENS=function(e){if(""!==e.fname)return e;var t=e.args[0];return t.power=t.power.multiply(e.power),t.multiplier=t.multiplier.multiply(e.multiplier),""===e.fname?ze.unwrapPARENS(t):t},ze.create=function(e,n){return t.parse("("+e+")^("+(n=void 0===n?1:n)+")")},ze.prototype={getNth:function(e){var n=pe(t.pow(t.parse(this.multiplier),t.parse(e).invert())),r=t.parse(se(n));return pe(t.pow(r,t.parse(e))).equals(t.parse(this.multiplier))?r:n},isToNth:function(e){var n,r=this.getNth(e);return r=$(r),this.group===S?(n=!0,this.each((function(t){t.isToNth(e)||(n=!1)}))):n=this.group===v||$(t.divide(t.parse(this.power),t.parse(e))),r&&n},isSquare:function(){return this.isToNth(2)},isCube:function(){return this.isToNth(3)},isSimple:function(){return this.power.equals(1)&&this.multiplier.equals(1)},powSimp:function(){if(this.group!==S)return this.clone();var e=[],n=this.multiplier.sign();this.each((function(t){if(t=t.power,G(t)||t.equals(1))return this.clone();e.push(t)}));var r,i=new Ue(f(e)),s=(n=this.multiplier.sign(),this.multiplier.clone().abs()),a=Pe.ifactor(s),o=new Ue(1),l=new Ue(1);for(r in a){var u=new Ue(a[r]);u.lessThan(i)||(u=u.divide(i).subtract(new Ue(1)),l=l.multiply(new Ue(r))),o=o.multiply(t.parse(K(r)+"^"+K(u)).multiplier)}var c=new ze(l);return this.each((function(e){(e=e.clone()).power=e.power.divide(i),c=t.multiply(c,e)})),(s=t.symfunction(T,[c])).power=i,s.multiplier=n<0?o.negate():o,s},equals:function(e){return G(e)||(e=new ze(e)),this.value===e.value&&this.power.equals(e.power)&&this.multiplier.equals(e.multiplier)&&this.group===e.group},abs:function(){var e=this.clone();return e.multiplier.abs(),e},gt:function(e){return G(e)||(e=new ze(e)),this.isConstant()&&e.isConstant()&&this.multiplier.greaterThan(e.multiplier)},gte:function(e){return G(e)||(e=new ze(e)),this.equals(e)||this.isConstant()&&e.isConstant()&&this.multiplier.greaterThan(e.multiplier)},lt:function(e){return G(e)||(e=new ze(e)),this.isConstant()&&e.isConstant()&&this.multiplier.lessThan(e.multiplier)},lte:function(e){return G(e)||(e=new ze(e)),this.equals(e)||this.isConstant()&&e.isConstant()&&this.multiplier.lessThan(e.multiplier)},isPoly:function(e){var t=this.group,n=this.power;if(!$(n)||n<0)return!1;if(t===v||t===w||this.isConstant(!0))return!0;if(n=V(this),t===S&&1===n.length){var r=n[0];if(!r)return!0;for(s in this.symbols){var i=this.symbols[s];if(i.group===x&&!i.args[0].isConstant())return!1;if(!i.contains(r)&&!i.isConstant(!0))return!1}return!0}if(this.isComposite()||t===S&&e){if(!e&&1<n.length)return!1;for(var s in this.symbols)if(!this.symbols[s].isPoly(e))return!1;return!0}return!1},stripVar:function(e,n){var r;return this.group!==M&&this.group!==w||this.value!==e?this.group===S&&this.isLinear()?(r=new ze(1),this.each((function(n){n.contains(e,!0)||(r=t.multiply(r,n.clone()))})),r.multiplier=r.multiplier.multiply(this.multiplier)):this.group!==_||this.isLinear()?this.group===_&&this.isLinear()?(r=new ze(0),this.each((function(n){n.contains(e)||((n=n.clone()).multiplier=n.multiplier.multiply(this.multiplier),r=t.add(r,n))})),r.equals(0)&&(r=new ze(this.multiplier))):r=this.group===b&&this.power.contains(e,!0)||this.group===x&&this.contains(e)?new ze(this.multiplier):this.clone():r=new ze(this.multiplier):r=new ze(n?0:this.multiplier),r},toArray:function(e,n){n=n||{arr:[],add:function(e,n){var r=this.arr[n];this.arr[n]=r?t.add(r,e):e}};var r=this.group;if(r===w&&this.contains(e))n.add(new ze(this.multiplier),this.power);else if(r===S){var i=this.stripVar(e),s=(s=t.divide(this.clone(),i.clone())).isConstant()?0:s.power;n.add(i,s)}else if(r===M&&this.value===e)this.each((function(t,r){n.add(t.stripVar(e),r)}));else if(r===_)this.each((function(t){t.toArray(e,n)}));else{if(this.contains(e))throw new Me("Cannot convert to array! Exiting");n.add(this.clone(),0)}n=n.arr;for(var a=0;a<n.length;a++)n[a]||(n[a]=new ze(0));return n},hasFunc:function(e){var t=this.group===x||this.group===b;if(t&&!e||t&&this.contains(e))return!0;if(this.symbols)for(var n in this.symbols)if(this.symbols[n].hasFunc(e))return!0;return!1},sub:function(e,n){e=G(e)?e.clone():t.parse(e),n=G(n)?n.clone():t.parse(n),e.group!==v&&e.group!==y||k("Cannot substitute a number. Must be a variable");var r,i=!1,s=e.multiplier.equals(1),a=this.multiplier.clone();if(this.value===e.value&&(this.group!==M&&e.group!==M||this.group===M&&e.group===M))(s||e.multiplier.equals(this.multiplier))&&(e.isLinear()?r=n:e.power.equals(this.power)&&(r=n,i=!0),e.multiplier.equals(this.multiplier)&&(a=new Ue(1)));else if(this.group===S||this.previousGroup===S)r=new ze(1),this.each((function(i){i=t.parse(i.sub(e,n)),r=t.multiply(r,i)}));else if(this.isComposite()){var o=this.clone();if(e.isComposite()&&o.isComposite()&&o.isLinear()&&e.isLinear()){var l,u=function(e,t){for(var n in e.symbols)if((n=e.symbols[n]).isComposite()&&u(n,t)||n.equals(t))return!0;return!1};for(l in e.symbols)if(!u(o,e.symbols[l]))return o.clone();r=t.add(t.subtract(o.clone(),e),n)}else r=new ze(0),o.each((function(i){r=t.add(r,i.sub(e,n))}))}else if(this.group===b)r=t.parse(this.value).sub(e,n);else if(this.group===x){for(var c=[],h=0;h<this.args.length;h++){var p=this.args[h];G(p)||(p=t.parse(p)),c.push(p.sub(e,n))}r=t.symfunction(this.fname,c)}return r?(i||(i=this.group===b?this.power.sub(e,n):t.parse(this.power),r=t.pow(r,i)),r.multiplier=r.multiplier.multiply(a),r):this.clone()},isMonomial:function(){if(this.group===w)return!0;if(this.group!==S)return!1;for(var e in this.symbols)if(this.symbols[e].group!==w)return!1;return!0},isPi:function(){return this.group===w&&"pi"===this.value},sign:function(){return this.multiplier.sign()},isE:function(){return"e"===this.value},isSQRT:function(){return this.fname===A},isConstant:function(e,t){if(t&&this.group===S)for(var n in this.symbols)if(this.symbols[n].isConstant(!0))return!0;if("functions"===e&&this.isComposite()){var r=!0;return this.each((function(n){n.isConstant(e,t)||(r=!1)}),!0),r}if("all"===e&&(this.isPi()||this.isE()))return!0;if(e&&this.group===x){for(var i=0;i<this.args.length;i++)if(!this.args[i].isConstant(e))return!1;return!0}return e?Y(this):this.value===E},isImaginary:function(){if(this.imaginary)return!0;if(this.symbols)for(var e in this.symbols)if(this.symbols[e].isImaginary())return!0;return!1},realpart:function(){if(this.isConstant())return this.clone();if(this.imaginary)return new ze(0);if(this.isComposite()){var e=new ze(0);return this.each((function(n){e=t.add(e,n.realpart())})),e}return this.isImaginary()?new ze(0):this.clone()},imagpart:function(){if(this.group===w&&this.isImaginary())return new ze(this.multiplier);if(this.isComposite()){var e=new ze(0);return this.each((function(n){e=t.add(e,n.imagpart())})),e}return this.group===S?this.stripVar(l.IMAGINARY):new ze(0)},isInteger:function(){return this.isConstant()&&this.multiplier.isInteger()},isLinear:function(e){if(e){if(this.isConstant())return!0;if(this.group===w)return this.value!==e||this.power.equals(1);if(this.isComposite()&&this.power.equals(1)){for(var t in this.symbols)if(!this.symbols[t].isLinear(e))return!1;return!0}return!(this.group!==S||!this.symbols[e])&&this.symbols[e].isLinear(e)}return this.power.equals(1)},containsFunction:function(e){if("string"==typeof e&&(e=[e]),this.group===x&&-1!==e.indexOf(this.fname))return!0;if(this.symbols)for(var t in this.symbols)if(this.symbols[t].containsFunction(e))return!0;return!1},multiplyPower:function(e){if(this.group===v&&this.multiplier.equals(1))return this;var n,r=this.power;return this.group!==b&&e.group===v?(n=e.multiplier,this.group!==v||n.isInteger()||this.convert(y),this.power=r.equals(1)?n.clone():r.multiply(n),this.group===y&&$(this.power)&&(this.value=Math.pow(this.value,this.power),this.toLinear(),this.convert(v))):(this.group!==b&&(r=new ze(r),this.convert(b)),this.power=t.multiply(r,e)),this},setPower:function(e,t){return this.group===v&&this.multiplier.equals(1)||(this.group!==b||G(e)?(n=!1,G(e)&&(e.group===v?e=e.multiplier:n=!0),n=n?b:y,this.power=e,this.group===v&&n&&this.convert(n,t)):(this.group=this.previousGroup,delete this.previousGroup,this.group===v?(this.multiplier=new Ue(this.value),this.value=E):this.power=e)),this;var n},isInverse:function(){return this.group===b?this.power.multiplier.lessThan(0):this.power<0},clone:function(e){var t,n=e||new ze(0),r=["value","group","length","previousGroup","imaginary","fname","args","isInfinity","scientific"],i=r.length;if(this.symbols)for(var s in n.symbols={},this.symbols)n.symbols[s]=this.symbols[s].clone();for(t=0;t<i;t++)void 0!==this[r[t]]&&(n[r[t]]=this[r[t]]);return n.power=this.power.clone(),n.multiplier=this.multiplier.clone(),this.isConversion&&(n.isConversion=this.isConversion),this.isUnit&&(n.isUnit=this.isUnit),n},toUnitMultiplier:function(e){return this.multiplier.num=new n(this.multiplier.num.isNegative()&&e?-1:1),this.multiplier.den=new n(1),this},toLinear:function(){return this.power.equals(1)||this.setPower(new Ue(1)),this},each:function(e,t){if(this.symbols)for(var n in this.symbols){var r=this.symbols[n];if(r.group===M&&t)for(var i in r.symbols)e.call(n,r.symbols[i],i);else e.call(this,r,n)}else e.call(this,this,this.value)},valueOf:function(){return this.group===v?this.multiplier.valueOf():0===this.power?1:0===this.multiplier?0:Ie(this,"decimals")},contains:function(e,t){e=String(e);var n=this.group;if(this.value===e)return!0;if(this.symbols)for(var r in this.symbols)if(this.symbols[r].contains(e,t))return!0;if(n===x||this.previousGroup===x)for(var i=0;i<this.args.length;i++)if(this.args[i].contains(e,t))return!0;if(n===b){if(t&&this.power.contains(e,t))return!0;if(this.value===e)return!0}return this.value===e},negate:function(){return this.multiplier.negate(),this.group!==_&&this.group!==M||this.distributeMultiplier(),this},invert:function(e,t){return e||(this.multiplier=this.multiplier.invert()),G(this.power)?this.power.negate():this.group===S&&t?this.each((function(e){return e.invert()})):this.power&&this.group!==v&&this.power.negate(),this},distributeMultiplier:function(e){if(e=e?this.power.absEquals(1):this.power.equals(1),this.symbols&&e&&this.group!==S&&!this.multiplier.equals(1)){for(var t in this.symbols)(t=this.symbols[t]).multiplier=t.multiplier.multiply(this.multiplier),t.distributeMultiplier();this.toUnitMultiplier()}return this},distributeExponent:function(){if(!this.power.equals(1)){var e,n=this.power;for(e in this.symbols){var r=this.symbols[e];r.group===b?r.power=t.multiply(r.power,new ze(n)):this.symbols[e].power=this.symbols[e].power.multiply(n)}this.toLinear()}return this},convert:function(e,t){var n;return x<e?(n=this.clone(),this.symbols={},(e===S?n:this).toUnitMultiplier(),this.group===x&&(n.args=this.args,delete this.args,delete this.fname),this.isImgSymbol&&delete this.isImgSymbol,this.toLinear(),this.symbols[n.keyForGroup(e)]=n,this.group=e,this.length=1):e===b?this.group===v&&this.multiplier.equals(1)||(this.group!==b&&(this.previousGroup=this.group),this.group===v?(this.value=this.multiplier.num.toString(),this.toUnitMultiplier()):this.value=Ie(this,"hash"),this.group=b):e===v?(n=this.multiplier.toDecimal(),this.symbols&&(this.symbols=void 0),new ze(this.group===y?n*Math.pow(this.value,this.power):n).clone(this)):e===y&&this.group===v&&(this.value=t?this.multiplier.num.toString():Math.abs(this.multiplier.num.toString()),this.toUnitMultiplier(!t),this.group=y),this},insert:function(e,n){var r,i;return G(e)||k("Object "+e+" is not of type Symbol!"),this.symbols&&(i=this.group,x<i&&(i=(r=e.keyForGroup(i))in this.symbols&&this.symbols[r],"add"===n?(n=r,i?(this.symbols[n]=t.add(i,e),this.symbols[n].multiplier.equals(0)&&(delete this.symbols[n],this.length--,0===this.length&&(this.convert(v),this.multiplier=new Ue(0)))):(this.symbols[r]=e,this.length++)):(e.group===y&&$(e.power)&&e.convert(v),e.group!==b?(this.multiplier=this.multiplier.multiply(e.multiplier),e.toUnitMultiplier()):(e.parens=e.multiplier.lessThan(0),this.multiplier=this.multiplier.multiply(e.multiplier.clone().abs()),e.toUnitMultiplier(!0)),i&&((e=t.multiply(ue(this.symbols,r),e)).isConstant()&&(this.multiplier=this.multiplier.multiply(e.multiplier),e=new ze(1)),this.length--),e.isOne(!0)?e.multiplier.lessThan(0)&&this.negate():(this.symbols[r]=e,this.length++)),0===this.length&&this.convert(v),this.group!==_&&this.group!==S||this.updateHash())),this},attach:function(e){if(J(e)){for(var t=0;t<e.length;t++)this.insert(e[t],"add");return this}return this.insert(e,"add")},combine:function(e){if(J(e)){for(var t=0;t<e.length;t++)this.insert(e[t],"multiply");return this}return this.insert(e,"multiply")},updateHash:function(){if(this.group!==v)if(this.group===x){for(var e="",t=this.args,n=this.fname===T,r=0;r<t.length;r++)e+=(0===r?"":",")+Ie(t[r]);var i=n?"":this.fname;this.value=i+(n?e:K(e))}else this.group!==w&&this.group!==M&&(this.value=Ie(this,"hash"))},keyForGroup:function(e){var t,n=this.group;if(n===v)t=this.value;else if(n===w||n===y)t=e===M?this.power.toDecimal():this.value;else if(n===x)t=e===M?this.power.toDecimal():Ie(this,"hash");else{if(n===M)return e===S?Ie(this,"hash"):e===_?this.power.equals(1)?this.value:K(Ie(this,"hash"))+l.POWER_OPERATOR+this.power.toDecimal():e===M?this.power.toString():this.value;n===_?(e===_&&(t=Ie(this,"hash")),t=e===M?this.power.toDecimal():this.value):n===S?t=e===M?this.power.toDecimal():Ie(this,"hash"):n===b&&(t=e===M?Ie(this.power):Ie(this,"hash"))}return t},collectSymbols:function(e,t,n,r){var i=[];if(this.symbols)for(var s in this.symbols)s=this.symbols[s],!r||s.group!==M&&s.group!==_?i.push(e?e(s,t):s):i=i.concat(s.collectSymbols());else i.push(this);return i.sort(n=null===n?void 0:n)},latex:function(e){return qe.latex(this,e)},text:function(e){return Ie(this,e)},isOne:function(e){return this.group===v?this.multiplier[e?"absEquals":"equals"](1):this.power.equals(0)},isComposite:function(){var e=this.group,t=this.previousGroup;return e===_||e===M||t===M||t===_},isCombination:function(){var e=this.group,t=this.previousGroup;return e===S||t===S},lessThan:function(e){return this.multiplier.lessThan(e)},greaterThan:function(e){return G(e)||(e=new ze(e)),!(!this.isConstant(!0)||!e.isConstant(!0))&&this.multiplier.greaterThan(e.multiplier)},getDenom:function(){var e=this.clone();if((e=this.group===S&&this.power.lessThan(0)?t.expand(e):e).power.lessThan(0)){var n,r=t.parse(e.multiplier.den);(n=e.toUnitMultiplier()).power.negate(),n=t.multiply(r,n)}else if(e.group===S)for(var i in n=t.parse(e.multiplier.den),e.symbols)e.symbols[i].power<0&&(n=t.multiply(n,e.symbols[i].clone().invert()));else n=t.parse(e.multiplier.den);return n},getNum:function(){var e,n=this.clone();return(n=n.group===S&&n.power.lessThan(0)?t.expand(n):n).power.greaterThan(0)&&n.group!==S?e=t.multiply(t.parse(n.multiplier.num),n.toUnitMultiplier()):n.group===S?(e=t.parse(n.multiplier.num),n.each((function(n){(0<n.power||n.group===b&&0<n.power.multiplier)&&(e=t.multiply(e,n.clone()))}))):e=t.parse(n.multiplier.num),e},toString:function(){return this.text()}};var Fe={convert:function(e,t){var n,r,i,s;return 0===e?s=[0,1]:e<1e-6||1e20<e?(n=this.quickConversion(Number(e)))[1]<=1e20?(i=e/(r=Math.abs(e)),(s=this.fullConversion(r.toFixed((n[1]+"").length-1)))[0]=s[0]*i):s=n:s=this.fullConversion(e),s},quickConversion:function(e){return function(e){De.isScientific(e)&&(e=B(e));var t=1===(n=(n="","-"===(e=(t="string"!=typeof(t=e)?t.toString():t).charAt(0))?(t=t.substr(1,t.length),n="-"):"+"===e&&(t=t.substr(1,t.length)),e={sign:n,value:t}).value.split(".")).length?n[0]:n[0]+n[1],n=n[1]?n[1].length:0;return n=`1${"0".repeat(n)}`,"0"!==t&&(t=t.replace(/^0+/,"")),[e.sign+t,n]}(e)},fullConversion:function(e){for(var t=!1,n=0,r=1,i=1,s=0,a=0,o=e;!t;){1e4<++a&&(t=!0);var l,u=n+(l=Math.floor(o))*i,c=r+l*s;(l=o-l)<1e-16&&(t=!0),o=1/l,n=i,r=s,i=u,s=c,(Math.abs(u/c-e)<1e-16||30<a)&&(t=!0)}return[u,c]}},qe={parser:function(){var e,t=["classes","setOperator","getOperators","getBrackets","tokenize","toRPN","tree","units"],n=new Be;for(e in n)-1===t.indexOf(e)&&delete n[e];return n.setOperator({precedence:8,operator:"\\",action:"slash",prefix:!0,postfix:!1,leftAssoc:!0,operation:function(e){return e}}),n.setOperator({precedence:8,operator:"\\,",action:"slash_comma",prefix:!0,postfix:!1,leftAssoc:!0,operation:function(e){return e}}),n.getBrackets()["{"].maps_to=void 0,n}(),space:"~",dot:" \\cdot ",latex:function(e,n){if((e=e.clone?e.clone():e)instanceof t.classes.Collection&&(e=e.elements),J(e)){for(var r=[],i=0;i<e.length;i++){var s=e[i];G(s)||(s=t.parse(s)),r.push(this.latex(s,n))}return this.brackets(r.join(", "),"square")}if(X(e)){var a="\\begin{pmatrix}\n";for(i=0;i<e.elements.length;i++){for(var o=[],l=e.elements[i],u=0;u<l.length;u++)o.push(this.latex(l[u],n));a+=o.join(" & "),i<e.elements.length-1&&(a+="\\\\\n")}return a+"\\end{pmatrix}"}if(j(e)){for(a="\\left[",i=0;i<e.elements.length;i++)a+=this.latex(e.elements[i],n)+" "+(i!==e.elements.length-1?",\\,":"");return a+"\\right]"}if(Z(e)){for(a="\\{",i=0;i<e.elements.length;i++)a+=this.latex(e.elements[i],n)+" "+(i!==e.elements.length-1?",\\,":"");return a+"\\}"}var c,h="decimal"===n||"decimals"===n,f=(e=e.clone()).power,m=p(f),d=e.multiplier.lessThan(0);if(e.group===y&&h)return String(e.multiplier.toDecimal()*Math.pow(e.value,e.power.toDecimal()));e.multiplier=e.multiplier.abs(),c=h?[String(e.multiplier.toDecimal()),""]:[e.multiplier.num,e.multiplier.den];var g,v=this.value(e,m,n,d);return m&&f.negate(),h?(g=G(f)?qe.latex(f,n):String(f.toDecimal()),"1"===String(g)&&(g="")):g=G(f)?this.latex(f,n):this.formatFrac(f,!0),(f=["",""])[m?1:0]=g,((d?"-":"")+this.set(c,v,f,e.group===S)).replace(/\+\-/gi,"-")},greek:{alpha:"\\alpha",beta:"\\beta",gamma:"\\gamma",delta:"\\delta",epsilon:"\\epsilon",zeta:"\\zeta",eta:"\\eta",theta:"\\theta",iota:"\\iota",kappa:"\\kappa",lambda:"\\lambda",mu:"\\mu",nu:"\\nu",xi:"\\xi",omnikron:"\\omnikron",pi:"\\pi",rho:"\\rho",sigma:"\\sigma",tau:"\\tau",upsilon:"\\upsilon",phi:"\\phi",chi:"\\chi",psi:"\\psi",omega:"\\omega",Gamma:"\\Gamma",Delta:"\\Delta",Epsilon:"\\Epsilon",Theta:"\\Theta",Lambda:"\\Lambda",Xi:"\\Xi",Pi:"\\Pi",Sigma:"\\Sigma",Phi:"\\Phi",Psi:"\\Psi",Omega:"\\Omega"},symbols:{arccos:"\\arccos",cos:"\\cos",csc:"\\csc",exp:"\\exp",ker:"\\ker",limsup:"\\limsup",min:"\\min",sinh:"\\sinh",arcsin:"\\arcsin",cosh:"\\cosh",deg:"\\deg",gcd:"\\gcd",lg:"\\lg",ln:"\\ln",Pr:"\\Pr",sqrt:"\\sqrt",sup:"\\sup",arctan:"\\arctan",cot:"\\cot",det:"\\det",hom:"\\hom",lim:"\\lim",log:"\\log",LN:"\\LN",sec:"\\sec",tan:"\\tan",arg:"\\arg",coth:"\\coth",dim:"\\dim",inf:"\\inf",liminf:"\\liminf",max:"\\max",sin:"\\sin",tanh:"\\tanh"},value:function(e,t,n,r){var i,s,a,o,u,c,h=e.group,f=e.previousGroup,m=["",""],d=t?1:0;if(e.isInfinity)m[d]="\\infty";else if(h===w||h===y||f===w||f===y||f===v){(F=this.formatSubscripts(e.value)).replace&&(F=F.replace(/(.+)_$/,"$1\\_"));var g=String(F).split("_");(t=this.greek[g[0]])&&(g[0]=t,F=g.join("_")),(e=this.symbols[g[0]])&&(g[0]=e,F=g.join("_")),m[d]=F}else if(h===x||f===x){for(var M,E,N,P,I=[],O=(g=e.fname,0);O<e.args.length;O++){var k,D="string"==typeof(k=e.args[O])?k:this.latex(k,n);I.push(D)}g===A?m[d]="\\sqrt"+this.braces(I.join(",")):g===L?m[d]=this.brackets(I.join(","),"abs"):g===T?m[d]=this.brackets(I.join(","),"parens"):"limit"===g?m[d]=" \\lim\\limits_{"+I[1]+" \\to "+I[2]+"} "+I[0]:"integrate"===g?m[d]="\\int"+this.braces(I[0])+this.braces("d"+I[1]):"defint"===g?m[d]="\\int\\limits_"+this.braces(I[1])+"^"+this.braces(I[2])+" "+I[0]+" d"+I[3]:g===C||g===R?((k=e.args[0]).power.equals(1)&&(k.isComposite()||k.isCombination())&&(I[0]=this.brackets(I[0])),m[d]=I[0]+(g===C?"!":"!!")):"floor"===g?m[d]="\\left \\lfloor"+this.braces(I[0])+"\\right \\rfloor":"ceil"===g?m[d]="\\left \\lceil"+this.braces(I[0])+"\\right \\rceil":g===l.LOG&&1<I.length?m[d]="\\mathrm"+this.braces(l.LOG)+"_"+this.braces(I[1])+this.brackets(I[0]):g===l.LOG10?m[d]="\\mathrm"+this.braces(l.LOG)+"_"+this.braces(10)+this.brackets(I[0]):"sum"===g?(M=I[0],E=I[1],N=I[2],P=I[3],m[d]="\\sum\\limits_{"+this.braces(E)+"="+this.braces(N)+"}^"+this.braces(P)+" "+this.braces(M)):"product"===g?(M=I[0],E=I[1],N=I[2],P=I[3],m[d]="\\prod\\limits_{"+this.braces(E)+"="+this.braces(N)+"}^"+this.braces(P)+" "+this.braces(M)):"nthroot"===g?m[d]="\\sqrt["+I[1]+"]"+this.braces(I[0]):"mod"===g?m[d]=I[0]+" \\bmod "+I[1]:"realpart"===g?m[d]="\\operatorname{Re}"+this.brackets(I[0]):"imagpart"===g?m[d]="\\operatorname{Im}"+this.brackets(I[0]):(g=""!==g?"\\mathrm"+this.braces(g.replace(/_/g,"\\_")):"",e.isConversion?m[d]=g+this.brackets(I.join(""),"parens"):m[d]=g+this.brackets(I.join(","),"parens"))}else if(e.isComposite()){var U=e.collectSymbols().sort(h===_||f===_?function(e,t){return t.group-e.group}:function(e,t){return e=G(e.power)?-1:e.power,(G(t.power)?-1:t.power)-e}),z=[],B=U.length;for(O=0;O<B;O++)z.push(qe.latex(U[O],n));var F=z.join("+");m[d]=e.isLinear()&&e.multiplier.equals(1)&&!r?F:this.brackets(F,"parens")}else h!==S&&f!==b&&f!==S||(h===S&&e.distributeExponent(),i=[],s=[],a=[],o=[],c=u=0,h=function(e,t,n){if(1<n&&0<t.length)for(var r=t.length,i=0;i<r;i++){var s=t[i],a=e[s];/^\\left\(.+\\right\)\^\{.+\}$/g.test(a)||/^\\left\(.+\\right\)$/g.test(a)||(e[s]=qe.brackets(a,"parens"))}return e},e.each((function(t){var r;p(t.power)?(r=qe.latex(t.invert(),n),c++,t.isComposite()&&(1!=e.multiplier.den&&1==Math.abs(t.power)&&(r=qe.brackets(r,"parens")),a.push(i.length)),i.push(r)):(r=qe.latex(t,n),u++,t.isComposite()&&(1!=e.multiplier.num&&1==Math.abs(t.power)&&(r=qe.brackets(r,"parens")),o.push(s.length)),s.push(r))})),h(s,o,u),m[0]=s.join(this.dot),h(i,a,c),m[1]=i.join(this.dot));return m},set:function(e,t,n,r){function i(e){return/^\\left\(.+\\right\)$/.test(e)}var s;n=n&&this.formatP(n),r&&(s=n[0],n[0]=""),t=this.merge(t,n);var a=e[0];return n=e[1],e=t[0],t=t[1],e&&1===Number(a)&&(a=""),1===Number(n)&&(n=""),e=this.join(a,e,i(e)?"":this.dot),t=this.join(n,t,i(t)?"":this.dot),e&&t?(t=this.frac(e,t),r&&s?this.brackets(t)+s:t):e},merge:function(e,t){for(var n=[],r=0;r<2;r++)n[r]=e[r]+t[r];return n},join:function(e,t,n){return e||t?e&&!t?e:t&&!e?t:e+n+t:""},formatSubscripts:function(e){for(var t=e.toString().split("_"),n="";1<t.length;)0<t.length&&(n="_"+this.braces(t.pop()+n));return t[0]+n},formatP:function(e){for(var t=0;t<2;t++){var n=e[t];n&&(e[t]="^"+this.braces(n))}return e},formatFrac:function(e,t){var n=e.num.toString();return e=e.den.toString(),t&&"1"===n&&"1"===e?"":"1"===e?n:this.frac(n,e)},frac:function(e,t){return"\\frac"+this.braces(e)+this.braces(t)},braces:function(e){return"{"+e+"}"},brackets:function(e,t){return"\\left"+(t={parens:["(",")"],square:["[","]"],brace:["{","}"],abs:["|","|"],angle:["\\langle","\\rangle"]}[t=t||"parens"])[0]+e+"\\right"+t[1]},filterTokens:function(e){var t=[];J(e)&&(t.type=e.type);for(var n=["\\","left","right","big","Big","large","Large"],r=0,i=e.length;r<i;r++){var s=e[r],a=e[r+1];"\\"===s.value&&"\\"===a.value?t.push(s):J(s)?t.push(qe.filterTokens(s)):-1===n.indexOf(s.value)&&t.push(s)}return t},parse:function(e){function t(e){return s[void 0===e?++o:o+=e]}function n(){return qe.parse(t())}function r(e){return e in a?a[e]:"*"===e&&"&"===s[o+1].value?(t(2),","):"&"===e?(t(),","):"\\"===e?"],[":e}var i="",s=this.filterTokens(e),a={cdot:"",times:"",infty:"Infinity"},o=0;for(l=s.length;o<l;o++){var l,u,c,h,p,f,m,d=s[o];"frac"===d.value?i+=n()+"/"+n():d.value in qe.symbols?d.value===A&&"vector"===s[o+1].type&&"Set"===s[o+2].type?(p=n(),i+=n()+"^"+K("1/"+p)):i+=d.value+n():"int"===d.value?(f=n(),o++,c=r((c=t().value).substring(1,c.length)),i+="integrate"+K(f+","+c)):"int_"===d.value?(l=n(),o++,void 0===(u=t().value)&&(o--,u=n()),f=n(),"differentialD"===(c=","===(c=t().value)?t().value:c)&&(o++,c=t().value),"mathrm"===c&&(o++,c=t().value),i+="defint"+K(f+","+l+","+u+","+c)):d.value&&d.value.startsWith("int_")?(l=d.value.replace("int_",""),console.log("uppernow"),o++,void 0===(u=t().value)&&(o--,u=n()),f=n(),"differentialD"===(c=","===(c=t().value)?t().value:c)&&(o++,c=t().value),"mathrm"===c&&(o++,c=t().value),i+="defint"+K(f+","+l+","+u+","+c)):"mathrm"===d.value?i+=(f=s[++o][0].value)+n():"sum_"===d.value||"prod_"===d.value?(h="sum_"===d.value?"sum":"product",m=t(),o++,p=n(),f=n(),i+=h+K([f,r(m[0]),r(m[2]),r(p)].join(","))):"lim_"===d.value?(m=t(),i+="limit"+K([n(),r(m[0]),r(m[2])].join(","))):"begin"===d.value?(m=t(),Array.isArray(m)&&"matrix"===m[0].value&&(i+="matrix([")):"end"===d.value?(m=t(),Array.isArray(m)&&"matrix"===m[0].value&&(i+="])")):Array.isArray(d)?i+=r(qe.parse(d)):i+=r(d.value.toString())}return K(i)}};function He(e){j(e)?this.elements=e.items.slice(0):J(e)?this.elements=e.slice(0):this.elements=[].slice.call(arguments)}function Ge(){var e=arguments,t=e.length,n=[];if(X(e))for(a=0;a<t;a++)n.push(e[a].slice(0));else for(var r,i,s,a=0;a<t;a++)r=e[a],j(r)&&(r=r.elements),s=(r=J(r)?r:[r]).length,i&&i!==s&&k("Unable to create Matrix. Row dimensions do not match!"),n.push(r),i=s;this.elements=n}function Ve(e){if(this.elements=[],e=j(e)?e:He.fromArray(arguments))for(var t=e.elements,n=0,r=t.length;n<r;n++)this.add(t[n])}He.arrayPrefill=function(e,t){var n=[];t=t||0;for(var r=0;r<e;r++)n[r]=t;return n},He.fromArray=function(e){var t=new He;return t.elements=e,t},He.fromSet=function(e){return He.fromArray(e.elements)},He.prototype={custom:!0,e:function(e){return e<1||e>this.elements.length?null:this.elements[e-1]},set:function(e,t){G(t)||(t=new ze(t)),this.elements[e]=t},dimensions:function(){return this.elements.length},modulus:function(){return ce("SAFE",(function(){return t.pow(this.dot(this.clone()),new ze(.5))}),void 0,this)},eql:function(e){var n=this.elements.length,r=e.elements||e;if(n!==r.length)return!1;do{if(Math.abs(t.subtract(this.elements[n-1],r[n-1]).valueOf())>PRECISION)return!1}while(--n);return!0},clone:function(){for(var e=new He,t=this.elements.length,n=0;n<t;n++)e.elements.push(this.elements[n].clone());return this.getter&&(e.getter=this.getter.clone()),e},map:function(e){var t=[];return this.each((function(n,r){t.push(e(n,r))})),new He(t)},each:function(e){for(var t,n=this.elements.length,r=n;e(this.elements[t=r-n],1+t),--n;);},toUnitVector:function(){return ce("SAFE",(function(){var e=this.modulus();return 0===e.valueOf()?this.clone():this.map((function(n){return t.divide(n,e)}))}),void 0,this)},angleFrom:function(e){return ce("SAFE",(function(){var n=e.elements||e;if(this.elements.length!==n.length)return null;var r=new ze(0),i=new ze(0),s=new ze(0);if(this.each((function(e,a){r=t.add(r,t.multiply(e,n[a-1])),i=t.add(i,t.multiply(e,e)),s=t.add(s,t.multiply(n[a-1],n[a-1]))})),i=t.pow(i,new ze(.5)),s=t.pow(s,new ze(.5)),0===(a=t.multiply(i,s)).valueOf())return null;var a,o=t.divide(r,a);return(a=o.valueOf())<-1&&(o=-1),1<a&&(o=1),new ze(Math.acos(o))}),void 0,this)},isParallelTo:function(e){return null===(e=this.angleFrom(e).valueOf())?null:e<=PRECISION},isAntiparallelTo:function(e){return null===(e=this.angleFrom(e).valueOf())?null:Math.abs(e-Math.PI)<=PRECISION},isPerpendicularTo:function(e){return null===(e=this.dot(e))?null:Math.abs(e)<=PRECISION},add:function(e){return ce("SAFE",(function(){var n=e.elements||e;return this.elements.length!==n.length?null:this.map((function(e,r){return t.add(e,n[r-1])}))}),void 0,this)},subtract:function(e){return ce("SAFE",(function(){var n=e.elements||e;return this.elements.length!==n.length?null:this.map((function(e,r){return t.subtract(e,n[r-1])}))}),void 0,this)},multiply:function(e){return this.map((function(t){return t.clone()*e.clone()}))},x:function(e){return this.multiply(e)},dot:function(e){return ce("SAFE",(function(){var n=e.elements||e,r=new ze(0),i=this.elements.length;if(i!==n.length)return null;for(;r=t.add(r,t.multiply(this.elements[i-1],n[i-1])),--i;);return r}),void 0,this)},cross:function(e){var n=e.elements||e;if(3!==this.elements.length||3!==n.length)return null;var r=this.elements;return ce("SAFE",(function(){return new He([t.subtract(t.multiply(r[1],n[2]),t.multiply(r[2],n[1])),t.subtract(t.multiply(r[2],n[0]),t.multiply(r[0],n[2])),t.subtract(t.multiply(r[0],n[1]),t.multiply(r[1],n[0]))])}),void 0,this)},max:function(){for(var e,t=0,n=this.elements.length,r=n;e=r-n,Math.abs(this.elements[e].valueOf())>Math.abs(t.valueOf())&&(t=this.elements[e]),--n;);return t},magnitude:function(){var e=new ze(0);return this.each((function(n){e=t.add(e,t.pow(n,new ze(2)))})),t.sqrt(e)},indexOf:function(e){for(var t,n=null,r=this.elements.length,i=r;t=i-r,null===n&&this.elements[t].valueOf()===e.valueOf()&&(n=1+t),--r;);return n},text:function(e){return Ie(this)},toString:function(){return this.text()},latex:function(e){for(var t=[],n=0;n<this.elements.length;n++)t.push(qe.latex.call(qe,this.elements[n],e));return"["+t.join(", ")+"]"}},Ge.identity=function(e){for(var t=new Ge,n=0;n<e;n++){t.elements.push([]);for(var r=0;r<e;r++)t.set(n,r,new ze(n===r?1:0))}return t},Ge.fromArray=function(e){function t(e){return Ge.apply(this,e)}return t.prototype=Ge.prototype,new t(e)},Ge.zeroMatrix=function(e,t){for(var n=new Ge,r=0;r<e;r++)n.elements.push(He.arrayPrefill(t,new ze(0)));return n},(Ge.prototype={custom:!0,get:function(e,t){if(this.elements[e])return this.elements[e][t]},map:function(e,t){var n=new Ge;return this.each((function(r,i,s){n.set(i,s,e.call(n,r),t)})),n},set:function(e,t,n,r){this.elements[e]||(this.elements[e]=[]),this.elements[e][t]=r||G(n)?n:new ze(n)},cols:function(){return this.elements[0].length},rows:function(){return this.elements.length},row:function(e){return!e||e>this.cols()?[]:this.elements[e-1]},col:function(e){var t=this.rows(),n=[];if(e>this.cols()||!e)return n;for(var r=0;r<t;r++)n.push(this.elements[r][e-1]);return n},eachElement:function(e){for(var t,n=this.rows(),r=this.cols(),i=0;i<n;i++)for(t=0;t<r;t++)e.call(this,this.elements[i][t],i,t)},determinant:function(){if(!this.isSquare())return null;for(var e,n=this.toRightTriangular(),r=n.elements[0][0],i=n.elements.length-1,s=i;r=t.multiply(r,n.elements[e=s-i+1][e]),--i;);return r},isSquare:function(){return this.elements.length===this.elements[0].length},isSingular:function(){return this.isSquare()&&0===this.determinant()},augment:function(e){var t=this.rows();t!==e.rows()&&k("Cannot augment matrix. Rows don't match.");for(var n=0;n<t;n++)this.elements[n]=this.elements[n].concat(e.elements[n]);return this},clone:function(){for(var e=this.rows(),t=this.cols(),n=new Ge,r=0;r<e;r++){n.elements[r]=[];for(var i=0;i<t;i++){var s=this.elements[r][i];n.elements[r][i]=G(s)?s.clone():s}}return n},invert:function(){return this.isSquare()||k("Matrix is not square!"),ce("SAFE",(function(){var e,n,r,i,s,a,o,l=this.elements.length,u=l,c=Ge.identity(l),h=this.augment(c).toRightTriangular(),p=h.elements[0].length,f=[];do{for(s=[],r=p,f[e=l-1]=[],a=h.elements[e][e];o=t.divide(h.elements[e][i=p-r],a.clone()),s.push(o),u<=i&&f[e].push(o),--r;);for(h.elements[e]=s,n=0;n<e;n++){for(s=[],r=p;s.push(t.subtract(h.elements[n][i=p-r].clone(),t.multiply(h.elements[e][i].clone(),h.elements[n][e].clone()))),--r;);h.elements[n]=s}}while(--l);return Ge.fromArray(f)}),void 0,this)},toRightTriangular:function(){return ce("SAFE",(function(){var e,n,r,i=this.clone(),s=this.elements.length,a=s,o=this.elements[0].length;do{if(0===i.elements[n=a-s][n].valueOf())for(var l=1+n;l<a;l++)if((e=i.elements[l][n])&&0!==e.valueOf()){for(c=[],h=o;c.push(t.add(i.elements[n][r=o-h].clone(),i.elements[l][r].clone())),--h;);i.elements[n]=c;break}if(0!==i.elements[n][n].valueOf())for(l=1+n;l<a;l++){for(var u=t.divide(i.elements[l][n].clone(),i.elements[n][n].clone()),c=[],h=o;c.push((r=o-h)<=n?new ze(0):t.subtract(i.elements[l][r].clone(),t.multiply(i.elements[n][r].clone(),u.clone()))),--h;);i.elements[l]=c}}while(--s);return i}),void 0,this)},transpose:function(){var e,t,n,r=this.elements.length,i=this.elements[0].length,s=new Ge,a=i;do{for(s.elements[e=i-a]=[],t=r;s.elements[e][n=r-t]=this.elements[n][e].clone(),--t;);}while(--a);return s},canMultiplyFromLeft:function(e){return e=(X(e)?e.elements:e).length,this.elements[0].length===e},sameSize:function(e){return this.rows()===e.rows()&&this.cols()===e.cols()},multiply:function(e){return ce("SAFE",(function(){var n=e.elements||e;if(!this.canMultiplyFromLeft(n)){if(this.sameSize(e)){for(var r=new Ge,i=this.rows(),s=0;s<i;s++){var a=t.multiply(new He(this.elements[s]),new He(e.elements[s]));r.elements[s]=a.elements}return r}return null}var o,l,u,c,h,p=this.elements.length,f=p,m=n[0].length,d=this.elements[0].length,g=[];do{g[s=f-p]=[],o=m;do{for(l=m-o,u=new ze(0),c=d;u=t.add(u,t.multiply(this.elements[s][h=d-c],n[h][l])),--c;);}while(g[s][l]=u,--o)}while(--p);return Ge.fromArray(g)}),void 0,this)},add:function(e,n){var r=new Ge;return this.sameSize(e)&&this.eachElement((function(i,s,a){var o=t.add(i.clone(),e.elements[s][a].clone());n&&(o=n.call(r,o,i,e.elements[s][a])),r.set(s,a,o)})),r},subtract:function(e,n){var r=new Ge;return this.sameSize(e)&&this.eachElement((function(i,s,a){var o=t.subtract(i.clone(),e.elements[s][a].clone());n&&(o=n.call(r,o,i,e.elements[s][a])),r.set(s,a,o)})),r},negate:function(){return this.each((function(e){return e.negate()})),this},toVector:function(){if(1!==this.rows()&&1!==this.cols())return this;var e=new He;return e.elements=this.elements,e},toString:function(e,t){for(var n=this.rows(),r=[],i=0;i<n;i++)r.push("["+this.elements[i].map((function(e){var n=t?e.multiplier.toDecimal():e.toString();return void 0!==e?n:""})).join(",")+"]");return"matrix"+K(r.join(","))},text:function(){return"matrix("+this.elements.toString("")+")"},latex:function(e){var t=this.cols(),n=this.elements;return ee("\\begin{vmatrix}{0}\\end{vmatrix}",(function(){var r,i=[];for(r in n){for(var s=[],a=0;a<t;a++)s.push(qe.latex.call(qe,n[r][a],e));i.push(s.join(" & "))}return i.join(" \\cr ")}))}}).each=Ge.prototype.eachElement,Ve.fromArray=function(e){function t(e){return Ve.apply(this,e)}return t.prototype=Ve.prototype,new t(e)},Ve.prototype={add:function(e){this.contains(e)||this.elements.push(e.clone())},contains:function(e){for(var t=0;t<this.elements.length;t++){var n=this.elements[t];if(e.equals(n))return!0}return!1},each:function(e){for(var t=this.elements,n=new Ve,r=0,i=t.length;r<i;r++){var s=t[r];e.call(this,s,n,r)}return n},clone:function(){var e=new Ve;return this.each((function(t){e.add(t.clone())})),e},union:function(e){var t=this.clone();return e.each((function(e){t.add(e)})),t},difference:function(e){var t=this.clone();return e.each((function(e){t.remove(e)})),t},remove:function(e){for(var t=0,n=this.elements.length;t<n;t++)if(this.elements[t].equals(e))return ue(this.elements,t),!0;return!1},intersection:function(e){var t=new Ve,n=this;return e.each((function(e){n.contains(e)&&t.add(e)})),t},intersects:function(e){return 0<this.intersection(e).elements.length},is_subset:function(e){for(var t=e.elements,n=0,r=t.length;n<r;n++)if(!this.contains(t[n]))return!1;return!0},toString:function(){return"{"+this.elements.join(",")+"}"}};var We={dependencies:{_rename:{"Math2.factorial":"factorial"},factorial:{"Math2.gamma":Pe.gamma},gamma_incomplete:{"Math2.factorial":Pe.factorial},Li:{"Math2.Ei":Pe.Ei,"Math2.bigLog":Pe.bigLog,Frac:Ue},Ci:{"Math2.factorial":Pe.factorial},Ei:{"Math2.factorial":Pe.factorial},Si:{"Math2.factorial":Pe.factorial},Shi:{"Math2.factorial":Pe.factorial},Chi:{isInt:$,nround:se,"Math2.num_integrate":Pe.num_integrate},factor:{"Math2.ifactor":Pe.ifactor,Symbol:ze},num_integrate:{"Math2.simpson":Pe.simpson,nround:se},fib:{even:ae}},reformat:{diff:function(e,t){var n=e.args[1].toString();return e="var f = "+We.build(e.args[0].toString(),[n])+";",t[1]+="var diff = "+Pe.diff.toString()+";",t[1]+=e,["diff(f)("+n+")",t]}},getProperName:function(e){return{continued_fraction:"continuedFraction"}[e]||e},compileDependencies:function(e,t){var n,r,i=We.dependencies[e],s=t&&t[1]?t[1]:"",a=t&&t[0]?t[0]:{};for(n in i)"object"!=typeof i[n]&&(s+="var "+(1<(r=n.split(".")).length?r[1]:r[0])+"="+i[n]+";",a[n]=r.pop());return[a,s]},getArgsDeps:function(e,t){for(var n=e.args,r=0;r<n.length;r++)e.args[r].each((function(e){e.group===x&&(t=We.compileDependencies(e.fname,t))}));return t},build:function(e,n){e=ce("PARSE2NUMBER",(function(){return t.parse(e)}),!0);var r=V(e),i=[],s=[],a=function(e,n){function r(t){return(t=t in Math?"Math."+t:(t=We.getProperName(t),-1===i.indexOf(t)&&(n.push("var "+t+" = "+Pe[t].toString()+"; "),i.push(t)),t))+K(e.args.map((function(e){return a(e,n)[0]})).join(","))}""===e.fname&&(e=ze.unwrapPARENS(e)),n=n||[];var o,l,u=[],c=e.group,h="",p=function(t){t=t===S?"*":"+";var r,i=[];for(r in e.symbols){var s=e.symbols[r],o=a(s,n)[0];s.isComposite()&&(o=K(o)),i.push(o)}return(t=i.join(t))&&!e.multiplier.equals(1)?K(t):t};return c===v?u.push(e.multiplier.toDecimal()):e.multiplier.equals(-1)?h="-":e.multiplier.equals(1)||u.push(e.multiplier.toDecimal()),c===w||c===y?o=e.value:c===x?(s=We.compileDependencies(e.fname,s),s=We.getArgsDeps(e,s),o=We.reformat[e.fname]?(l=We.reformat[e.fname](e,s),s=l[1],l[0]):r(e.fname)):c===b?(c=e.previousGroup)===v||c===w?o=e.value:c===x?(o=r(e.fname),s=We.compileDependencies(e.fname,s),s=We.getArgsDeps(e,s)):o=p(e.previousGroup):o=p(e.group),e.group===v||e.power.equals(1)||(p=a(t.parse(e.power)),n.push(p[1]),o="Math.pow"+K(o+","+p[0])),o&&u.push(h+o),[u.join("*"),n.join("").replace(/\n+\s+/g," ")]};n&&(r=n);var o,l=a(e);for(o in s[0]){var u=s[0][o];l[1]=l[1].replace(o,u),s[1]=s[1].replace(o,u)}return new Function(r,(s[1]||"")+l[1]+" return "+l[0]+";")}};function je(e,n,r,i){var s=!1,o=/^([a-z_][a-z\d\_]*)\(([a-z_,\s]*)\):=(.+)$/gi.exec(e);return o?a.setFunction(o[1],o[2].split(","),o[3]):(e instanceof ke&&(e=e.toString()),(r=J(r)?r:void 0===r?[]:[r]).forEach((function(n){var i;"numer"!==n?(i=t.functions[r])&&1===i[1]&&(e=`${n}(${e})`):s=!0})),o=ce("PARSE2NUMBER",(function(){return t.parse(e,n)}),s||l.PARSE2NUMBER),i?N[i-1]=o:N.push(o),new ke(o))}le(t.CONSTANTS),le(t.functions),t.initConstants(),t.error||(t.error=k),l.LOG_FNS={log:t.functions.log,log10:t.functions.log10},le={allSame:D,allNumeric:function(e){for(var t=0;t<e.length;t++)if(!q(e[t]))return!1;return!0},arguments2Array:he,arrayAddSlices:function(e,t){t=t||20;var n=[];n.push(e[0]);for(var r=0;r<e.length-1;r++)for(var i=e[r],s=(e[r+1]-i)/t,a=0;a<t;a++)n.push(i+=s);return n},arrayClone:function(e){for(var t=[],n=e.length,r=0;r<n;r++)t[r]=e[r].clone();return t},arrayMax:function(e){return Math.max.apply(void 0,e)},arrayMin:f,arrayEqual:function(e,t){if(e.sort(),t.sort(),e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},arrayUnique:d,arrayGetVariables:function(e){for(var t=V(e[0],null,null,!0),n=1,r=e.length;n<r;n++)t=t.concat(V(e[n]));return d(t).sort()},arraySum:function(e,n){for(var r=new ze(0),i=0;i<e.length;i++){var s=e[i];r=t.add(r,G(s)?s:t.parse(s))}return n?Number(r):r},block:ce,build:We.build,clearU:function(e){-1!==(e=I.indexOf(e))&&(I[e]=void 0)},comboSort:function(e,t){for(var n=e.length,r=[],i=0;i<e.length;i++)r.push([e[i],t[i]]);r.sort((function(e,t){return e[0]-t[0]}));var s=[],a=[];for(i=0;i<n;i++)s.push(r[i][0]),a.push(r[i][1]);return[s,a]},compare:function(e,n,r){for(var i,s={},a=0;a<r.length;a++)s[r[a]]=new ze(Math.floor(5*Math.random())+1);return ce("PARSE2NUMBER",(function(){i=t.parse(e,s).equals(t.parse(n,s))})),i},convertToVector:fe,customError:u,customType:function(e){return void 0!==e&&e.custom},decompose_fn:ie,each:m,evaluate:pe,even:ae,evenFraction:oe,fillHoles:function(e,t){t=t||e.length;for(var n=0;n<t;n++)e[n]||(e[n]=new ze(0));return e},firstObject:ne,format:ee,generatePrimes:g,getCoeffs:function(e,n,r){var i=[];e.each((function(e){var r,s=e.contains(n)?(r=e.stripVar(n),t.divide(e.clone(),r.clone()).power.toDecimal()):(r=e,0);e=i[s],i[s]=e?t.add(e,r):r}),!0);for(var s=0;s<i.length;s++)i[s]||(i[s]=new ze(0));return i},getU:function(e){for(var t="u",n=0,r=V(e);-1!==I.indexOf(t)||-1!==r.indexOf(t);)t="u"+n++;for(var i=0,s=I.length;i<=s;i++)if(!I[i]){I[i]=t;break}return t},importFunctions:function(){var e,n={};for(e in t.functions)n[e]=t.functions[e][0];return n},inBrackets:K,isArray:J,isExpression:h,isFraction:H,isInt:$,isMatrix:X,isNegative:p,isNumericSymbol:Y,isPrime:F,isReserved:c,isSymbol:G,isVariableSymbol:function(e){return e.group===w&&e.multiplier.equals(1)&&e.power.equals(1)},isVector:j,keys:te,knownVariable:function(e,t){var n={};return n[e]=t,n},nroots:function(e){var n,r;if(e.group===x&&""===e.fname?(n=ze.unwrapPARENS(t.parse(e).toLinear()),r=t.parse(e.power)):e.group===y&&(n=t.parse(e.value),r=t.parse(e.power)),n&&r&&n.group===v&&r.group===v&&n.multiplier.isNegative()){for(var i=[],s=ze.toPolarFormArray(pe(e))[0],a=t.arg(n),o=r.multiplier.den.toString(),u=r.multiplier.num.toString(),c=0;c<o;c++){var h=pe(t.parse(ee("(({0})+2*pi*({1}))/({2})",a,c,o))).multiplier.toDecimal();i.push(pe(t.parse(ee("(({0})^({1})*(cos({3})+({2})*sin({3})))^({4})",s,o,l.IMAGINARY,h,u))))}return He.fromArray(i)}return e.isConstant(!0,!0)?(n=e.sign(),a=pe(e.abs()),i=[(r=t.sqrt(a)).clone(),r.negate()],n<0&&(i=i.map((function(e){return t.multiply(e,ze.imaginary())})))):i=[t.parse(e)],He.fromArray(i)},remove:ue,reserveNames:le,range:function(e,t,n){var r=[];n=n||1;for(var i=e;i<=t;i++)r.push(i*n);return r},round:se,sameSign:function(e,t){return e<0==t<0},scientificToDecimal:B,separate:W,stringReplace:function(e,t,n,r){return e.substr(0,t)+r+e.substr(n,e.length)},text:Ie,validateName:z,variables:V,warn:U};var Xe={groups:i,Symbol:ze,Expression:ke,Frac:Ue,Vector:He,Matrix:Ge,Parser:Be,Scientific:De,Fraction:Fe,Math2:Pe,LaTeX:qe,Utils:le,PARSER:t,PARENTHESIS:T,Settings:l,err:k,bigInt:n,bigDec:r,exceptions:e};return je.rpn=function(e){return t.tokenize(t.toRPN(e))},je.convertToLaTeX=function(e,n){return t.toTeX(e,n)},je.convertFromLaTeX=function(e){return e=qe.parse(t.tokenize(e)),new ke(t.parse(e))},je.version=function(e){if(e)try{return Xe[e].version}catch(t){return"No module named "+e+" found!"}return"1.1.12"},je.getWarnings=function(){return O},je.setConstant=function(e,n){if(z(e),!c(e))if("delete"===n||""===n)delete t.CONSTANTS[e];else{if(isNaN(n))throw new Me("Constant must be a number!");t.CONSTANTS[e]=n}return this},je.getConstant=function(e){return String(t.constant[e])},je.setFunction=re,je.getCore=function(){return Xe},je.getExpression=je.getEquation=ke.getExpression,je.reserved=function(e){return e?I:I.join(", ")},je.clear=function(e,t){return"all"===e?N=[]:"last"===e?N.pop():"first"===e?N.shift():(e=e?e-1:N.length,!0===t?N[e]=void 0:ue(N,e)),this},je.flush=function(){return this.clear("all"),this},je.expressions=function(e,t,n){for(var r=e?{}:[],i=0;i<N.length;i++){var s=t?qe.latex(N[i],n):Ie(N[i],n);e?r[i+1]=s:r.push(s)}return r},je.register=function(e){var n=this.getCore();if(J(e))for(var r=0;r<e.length;r++)e&&this.register(e[r]);else if(e&&-1===l.exclude.indexOf(e.name)){if(e.dependencies)for(r=0;r<e.dependencies.length;r++)if(!n[e.dependencies[r]])throw new Error(ee("{0} requires {1} to be loaded!",e.name,e.dependencies[r]));var i=e.parent,s=e.build.call(n);i&&(n[i]||(n[e.parent]={}),("nerdamer"===i?this:n[i])[e.name]=s),e.visible&&(t.functions[e.name]=[s,e.numargs])}},je.validateName=z,je.validVarName=function(e){try{return z(e),-1===I.indexOf(e)}catch(e){return!1}},je.supported=function(){return te(t.functions)},je.numEquations=je.numExpressions=function(){return N.length},je.setVar=function(e,n){return z(e),e in t.CONSTANTS&&k("Cannot set value for constant "+e),"delete"===n||""===n?delete P[e]:P[e]=G(n)?n:t.parse(n),this},je.getVar=function(e){return P[e]},je.clearVars=function(){return P={},this},je.load=function(e){return e.call(this),this},je.getVars=function(e,t){var n={};if("object"===(e=e||"text"))n=P;else for(var r in P)"latex"===e?n[r]=P[r].latex(t):"text"===e&&(n[r]=P[r].text(t));return n},je.set=function(e,n){if("object"==typeof e)for(var i in e)je.set(i,e[i]);-1!==["SAFE"].indexOf(e)&&k("Cannot modify setting: "+e),"PRECISION"===e?(r.set({precision:n}),21<(l.PRECISION=n)&&this.set("USE_BIG",!0)):"USE_LN"===e&&!0===n?(l.LOG="LN",l.LOG10="log",t.functions.log=l.LOG_FNS.log10,t.functions.log[0]=function(e){return e.isConstant()?new ze(Math.log10(e)):t.symfunction(l.LOG10,[e])},t.functions.LN=l.LOG_FNS.log,delete t.functions.log10):l[e]=n},je.get=function(e){return l[e]},je.api=function(e){for(var n in t.functions)n in je&&!e||(je[n]=function(e){return function(){for(var n=[].slice.call(arguments),r=0;r<n.length;r++)n[r]=t.parse(n[r]);return new ke(ce("PARSE2NUMBER",(function(){return t.callfunction(e,n)})))}}(n))},je.replaceFunction=function(e,n,r){var i=t.functions[e];r=void 0===r?i[1]:r,t.functions[e]=[n.call(void 0,i[0],Xe),r]},je.setOperator=function(e,n){t.setOperator(e,n)},je.getOperator=function(e){return t.getOperator(e)},je.aliasOperator=function(e,n){t.aliasOperator(e,n)},je.tree=function(e){return t.tree(t.toRPN(t.tokenize(e)))},je.htmlTree=function(e,t){return'<div class="tree">\n    <ul>\n        <li>\n'+this.tree(e).toHTML(3,t)+"\n        </li>\n    </ul>\n</div>"},je.addPeeker=function(e,n){t.peekers[e]&&t.peekers[e].push(n)},je.removePeeker=function(e,n){ue(t.peekers[e],n)},je.parse=function(e){return String(e).split(";").map((function(e){return t.parse(e)}))},je.api(),je}({bigInt:(s=function(e){"use strict";var t=1e7,n=9007199254740992,r=c(n),i=Math.log(n);function a(e,t){return void 0===e?a[0]:void 0===t||10==+t?W(e):B(e,t)}function o(e,t){this.value=e,this.sign=t,this.isSmall=!1}function l(e){this.value=e,this.sign=e<0,this.isSmall=!0}function u(e){return-n<e&&e<n}function c(e){return e<1e7?[e]:e<1e14?[e%1e7,Math.floor(e/1e7)]:[e%1e7,Math.floor(e/1e7)%1e7,Math.floor(e/1e14)]}function h(e){p(e);var n=e.length;if(n<4&&A(e,r)<0)switch(n){case 0:return 0;case 1:return e[0];case 2:return e[0]+e[1]*t;default:return e[0]+(e[1]+e[2]*t)*t}return e}function p(e){for(var t=e.length;0===e[--t];);e.length=t+1}function f(e){for(var t=new Array(e),n=-1;++n<e;)t[n]=0;return t}function m(e){return 0<e?Math.floor(e):Math.ceil(e)}function d(e,n){for(var r,i=e.length,s=n.length,a=new Array(i),o=0,l=t,u=0;u<s;u++)r=e[u]+n[u]+o,a[u]=r-(o=l<=r?1:0)*l;for(;u<i;)r=e[u]+o,a[u++]=r-(o=r===l?1:0)*l;return 0<o&&a.push(o),a}function g(e,t){return e.length>=t.length?d(e,t):d(t,e)}function v(e,n){for(var r,i=e.length,s=new Array(i),a=t,o=0;o<i;o++)r=e[o]-a+n,n=Math.floor(r/a),s[o]=r-n*a,n+=1;for(;0<n;)s[o++]=n%a,n=Math.floor(n/a);return s}function y(e,n){for(var r,i=e.length,s=n.length,a=new Array(i),o=0,l=t,u=0;u<s;u++)o=(r=e[u]-o-n[u])<0?(r+=l,1):0,a[u]=r;for(u=s;u<i;u++){if(!((r=e[u]-o)<0)){a[u++]=r;break}r+=l,a[u]=r}for(;u<i;u++)a[u]=e[u];return p(a),a}function w(e,n,r){for(var i,s=e.length,a=new Array(s),u=-n,c=t,p=0;p<s;p++)i=e[p]+u,u=Math.floor(i/c),a[p]=(i%=c)<0?i+c:i;return"number"==typeof(a=h(a))?new l(a=r?-a:a):new o(a,r)}function b(e,n){for(var r,i,s=e.length,a=n.length,o=f(s+a),l=t,u=0;u<s;++u)for(var c=e[u],h=0;h<a;++h)r=c*n[h]+o[u+h],i=Math.floor(r/l),o[u+h]=r-i*l,o[u+h+1]+=i;return p(o),o}function x(e,n){for(var r,i=e.length,s=new Array(i),a=t,o=0,l=0;l<i;l++)r=e[l]*n+o,o=Math.floor(r/a),s[l]=r-o*a;for(;0<o;)s[l++]=o%a,o=Math.floor(o/a);return s}function M(e,t){for(var n=[];0<t--;)n.push(0);return n.concat(e)}function S(e,n,r){return new o(e<t?x(n,e):b(n,c(e)),r)}function _(e){for(var n,r=e.length,i=f(r+r),s=t,a=0;a<r;a++){for(var o,l=0-(o=e[a])*o,u=a;u<r;u++)n=o*e[u]*2+i[a+u]+l,l=Math.floor(n/s),i[a+u]=n-l*s;i[a+r]=l}return p(i),i}function E(e,t){for(var n,r=e.length,i=f(r),s=0,a=r-1;0<=a;--a)s=(n=1e7*s+e[a])-(n=m(n/t))*t,i[a]=0|n;return[i,0|s]}function T(e,n){var r=W(n),i=e.value,s=r.value;if(0===s)throw new Error("Cannot divide by zero");if(e.isSmall)return r.isSmall?[new l(m(i/s)),new l(i%s)]:[a[0],e];if(r.isSmall){if(1===s)return[e,a[0]];if(-1==s)return[e.negate(),a[0]];var u=Math.abs(s);if(u<t){var d=h((g=E(i,u))[0]);return n=g[1],e.sign&&(n=-n),"number"==typeof d?[new l(d=e.sign!==r.sign?-d:d),new l(n)]:[new o(d,e.sign!==r.sign),new l(n)]}s=c(u)}if(-1===(u=A(i,s)))return[a[0],e];if(0===u)return[a[e.sign===r.sign?1:-1],a[0]];d=(g=(i.length+s.length<=200?function(e,n){var r,i,s,a,o,l,u,c=e.length,p=n.length,m=t,d=f(n.length),g=n[p-1],v=Math.ceil(m/(2*g)),y=x(e,v),w=x(n,v);for(y.length<=c&&y.push(0),w.push(0),g=w[p-1],i=c-p;0<=i;i--){for(r=m-1,y[i+p]!==g&&(r=Math.floor((y[i+p]*m+y[i+p-1])/g)),l=w.length,o=a=s=0;o<l;o++)s+=r*w[o],u=Math.floor(s/m),a+=y[i+o]-(s-u*m),s=u,a=a<0?(y[i+o]=a+m,-1):(y[i+o]=a,0);for(;0!==a;){for(--r,o=s=0;o<l;o++)s=(s+=y[i+o]-m+w[o])<0?(y[i+o]=s+m,0):(y[i+o]=s,1);a+=s}d[i]=r}return y=E(y,v)[0],[h(d),h(y)]}:function(e,n){for(var r,i,s,a,o,l=e.length,u=n.length,c=[],f=[],m=t;l;)if(f.unshift(e[--l]),p(f),A(f,n)<0)c.push(0);else{for(s=f[(i=f.length)-1]*m+f[i-2],a=n[u-1]*m+n[u-2],u<i&&(s=(s+1)*m),r=Math.ceil(s/a);!(A(o=x(n,r),f)<=0)&&--r;);c.push(r),f=y(f,o)}return c.reverse(),[h(c),h(f)]})(i,s))[0],r=e.sign!==r.sign;var g=g[1];return e=e.sign,[d="number"==typeof d?new l(d=r?-d:d):new o(d,r),g="number"==typeof g?new l(g=e?-g:g):new o(g,e)]}function A(e,t){if(e.length!==t.length)return e.length>t.length?1:-1;for(var n=e.length-1;0<=n;n--)if(e[n]!==t[n])return e[n]>t[n]?1:-1;return 0}function L(e){return!(e=e.abs()).isUnit()&&(!!(e.equals(2)||e.equals(3)||e.equals(5))||!(e.isEven()||e.isDivisibleBy(3)||e.isDivisibleBy(5))&&(!!e.lesser(49)||void 0))}function C(e,t){for(var n,r,i,o=e.prev(),l=o,u=0;l.isEven();)l=l.divide(2),u++;e:for(r=0;r<t.length;r++)if(!e.lesser(t[r])&&!(i=s(t[r]).modPow(l,e)).equals(a[1])&&!i.equals(o)){for(n=u-1;0!=n;n--){if((i=i.square().mod(e)).isUnit())return!1;if(i.equals(o))continue e}return!1}return!0}o.prototype=Object.create(a.prototype),l.prototype=Object.create(a.prototype),o.prototype.plus=o.prototype.add=function(e){var t=W(e);if(this.sign!==t.sign)return this.subtract(t.negate());var n=this.value;return e=t.value,t.isSmall?new o(v(n,Math.abs(e)),this.sign):new o(g(n,e),this.sign)},l.prototype.plus=l.prototype.add=function(e){var t=W(e),n=this.value;if(n<0!==t.sign)return this.subtract(t.negate());if(e=t.value,t.isSmall){if(u(n+e))return new l(n+e);e=c(Math.abs(e))}return new o(v(e,Math.abs(n)),n<0)},o.prototype.minus=o.prototype.subtract=function(e){var t=W(e);if(this.sign!==t.sign)return this.add(t.negate());var n,r=this.value;return e=t.value,t.isSmall?w(r,Math.abs(e),this.sign):(t=r,r=e,e=this.sign,0<=A(t,r)?n=y(t,r):(n=y(r,t),e=!e),"number"==typeof(n=h(n))?new l(n=e?-n:n):new o(n,e))},l.prototype.minus=l.prototype.subtract=function(e){var t=W(e),n=this.value;return n<0!==t.sign?this.add(t.negate()):(e=t.value,t.isSmall?new l(n-e):w(e,Math.abs(n),0<=n))},o.prototype.negate=function(){return new o(this.value,!this.sign)},l.prototype.negate=function(){var e=this.sign,t=new l(-this.value);return t.sign=!e,t},o.prototype.abs=function(){return new o(this.value,!1)},l.prototype.abs=function(){return new l(Math.abs(this.value))},o.prototype.times=o.prototype.multiply=function(e){var n,r=W(e),i=this.value,s=r.value;if(e=this.sign!==r.sign,r.isSmall){if(0===s)return a[0];if(1===s)return this;if(-1===s)return this.negate();if((n=Math.abs(s))<t)return new o(x(i,n),e);s=c(n)}return new o((0<-.012*(r=i.length)-.012*(n=s.length)+15e-6*r*n?function e(t,n){if((r=Math.max(t.length,n.length))<=30)return b(t,n);var r=Math.ceil(r/2),i=t.slice(r),s=t.slice(0,r),a=n.slice(r),o=n.slice(0,r);return t=e(s,o),n=e(i,a),a=e(g(s,i),g(o,a)),p(r=g(g(t,M(y(y(a,t),n),r)),M(n,2*r))),r}:b)(i,s),e)},l.prototype._multiplyBySmall=function(e){return u(e.value*this.value)?new l(e.value*this.value):S(Math.abs(e.value),c(Math.abs(this.value)),this.sign!==e.sign)},o.prototype._multiplyBySmall=function(e){return 0===e.value?a[0]:1===e.value?this:-1===e.value?this.negate():S(Math.abs(e.value),this.value,this.sign!==e.sign)},l.prototype.times=l.prototype.multiply=function(e){return W(e)._multiplyBySmall(this)},o.prototype.square=function(){return new o(_(this.value),!1)},l.prototype.square=function(){var e=this.value*this.value;return u(e)?new l(e):new o(_(c(Math.abs(this.value))),!1)},l.prototype.divmod=o.prototype.divmod=function(e){return{quotient:(e=T(this,e))[0],remainder:e[1]}},l.prototype.over=l.prototype.divide=o.prototype.over=o.prototype.divide=function(e){return T(this,e)[0]},l.prototype.remainder=l.prototype.mod=o.prototype.remainder=o.prototype.mod=function(e){return T(this,e)[1]},o.prototype.pow=function(e){var t,n,r,i=W(e),s=(e=this.value,i.value);if(0===s)return a[1];if(0===e)return a[0];if(1===e)return a[1];if(-1===e)return i.isEven()?a[1]:a[-1];if(i.sign)return a[0];if(!i.isSmall)throw new Error("The exponent "+i.toString()+" is too large.");if(this.isSmall&&u(t=Math.pow(e,s)))return new l(m(t));for(n=this,r=a[1];!0&s&&(r=r.times(n),--s),0!==s;)s/=2,n=n.square();return r},l.prototype.pow=o.prototype.pow,l.prototype.modPow=o.prototype.modPow=function(e,t){if(e=W(e),(t=W(t)).isZero())throw new Error("Cannot take modPow with modulus 0");for(var n=a[1],r=this.mod(t);e.isPositive();){if(r.isZero())return a[0];e.isOdd()&&(n=n.multiply(r).mod(t)),e=e.divide(2),r=r.square().mod(t)}return n},o.prototype.compareAbs=function(e){var t=W(e),n=this.value;return e=t.value,t.isSmall?1:A(n,e)},l.prototype.compareAbs=function(e){var t=W(e),n=Math.abs(this.value);return e=t.value,t.isSmall?n===(e=Math.abs(e))?0:e<n?1:-1:-1},o.prototype.compareTo=o.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=W(e),n=this.value;return e=t.value,this.sign!==t.sign?t.sign?1:-1:t.isSmall?this.sign?-1:1:A(n,e)*(this.sign?-1:1)},l.prototype.compareTo=l.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=W(e),n=this.value;return e=t.value,t.isSmall?n==e?0:e<n?1:-1:n<0!==t.sign?n<0?-1:1:n<0?1:-1},l.prototype.eq=l.prototype.equals=o.prototype.eq=o.prototype.equals=function(e){return 0===this.compare(e)},l.prototype.neq=l.prototype.notEquals=o.prototype.neq=o.prototype.notEquals=function(e){return 0!==this.compare(e)},l.prototype.gt=l.prototype.greater=o.prototype.gt=o.prototype.greater=function(e){return 0<this.compare(e)},l.prototype.lt=l.prototype.lesser=o.prototype.lt=o.prototype.lesser=function(e){return this.compare(e)<0},l.prototype.geq=l.prototype.greaterOrEquals=o.prototype.geq=o.prototype.greaterOrEquals=function(e){return 0<=this.compare(e)},l.prototype.leq=l.prototype.lesserOrEquals=o.prototype.leq=o.prototype.lesserOrEquals=function(e){return this.compare(e)<=0},o.prototype.isEven=function(){return 0==(1&this.value[0])},l.prototype.isEven=function(){return 0==(1&this.value)},o.prototype.isOdd=function(){return 1==(1&this.value[0])},l.prototype.isOdd=function(){return 1==(1&this.value)},o.prototype.isPositive=function(){return!this.sign},l.prototype.isPositive=function(){return 0<this.value},o.prototype.isNegative=function(){return this.sign},l.prototype.isNegative=function(){return this.value<0},o.prototype.isUnit=function(){return!1},l.prototype.isUnit=function(){return 1===Math.abs(this.value)},o.prototype.isZero=function(){return!1},l.prototype.isZero=function(){return 0===this.value},l.prototype.isDivisibleBy=o.prototype.isDivisibleBy=function(e){var t=W(e);return 0!==(e=t.value)&&(1===e||(2===e?this.isEven():this.mod(t).equals(a[0])))},l.prototype.isPrime=o.prototype.isPrime=function(t){if((r=L(this))!==e)return r;var n=this.abs();if((r=n.bitLength())<=64)return C(n,[2,325,9375,28178,450775,9780504,1795265022]);for(var r=Math.log(2)*r,i=Math.ceil(!0===t?2*Math.pow(r,2):r),a=[],o=0;o<i;o++)a.push(s(o+2));return C(n,a)},l.prototype.isProbablePrime=o.prototype.isProbablePrime=function(t){var n=L(this);if(n!==e)return n;for(var r=this.abs(),i=t===e?5:t,a=[],o=0;o<i;o++)a.push(s.randBetween(2,r.minus(2)));return C(r,a)},l.prototype.modInv=o.prototype.modInv=function(e){for(var t,n,r=s.zero,i=s.one,a=W(e),o=this.abs();!o.equals(s.zero);)t=a.divide(o),n=a,a=o,i=r.subtract(t.multiply(r=i)),o=n.subtract(t.multiply(o));if(!a.equals(1))throw new Error(this.toString()+" and "+e.toString()+" are not co-prime");return-1===r.compare(0)&&(r=r.add(e)),this.isNegative()?r.negate():r},o.prototype.next=function(){var e=this.value;return this.sign?w(e,1,this.sign):new o(v(e,1),this.sign)},l.prototype.next=function(){var e=this.value;return e+1<n?new l(e+1):new o(r,!1)},o.prototype.prev=function(){var e=this.value;return this.sign?new o(v(e,1),!0):w(e,1,this.sign)},l.prototype.prev=function(){var e=this.value;return-n<e-1?new l(e-1):new o(r,!0)};for(var R=[1];2*R[R.length-1]<=t;)R.push(2*R[R.length-1]);var N=R.length,P=R[N-1];function I(e){return("number"==typeof e||"string"==typeof e)&&+Math.abs(e)<=t||e instanceof o&&e.value.length<=1}function O(e,t,n){t=W(t);for(var r=e.isNegative(),i=t.isNegative(),a=r?e.not():e,o=i?t.not():t,l=0,u=0,c=null,h=null,p=[];!a.isZero()||!o.isZero();)l=(c=T(a,P))[1].toJSNumber(),r&&(l=P-1-l),u=(h=T(o,P))[1].toJSNumber(),a=c[0],o=h[0],p.push(n(l,u=i?P-1-u:u));for(var f=0!==n(r?1:0,i?1:0)?s(-1):s(0),m=p.length-1;0<=m;--m)f=f.multiply(P).add(s(p[m]));return f}l.prototype.shiftLeft=o.prototype.shiftLeft=function(e){if(!I(e))throw new Error(String(e)+" is too large for shifting.");if((e=+e)<0)return this.shiftRight(-e);var t=this;if(t.isZero())return t;for(;N<=e;)t=t.multiply(P),e-=N-1;return t.multiply(R[e])},l.prototype.shiftRight=o.prototype.shiftRight=function(e){var t;if(!I(e))throw new Error(String(e)+" is too large for shifting.");if((e=+e)<0)return this.shiftLeft(-e);for(var n=this;N<=e;){if(n.isZero()||n.isNegative()&&n.isUnit())return n;n=(t=T(n,P))[1].isNegative()?t[0].prev():t[0],e-=N-1}return(t=T(n,R[e]))[1].isNegative()?t[0].prev():t[0]},l.prototype.not=o.prototype.not=function(){return this.negate().prev()},l.prototype.and=o.prototype.and=function(e){return O(this,e,(function(e,t){return e&t}))},l.prototype.or=o.prototype.or=function(e){return O(this,e,(function(e,t){return e|t}))},l.prototype.xor=o.prototype.xor=function(e){return O(this,e,(function(e,t){return e^t}))};function k(e){return(e="number"==typeof(e=e.value)?1073741824|e:e[0]+e[1]*t|1073758208)&-e}function D(e,t){return e=W(e),t=W(t),e.greater(t)?e:t}function U(e,t){return e=W(e),t=W(t),e.lesser(t)?e:t}function z(e,t){if(e=W(e).abs(),t=W(t).abs(),e.equals(t))return e;if(e.isZero())return t;if(t.isZero())return e;for(var n,r,i=a[1];e.isEven()&&t.isEven();)n=Math.min(k(e),k(t)),e=e.divide(n),t=t.divide(n),i=i.multiply(n);for(;e.isEven();)e=e.divide(k(e));do{for(;t.isEven();)t=t.divide(k(t))}while(e.greater(t)&&(r=t,t=e,e=r),!(t=t.subtract(e)).isZero());return i.isUnit()?e:e.multiply(i)}l.prototype.bitLength=o.prototype.bitLength=function(){var e=this;return 0===(e=e.compareTo(s(0))<0?e.negate().subtract(s(1)):e).compareTo(s(0))?s(0):s(function e(t,n){if(n.compareTo(t)<=0){var r=(i=e(t,n.square(n))).p,i=i.e;return(n=r.multiply(n)).compareTo(t)<=0?{p:n,e:2*i+1}:{p:r,e:2*i}}return{p:s(1),e:0}}(e,s(2)).e).add(s(1))};var B=function(e,t){for(var n=e.length,r=Math.abs(t),s=0;s<n;s++){var a=e[s].toLowerCase();if("-"!==a&&/[a-z0-9]/.test(a))if(/[0-9]/.test(a)&&r<=+a){if("1"!==a||1!==r)throw new Error(a+" is not a valid digit in base "+t+".")}else if(a.charCodeAt(0)-87>=r)throw new Error(a+" is not a valid digit in base "+t+".")}if(2<=t&&t<=36&&n<=i/Math.log(t)){var o=parseInt(e,t);if(isNaN(o))throw new Error(a+" is not a valid digit in base "+t+".");return new l(parseInt(e,t))}t=W(t);var u=[];for(s=(o="-"===e[0])?1:0;s<e.length;s++){var c=(a=e[s].toLowerCase()).charCodeAt(0);if(48<=c&&c<=57)u.push(W(a));else if(97<=c&&c<=122)u.push(W(a.charCodeAt(0)-87));else{if("<"!==a)throw new Error(a+" is not a valid character");for(c=s;">"!==e[++s];);u.push(W(e.slice(c+1,s)))}}return F(u,t,o)};function F(e,t,n){for(var r=a[0],i=a[1],s=e.length-1;0<=s;s--)r=r.add(e[s].times(i)),i=i.times(t);return n?r.negate():r}function q(e){return e<=35?"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e):"<"+e+">"}function H(e,t){if((t=s(t)).isZero()){if(e.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(t.equals(-1)){if(e.isZero())return{value:[0],isNegative:!1};if(e.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-e)).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var n=Array.apply(null,Array(+e-1)).map(Array.prototype.valueOf,[0,1]);return n.unshift([1]),{value:[].concat.apply([],n),isNegative:!1}}if(n=!1,e.isNegative()&&t.isPositive()&&(n=!0,e=e.abs()),t.equals(1))return e.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(+e)).map(Number.prototype.valueOf,1),isNegative:n};for(var r=[],i=e;i.isNegative()||0<=i.compareAbs(t);){i=(a=i.divmod(t)).quotient;var a=a.remainder;a.isNegative()&&(a=t.minus(a).abs(),i=i.next()),r.push(a.toJSNumber())}return r.push(i.toJSNumber()),{value:r.reverse(),isNegative:n}}function G(e,t){return((t=H(e,t)).isNegative?"-":"")+t.value.map(q).join("")}function V(e){if(u(+e)){var t=+e;if(t===m(t))return new l(t);throw new Error("Invalid integer: "+e)}var n="-"===e[0],r=(e=n?e.slice(1):e).split(/e/i);if(2<r.length)throw new Error("Invalid integer: "+r.join("e"));if(2===r.length){var i=r[1];if((i=+(i="+"===i[0]?i.slice(1):i))!==m(i)||!u(i))throw new Error("Invalid integer: "+i+" is not a valid exponent.");if(0<=(r=(t=r[0]).indexOf("."))&&(i-=t.length-r-1,t=t.slice(0,r)+t.slice(r+1)),i<0)throw new Error("Cannot include negative exponent part for integers");e=t+=new Array(i+1).join("0")}if(!/^([0-9][0-9]*)$/.test(e))throw new Error("Invalid integer: "+e);for(var s=[],a=e.length,c=a-7;0<a;)s.push(+e.slice(c,a)),(c-=7)<0&&(c=0),a-=7;return p(s),new o(s,n)}function W(e){return"number"==typeof e?function(e){if(u(e)){if(e!==m(e))throw new Error(e+" is not an integer.");return new l(e)}return V(e.toString())}(e):"string"==typeof e?V(e):e}o.prototype.toArray=function(e){return H(this,e)},l.prototype.toArray=function(e){return H(this,e)},o.prototype.toString=function(t){if(10!==(t=t===e?10:t))return G(this,t);for(var n,r=this.value,i=r.length,s=String(r[--i]);0<=--i;)n=String(r[i]),s+="0000000".slice(n.length)+n;return(this.sign?"-":"")+s},l.prototype.toString=function(t){return 10!=(t=t===e?10:t)?G(this,t):String(this.value)},o.prototype.toJSON=l.prototype.toJSON=function(){return this.toString()},o.prototype.toJSNumber=o.prototype.valueOf=function(){return parseInt(this.toString(),10)},l.prototype.toJSNumber=l.prototype.valueOf=function(){return this.value};for(var j=0;j<1e3;j++)a[j]=new l(j),0<j&&(a[-j]=new l(-j));return a.one=a[1],a.zero=a[0],a.minusOne=a[-1],a.max=D,a.min=U,a.gcd=z,a.lcm=function(e,t){return e=W(e).abs(),t=W(t).abs(),e.divide(z(e,t)).multiply(t)},a.isInstance=function(e){return e instanceof o||e instanceof l},a.randBetween=function(e,n){var r=U(e=W(e),n=W(n)),i=D(e,n).subtract(r).add(1);if(i.isSmall)return r.add(Math.floor(Math.random()*i));for(var s=[],a=!0,u=i.value.length-1;0<=u;u--){var c=a?i.value[u]:t,p=m(Math.random()*c);s.unshift(p),p<c&&(a=!1)}return s=h(s),r.add("number"==typeof s?new l(s):new o(s,!1))},a.fromArray=function(e,t,n){return F(e.map(W),W(t||10),n)},a}(),e.hasOwnProperty("exports")&&(e.exports=s),void 0!==(i=function(){return s}.apply(t,[]))&&(e.exports=i),s),bigDec:function(n){"use strict";var s,a,o,l=9e15,u=1e9,c="0123456789abcdef",h="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",p="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",f={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-l,maxE:l,crypto:!1},m=!0,d="[DecimalError] ",g=d+"Invalid argument: ",v=d+"Precision limit exceeded",y=d+"crypto unavailable",w=Math.floor,b=Math.pow,x=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,M=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,S=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,_=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,E=1e7,T=h.length-1,A=p.length-1,L={name:"[object Decimal]"};function C(e){var t,n,r,i=e.length-1,s="",a=e[0];if(0<i){for(s+=a,t=1;t<i;t++)(n=7-(r=e[t]+"").length)&&(s+=G(n)),s+=r;(n=7-(r=(a=e[t])+"").length)&&(s+=G(n))}else if(0===a)return"0";for(;a%10==0;)a/=10;return s+a}function R(e,t,n){if(e!==~~e||e<t||n<e)throw Error(g+e)}function N(e,t,n,r){for(var i,s,a=e[0];10<=a;a/=10)--t;return--t<0?(t+=7,i=0):(i=Math.ceil((t+1)/7),t%=7),a=b(10,7-t),s=e[i]%a|0,null==r?t<3?(0==t?s=s/100|0:1==t&&(s=s/10|0),n<4&&99999==s||3<n&&49999==s||5e4==s||0==s):(n<4&&s+1==a||3<n&&s+1==a/2)&&(e[i+1]/a/100|0)==b(10,t-2)-1||(s==a/2||0==s)&&0==(e[i+1]/a/100|0):t<4?(0==t?s=s/1e3|0:1==t?s=s/100|0:2==t&&(s=s/10|0),(r||n<4)&&9999==s||!r&&3<n&&4999==s):((r||n<4)&&s+1==a||!r&&3<n&&s+1==a/2)&&(e[i+1]/a/1e3|0)==b(10,t-3)-1}function P(e,t,n){for(var r,i,s=[0],a=0,o=e.length;a<o;){for(i=s.length;i--;)s[i]*=t;for(s[0]+=c.indexOf(e.charAt(a++)),r=0;r<s.length;r++)s[r]>n-1&&(void 0===s[r+1]&&(s[r+1]=0),s[r+1]+=s[r]/n|0,s[r]%=n)}return s.reverse()}L.absoluteValue=L.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),U(e)},L.ceil=function(){return U(new this.constructor(this),this.e+1,2)},L.comparedTo=L.cmp=function(e){var t,n,r=this,i=r.d,s=(e=new r.constructor(e)).d,a=r.s,o=e.s;if(!i||!s)return a&&o?a!==o?a:i===s?0:!i^a<0?1:-1:NaN;if(!i[0]||!s[0])return i[0]?a:s[0]?-o:0;if(a!==o)return a;if(r.e!==e.e)return r.e>e.e^a<0?1:-1;for(t=0,n=(r=i.length)<(e=s.length)?r:e;t<n;++t)if(i[t]!==s[t])return i[t]>s[t]^a<0?1:-1;return r===e?0:e<r^a<0?1:-1},L.cosine=L.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r=(r=t.d.length)<32?(1/Q(4,n=Math.ceil(r/3))).toString():(n=16,"2.3283064365386962890625e-10");e.precision+=n,t=$(e,1,t.times(r),new e(1));for(var i=n;i--;){var s=t.times(t);t=s.times(s).minus(s).times(8).plus(1)}return e.precision-=n,t}(r,K(r,n)),r.precision=e,r.rounding=t,U(2==o||3==o?n.neg():n,e,t,!0)):new r(1):new r(NaN)},L.cubeRoot=L.cbrt=function(){var e,t,n,r,i,s,a,o,l,u,c=this,h=c.constructor;if(!c.isFinite()||c.isZero())return new h(c);for(m=!1,(s=c.s*b(c.s*c,1/3))&&Math.abs(s)!=1/0?r=new h(s.toString()):(n=C(c.d),(s=((e=c.e)-n.length+1)%3)&&(n+=1==s||-2==s?"0":"00"),s=b(n,1/3),e=w((e+1)/3)-(e%3==(e<0?-1:2)),(r=new h(n=s==1/0?"5e"+e:(n=s.toExponential()).slice(0,n.indexOf("e")+1)+e)).s=c.s),a=(e=h.precision)+3;;)if(u=(l=(o=r).times(o).times(o)).plus(c),r=I(u.plus(c).times(o),u.plus(l),a+2,1),C(o.d).slice(0,a)===(n=C(r.d)).slice(0,a)){if("9999"!=(n=n.slice(a-3,a+1))&&(i||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(U(r,e+1,1),t=!r.times(r).times(r).eq(c));break}if(!i&&(U(o,e+1,0),o.times(o).times(o).eq(c))){r=o;break}a+=4,i=1}return m=!0,U(r,e,h.rounding,t)},L.decimalPlaces=L.dp=function(){var e,t=this.d,n=NaN;if(t){if(n=7*((e=t.length-1)-w(this.e/7)),e=t[e])for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n},L.dividedBy=L.div=function(e){return I(this,new this.constructor(e))},L.dividedToIntegerBy=L.divToInt=function(e){var t=this.constructor;return U(I(this,new t(e),0,1,1),t.precision,t.rounding)},L.equals=L.eq=function(e){return 0===this.cmp(e)},L.floor=function(){return U(new this.constructor(this),this.e+1,3)},L.greaterThan=L.gt=function(e){return 0<this.cmp(e)},L.greaterThanOrEqualTo=L.gte=function(e){return 1==(e=this.cmp(e))||0===e},L.hyperbolicCosine=L.cosh=function(){var e,t,n,r=(o=this).constructor,i=new r(1);if(!o.isFinite())return new r(o.s?1/0:NaN);if(o.isZero())return i;t=r.precision,n=r.rounding,r.precision=t+Math.max(o.e,o.sd())+4,r.rounding=1;for(var s,a=(a=o.d.length)<32?(1/Q(4,e=Math.ceil(a/3))).toString():(e=16,"2.3283064365386962890625e-10"),o=$(r,1,o.times(a),new r(1),!0),l=e,u=new r(8);l--;)s=o.times(o),o=i.minus(s.times(u.minus(s.times(u))));return U(o,r.precision=t,r.rounding=n,!0)},L.hyperbolicSine=L.sinh=function(){var e,t,n,r=(a=this).constructor;if(!a.isFinite()||a.isZero())return new r(a);if(e=r.precision,t=r.rounding,r.precision=e+Math.max(a.e,a.sd())+4,r.rounding=1,(n=a.d.length)<3)a=$(r,2,a,a,!0);else for(var i,s=16<(s=1.4*Math.sqrt(n))?16:0|s,a=$(r,2,a=a.times(1/Q(5,s)),a,!0),o=new r(5),l=new r(16),u=new r(20);s--;)i=a.times(a),a=a.times(o.plus(i.times(l.times(i).plus(u))));return U(a,r.precision=e,r.rounding=t,!0)},L.hyperbolicTangent=L.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,I(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)},L.inverseCosine=L.acos=function(){var e=this,t=e.constructor,n=e.abs().cmp(1),r=t.precision,i=t.rounding;return-1!==n?0===n?e.isNeg()?q(t,r,i):new t(0):new t(NaN):e.isZero()?q(t,r+4,i).times(.5):(t.precision=r+6,t.rounding=1,e=e.asin(),n=q(t,r+4,i).times(.5),t.precision=r,t.rounding=i,n.minus(e))},L.inverseHyperbolicCosine=L.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,m=!1,n=n.times(n).minus(1).sqrt().plus(n),m=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)},L.inverseHyperbolicSine=L.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,m=!1,n=n.times(n).plus(1).sqrt().plus(n),m=!0,r.precision=e,r.rounding=t,n.ln())},L.inverseHyperbolicTangent=L.atanh=function(){var e,t,n,r=this,i=r.constructor;return r.isFinite()?0<=r.e?new i(r.abs().eq(1)?r.s/0:r.isZero()?r:NaN):(e=i.precision,t=i.rounding,n=r.sd(),Math.max(n,e)<2*-r.e-1?U(new i(r),e,t,!0):(i.precision=n-=r.e,r=I(r.plus(1),new i(1).minus(r),n+e,1),i.precision=e+4,i.rounding=1,r=r.ln(),i.precision=e,i.rounding=t,r.times(.5))):new i(NaN)},L.inverseSine=L.asin=function(){var e,t,n,r=this,i=r.constructor;return r.isZero()?new i(r):(e=r.abs().cmp(1),t=i.precision,n=i.rounding,-1!==e?0===e?((e=q(i,t+4,n).times(.5)).s=r.s,e):new i(NaN):(i.precision=t+6,i.rounding=1,r=r.div(new i(1).minus(r.times(r)).sqrt().plus(1)).atan(),i.precision=t,i.rounding=n,r.times(2)))},L.inverseTangent=L.atan=function(){var e,t,n,r,i,s,a,o,l,u=this,c=u.constructor,h=c.precision,p=c.rounding;if(u.isFinite()){if(u.isZero())return new c(u);if(u.abs().eq(1)&&h+4<=A)return(a=q(c,h+4,p).times(.25)).s=u.s,a}else{if(!u.s)return new c(NaN);if(h+4<=A)return(a=q(c,h+4,p).times(.5)).s=u.s,a}for(c.precision=o=h+10,c.rounding=1,e=n=Math.min(28,o/7+2|0);e;--e)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(m=!1,t=Math.ceil(o/7),r=1,l=u.times(u),a=new c(u),i=u;-1!==e;)if(i=i.times(l),s=a.minus(i.div(r+=2)),i=i.times(l),void 0!==(a=s.plus(i.div(r+=2))).d[t])for(e=t;a.d[e]===s.d[e]&&e--;);return n&&(a=a.times(2<<n-1)),m=!0,U(a,c.precision=h,c.rounding=p,!0)},L.isFinite=function(){return!!this.d},L.isInteger=L.isInt=function(){return!!this.d&&w(this.e/7)>this.d.length-2},L.isNaN=function(){return!this.s},L.isNegative=L.isNeg=function(){return this.s<0},L.isPositive=L.isPos=function(){return 0<this.s},L.isZero=function(){return!!this.d&&0===this.d[0]},L.lessThan=L.lt=function(e){return this.cmp(e)<0},L.lessThanOrEqualTo=L.lte=function(e){return this.cmp(e)<1},L.logarithm=L.log=function(e){var t,n,r,i,s,a,o,l,u=this.constructor,c=u.precision,h=u.rounding;if(null==e)e=new u(10),t=!0;else{if(n=(e=new u(e)).d,e.s<0||!n||!n[0]||e.eq(1))return new u(NaN);t=e.eq(10)}if(n=this.d,this.s<0||!n||!n[0]||this.eq(1))return new u(n&&!n[0]?-1/0:1!=this.s?NaN:n?0:1/0);if(t)if(1<n.length)s=!0;else{for(i=n[0];i%10==0;)i/=10;s=1!==i}if(m=!1,a=Z(this,o=c+5),r=t?F(u,o+10):Z(e,o),N((l=I(a,r,o,1)).d,i=c,h))do{if(a=Z(this,o+=10),r=t?F(u,o+10):Z(e,o),l=I(a,r,o,1),!s){+C(l.d).slice(i+1,i+15)+1==1e14&&(l=U(l,c+1,0));break}}while(N(l.d,i+=10,h));return m=!0,U(l,c,h)},L.minus=L.sub=function(e){var t,n,r,i,s,a,o,l,u,c,h,p=this,f=p.constructor;if(e=new f(e),!p.d||!e.d)return p.s&&e.s?p.d?e.s=-e.s:e=new f(e.d||p.s!==e.s?p:NaN):e=new f(NaN),e;if(p.s!=e.s)return e.s=-e.s,p.plus(e);if(u=p.d,h=e.d,o=f.precision,l=f.rounding,!u[0]||!h[0]){if(h[0])e.s=-e.s;else{if(!u[0])return new f(3===l?-0:0);e=new f(p)}return m?U(e,o,l):e}if(n=w(e.e/7),p=w(p.e/7),u=u.slice(),s=p-n){for(a=(c=s<0)?(t=u,s=-s,h.length):(t=h,n=p,u.length),s>(r=Math.max(Math.ceil(o/7),a)+2)&&(s=r,t.length=1),t.reverse(),r=s;r--;)t.push(0);t.reverse()}else{for((c=(r=u.length)<(a=h.length))&&(a=r),r=0;r<a;r++)if(u[r]!=h[r]){c=u[r]<h[r];break}s=0}for(c&&(t=u,u=h,h=t,e.s=-e.s),a=u.length,r=h.length-a;0<r;--r)u[a++]=0;for(r=h.length;s<r;){if(u[--r]<h[r]){for(i=r;i&&0===u[--i];)u[i]=E-1;--u[i],u[r]+=E}u[r]-=h[r]}for(;0===u[--a];)u.pop();for(;0===u[0];u.shift())--n;return u[0]?(e.d=u,e.e=B(u,n),m?U(e,o,l):e):new f(3===l?-0:0)},L.modulo=L.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?U(new r(n),r.precision,r.rounding):(m=!1,9==r.modulo?(t=I(n,e.abs(),0,3,1)).s*=e.s:t=I(n,e,0,r.modulo,1),t=t.times(e),m=!0,n.minus(t))},L.naturalExponential=L.exp=function(){return X(this)},L.naturalLogarithm=L.ln=function(){return Z(this)},L.negated=L.neg=function(){var e=new this.constructor(this);return e.s=-e.s,U(e)},L.plus=L.add=function(e){var t,n,r,i,s,a,o,l,u=this,c=u.constructor;if(e=new c(e),!u.d||!e.d)return u.s&&e.s?u.d||(e=new c(e.d||u.s===e.s?u:NaN)):e=new c(NaN),e;if(u.s!=e.s)return e.s=-e.s,u.minus(e);if(o=u.d,l=e.d,s=c.precision,a=c.rounding,!o[0]||!l[0])return l[0]||(e=new c(u)),m?U(e,s,a):e;if(c=w(u.e/7),u=w(e.e/7),o=o.slice(),r=c-u){for(i=r<0?(n=o,r=-r,l.length):(n=l,u=c,o.length),r>(i=(c=Math.ceil(s/7))>i?c+1:i+1)&&(r=i,n.length=1),n.reverse();r--;)n.push(0);n.reverse()}for((i=o.length)-(r=l.length)<0&&(r=i,n=l,l=o,o=n),t=0;r;)t=(o[--r]=o[r]+l[r]+t)/E|0,o[r]%=E;for(t&&(o.unshift(t),++u),i=o.length;0==o[--i];)o.pop();return e.d=o,e.e=B(o,u),m?U(e,s,a):e},L.precision=L.sd=function(e){var t;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(g+e);return this.d?(t=H(this.d),e&&this.e+1>t&&(t=this.e+1)):t=NaN,t},L.round=function(){var e=this.constructor;return U(new e(this),this.e+1,e.rounding)},L.sine=L.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r=t.d.length;if(r<3)return $(e,2,t,t);n=16<(n=1.4*Math.sqrt(r))?16:0|n,t=$(e,2,t=t.times(1/Q(5,n)),t);for(var i,s=new e(5),a=new e(16),o=new e(20);n--;)i=t.times(t),t=t.times(s.plus(i.times(a.times(i).minus(o))));return t}(r,K(r,n)),r.precision=e,r.rounding=t,U(2<o?n.neg():n,e,t,!0)):new r(NaN)},L.squareRoot=L.sqrt=function(){var e,t,n,r,i,s,a=this,o=a.d,l=a.e,u=a.s,c=a.constructor;if(1!==u||!o||!o[0])return new c(!u||u<0&&(!o||o[0])?NaN:o?a:1/0);for(m=!1,r=0==(u=Math.sqrt(+a))||u==1/0?(((t=C(o)).length+l)%2==0&&(t+="0"),u=Math.sqrt(t),l=w((l+1)/2)-(l<0||l%2),new c(t=u==1/0?"5e"+l:(t=u.toExponential()).slice(0,t.indexOf("e")+1)+l)):new c(u.toString()),n=(l=c.precision)+3;;)if(r=(s=r).plus(I(a,s,n+2,1)).times(.5),C(s.d).slice(0,n)===(t=C(r.d)).slice(0,n)){if("9999"!=(t=t.slice(n-3,n+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(U(r,l+1,1),e=!r.times(r).eq(a));break}if(!i&&(U(s,l+1,0),s.times(s).eq(a))){r=s;break}n+=4,i=1}return m=!0,U(r,l,c.rounding,e)},L.tangent=L.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,(n=n.sin()).s=1,n=I(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,U(2==o||4==o?n.neg():n,e,t,!0)):new r(NaN)},L.times=L.mul=function(e){var t,n,r,i,s,a,o,l,u,c=this.constructor,h=this.d,p=(e=new c(e)).d;if(e.s*=this.s,!(h&&h[0]&&p&&p[0]))return new c(!e.s||h&&!h[0]&&!p||p&&!p[0]&&!h?NaN:h&&p?0*e.s:e.s/0);for(n=w(this.e/7)+w(e.e/7),(l=h.length)<(u=p.length)&&(s=h,h=p,p=s,a=l,l=u,u=a),s=[],r=a=l+u;r--;)s.push(0);for(r=u;0<=--r;){for(t=0,i=l+r;r<i;)o=s[i]+p[r]*h[i-r-1]+t,s[i--]=o%E|0,t=o/E|0;s[i]=(s[i]+t)%E|0}for(;!s[--a];)s.pop();return t?++n:s.shift(),e.d=s,e.e=B(s,n),m?U(e,c.precision,c.rounding):e},L.toBinary=function(e,t){return ee(this,2,e,t)},L.toDecimalPlaces=L.toDP=function(e,t){var n=this.constructor,r=new n(this);return void 0===e?r:(R(e,0,u),void 0===t?t=n.rounding:R(t,0,8),U(r,e+r.e+1,t))},L.toExponential=function(e,t){var n=this,r=n.constructor;return e=void 0===e?z(n,!0):(R(e,0,u),void 0===t?t=r.rounding:R(t,0,8),z(n=U(new r(n),e+1,t),!0,e+1)),n.isNeg()&&!n.isZero()?"-"+e:e},L.toFixed=function(e,t){var n=this,r=n.constructor,i=void 0===e?z(n):(R(e,0,u),void 0===t?t=r.rounding:R(t,0,8),z(i=U(new r(n),e+n.e+1,t),!1,e+i.e+1));return n.isNeg()&&!n.isZero()?"-"+i:i},L.toFraction=function(e){var t,n,r,i,s,a,o,l,u,c,h=this,p=h.d,f=h.constructor;if(!p)return new f(h);if(l=n=new f(1),r=o=new f(0),u=(s=(t=new f(r)).e=H(p)-h.e-1)%7,t.d[0]=b(10,u<0?7+u:u),null==e)e=0<s?t:l;else{if(!(a=new f(e)).isInt()||a.lt(l))throw Error(g+a);e=a.gt(t)?0<s?t:l:a}for(m=!1,a=new f(C(p)),u=f.precision,f.precision=s=7*p.length*2;c=I(a,t,0,1,1),1!=(i=n.plus(c.times(r))).cmp(e);)n=r,r=i,l=o.plus(c.times(i=l)),o=i,t=a.minus(c.times(i=t)),a=i;return i=I(e.minus(n),r,0,1,1),o=o.plus(i.times(l)),n=n.plus(i.times(r)),o.s=l.s=h.s,h=I(l,r,s,1).minus(h).abs().cmp(I(o,n,s,1).minus(h).abs())<1?[l,r]:[o,n],f.precision=u,m=!0,h},L.toHexadecimal=L.toHex=function(e,t){return ee(this,16,e,t)},L.toNearest=function(e,t){var n=(r=this).constructor,r=new n(r);if(null==e){if(!r.d)return r;e=new n(1),t=n.rounding}else{if(e=new n(e),void 0===t?t=n.rounding:R(t,0,8),!r.d)return e.s?r:e;if(!e.d)return e.s&&(e.s=r.s),e}return e.d[0]?(m=!1,r=I(r,e,0,t,1).times(e),m=!0,U(r)):(e.s=r.s,r=e),r},L.toNumber=function(){return+this},L.toOctal=function(e,t){return ee(this,8,e,t)},L.toPower=L.pow=function(e){var t,n,r,i,s,a,o=this,l=o.constructor,u=+(e=new l(e));if(!(o.d&&e.d&&o.d[0]&&e.d[0]))return new l(b(+o,u));if((o=new l(o)).eq(1))return o;if(r=l.precision,s=l.rounding,e.eq(1))return U(o,r,s);if((t=w(e.e/7))>=e.d.length-1&&(n=u<0?-u:u)<=9007199254740991)return i=V(l,o,n,r),e.s<0?new l(1).div(i):U(i,r,s);if((a=o.s)<0){if(t<e.d.length-1)return new l(NaN);if(0==(1&e.d[t])&&(a=1),0==o.e&&1==o.d[0]&&1==o.d.length)return o.s=a,o}return(t=0!=(n=b(+o,u))&&isFinite(n)?new l(n+"").e:w(u*(Math.log("0."+C(o.d))/Math.LN10+o.e+1)))>l.maxE+1||t<l.minE-1?new l(0<t?a/0:0):(m=!1,l.rounding=o.s=1,n=Math.min(12,(t+"").length),(i=X(e.times(Z(o,r+n)),r)).d&&N((i=U(i,r+5,1)).d,r,s)&&+C((i=U(X(e.times(Z(o,(t=r+10)+n)),t),t+5,1)).d).slice(r+1,r+15)+1==1e14&&(i=U(i,r+1,0)),i.s=a,m=!0,U(i,r,l.rounding=s))},L.toPrecision=function(e,t){var n=this,r=n.constructor;return e=void 0===e?z(n,n.e<=r.toExpNeg||n.e>=r.toExpPos):(R(e,1,u),void 0===t?t=r.rounding:R(t,0,8),z(n=U(new r(n),e,t),e<=n.e||n.e<=r.toExpNeg,e)),n.isNeg()&&!n.isZero()?"-"+e:e},L.toSignificantDigits=L.toSD=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(R(e,1,u),void 0===t?t=n.rounding:R(t,0,8)),U(new n(this),e,t)},L.toString=function(){var e=this.constructor;return e=z(this,this.e<=e.toExpNeg||this.e>=e.toExpPos),this.isNeg()&&!this.isZero()?"-"+e:e},L.truncated=L.trunc=function(){return U(new this.constructor(this),this.e+1,1)},L.valueOf=L.toJSON=function(){var e=this.constructor;return e=z(this,this.e<=e.toExpNeg||this.e>=e.toExpPos),this.isNeg()?"-"+e:e};var I=function(e,t,n,r,i,s){var o,l,u,c,h,p,f,m,d,g,v,y,b,x,M,S,_,T,A,L=e.constructor,C=e.s==t.s?1:-1,R=e.d,N=t.d;if(!(R&&R[0]&&N&&N[0]))return new L(e.s&&t.s&&(R?!N||R[0]!=N[0]:N)?R&&0==R[0]||!N?0*C:C/0:NaN);for(l=s?(h=1,e.e-t.e):(s=E,w(e.e/(h=7))-w(t.e/h)),T=N.length,S=R.length,d=(C=new L(C)).d=[],u=0;N[u]==(R[u]||0);u++);if(N[u]>(R[u]||0)&&l--,null==n?(b=n=L.precision,r=L.rounding):b=i?n+(e.e-t.e)+1:n,b<0)d.push(1),p=!0;else{if(b=b/h+2|0,u=0,1==T){for(N=N[c=0],b++;(u<S||c)&&b--;u++)x=c*s+(R[u]||0),d[u]=x/N|0,c=x%N|0;p=c||u<S}else{for(1<(c=s/(N[0]+1)|0)&&(N=O(N,c,s),R=O(R,c,s),T=N.length,S=R.length),v=(g=R.slice(0,M=T)).length;v<T;)g[v++]=0;for((A=N.slice()).unshift(0),_=N[0],N[1]>=s/2&&++_;c=0,(o=k(N,g,T,v))<0?(y=g[0],1<(c=(y=T!=v?y*s+(g[1]||0):y)/_|0)?1==(o=k(f=O(N,c=s<=c?s-1:c,s),g,m=f.length,v=g.length))&&(c--,D(f,T<m?A:N,m,s)):(0==c&&(o=c=1),f=N.slice()),(m=f.length)<v&&f.unshift(0),D(g,f,v,s),-1==o&&(o=k(N,g,T,v=g.length))<1&&(c++,D(g,T<v?A:N,v,s)),v=g.length):0===o&&(c++,g=[0]),d[u++]=c,o&&g[0]?g[v++]=R[M]||0:(g=[R[M]],v=1),(M++<S||void 0!==g[0])&&b--;);p=void 0!==g[0]}d[0]||d.shift()}if(1==h)C.e=l,a=p;else{for(u=1,c=d[0];10<=c;c/=10)u++;C.e=u+l*h-1,U(C,i?n+C.e+1:n,r,p)}return C};function O(e,t,n){var r,i=0,s=e.length;for(e=e.slice();s--;)r=e[s]*t+i,e[s]=r%n|0,i=r/n|0;return i&&e.unshift(i),e}function k(e,t,n,r){var i,s;if(n!=r)s=r<n?1:-1;else for(i=s=0;i<n;i++)if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}return s}function D(e,t,n,r){for(var i=0;n--;)e[n]-=i,i=e[n]<t[n]?1:0,e[n]=i*r+e[n]-t[n];for(;!e[0]&&1<e.length;)e.shift()}function U(e,t,n,r){var i,s,a,o,l,u,c,h,p=e.constructor;e:if(null!=t){if(!(c=e.d))return e;for(i=1,o=c[0];10<=o;o/=10)i++;if((s=t-i)<0)s+=7,l=(u=c[h=0])/b(10,i-(a=t)-1)%10|0;else if((h=Math.ceil((s+1)/7))>=(o=c.length)){if(!r)break e;for(;o++<=h;)c.push(0);u=l=0,a=(s%=7)-7+(i=1)}else{for(u=o=c[h],i=1;10<=o;o/=10)i++;l=(a=(s%=7)-7+i)<0?0:u/b(10,i-a-1)%10|0}if(r=r||t<0||void 0!==c[h+1]||(a<0?u:u%b(10,i-a-1)),l=n<4?(l||r)&&(0==n||n==(e.s<0?3:2)):5<l||5==l&&(4==n||r||6==n&&(0<s?0<a?u/b(10,i-a):0:c[h-1])%10&1||n==(e.s<0?8:7)),t<1||!c[0])return c.length=0,l?(t-=e.e+1,c[0]=b(10,(7-t%7)%7),e.e=-t||0):c[0]=e.e=0,e;if(0==s?(c.length=h,o=1,h--):(c.length=h+1,o=b(10,7-s),c[h]=0<a?(u/b(10,i-a)%b(10,a)|0)*o:0),l)for(;;){if(0==h){for(s=1,a=c[0];10<=a;a/=10)s++;for(a=c[0]+=o,o=1;10<=a;a/=10)o++;s!=o&&(e.e++,c[0]==E&&(c[0]=1));break}if(c[h]+=o,c[h]!=E)break;c[h--]=0,o=1}for(s=c.length;0===c[--s];)c.pop()}return m&&(e.e>p.maxE?(e.d=null,e.e=NaN):e.e<p.minE&&(e.e=0,e.d=[0])),e}function z(e,t,n){if(!e.isFinite())return Y(e);var r,i=e.e,s=C(e.d),a=s.length;return t?(n&&0<(r=n-a)?s=s.charAt(0)+"."+s.slice(1)+G(r):1<a&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(e.e<0?"e":"e+")+e.e):i<0?(s="0."+G(-i-1)+s,n&&0<(r=n-a)&&(s+=G(r))):a<=i?(s+=G(i+1-a),n&&0<(r=n-i-1)&&(s=s+"."+G(r))):((r=i+1)<a&&(s=s.slice(0,r)+"."+s.slice(r)),n&&0<(r=n-a)&&(i+1===a&&(s+="."),s+=G(r))),s}function B(e,t){var n=e[0];for(t*=7;10<=n;n/=10)t++;return t}function F(e,t,n){if(T<t)throw m=!0,n&&(e.precision=n),Error(v);return U(new e(h),t,1,!0)}function q(e,t,n){if(A<t)throw Error(v);return U(new e(p),t,n,!0)}function H(e){var t=e.length-1,n=7*t+1;if(t=e[t]){for(;t%10==0;t/=10)n--;for(t=e[0];10<=t;t/=10)n++}return n}function G(e){for(var t="";e--;)t+="0";return t}function V(e,t,n,r){var i,s=new e(1),a=Math.ceil(r/7+4);for(m=!1;;){if(n%2&&te((s=s.times(t)).d,a)&&(i=!0),0===(n=w(n/2))){n=s.d.length-1,i&&0===s.d[n]&&++s.d[n];break}te((t=t.times(t)).d,a)}return m=!0,s}function W(e){return 1&e.d[e.d.length-1]}function j(e,t,n){for(var r,i=new e(t[0]),s=0;++s<t.length;){if(!(r=new e(t[s])).s){i=r;break}i[n](r)&&(i=r)}return i}function X(e,t){var n,r,i,s,a,o,l,u=0,c=0,h=0,p=e.constructor,f=p.rounding,d=p.precision;if(!e.d||!e.d[0]||17<e.e)return new p(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(l=null==t?(m=!1,d):t,o=new p(.03125);-2<e.e;)e=e.times(o),h+=5;for(l+=r=Math.log(b(2,h))/Math.LN10*2+5|0,n=s=a=new p(1),p.precision=l;;){if(s=U(s.times(e),l,1),n=n.times(++c),C((o=a.plus(I(s,n,l,1))).d).slice(0,l)===C(a.d).slice(0,l)){for(i=h;i--;)a=U(a.times(a),l,1);if(null!=t)return p.precision=d,a;if(!(u<3&&N(a.d,l-r,f,u)))return U(a,p.precision=d,f,m=!0);p.precision=l+=10,n=s=o=new p(1),c=0,u++}a=o}}function Z(e,t){var n,r,i,s,a,o,l,u,c,h,p,f=1,d=e,g=d.d,v=d.constructor,y=v.rounding,w=v.precision;if(d.s<0||!g||!g[0]||!d.e&&1==g[0]&&1==g.length)return new v(g&&!g[0]?-1/0:1!=d.s?NaN:g?0:d);if(c=null==t?(m=!1,w):t,v.precision=c+=10,r=(n=C(g)).charAt(0),!(Math.abs(s=d.e)<15e14))return u=F(v,c+2,w).times(s+""),d=Z(new v(r+"."+n.slice(1)),c-10).plus(u),v.precision=w,null==t?U(d,w,y,m=!0):d;for(;r<7&&1!=r||1==r&&3<n.charAt(1);)r=(n=C((d=d.times(e)).d)).charAt(0),f++;for(s=d.e,1<r?(d=new v("0."+n),s++):d=new v(r+"."+n.slice(1)),l=a=d=I((h=d).minus(1),d.plus(1),c,1),p=U(d.times(d),c,1),i=3;;){if(a=U(a.times(p),c,1),C((u=l.plus(I(a,new v(i),c,1))).d).slice(0,c)===C(l.d).slice(0,c)){if(l=l.times(2),0!==s&&(l=l.plus(F(v,c+2,w).times(s+""))),l=I(l,new v(f),c,1),null!=t)return v.precision=w,l;if(!N(l.d,c-10,y,o))return U(l,v.precision=w,y,m=!0);v.precision=c+=10,u=a=d=I(h.minus(1),h.plus(1),c,1),p=U(d.times(d),c,1),i=o=1}l=u,i+=2}}function Y(e){return String(e.s*e.s/0)}function J(e,t){var n,r,i;for(0<(r=(t=-1<(n=t.indexOf("."))?t.replace(".",""):t).search(/e/i))?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);r++);for(i=t.length;48===t.charCodeAt(i-1);--i);if(t=t.slice(r,i)){if(i-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%7,n<0&&(r+=7),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=7;r<i;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=i;for(;r--;)t+="0";e.d.push(+t),m&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function $(e,t,n,r,i){var s,a,o,l,u=e.precision,c=Math.ceil(u/7);for(m=!1,l=n.times(n),o=new e(r);;){if(a=I(o.times(l),new e(t++*t++),u,1),o=i?r.plus(a):r.minus(a),r=I(a.times(l),new e(t++*t++),u,1),void 0!==(a=o.plus(r)).d[c]){for(s=c;a.d[s]===o.d[s]&&s--;);if(-1==s)break}s=o,o=r,r=a,a=s}return m=!0,a.d.length=c+1,a}function Q(e,t){for(var n=e;--t;)n*=e;return n}function K(e,t){var n=t.s<0,r=q(e,e.precision,1),i=r.times(.5);if((t=t.abs()).lte(i))return o=n?4:1,t;if((e=t.divToInt(r)).isZero())o=n?3:2;else{if((t=t.minus(e.times(r))).lte(i))return o=W(e)?n?2:3:n?4:1,t;o=W(e)?n?1:4:n?3:2}return t.minus(r).abs()}function ee(e,t,n,r){var i,s,o,l,h,p,f,m,d=e.constructor,g=void 0!==n;if(g?(R(n,1,u),void 0===r?r=d.rounding:R(r,0,8)):(n=d.precision,r=d.rounding),e.isFinite()){for(g?(i=2,16==t?n=4*n-3:8==t&&(n=3*n-2)):i=t,0<=(o=(p=z(e)).indexOf("."))&&(p=p.replace(".",""),(m=new d(1)).e=p.length-o,m.d=P(z(m),10,i),m.e=m.d.length),s=l=(f=P(p,10,i)).length;0==f[--l];)f.pop();if(f[0]){if(o<0?s--:((e=new d(e)).d=f,e.e=s,f=(e=I(e,m,n,r,0,i)).d,s=e.e,h=a),o=f[n],m=i/2,h=h||void 0!==f[n+1],h=r<4?(void 0!==o||h)&&(0===r||r===(e.s<0?3:2)):m<o||o===m&&(4===r||h||6===r&&1&f[n-1]||r===(e.s<0?8:7)),f.length=n,h)for(;++f[--n]>i-1;)f[n]=0,n||(++s,f.unshift(1));for(l=f.length;!f[l-1];--l);for(o=0,p="";o<l;o++)p+=c.charAt(f[o]);if(g){if(1<l)if(16==t||8==t){for(o=16==t?4:3,--l;l%o;l++)p+="0";for(l=(f=P(p,i,t)).length;!f[l-1];--l);for(o=1,p="1.";o<l;o++)p+=c.charAt(f[o])}else p=p.charAt(0)+"."+p.slice(1);p=p+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)p="0"+p;p="0."+p}else if(++s>l)for(s-=l;s--;)p+="0";else s<l&&(p=p.slice(0,s)+"."+p.slice(s))}else p=g?"0p+0":"0";p=(16==t?"0x":2==t?"0b":8==t?"0o":"")+p}else p=Y(e);return e.s<0?"-"+p:p}function te(e,t){return e.length>t&&(e.length=t,1)}function ne(e){return new this(e).abs()}function re(e){return new this(e).acos()}function ie(e){return new this(e).acosh()}function se(e,t){return new this(e).plus(t)}function ae(e){return new this(e).asin()}function oe(e){return new this(e).asinh()}function le(e){return new this(e).atan()}function ue(e){return new this(e).atanh()}function ce(e,t){e=new this(e),t=new this(t);var n,r=this.precision,i=this.rounding,s=r+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(n=t.s<0?q(this,r,i):new this(0)).s=e.s:!e.d||t.isZero()?(n=q(this,s,1).times(.5)).s=e.s:n=t.s<0?(this.precision=s,this.rounding=1,n=this.atan(I(e,t,s,1)),t=q(this,s,1),this.precision=r,this.rounding=i,e.s<0?n.minus(t):n.plus(t)):this.atan(I(e,t,s,1)):(n=q(this,s,1).times(0<t.s?.25:.75)).s=e.s:n=new this(NaN),n}function he(e){return new this(e).cbrt()}function pe(e){return U(e=new this(e),e.e+1,2)}function fe(e){if(!e||"object"!=typeof e)throw Error(d+"Object expected");for(var t,n,r=!0===e.defaults,i=["precision",1,u,"rounding",0,8,"toExpNeg",-l,0,"toExpPos",0,l,"maxE",0,l,"minE",-l,0,"modulo",0,9],s=0;s<i.length;s+=3)if(t=i[s],r&&(this[t]=f[t]),void 0!==(n=e[t])){if(!(w(n)===n&&i[s+1]<=n&&n<=i[s+2]))throw Error(g+t+": "+n);this[t]=n}if(t="crypto",r&&(this[t]=f[t]),void 0!==(n=e[t])){if(!0!==n&&!1!==n&&0!==n&&1!==n)throw Error(g+t+": "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(y);this[t]=!0}else this[t]=!1}return this}function me(e){return new this(e).cos()}function de(e){return new this(e).cosh()}function ge(e,t){return new this(e).div(t)}function ve(e){return new this(e).exp()}function ye(e){return U(e=new this(e),e.e+1,3)}function we(){var e,t,n=new this(0);for(m=!1,e=0;e<arguments.length;)if((t=new this(arguments[e++])).d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return m=!0,new this(1/0);n=t}return m=!0,n.sqrt()}function be(e){return e instanceof s||e&&"[object Decimal]"===e.name||!1}function xe(e){return new this(e).ln()}function Me(e,t){return new this(e).log(t)}function Se(e){return new this(e).log(2)}function _e(e){return new this(e).log(10)}function Ee(){return j(this,arguments,"lt")}function Te(){return j(this,arguments,"gt")}function Ae(e,t){return new this(e).mod(t)}function Le(e,t){return new this(e).mul(t)}function Ce(e,t){return new this(e).pow(t)}function Re(e){var t,n,r,i,s=0,a=new this(1),o=[];if(void 0===e?e=this.precision:R(e,1,u),r=Math.ceil(e/7),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));s<r;)429e7<=(i=t[s])?t[s]=crypto.getRandomValues(new Uint32Array(1))[0]:o[s++]=i%1e7;else{if(!crypto.randomBytes)throw Error(y);for(t=crypto.randomBytes(r*=4);s<r;)214e7<=(i=t[s]+(t[s+1]<<8)+(t[s+2]<<16)+((127&t[s+3])<<24))?crypto.randomBytes(4).copy(t,s):(o.push(i%1e7),s+=4);s=r/4}else for(;s<r;)o[s++]=1e7*Math.random()|0;for(e%=7,(r=o[--s])&&e&&(i=b(10,7-e),o[s]=(r/i|0)*i);0===o[s];s--)o.pop();if(s<0)o=[n=0];else{for(n=-1;0===o[0];n-=7)o.shift();for(r=1,i=o[0];10<=i;i/=10)r++;r<7&&(n-=7-r)}return a.e=n,a.d=o,a}function Ne(e){return U(e=new this(e),e.e+1,this.rounding)}function Pe(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function Ie(e){return new this(e).sin()}function Oe(e){return new this(e).sinh()}function ke(e){return new this(e).sqrt()}function De(e,t){return new this(e).sub(t)}function Ue(e){return new this(e).tan()}function ze(e){return new this(e).tanh()}function Be(e){return U(e=new this(e),e.e+1,1)}return(s=function e(t){var n,r,i;function a(e){var t,n,r,i=this;if(!(i instanceof a))return new a(e);if(e instanceof(i.constructor=a))return i.s=e.s,void(m?!e.d||e.e>a.maxE?(i.e=NaN,i.d=null):e.e<a.minE?(i.e=0,i.d=[0]):(i.e=e.e,i.d=e.d.slice()):(i.e=e.e,i.d=e.d&&e.d.slice()));if("number"==(r=typeof e)){if(0===e)return i.s=1/e<0?-1:1,i.e=0,void(i.d=[0]);if(e<0?(e=-e,i.s=-1):i.s=1,e===~~e&&e<1e7){for(t=0,n=e;10<=n;n/=10)t++;return void(m?a.maxE<t?(i.e=NaN,i.d=null):t<a.minE?(i.e=0,i.d=[0]):(i.e=t,i.d=[e]):(i.e=t,i.d=[e]))}return 0*e!=0?(e||(i.s=NaN),i.e=NaN,void(i.d=null)):J(i,e.toString())}if("string"!=r)throw Error(g+e);return 45===(n=e.charCodeAt(0))?(e=e.slice(1),i.s=-1):(43===n&&(e=e.slice(1)),i.s=1),(_.test(e)?J:function(e,t){var n,r,i,a,o,l,u,c;if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(M.test(t))c=16,t=t.toLowerCase();else if(x.test(t))c=2;else{if(!S.test(t))throw Error(g+t);c=8}for(a=0<=(i=(t=0<(i=t.search(/p/i))?(l=+t.slice(i+1),t.substring(2,i)):t.slice(2)).indexOf(".")),n=e.constructor,a&&(i=(o=(t=t.replace(".","")).length)-i,r=V(n,new n(c),i,2*i)),i=c=(u=P(t,c,E)).length-1;0===u[i];--i)u.pop();return i<0?new n(0*e.s):(e.e=B(u,c),e.d=u,m=!1,a&&(e=I(e,r,4*o)),l&&(e=e.times(Math.abs(l)<54?b(2,l):s.pow(2,l))),m=!0,e)})(i,e)}if(a.prototype=L,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.EUCLID=9,a.config=a.set=fe,a.clone=e,a.isDecimal=be,a.abs=ne,a.acos=re,a.acosh=ie,a.add=se,a.asin=ae,a.asinh=oe,a.atan=le,a.atanh=ue,a.atan2=ce,a.cbrt=he,a.ceil=pe,a.cos=me,a.cosh=de,a.div=ge,a.exp=ve,a.floor=ye,a.hypot=we,a.ln=xe,a.log=Me,a.log10=_e,a.log2=Se,a.max=Ee,a.min=Te,a.mod=Ae,a.mul=Le,a.pow=Ce,a.random=Re,a.round=Ne,a.sign=Pe,a.sin=Ie,a.sinh=Oe,a.sqrt=ke,a.sub=De,a.tan=Ue,a.tanh=ze,a.trunc=Be,(t=void 0===t?{}:t)&&!0!==t.defaults)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<i.length;)t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);return a.config(t),a}(f)).default=s.Decimal=s,h=new s(h),p=new s(p),void 0!==(i=function(){return s}.call(t,r,t,e))&&(e.exports=i),s}()});e.exports=a,a=r(407),r(426),function(){"use strict";var e=a.getCore(),t=e.PARSER,n=e.groups.N,r=e.groups.P,i=e.groups.S,s=e.groups.EX,o=e.groups.FN,l=e.groups.PL,u=e.groups.CP,c=e.groups.CB,h=e.Utils.keys,p=e.Utils.even,f=e.Utils.variables,m=e.Utils.format,d=e.Utils.round,g=e.Frac,v=e.Utils.isInt,y=e.Symbol,w=e.Settings.CONST_HASH,b=e.Utils.importFunctions();function x(n,r,i){if(e.Utils.isSymbol(n))this.parse(n),this.variable=this.variable||r;else if(isNaN(n))"string"==typeof n&&this.parse(t.parse(n));else{if(i=i||0,void 0===r)throw new e.exceptions.InvalidVariableNameError("Polynomial expects a variable name when creating using order");this.coeffs=[],this.coeffs[i]=n,this.fill(n)}}function M(){this.factors={},this.length=0}function S(t,n,r){this.terms=n||[],this.coeff=t,this.map=r,this.sum=new e.Frac(0),this.image=void 0}e.Utils.evaluate,x.fromArray=function(t,n){if(void 0===n)throw new e.exceptions.InvalidVariableNameError("A variable name must be specified when creating polynomial from array");var r=new x;return r.coeffs=t,r.variable=n,r},x.fit=function(e,t,n,r,i,s){var a=new Array(i+1),o=n-t;a[0]=t,o-=(a[i]=e)*Math.pow(r,i);for(var l=i-1;0<l;l--){var u=Math.pow(r,l),c=o/u;o-=(c=Math.sign(c)*Math.floor(Math.abs(c)))*u,a[l]=c}if(0!==o)return null;for(l=0;l<a.length;l++)a[l]=new g(a[l]);return x.fromArray(a,s)},x.prototype={parse:function(r,i){if(this.variable=f(r)[0],!r.isPoly())throw e.exceptions.NerdamerTypeError("Polynomial Expected! Received "+e.Utils.text(r));if(i=i||[],(r=r.power.absEquals(1)?r:t.expand(r)).group===e.groups.N)i[0]=r.multiplier;else if(r.group===e.groups.S)i[r.power.toDecimal()]=r.multiplier;else for(var s in r.symbols){var a=r.symbols[s];if(s=a.power,e.Utils.isSymbol(s))throw new e.exceptions.NerdamerTypeError("power cannot be a Symbol");s=a.group===n?0:s.toDecimal(),a.symbols?this.parse(a,i):i[s]=a.multiplier}this.coeffs=i,this.fill()},fill:function(e){e=Number(e)||0;for(var t=this.coeffs.length,n=0;n<t;n++)void 0===this.coeffs[n]&&(this.coeffs[n]=new g(e));return this},trim:function(){for(var e=this.coeffs.length;e--;){var t=this.coeffs[e],n=t.equals(0);if(!t||!n)break;if(0===e)break;this.coeffs.pop()}return this},modP:function(e){for(var t=this.coeffs.length,n=0;n<t;n++){var r=this.coeffs[n];if(r<0){for(var i,s=n;s<t;s++)if(0<this.coeffs[s]){i=this.coeffs[s];break}if(i){for(;n<s;s--)this.coeffs[s]=this.coeffs[s].subtract(new g(1)),this.coeffs[s-1]=this.coeffs[s-1].add(new g(e));r=this.coeffs[n]}}var a,o=r.mod(e),l=r.subtract(o).divide(e);l.equals(0)||(r=(r=this.coeffs[a=n+1]||new g(0)).add(l),this.coeffs[a]=new g(r),this.coeffs[n]=new g(o))}return this},add:function(e){for(var t=Math.max(this.coeffs.length,e.coeffs.length),n=0;n<t;n++){var r=this.coeffs[n]||new g(0),i=e.coeffs[n]||new g(0);this.coeffs[n]=r.add(i)}return this},subtract:function(e){for(var t=Math.max(this.coeffs.length,e.coeffs.length),n=0;n<t;n++){var r=this.coeffs[n]||new g(0),i=e.coeffs[n]||new g(0);this.coeffs[n]=r.subtract(i)}return this},divide:function(t){for(var n=this.variable,r=e.Utils.arrayClone(this.coeffs),i=e.Utils.arrayClone(t.coeffs),s=r.length,a=i.length-1,o=[],l=0;l<s;l++){var u=s-(l+1),c=u-a,h=r[u].divide(i[a]);if(c<0)break;o[c]=h;for(var p=0;p<=a;p++)r[p+c]=r[p+c].subtract(i[p].multiply(h))}return t=x.fromArray(r,n||"x").trim(),[x.fromArray(o,n||"x"),t]},multiply:function(e){for(var t=this.coeffs.length,n=e.coeffs.length,r=[],i=0;i<t;i++)for(var s=this.coeffs[i],a=0;a<n;a++){var o=i+a,l=e.coeffs[a],u=r[o]||new g(0);r[o]=u.add(s.multiply(l))}return this.coeffs=r,this},isZero:function(){for(var e=this.coeffs.length,t=0;t<e;t++)if(!this.coeffs[t].equals(0))return!1;return!0},sub:function(e){for(var t=new g(0),n=this.coeffs.length,r=0;r<n;r++){var i=this.coeffs[r];i.equals(0)||(t=t.add(i.multiply(new g(Math.pow(e,r)))))}return t},clone:function(){var e=new x;return e.coeffs=this.coeffs,e.variable=this.variable,e},deg:function(){return this.trim(),this.coeffs.length-1},lc:function(){return this.coeffs[this.deg()].clone()},monic:function(){for(var e=this.lc(),t=this.coeffs.length,n=0;n<t;n++)this.coeffs[n]=this.coeffs[n].divide(e);return this},gcd:function(t){if(this.coeffs.length-1<t.coeffs.length-1)return t.gcd(this);for(var n=this;!t.isZero();){var r=t.clone();t=(n=n.clone()).divide(r)[1],n=r}var i=e.Math2.QGCD.apply(null,n.coeffs);if(!i.equals(1))for(var s=n.coeffs.length,a=0;a<s;a++)n.coeffs[a]=n.coeffs[a].divide(i);return n},diff:function(){for(var e=[],t=this.coeffs.length,n=1;n<t;n++)e.push(this.coeffs[n].multiply(new g(n)));return this.coeffs=e,this},integrate:function(){for(var e=[0],t=this.coeffs.length,n=0;n<t;n++){var r=new g(n+1);e[r]=this.coeffs[n].divide(r)}return this.coeffs=e,this},gcf:function(t){for(var n=[],r=0;r<this.coeffs.length;r++){var i=this.coeffs[r];i.equals(0)||-1!==n.indexOf(i)||n.push(i)}var s=[e.Math2.QGCD.apply(void 0,n),function(e){for(var t=0;t<e.length;t++)if(!e[t].equals(0))return t}(this.coeffs)].toDecimal();return t&&((t=[])[s[1]-1]=s[0],s=x.fromArray(t,this.variable).fill()),s},quad:function(e){var t=[];if(3<this.coeffs.length)throw new Error("Cannot calculate quadratic order of "+(this.coeffs.length-1));if(0===this.coeffs.length)throw new Error("Polynomial array has no terms");var n=this.coeffs[2]||0,r=this.coeffs[1]||0,i=r*r-4*n*this.coeffs[0];return i<0&&!e||(t[0]=(-r+Math.sqrt(i))/(2*n),t[1]=(-r-Math.sqrt(i))/(2*n)),t},squareFree:function(){for(var e=this.clone(),t=1,n=e.clone().diff(),r=e.clone().gcd(n),i=e.divide(r)[0],s=x.fromArray([new g(1)],e.variable);!r.equalsNumber(1);){var a=i.gcd(r),o=i.divide(a)[0];if(!o.equalsNumber(1)&&1<t){for(var l=o.clone(),u=1;u<t;u++)l.multiply(o.clone());o=l}s=s.multiply(o),t++,r=r.divide(i=a)[0]}return[s,i,t]},toSymbol:function(){var n=this.coeffs.length,r=this.variable;if(0===n)return new e.Symbol(0);for(var i=n-1,s="",a=0;a<n;a++){var o=a===i?"":"+",l=this.coeffs[a];l.equals(0)||(s+=l+"*"+r+"^"+a+o)}return t.parse(s)},equalsNumber:function(e){return this.trim(),1===this.coeffs.length&&this.coeffs[0].toDecimal()===String(e)},toString:function(){return this.toSymbol().toString()}},y.prototype.coeffs=function(e,n){n&&!this.isPoly(!0)&&t.error("Polynomial expected when requesting coefficients with order"),e=e||[];var r,i=this.clone().distributeMultiplier();if(i.isComposite())for(var s in i.symbols)(s=i.symbols[s]).isComposite()?s.clone().distributeMultiplier().coeffs(e,n):n?e[s.isConstant()?0:s.power.toDecimal()]=s.multiplier:e.push(s.multiplier);else n?e[i.isConstant(!0)?0:i.power.toDecimal()]=i.multiplier:i.group===c&&i.isImaginary()?(r=new y(i.multiplier),i.each((function(e){(e.isConstant(!0)||e.imaginary)&&(r=t.multiply(r,e))})),e.push(r)):e.push(i.multiplier);if(n)for(var a=0;a<e.length;a++)void 0===e[a]&&(e[a]=new y(0));return e},y.prototype.tBase=function(e){if(void 0===e)throw new Error("Symbol.tBase requires a map object!");for(var t=[],n=this.collectSymbols(null,null,null,!0),r=n.length,i=0;i<r;i++){var s=n[i],a=s.group,o=new S(s.multiplier,[],e);if(a===c)for(var l in s.symbols){var u=s.symbols[l];o.terms[e[l]]=u.power}else o.terms[e[s.value]]=s.power;t.push(o.fill()),o.updateCount()}return t},y.prototype.altVar=function(e){var t=this.multiplier.toString(),n=this.power.toString();return("1"===t?"":t+"*")+e+("1"===n?"":"^"+n)},y.prototype.sameVars=function(e){if(!this.symbols&&this.group!==e.group)return!1;for(var t in this.symbols){var n=this.symbols[t];if(!(t=e.symbols[t]))return!1;if(n.value!==t.value)return!1}return!0},y.prototype.groupTerms=function(n){var r,i,s;n=String(n);var a=[];return this.each((function(o){if(o.group===l){s=o.groupTerms(n);for(var u=0;u<s.length;u++){var c=s[u];c&&(a[u]=c)}}else r=e.Utils.decompose_fn(o,n,!0),i=r.x.value===n?Number(r.x.power):0,a[i]=t.add(a[i]||new y(0),r.a)})),a},y.prototype.collectFactors=function(){var e=[];return this.group===c?this.each((function(t){e.push(t.clone())})):e.push(this.clone()),e},M.prototype.getNumberSymbolics=function(){var e=0;return this.each((function(t){t.isConstant(!0)||e++})),e},M.prototype.add=function(n){if(n.equals(0))return this;if(n.equals(-1)&&0<this.length){var r=e.Utils.firstObject(this.factors,null,!0);return this.add(t.symfunction(e.Settings.PARENTHESIS,[r.obj]).negate()),delete this.factors[r.key],this.length--,this}if(n.group===c){var i=this;n.multiplier.equals(1)||i.add(new y(n.multiplier)),n.each((function(e){i.add(e)}))}else{if(this.preAdd&&(n=this.preAdd(n)),(r=(n=this.pFactor?t.pow(n,new y(this.pFactor)):n).isConstant())&&n.equals(1))return this;(r=r?n.value:n.text())in this.factors?(this.factors[r]=t.multiply(this.factors[r],n),this.factors[r].equals(1)&&(delete this.factors[r],this.length--)):(this.factors[r]=n,this.length++)}return this},M.prototype.toSymbol=function(){for(var n=new y(1),r=Object.values(this.factors).sort((function(e,t){return e.group>t.group})),i=0,s=r.length;i<s;i++){var a=(a=r[i]).power.equals(1)&&""!==a.fname?t.symfunction(e.PARENTHESIS,[a]):a;n=t.multiply(n,a)}return""===n.fname?y.unwrapPARENS(n):n},M.prototype.merge=function(e){for(var n in e)n in this.factors?this.factors[n]=t.multiply(this.factors[n],e[n]):this.factors[n]=e[n];return this},M.prototype.each=function(t){for(var n in this.factors){var r=this.factors[n];r.fname===e.PARENTHESIS&&r.isLinear()&&(r=r.args[0]),t.call(this,r,n)}return this},M.prototype.count=function(){return h(this.factors).length},M.prototype.clean=function(){try{var t=e.Settings.CONST_HASH;this.factors[t].lessThan(0)&&(this.factors[t].equals(-1)?delete this.factors[t]:this.factors[t].negate(),this.each((function(e){e.negate()})))}catch(t){}},M.prototype.toString=function(){return this.toSymbol().toString()},S.prototype.updateCount=function(){this.count=this.count||0;for(var e=0;e<this.terms.length;e++)this.terms[e].equals(0)||this.count++;return this},S.prototype.getVars=function(){for(var e=[],t=0;t<this.terms.length;t++){var n=this.terms[t];this.getRevMap(),n.equals(0)||e.push(this.rev_map[t])}return e.join(" ")},S.prototype.len=function(){return void 0===this.count&&this.updateCount(),this.count},S.prototype.toSymbol=function(e){e=e||this.getRevMap();for(var n=new y(this.coeff),r=0;r<this.terms.length;r++){var i=e[r],s=this.terms[r];s.equals(0)||i===w||((i=new y(i)).power=s,n=t.multiply(n,i))}return n},S.prototype.getRevMap=function(){if(this.rev_map)return this.rev_map;var e,t={};for(e in this.map)t[this.map[e]]=e;return this.rev_map=t},S.prototype.generateImage=function(){return this.image=this.terms.join(" "),this},S.prototype.getImg=function(){return this.image||this.generateImage(),this.image},S.prototype.fill=function(){for(var t=this.map.length,n=0;n<t;n++)void 0===this.terms[n]?this.terms[n]=new e.Frac(0):this.sum=this.sum.add(this.terms[n]);return this},S.prototype.divide=function(e){for(var t=this.coeff.divide(e.coeff),n=this.terms.length,r=new S(t,[],this.map),i=0;i<n;i++)r.terms[i]=this.terms[i].subtract(e.terms[i]),r.sum=r.sum.add(r.terms[i]);return r},S.prototype.multiply=function(e){for(var t=this.coeff.multiply(e.coeff),n=this.terms.length,r=new S(t,[],this.map),i=0;i<n;i++)r.terms[i]=this.terms[i].add(e.terms[i]),r.sum=r.sum.add(r.terms[i]);return r},S.prototype.isZero=function(){return this.coeff.equals(0)},S.prototype.toString=function(){return"{ coeff: "+this.coeff.toString()+", terms: ["+this.terms.join(",")+"]: sum: "+this.sum.toString()+", count: "+this.count+"}"},e.Utils.toMapObj=function(e){for(var t=0,n={},r=0;r<e.length;r++){var i=e[r];void 0===n[i]&&(n[i]=t,t++)}return n.length=t,n},e.Utils.filledArray=function(e,t,n){for(var r=[];t--;)r[t]=n?new n(e):e;return r},e.Utils.arrSum=function(e){for(var t=0,n=e.length,r=0;r<n;r++)t+=e[r];return t},e.Utils.haveIntersection=function(e,t){var n;return t.length>e.length&&(n=t,t=e,e=n),e.some((function(e){return-1<t.indexOf(e)}))},e.Utils.subFunctions=function(t,n){n=n||{};var r=[];return t.each((function(t){var i,s;t.group===o||t.previousGroup===o?(i=e.Utils.text(t,"hash"),(s=n[i])||(s=t.fname+h(n).length,n[i]=s),r.push(t.altVar(s))):t.group===c||t.group===l||t.group===u?r.push(e.Utils.subFunctions(t,n)):r.push(t.text())})),t.group===u||t.group===l?t.altVar(e.Utils.inBrackets(r.join("+"))):t.group===c?t.altVar(e.Utils.inBrackets(r.join("*"))):t.text()},e.Utils.getFunctionsSubs=function(e){var n,r={};for(n in e)r[e[n]]=t.parse(n);return r};var _=e.Algebra={version:"1.4.6",proots:function(n,r){function s(t,n,i){for(var s=function(t,n){var i=t.slice(0);if(t.unshift(n),100<n)throw new e.exceptions.ValueLimitExceededError("This utility accepts polynomials of degree up to 100. ");var s=[];for((t={}).Degree=n,v=0;v<n;v++)s.push(0);var a=s.slice(0);function o(e,t,n,r,i,s){i[0]=s.b=r[0],i[1]=s.a=-t*s.b+r[1];for(var a=2;a<e;a++)i[a]=-(t*s.a+n*s.b)+r[a],s.b=s.a,s.a=i[a]}function l(e,t,n,r,i,s,a,l,u){var c=new Object,h=3;return c.b=c.a=0,o(t,a,l,s,u,c),i.c=c.a,i.d=c.b,Math.abs(i.c)<=100*e*Math.abs(s[t-1])&&Math.abs(i.d)<=100*e*Math.abs(s[t-2])||(i.h=l*r,Math.abs(i.d)>=Math.abs(i.c)?(h=2,i.e=n/i.d,i.f=i.c/i.d,i.g=a*r,i.a3=i.e*(i.g+n)+i.h*(r/i.d),i.a1=-n+i.f*r,i.a7=i.h+(i.f+a)*n):(h=1,i.e=n/i.c,i.f=i.d/i.c,i.g=i.e*a,i.a3=i.e*n+(i.g+i.h/i.c)*r,i.a1=-n*(i.d/i.c)+r,i.a7=i.g*i.d+i.h*i.f+n)),h}function u(e,t,n,r,i,s,a,o,l){if(3!=n)if(r=1==n?i:r,Math.abs(s.a1)>10*e*Math.abs(r))for(s.a7/=s.a1,s.a3/=s.a1,a[0]=l[0],a[1]=-l[0]*s.a7+l[1],u=2;u<t;u++)a[u]=-l[u-1]*s.a7+o[u-2]*s.a3+l[u];else for(a[0]=0,a[1]=-l[0]*s.a7,u=2;u<t;u++)a[u]=-l[u-1]*s.a7+o[u-2]*s.a3;else{a[1]=a[0]=0;for(var u=2;u<t;u++)a[u]=o[u-2]}}function c(e,t,n,r,i,s,a,o,l,u,c,h,p,f,m,d,g){var v;t.b=t.a=0,3!=e&&(o=2!=e?(v=n+p*a+h*u,o+(p+f*u)*l):(v=(n+c)*u+h,(u+p)*o+f*l),l=-m[d-1]/g[d],0!=(v=-(i=f*(m=-(m[d-2]+l*g[d-1])/g[d])*r-((g=l*s)+(d=l*l*i)))+o+l*v)&&(t.a=-(p*(d+g)+f*(l*r+m*s))/v+p,t.b=f*(1+i/v)))}function h(e,t,n,r){var i,s,a;(r.sr=r.si=r.lr=r.li=0)!=e?0!=n?(i=t/2,s=Math.abs(i)<Math.abs(n)?(a=-(a=0<=n?e:-e)+i*(i/Math.abs(n)),Math.sqrt(Math.abs(a))*Math.sqrt(Math.abs(n))):(a=-e/i*(n/i)+1,Math.sqrt(Math.abs(a))*Math.abs(i)),0<=a?(r.lr=(-i+(s=0<=i?-s:s))/e,r.sr=0!=r.lr?n/r.lr/e:r.sr):(r.lr=r.sr=-i/e,r.si=Math.abs(s/e),r.li=-r.si)):r.lr=-t/e:r.sr=0!=t?-n/t:r.sr}function p(e,t,n,r,i,s,a,p,f,m,d,g){var v,y,w,b,x,M,S,_,E,T,A,L,C,R,N,P,I,O,k,D,U,z,B,F,q,H=new Object,G=new Object,V=new Array(t),W=new Array(t),j=1;for(g.NZ=0,b=w=.25,x=r,_=i,H.b=H.a=0,o(f,d,i,p,m,H),v=H.a,y=H.b,G.h=G.g=G.f=G.e=G.d=G.c=G.a7=G.a3=G.a1=0,B=l(e,a,v,y,G,s,d,i,V),D=0;D<n;D++){if(O=1,u(e,a,B,v,y,G,s,V,m),c(B=l(e,a,v,y,G,s,d,i,V),H,v,G.a1,G.a3,G.a7,y,G.c,G.d,G.f,G.g,G.h,d,i,s,a,p),N=H.a,I=P=H.b,T=0!=s[a-1]?-p[a]/s[a-1]:0,A=C=1,0!=D&&3!=B&&(F=(R=(C=0!=I?Math.abs((I-_)/I):C)<S?C*S:1)<b?1:0,(U=(L=(A=0!=T?Math.abs((T-x)/T):A)<M?A*M:1)<w?1:0)||F)){for(k=0;k<a;k++)W[k]=s[k];for(E=T,z=q=0;;){if(!O||0!=(O=0)||!U||F&&!(L<R)){if(function(e,t,n,r,i,s,a,p,f,m,d,g){var v,y,w,b,x,M,S,_,E,T=new Object,A=0,L=0;n.NZ=0,b=r,M=i;do{if(T.li=T.lr=T.si=T.sr=0,h(1,b,M,T),n.szr=T.sr,n.szi=T.si,n.lzr=T.lr,n.lzi=T.li,Math.abs(Math.abs(n.szr)-Math.abs(n.lzr))>.01*Math.abs(n.lzr))break;for(o(a,b,M,f,s,p),S=Math.abs(-n.szr*p.b+p.a)+Math.abs(n.szi*p.b),_=Math.sqrt(Math.abs(M)),v=2*Math.abs(s[0]),x=-n.szr*p.b,E=1;E<t;E++)v=v*_+Math.abs(s[E]);if(S<=20*(v=(9*(v=v*_+Math.abs(x+p.a))+2*Math.abs(x)-7*(Math.abs(p.a+x)+_*Math.abs(p.b)))*e)){n.NZ=2;break}if(20<++A)break;if(2<=A&&w<=.01&&y<=S&&!L){for(o(a,b-=b*(w=w<e?Math.sqrt(e):Math.sqrt(w)),M+=M*w,f,s,p),E=0;E<5;E++)u(e,t,l(e,t,p.a,p.b,d,g,b,M,m),p.a,p.b,d,g,m,s);L=1,A=0}}while(y=S,u(e,t,l(e,t,p.a,p.b,d,g,b,M,m),p.a,p.b,d,g,m,s),c(l(e,t,p.a,p.b,d,g,b,M,m),p,p.a,d.a1,d.a3,d.a7,p.b,d.c,d.d,d.f,d.g,d.h,b,M,g,t,f),x=p.a,0!=(S=p.b)&&(w=Math.abs((-M+S)/S),b=x,M=S),0!=S)}(e,a,g,N,P,m,f,H,p,V,G,s),v=H.a,y=H.b,0<g.NZ)return;if(j=q=1,b*=.25,z||!U)j=0;else for(k=0;k<a;k++)s[k]=W[k]}if(0!=j){if(H.a=E,j=function(e,t,n,r,i,s,a,o,l){var u,c,h,p,f,m,d,g,v,y,w,b=r-1;for(t.NZ=w=v=0,d=n.a;;){for(m=i[0],a[0]=m,y=1;y<s;y++)a[y]=m=m*d+i[y];for(h=Math.abs(m),p=Math.abs(d),u=.5*Math.abs(a[0]),y=1;y<s;y++)u=u*p+Math.abs(a[y]);if(h<=20*e*(2*u-h)){t.NZ=1,t.szr=d,t.szi=0;break}if(10<++w)break;if(2<=w&&Math.abs(g)<=.001*Math.abs(-g+d)&&f<h){v=1,t.a=d;break}for(f=h,l[0]=c=o[0],y=1;y<r;y++)l[y]=c=c*d+o[y];if(Math.abs(c)>10*Math.abs(o[b])*e)for(g=-m/c,o[0]=a[0],y=1;y<r;y++)o[y]=g*l[y-1]+a[y];else for(o[0]=0,y=1;y<r;y++)o[y]=l[y-1];for(c=o[0],y=1;y<r;y++)c=c*d+o[y];d+=g=Math.abs(c)>10*Math.abs(o[b])*e?-m/c:0}return v}(e,g,H,a,p,f,m,s,V),E=H.a,0<g.NZ)return;if(z=1,w*=.25,0!=j){N=-(E+E),P=E*E;continue}}for(k=0;k<a;k++)s[k]=W[k];if(!F||q)break}o(f,d,i,p,m,H),B=l(e,a,v=H.a,y=H.b,G,s,d,i,V)}_=I,x=T,S=C,M=A}}!function(e,t,n,r){for(var i,s,a,o,l,u,c,f,m,d,g,v,y,w,b=e.Degree,x=.017453292519943295,M=Math.LN2,S=e.Degree+1,_=new Array(S),E=new Array(S),T=new Array(S),A=new Array(S),L=new Object,C=new Object,R=1;i=R,1<(u=1+(R/=2)););var N=Number.MIN_VALUE/i,P=Math.cos(94*x),I=Math.sin(94*x),O=Math.sqrt(.5),k=-O;for(C.NZ=m=0,C.szr=C.szi=C.lzr=C.lzi=0;0==t[b];)n[m]=r[m]=0,b--,m++;for(y=b+1;1<=b;){if(b<=2){b<2?(n[e.Degree-1]=-t[1]/t[0],r[e.Degree-1]=0):(h(t[L.li=L.lr=L.si=L.sr=0],t[1],t[2],L),n[e.Degree-2]=L.sr,r[e.Degree-2]=L.si,n[e.Degree-1]=L.lr,r[e.Degree-1]=L.li);break}for(o=0,l=Number.MAX_VALUE,D=0;D<y;D++)o<(U=Math.abs(t[D]))&&(o=U),0!=U&&U<l&&(l=U);if(((g=N/l)<=1&&10<=o||1<g&&Number.MAX_VALUE/g>=o)&&(g=0==g?Number.MIN_VALUE:g,g=Math.floor(Math.log(g)/M+.5),1!=(a=Math.pow(2,g))))for(D=0;D<y;D++)t[D]*=a;for(var D=0;D<y;D++)E[D]=Math.abs(t[D]);E[b]=-E[b],v=b-1,U=Math.exp((Math.log(-E[b])-Math.log(E[0]))/b),z=U=0!=E[v]&&(z=-E[b]/E[v])<U?z:U;do{var U,z=.1*(U=z),B=E[0];for(D=1;D<y;D++)B=B*z+E[D]}while(0<B);do{var F=B=E[0];for(D=1;D<b;D++)F=U*F+(B=U*B+E[D])}while(U-=s=(B=U*B+E[b])/F,.005<Math.abs(s/U));var q=U;for(D=1;D<b;D++)_[D]=(b-D)*t[D]/b;for(_[0]=t[0],R=t[b],u=t[v],w=0==_[v]?1:0,d=0;d<5;d++)if(c=_[v],w){for(D=0;D<v;D++)_[m=v-D]=_[m-1];w=(_[0]=0)==_[v]?1:0}else{var H=-R/c;for(D=0;D<v;D++)_[m=v-D]=H*_[m-1]+t[m];_[0]=t[0],w=Math.abs(_[v])<=Math.abs(u)*i*10?1:0}for(D=0;D<b;D++)A[D]=_[D];for(d=1;d<=20;d++){if(f=-I*k+P*O,k=I*O+P*k,p(i,S,20*d,f=q*(O=f),q,_,b,t,y,T,-2*f,C),0!=C.NZ){for(n[m=e.Degree-b]=C.szr,r[m]=C.szi,b=(y-=C.NZ)-1,D=0;D<y;D++)t[D]=T[D];1!=C.NZ&&(n[m+1]=C.lzr,r[m+1]=C.lzi);break}for(D=0;D<b;D++)_[D]=A[D]}if(20<d){e.Degree-=b;break}}}(t,i,a,s);var f=s.length;for(v=0;v<f;v++){var m=d(s[v],r+8),g=d(a[v],r+8),y=m<0?"-":"";0===(g=2<r-String(g).length?g:a[v])&&(g=""),0===m&&(m=""),m=1===Math.abs(m)?y+"i":m?m+"*i":"",m=g&&m?g+"+"+m:g+m,a[v]=m.replace(/\+\-/g,"-")}return a}(t,i).concat(o),a=0;a<0;a++)s.unshift(0);return s}r=r||7;var a,o=[];if(n instanceof y&&n.isPoly()){if(n.distributeMultiplier(),n.group===l&&(a=e.Utils.arrayMin(h(n.symbols)),a=n.symbols[a].clone().toUnitMultiplier(),n=t.expand(t.divide(n,a)),o.push(0)),n.group===e.groups.S)return[0];n.group===e.groups.PL&&(f=h(n.symbols),u=e.Utils.arrayMin(f),n=e.PARSER.divide(n,e.PARSER.parse(n.value+"^"+u)));for(var u=h(n.symbols).sort().pop(),c=n.group===e.groups.PL?n.symbols:n.symbols[u],p=c.group,f=p===i?[c.power.toDecimal()]:h(c.symbols),m=[],g=e.Utils.arrayMax(f),v=1;v<=g;v++){var b=0;-1!==f.indexOf(v+"")&&(b=(p===i?c:c.symbols[v]).multiplier),m.unshift(b)}return m.push(n.symbols[w].multiplier),c.group===i&&(m[0]=c.multiplier),s(m,0,g)}if(e.Utils.isArray(n)){var x=n,M=(m=[],f=[],0);for(v=0;v<x.length;v++){for(var S=x[v][0],_=x[v][1],E=_-M-1,T=0;T<E;T++)m.unshift(0);m.unshift(S),0!==_&&f.push(_),M=_}return s(m,0,g=Math.max.apply(void 0,f))}throw new e.exceptions.NerdamerTypeError("Cannot calculate roots. Symbol must be a polynomial!")},roots:function(n){return n.isConstant(!0,!0)?e.Utils.nroots(n):(n=_.proots(n).map((function(e){return t.parse(e)})),e.Vector.fromArray(n))},froot:function(t,n,r){return function(n){for(var i=r||e.Utils.build(e.Calculus.diff(t.clone())),s=t instanceof Function?t:e.Utils.build(t),a=!1,o=0;!a;){var l=n-s(n)/i(n),u=Math.abs(l)-Math.abs(n);n=l,Math.abs(u)<1e-12?a=!0:1e4<o&&(a=!(n=null)),o++}return n}(Number(n))},quad:function(e,n,r){function i(e,n,r,i){return t.parse("-("+n+"+"+i+"*sqrt(("+n+")^2-4*("+e+")*("+r+")))/(2*"+e+")")}return[i(e,n,r,1),i(e,n,r,-1)]},sumProd:function(e,t){return _.quad(-t,e,-1).map((function(e){return e.invert()}))},coeffs:function(e,n,r){n=String(n),e=t.expand(e),r=r||[new y(0)],e.group===s&&e.contains(n,!0)&&t.error("Unable to get coefficients using expression "+e.toString());var i,a=f(e);if(1!==a.length||a[0]!==n||e.isImaginary())n||t.error("Polynomial contains more than one variable. Please specify which variable is to be used!"),-1===a.indexOf(n)?r[0]=t.add(e,r[0]):(r=r||[new y(0)],e.group===c?((i=e.symbols[n])||t.error("Expression is not a polynomial!"),a=Number(i.power),((m=t.divide(e.clone(),i.clone())).contains(n,!0)||a<0||!v(a))&&t.error("Expression is not a polynomial!"),(p=r[a])&&(m=t.add(p,m)),r[a]=m):e.group===u&&e.each((function(e){_.coeffs(e.clone(),n,r)}),!0));else for(var o=new x(e).coeffs.map((function(e){return new y(e)})),l=0,h=o.length;l<h;l++){var p,m=o[l];(p=r[l])&&(m=t.add(p,m)),r[l]=m}for(l=0,h=r.length;l<h;l++)void 0===r[l]&&(r[l]=new y(0));return r},polyPowers:function(t,r,s){if(s=s||[],(p=t.group)===l&&r===t.value)s=s.concat(h(t.symbols));else if(p===u)for(var a in t.symbols){var o=t.symbols[a],p=o.group;a=o.value,p===i&&r===a?s.push(o.power):p===l||p===u?s=_.polyPowers(o,r,s):p===c&&o.contains(r)?(o=o.symbols[r])&&s.push(o.power):p!==n&&r===a||s.push(0)}else p===c&&t.contains(r)&&s.push(e.Utils.decompose_fn(t,r,!0).x.power);return e.Utils.arrayUnique(s).sort()},Factor:{split:function(e){var n=new y(1),r=new y(1);return _.Factor.factor(e,new M).each((function(e){var i=t.parse(e);e.isConstant(!0)?n=t.multiply(n,i):r=t.multiply(r,i)})),[n,r]},mix:function(e,t){for(var n=h(e),r=n.length,i=[],s=0;s<r;s++){for(var a=n[s],o=e[a],l=i.length,u=0;u<l;u++){var c=i[u]*a;i.push(c),t&&i.push(-c)}for(u=1;u<=o;u++)i.push(Math.pow(a,u))}return i},common:function(n,r){try{if(n.group===u){for(var i=t.expand(n.clone(),!0).collectSymbols(null,null,(function(e,t){return(t.length||1)-(e.length||1)})),s={},a=[],o=0;o<i.length;o++){var l=i[o];a.push(l.multiplier.clone()),l.each((function(e){var t=Number(e.power);if(isNaN(t))throw new Error("exiting");e.value in s?(t<s[e.value][0]&&(s[e.value][0]=t),s[e.value][1].push(e)):s[e.value]=[t,[e]]}))}var c,h=new y(1);for(c in s)s[c][1].length===i.length&&(h=t.multiply(h,t.pow(new y(c),new y(s[c][0]))));var p=e.Math2.QGCD.apply(null,a);if(!p.equals(1))for(r.add(new y(p)),o=0;o<i.length;o++)i[o].multiplier=i[o].multiplier.divide(p);if(!h.equals(1))for(r.add(h),n=new y(0),o=0;o<i.length;o++)n=t.add(n,t.divide(i[o],h.clone()))}}catch(n){}return n},zeroes:function(n,r){function i(){throw new e.exceptions.ValueLimitExceededError("Exiting")}try{for(var s,a,o,l=(n=t.expand(n.clone())).toString(),c=f(n),h=new y(0),p=[],m=[],d=0,w=c.length;d<c.length;d++){for(var b={},x=0;x<w;x++)d!==x&&(b[c[x]]=0);var M,S=(M=t.parse(l,b)).power;v(S)||i(),p.push(M),m.push(M.power)}for(e.Utils.allSame(m)?(a=n.length,2===(o=p.length)&&(s=new g(m[0]/(a-1))),3===o&&(s=new g(m[0]/Math.round((Math.sqrt(8*a-1)-3)/2)))):s=e.Math2.QGCD.apply(null,m),v(s)||i(),d=0;d<p.length;d++){var E=p[d],T=E.power.clone().divide(s);E.multiplier=new g(Math.pow(E.multiplier,1/T)),E.power=s.clone(),h=t.add(h,E)}if(h.group!==u)return n;for(;;){var A=_.div(n.clone(),h.clone());if(!A[1].equals(0))break;if(n=A[0],r.add(h.clone()),n.equals(1))break}}catch(l){}return n},factor:function(n,r){if(n.isConstant())return e.Math2.factor(n);var i,s,a=t.parse(n);return(r=_.Factor._factor(a,r)).equals(n)||r.group===c&&(i=new y(1),n=t.parse(r.power),s=t.parse(r.multiplier),r.toUnitMultiplier(),r.multiplier.lessThan(0)&&(i.negate(),r.negate()),r.each((function(e){(e=t.parse(_.Factor._factor(e))).group===c?(s=t.multiply(s,y.create(e.multiplier)),e.each((function(e){e=t.parse(_.Factor._factor(e)),i=t.multiply(i,e),e.group===c&&(s=t.multiply(s,y.create(e.multiplier)))}))):i=t.multiply(i,e)})),r=t.pow(t.multiply(s,i),n)),r},quadFactor:function(n,r){if(n.isPoly()&&_.degree(n.equals(2))){var i=e.Utils.variables(n)[0],s=_.coeffs(n,i);if((u=_.Factor._factor(s[2].clone())).group===c){var a=u.collectSymbols();if(2<a.length)return n;var o=t.multiply(t.parse(s[0]),t.parse(a[0])),l=t.parse(s[1]).negate(),u=t.parse(a[1]);1===(o=_.quad(u,l,o).filter((function(t){if(e.Utils.isInt(t))return t}))).length&&(o=o[0],s=t.divide(s[0],t.parse(o)),e.Utils.isInt(s)&&(r.add(t.parse(m("({0})*({1})+({2})",a[1],i,s))),r.add(t.parse(m("({0})*({1})+({2})",a[0],i,o))),n=new y(1)))}}return n},cubeFactor:function(e,n){var r,i,s,a,o,l;return!e.isComposite()||2===(l=e.collectSymbols()).length&&(r=l[0].sign(),i=l[0].clone().abs(),s=l[1].sign(),a=l[1].clone().abs(),i.isCube()&&a.isCube()&&(r<s&&([r,s]=[s,r],[i,a]=[a,i]),o=t.parse(i.getNth(3)),l=t.parse(a.getNth(3)),o=t.multiply(t.expand(t.pow(i.clone().toUnitMultiplier(),t.parse("1/3"))),o),l=t.multiply(t.expand(t.pow(a.clone().toUnitMultiplier(),t.parse("1/3"))),l),1===r&&-1===s?(n.add(t.parse(m("(({0})-({1}))",o,l))),n.add(t.parse(m("(({0})^2+({0})*({1})+({1})^2)",o,l))),e=y(1)):1===r&&1===s&&(n.add(t.parse(m("(({0})+({1}))",o,l))),n.add(t.parse(m("(({0})^2-({0})*({1})+({1})^2)",o,l))),e=y(1)))),e},_factor:function(n,r){if(n.group===o){var s=n.args[0];if(s.group===i&&s.isSimple())return n}else if(n.group===i&&n.isSimple())return n;var a;n.group===u&&(n.distributeMultiplier(!0),a=new y(0),n.each((function(e){(e.group===u&&e.power.greaterThan(1)||e.group===c)&&(e=t.expand(e)),a=t.add(a,e)})),a.power=n.power,n=a),s=(n=n.group===o&&"sqrt"!==n.fname?e.Utils.evaluate(n):n).clone();try{if(n.group===c){var l=t.parse(n.power),m=_.Simplify.strip(n.getDenom()),d=_.Simplify.strip(n.getNum()),g=m.pop(),w=d.pop();if(w.equals(n))return n;var b=_.Factor.factor(w),x=_.Factor.factor(g),S=_.Simplify.unstrip(d,b),E=_.Simplify.unstrip(m,x);return t.divide(S,E)}if(n.group===i)return n;if(n.isConstant())return n.equals(1)?n.clone():e.Math2.factor(n);if(l=n.power.clone(),!v(l)||l.lessThan(0)&&n.group===o)return n;var T=l.sign();n.toLinear(),r=r||new M;var A={};n=t.parse(e.Utils.subFunctions(n,A)),0<h(A).length&&(r.preAdd=function(n){return t.parse(n,e.Utils.getFunctionsSubs(A))}),n.isLinear()||(r.pFactor=n.power.toString(),n.toLinear());var L=f(n);n.isImaginary()&&L.push(e.Settings.IMAGINARY);var C=1<L.length;if(C){var R=!0,N=!0;if(n.each((function(e){e.group!==i&&(R=!1),e.multiplier.equals(1)||(N=!1)})),R&&N)return t.pow(t.parse(n,e.Utils.getFunctionsSubs(A)),t.parse(l))}var P=new M;n=_.Factor.coeffFactor(n,P),P.each((function(e){p(l)&&e.lessThan(0)&&e.negate(),T<0&&e.invert(),r.add(e)}));var I=new M;if(n=_.Factor.powerFactor(n,I),I.each((function(e){T<0&&e.invert(),r.add(e)})),C)n=_.Factor.cubeFactor(n,r),n=_.Factor.mfactor(n,r),r.each((function(e){T<0&&e.power.negate()}));else{var O=L[0];n=_.Factor.squareFree(n,r,O);var k=new M;n=_.Factor.trialAndError(n,k,O);var D,U=k.toSymbol();if(U.equals(s))return U;for(D in k.factors){var z=k.factors[D];r.add(t.pow(z,t.parse(l)))}n.equals(s)&&(n=_.Factor.quadFactor(n,r))}return n=t.parse(n,e.Utils.getFunctionsSubs(A)),r.add(t.pow(n,t.parse(l))),r.toSymbol()}catch(n){return s}},reduce:function(e,n){if(e.group===u&&2===e.length){var r=e.collectSymbols().sort((function(e,t){return t.multiplier-e.multiplier}));if(r[0].power.equals(r[1].power)){var i=t.parse(r[0].power),s=r[0].clone().toLinear(),a=r[1].clone().toLinear();n.add(t.add(s.clone(),a.clone())),a.negate();for(var o=Number(i),l=new y(0),c=1;c<=o;c++){var h=t.pow(s.clone(),t.subtract(i.clone(),new y(c))),p=t.pow(a.clone(),t.subtract(new y(c),new y(1)));l=t.add(l,t.multiply(h,p))}return l}}return e},squareFree:function(e,t,n){if(e.isConstant()||e.group===i)return e;var r=new x(e,n).squareFree();return 1===(n=r[2])?e:((e=r[1].toSymbol()).power=e.power.multiply(new g(n)),t.add(_.Factor.factor(e)),_.Factor.squareFree(r[0].toSymbol(),t))},powerFactor:function(n,r){if(n.group!==l||n.previousGroup===s)return n;var i=h(n.symbols);if(!e.Utils.allNumeric(i))return n;i=e.Utils.arrayMin(i);var a=new y(0),o=t.parse(n.value+"^"+i);return n.each((function(e){e=t.divide(e,o.clone()),a=t.add(a,e)})),r.add(o),a},coeffFactor:function(t,n){var r,i,s,a;return t.isComposite()&&((r=e.Math2.QGCD.apply(null,t.coeffs())).equals(1)?((i=function(e){var t;return e.group===c?(t=0,e.each((function(e){t+=e.power}))):t=Number(e.power),t})(a=(s=t.collectSymbols(null,null,null,!0).sort((function(e,t){return e.isConstant(!0)?1:t.power-e.power})))[0])>i(s[1])||s[1].isConstant(!0))&&a.multiplier.lessThan(0)&&(n.add(new y(-1)),t.each((function(e){e.negate()}),!0)):(t.each((function(e){e.isComposite()?e.each((function(e){e.multiplier=e.multiplier.divide(r)})):e.multiplier=e.multiplier.divide(r)})),t.updateHash()),n&&n.add(new y(r))),t},trialAndError:function(t,n,r){var s=t.clone();try{var a=[];if(t.isConstant()||t.group===i)return t;for(var o=new x(t,r),l=o.coeffs[0],u=e.Math2.ifactor(l),c=_.proots(t),h=0;h<c.length;h++){var p=c[h],f=1;if(!isNaN(p)){for(var m in u){var d=e.Utils.round(Math.log(m)/Math.log(Math.abs(p)),8);if(v(d)){p=m,f=d;break}}var y=new g(p),w=[new g(y.num).negate()];w[f]=new g(y.den);var b=x.fromArray(w,o.variable).fill(),M=o.divide(b);M[1].equalsNumber(0)&&(o=M[0],a.push(b.toSymbol()))}}return o.equalsNumber(1)||(o=_.Factor.search(o,n)),a.forEach((function(e){n.add(e)})),o.toSymbol()}catch(t){return s}},search:function(t,n,r){function i(e,i,a,o){return(a=x.fit(e,i,a,r,o,s))&&1<a.coeffs.length&&(o=t.divide(a))[1].equalsNumber(0)?(n.add(a.toSymbol()),[o[0],a]):null}r=r||10;var s=t.variable,a=t.coeffs[0],o=e.Math2.ifactor(a),l=t.lc(),u=e.Math2.ifactor(l),c=t.sub(r),h=e.Math2.ifactor(c),p=_.Factor.mix(h,c<0),f=Math.ceil(t.coeffs.length/2),m=l.lessThan(0),d=a.lessThan(0);for(o[u[1]=1]=1;f--;)for(var g in u)for(var v in o)for(var y=0;y<p.length;y++){var w=i(g,v,p[y],f);if(w)return t=w[0],t=e.Utils.isPrime(t.sub(r))?t:_.Factor.search(t,n);w||(m&&d?w=i(-g,-v,p[y],f):m?w=i(-g,v,p[y],f):d&&(w=i(g,-v,p[y],f)))}return t},mSqfrFactor:function(t,n){if(t.group!==o)for(var r=f(t).reverse(),i=0;i<r.length;i++)do{if(r[i]!==t.value){var s=e.Calculus.diff(t,r[i]),a=_.Factor.coeffFactor(s);if(a.equals(0))break;var l=!0;if(a.isConstant()&&t.isComposite()&&t.each((function(e){e.multiplier%a!=0&&(l=!1)}),!0),l){var u=_.div(t,a.clone()),c=u[1].equals(0);if(u[0].isConstant()){n.add(u[0]);break}}else c=!1;c&&(n.add(u[0]),t=a)}else n.add(t),t=new y(1)}while(c);return t},sqdiff:function(n,r){if(n.isConstant("all"))return n;try{var s,a,o,l,u,c=function(t){return e.Utils.block("POSITIVE_MULTIPLIERS",(function(){return y.unwrapPARENS(b.sqrt(b.abs(t)))}),!0)},h=e.Utils.separate(n.clone()),f=[];for(s in h)"constants"!==s&&f.push(h[s]);if(f.sort((function(e,t){return t.power-e.power})),2===f.length){if(u=f.pop(),a=f.pop(),p(u.power)&&p(a.power)&&u.sign()===a.sign()&&u.group===i&&a.group===i)throw new Error("Unable to factor");u.isComposite()&&a.power.equals(2)?(a=c(a),(o=_.Factor.factor(t.add(u,h.constants))).power.equals(2)&&(o.toLinear(),r.add(t.subtract(o.clone(),a.clone())),r.add(t.add(o,a)),n=new y(1))):(u=u.powSimp(),a=a.powSimp(),u.group!==i&&""!==u.fname||!u.power.equals(2)||a.group!==i&&""!==a.fname||!a.power.equals(2)||h.constants||(u.multiplier.lessThan(0)&&(l=a,a=u,u=l),u.multiplier.greaterThan(0)&&(u=c(u),a=c(a)),r.add(t.subtract(u.clone(),a.clone())),r.add(t.add(u,a)),n=new y(1)))}}catch(n){}return n},mfactor:function(n,r){if(n.group===o){var i,s;"sqrt"===n.fname?(i=new M,s=_.Factor.common(n.args[0].clone(),i),s=_.Factor.coeffFactor(s,i),n=t.multiply(t.symfunction("sqrt",[s]),t.parse(n.multiplier)),i.each((function(r){n=t.multiply(n,t.parse(e.Utils.format("sqrt({0})",r)))}))):r.add(n)}else{n=_.Factor.mSqfrFactor(n,r);for(var a,l=f(n),u=n.collectSymbols().map((function(e){return y.unwrapSQRT(e)})),c={},h={},p=l.length,m=u.length,d=0;d<p;d++){var g=l[d];c[g]=new y(0);for(var w=0;w<m;w++){var b,x=u[w];x.contains(g)&&(b=(x.value===g?x:x.symbols[g]).power.toDecimal(),(!h[g]||b<h[g])&&(h[g]=b),c[g]=t.add(c[g],x.clone()))}}for(a in c){var S=t.parse(a+"^"+h[a]),E=t.divide(c[a],S),T=t.expand(E);if(T.equals(1))break;if((E=_.div(n.clone(),T))[0].equals(0))break;if(E[1].equals(0)){var A=!1;if(E[0].each((function(e){v(e.multiplier)||(A=!0)})),A){E[1]=t.expand(t.multiply(E[1],T));break}}if(T=v(T)&&T.lessThan(0),E[1].equals(0)&&!T)return(S=(T=_.div(n.clone(),E[0].clone()))[0]).equals(0)?n:(n=T[1],S.equals(-1)&&!n.equals(0)?n:(T=E[0],n.equals(T)?(E=_.Factor.reduce(T,r),n.equals(E)?E:_.Factor.mfactor(E,r)):(r.add(T),n.equals(0)?S:S.isConstant("all")?(r.add(S),S):_.Factor.mfactor(S,r))))}}return n=_.Factor.sqdiff(n,r),n=_.Factor.zeroes(n,r)}},allLinear:function(e){for(var t=e.length,n=0;n<t;n++)if(!_.isLinear(e[n]))return!1;return!0},isLinear:function(e){var t=!1,r=e.group;if(r===l||r===u)for(var a in t=!0,e.symbols){var h=e.symbols[a];if((a=h.group)!==o&&a!==s||(t=!1),a===c)t=1===f(h).length;else if(a===l||a===u)t=_.isLinear(h);else if(h.group!==n&&"1"!==h.power.toString()){t=!1;break}}else r===i&&1===e.power&&(t=!0);return t},gcd:function(){var n=1===arguments.length&&arguments[0]instanceof e.Vector?arguments[0].elements:e.Utils.arguments2Array(arguments);if(0===n.length)return new y(1);if(1===n.length)return n[0];for(var r=[],i=!1,s=0;s<n.length;s++)if(n[s].group===o&&"gcd"===n[s].fname)(n=n.concat(arguments[s].args)).splice(s,1);else{var a=f(n[s]);if(e.Utils.haveIntersection(a,r)){i=!0;break}r=r.concat(a)}if(i||0===r.length){if(n.every((function(e){return e.getDenom().equals(1)}))){var l=n[0];for(s=1;s<n.length;s++)l=_.gcd_(n[s],l);return l}return t.divide(_.gcd.apply(null,n.map((function(e){return e.getNum()}))),_.lcm.apply(null,n.map((function(e){return e.getDenom()}))))}return t.symfunction("gcd",n)},gcd_:function(n,i){if(n.group!==o&&n.group!==r||(n=e.Utils.block("PARSE2NUMBER",(function(){return t.parse(n)}))),i.group===o&&(i=e.Utils.block("PARSE2NUMBER",(function(){return t.parse(i)}))),n.isConstant()&&i.isConstant())return new y(e.Math2.QGCD(new g(+n),new g(+i)));var a=t.multiply(n.getDenom()||new y(1),i.getDenom()||new y(1)).invert();if(n=t.multiply(n.clone(),a.clone()),i=t.multiply(i.clone(),a.clone()),n=t.expand(n),i=t.expand(i),n.group===c||i.group===c){var l=t.divide(n.clone(),i.clone());if(!(d=t.multiply(i.clone(),l.getDenom().invert())).equals(1))return d}if(n.group===s||i.group===s){l=new y(e.Math2.GCD(n.multiplier,i.multiplier));var u=_.gcd_(n.value===w?new y(1):t.parse(n.value),i.value===w?new y(1):t.parse(i.value)),h=_.gcd_(t.parse(n.power),t.parse(i.power));return t.multiply(l,t.pow(u,h))}if(n.length<i.length&&(d=n,n=i,i=d),u=f(n),h=f(i),u.length===h.length&&1===u.length&&u[0]===h[0]||1===u.length&&0===h.length||0===u.length&&1===h.length)return n=new x(n),i=new x(i),t.divide(n.gcd(i).toSymbol(),a);var p,m=[];for(n.each((function(e){m.push(e.multiplier)})),i.each((function(e){m.push(e.multiplier)}));!i.equals(0);){var d=i.clone();if(n=n.clone(),p=_.div(n,d),i=p[1],p[0].equals(0))return t.divide(new y(e.Math2.QGCD(n.multiplier,i.multiplier)),a);n=d}var v=e.Math2.QGCD.apply(void 0,m);return v.equals(1)||n.each((function(e){e.multiplier=e.multiplier.divide(v)})),!n.equals(1)||n.isConstant()||i.isConstant()?t.divide(n,a):t.divide(t.symfunction("gcd",arguments),a)},lcm:function(){var n;1===arguments.length?arguments[0]instanceof e.Vector?n=arguments[0].elements:t.error("lcm expects either 1 vector or 2 or more arguments"):n=e.Utils.arguments2Array(arguments);var r=n.reduce((function(e,n){return t.multiply(e,n.clone())}),new y(1)),i=function(e,t){t=Number(t);for(var n,r,i=[],s=Math.pow(2,e.length),a=t;a<s;a++){for(n=[],r=e.length-1;0!=(a&1<<r)&&n.push(e[r]),r--;);n.length===t&&i.push(n)}return i}(arguments,arguments.length-1).map((function(e){return e.reduce((function(e,n){return t.multiply(e,n.clone())}),new y(1))}));return i=n.every((function(t){return e.Utils.isVariableSymbol(t)}))?t.symfunction("gcd",e.Utils.arrayUnique(i)):_.gcd.apply(null,i),t.divide(r,i)},divide:function(n,r){var i=e.Algebra.Factor.factor(n.clone()),s=i.getDenom();return s.isConstant("all")?s=new y(1):n=t.expand(y.unwrapPARENS(t.multiply(i,s.clone()))),n=_.div(n,r),r=t.divide(n[1],r),t.divide(t.add(n[0],r),s)},div:function(n,r){var s,a,o=[new y(0),n.clone()];try{if(r.isConstant("all"))return n.each((function(e){e.multiplier=e.multiplier.divide(r.multiplier)})),[n,new y(0)];if(n=t.expand(n),r=t.expand(r),n.group===i&&r.group===u){var l=n.value,c=e.Utils.decompose_fn(r.clone(),l,!0);if(n.isLinear()&&c.x&&c.x.isLinear()&&r.isLinear()){var h=y.create(n.multiplier);return[t.divide(h.clone(),c.a.clone()),t.divide(t.multiply(h,c.b),c.a).negate()]}}if(n.group===i&&r.group===i){var p=t.divide(n.clone(),r.clone());return p.isConstant()?[p,new y(0)]:[new y(0),n.clone()]}var m,d,v=n.hasFunc(),b=r.hasFunc(),M=!1;(v||b)&&(M=!0,m={},n=t.parse(e.Utils.subFunctions(n,m)),r=t.parse(e.Utils.subFunctions(r,m)),d=e.Utils.getFunctionsSubs(m));var _=e.Utils.arrayUnique(f(n).concat(f(r)));if((n.isImaginary()||r.isImaginary())&&_.push(e.Settings.IMAGINARY),1===_.length)var E=(Y=new x(n).divide(new x(r)))[0].toSymbol(),T=Y[1].toSymbol();else{_.push(w);var A=function(e){for(var n=new y(0),r=0;r<e.length;r++){var i=e[r].toSymbol();n=t.add(n,i)}return n},L=function(e,t){var n,r=Math.max.apply(null,e.terms),i=0;if(!t)for(var s=0;s<e.terms.length;s++)if(e.terms[s].equals(r)&&(n=s,i++),1<i)return;if(t)for(s=0;s<e.terms.length;s++)if(e.terms[s].equals(r)){n=s;break}return[r,n,e]},C=function(e,t){var n=e[t=t||0],r=e.length;if(n){for(var i,s=L(n),a=t+1;a<r;a++){var o=e[a];if(!(g=n.sum.equals(o.sum))&&s)break;if(g){for(var l,u,c,h,p=n.terms.length,f=0;f<p;f++){var m=n.terms[f],d=o.terms[f];void 0!==l&&!m.greaterThan(l)||(l=m,c=f),void 0!==u&&!d.greaterThan(u)||(u=d,h=f)}var g,v=l.subtract(o.terms[c]);if(v<(g=u.subtract(n.terms[h]))){s=[u,h,o];break}if(g<v){s=[l,c,n];break}}else if(s=L(o))break;s=L(o)}if(!s)return L(e[0],!0);for(a=0;a<O.length;a++){var y,w=O[a].terms;if((y=s[1])===w.length-1)return;if(!(i=w[y]).equals(0))break}return i.equals(0)?C(e,++t):s}},R=e.Utils.toMapObj(_),N=function(e,t){return t.sum.subtract(e.sum)},P=function(e,t){if(!e||!t)return!1;for(var n=0;n<e.terms.length;n++)if(e.terms[n].lessThan(t.terms[n]))return!1;return!0},I=n.tBase(R).sort(N),O=r.tBase(R).sort(N),k=P(I[0],O[0])&&I[0].count>O[0].count?O:I,D=C(k),U=[];if(D){var z=D[1],B=function(e,t){var n=e.len(),r=t.len();return t=t.terms[z],e=e.terms[z],n<r&&t.greaterThan(e)?r-n:t.subtract(e)};z=function(e,t){for(var n=[],r=0;r<e.length;r++)for(var i=e[r],s=0;s<i.terms.length;s++){var a=n[s],o=i.terms[s];0===r?n[s]=o:a&&!a.equals(o)&&(n[s]=void 0)}for(r=0;r<n.length;r++)if((i=n[r])&&!i.equals(0))return r;return t}(I,z),I.sort(B),O.sort(B);var F=O[0],q=I[0],H=new S(new g(1),[],q.map);if(F.sum.greaterThan(q.sum)&&1<q.len())for(var G=0;G<q.terms.length;G++){var V=F.terms[G].subtract(q.terms[G]);if(V.equals(0))H.terms[G]=new g(0);else{var W=V.add(new g(1));H.terms[G]=V;for(var j=0;j<I.length;j++)I[j].terms[G]=I[j].terms[G].add(W)}}for(var X=P(I[0],O[0]),Z=0;X&&(a=O,!(s=I)[0].sum.equals(a[0].sum)||s.length>=a.length);){if(200<Z++)throw new e.exceptions.InfiniteLoopError("Unable to compute!");var Y=I[0].divide(O[0]);for(U.push(Y),I.shift(),G=1;G<O.length;G++){var J=O[G].multiply(Y).generateImage(),$=I.length;for(0===$&&(J.coeff=J.coeff.neg(),I.push(J),I.sort(B)),j=0;j<$;j++){var Q=I[j];if(Q.getImg()===J.getImg()){Q.coeff=Q.coeff.subtract(J.coeff),Q.coeff.equals(0)&&(e.Utils.remove(I,j),j--);break}j===$-1&&(J.coeff=J.coeff.neg(),I.push(J),I.sort(B))}}if(!(X=P(I[0],O[0]))&&I.length>=O.length)for(G=1;G<I.length;G++)if(X=P(I[G],O[0])){I.unshift(e.Utils.remove(I,G));break}}}E=A(U),T=A(I),void 0!==H&&(H=H.toSymbol(),E=t.divide(E,H.clone()),T=t.divide(T,H))}return M&&(E=t.parse(E.text(),d),T=t.parse(T.text(),d)),[E,T]}catch(n){return o}},line:function(n,r,i){e.Utils.isArray(n)&&(n=e.Utils.convertToVector(n)),e.Utils.isArray(r)&&(r=e.Utils.convertToVector(r)),i=t.parse(i||"x"),e.Utils.isVector(n)&&e.Utils.isVector(r)||t.error('Line expects a vector! Received "'+n+'" & "'+r+'"');var s=t.subtract(r.e(1).clone(),n.e(1).clone());return r=t.subtract(r.e(2).clone(),n.e(2).clone()),s=t.divide(r,s),i=t.multiply(i,s.clone()),s=t.multiply(n.e(1).clone(),s),t.add(t.subtract(i,s),n.e(2).clone())},PartFrac:{createTemplate:function(e,n,r,s){(e=_.Factor.factor(e)).each((function(t,n){var r;t.group===o&&""===t.fname&&t.args[0].group===i&&(r=t.args[0],this.symbols?(delete this.symbols[n],this.symbols[r.value]=r):e=t.args[0])}));for(var a=n.collectFactors(),l=[],u=[],c=new y(1),h=0;h<a.length;h++){var p=y.unwrapPARENS(a[h]);if(p.power.greaterThan(1))for(var f=Number(p.power),m=p.clone().toLinear(),d=Number(_.degree(m,s)),g=0;g<f;g++){var v=t.pow(m.clone(),new y(g+1));r.push(v.clone());var w=t.divide(e.clone(),v.clone());u.push(d),l.push(w)}else d=Number(_.degree(p,s)),r.push(p),w=t.divide(e.clone(),p.clone()),w=t.expand(y.unwrapPARENS(w)),u.push(d),l.push(w)}return[r=r.map((function(e){return t.multiply(e,c.clone())})),l,u]},partfrac:function(n,r,i){var s=f(n);r=r||t.parse(s[0]);try{var a,o,l,u,c,h,p,m,d,g,v,w,b,x,M=t.expand(n.getNum()),S=t.expand(n.getDenom().toUnitMultiplier());if(M.multiplier=n.multiplier,l=M.groupTerms(r),Number(_.degree(M,r))>=Number(_.degree(S,r))?(m=(p=_.div(M.clone(),t.expand(S.clone())))[0],l=(M=p[1]).groupTerms(r)):m=new y(0),1===Number(_.degree(S,r))){var E=t.divide(M,S);return i?[m,E]:t.add(m,E)}o=_.Factor.factor(S),v=_.PartFrac.createTemplate(S.clone(),o,[],r),w=v[0],d=v[1],u=v[2],h=[l.length],c=[],a=[],g=[],d.map((function(e,n){b=w[n],x=u[n];for(var i=0;i<x;i++){a.push(b.clone());var s=y.create(r,i),o=t.expand(t.multiply(e,s.clone())).groupTerms(r),l=o.length;h.push(l),c.push(o),g.push(s.clone())}}));for(var T=e.Utils.arrayMax(h),A=new e.Matrix(e.Utils.fillHoles(l,T)).transpose(),L=new e.Matrix,C=0;C<c.length;C++)L.elements.push(e.Utils.fillHoles(c[C],T));var R=t.multiply(L.transpose().invert(),A),N=i?[m]:m;return R.each((function(e,n){n=t.multiply(g[n],t.divide(e,a[n])),i?N.push(n):N=t.add(N,n)})),N}catch(s){try{if(n.isComposite()){var P={};n.each((function(e){var n=e.getDenom(),r=e.getNum();e=P[n],P[n]=e?t.add(e,r):r}));var I,O=new y(0);for(I in P)O=t.add(O,t.divide(P[I],t.parse(I)));n=O}}catch(s){}}return n}},degree:function(n,r,a){if(a=a||{nd:[],sd:[],depth:0},!r){var o=f(n);if(1<o.length)throw new Error("You must specify the variable for multivariate polynomials!");if(0===o.length)return new y(0);r=t.parse(o[0])}return o=n.group,n.isComposite()?((n=n.clone()).distributeExponent(),n.each((function(e){a.depth++,_.degree(e,r,a),a.depth--}))):n.group===c?n.each((function(e){a.depth++,_.degree(e,r,a),a.depth++})):o===s&&n.value===r.value?a.sd.push(n.power.clone()):o===i&&n.value===r.value?a.nd.push(t.parse(n.power)):a.nd.push(new y(0)),n=0<a.nd.length?e.Utils.arrayMax(a.nd):void 0,0===a.depth&&0<a.sd.length?(void 0!==n&&a.sd.unshift(n),t.symfunction("max",a.sd)):e.Utils.isSymbol(n)?n:t.parse(n)},sqComplete:function(n,r,i){e.Utils.isSymbol(r)||(r=t.parse(r));var s,a,o,l,u,c=function(t){throw new e.exceptions.ValueLimitExceededError(t=t||"Stopping")};return n.isPoly(!0)||c("Must be a polynomial!"),l=e.Utils.inBrackets,n=n.clone(),(s=e.Algebra.degree(n,r)).equals(2)||c("Cannot complete square for degree "+s),u=(o=e.Algebra.coeffs(n,r))[2],c=o[1].sign(),s=t.divide(o[1],new y(2)),n=t.pow(s.clone(),new y(2)),i?[u,s,a]:(u=b.sqrt(u),n=t.divide(b.sqrt(n),u.clone()),a=t.subtract(o[0],t.pow(n.clone(),new y(2))),{a:n=t.parse(l(u.clone()+"*"+r+(c<0?"-":"+")+n)),c:a,f:t.add(t.pow(n.clone(),new y(2)),a.clone())})},Simplify:{strip:function(e){var n=t.parse(e.multiplier);e.toUnitMultiplier();var r=t.parse(e.power);return e.toLinear(),[n,r,e]},unstrip:function(e,n){var r=e[0];return e=e[1],t.multiply(r,t.pow(n,e))},complexSimp:function(e,n){var r=e.realpart(),i=e.imagpart(),s=n.realpart(),a=n.imagpart();return e=t.multiply(r.clone(),s.clone()),n=t.multiply(i.clone(),a.clone()),i=t.multiply(s.clone(),i),r=t.multiply(r,a.clone()),a=t.add(t.pow(s,new y(2)),t.pow(a,new y(2))),t.divide(t.add(t.add(e,n),t.multiply(t.subtract(i,r),y.imaginary())),a)},trigSimp:function(n){var r,i,s,a,o,l;return n.containsFunction(["cos","sin","tan"])&&(n=n.clone(),i=(n=(r=_.Simplify.strip(n)).pop()).clone(),n.group===u?(s=new y(0),n.each((function(e){e=_.Simplify.trigSimp(e.fnTransform()),s=t.add(s,e)}),!0),i=t.pow(t.multiply(new y(n.multiplier),s),new y(n.power))):n.group===c&&(a=n.getNum(),o=n.getDenom(),(i="sin"===a.fname&&"cos"===o.fname&&a.args[0].equals(o.args[0])&&a.power.equals(o.power)?t.parse(e.Utils.format("({0})*({1})*tan({2})^({3})",o.multiplier,a.multiplier,a.args[0],a.power)):i).group===c&&(l=new y(1),i.each((function(n){"tan"===n.fname&&(n=t.parse(e.Utils.format("({0})*sin({1})^({2})/cos({1})^({2})",n.multiplier,_.Simplify.simplify(n.args[0]),n.power))),l=t.multiply(l,n)})),i=l)),n=i=_.Simplify.unstrip(r,i).distributeMultiplier()),n},fracSimp:function(e){var n=e.getDenom();if((e=(l=e.getNum()).isImaginary()&&n.isImaginary()?_.Simplify.complexSimp(l,n):e).isComposite()){for(var r,i,s,a,o,l,u=(e=1<e.power?t.expand(e):e).collectSymbols(),c=u.pop();u.length;)o=u.pop(),a=t.parse(c.getDenom()),s=t.parse(o.getDenom()),r=c.getNum(),i=o.getNum(),o=t.multiply(a.clone(),s.clone()),s=t.multiply(r,s),a=t.multiply(i,a),c=t.divide(t.add(s,a),o);return n=t.expand(c.getDenom()),(n=(l=t.expand(c.getNum())).isImaginary()&&n.isImaginary()?_.Simplify.complexSimp(l,n):t.divide(l,n)).equals(e)?e:_.Simplify.simplify(n)}return e},ratSimp:function(e){var n,r;return e.group===c&&(n=e.getDenom(),r=e.getNum().distributeMultiplier(),n=_.Simplify.fracSimp(n),r=_.Simplify.fracSimp(r),e=t.divide(r,n)),e},sqrtSimp:function(e,r){if(e.isSQRT()){var i,s,a=_.Factor.factor(e.args[0].clone()),o=t.parse(a.multiplier),l=o.sign(),u=t.sqrt(o.abs());if(v(u))return a.group===c?(i=new y(1),a.each((function(e){var r;e.group===n?(r=t.sqrt(e.clone()),v(r)?u=t.multiply(u,r):i=t.multiply(i,e)):i=t.multiply(i,e)})),l=t.multiply(i,t.parse(l)),(s=t.sqrt(l.clone())).isImaginary&&(s=t.sqrt(t.expand(l.clone())))):s=t.sqrt(a.clone().toUnitMultiplier()),t.multiply(u,s)}else e.isComposite()&&e.isLinear()?(u=new y(0),e.each((function(e){u=t.add(u,_.Simplify.sqrtSimp(e))}),!0),u=t.multiply(u,t.parse(e.multiplier))):e.group===c&&(u=t.parse(e.multiplier),e.each((function(e){e=_.Simplify.sqrtSimp(e),u=t.multiply(u,e)}),!0),u=t.pow(u,t.parse(e.power)));return u||t.parse(e)},patternSub:function(t){var n={},r=function(e){var t=!1;return e.each((function(e){e.group===u?t=!0:e.symbols&&(t=r(e))})),t},i=function(s){s.each((function(s){var a;!s.symbols&&s.group!==o||(r(s)?i(s):n[s.value]||(a=e.Utils.getU(t),n[s.value]=a,t=t.sub(s.value,a)))}),!0)};return i(t),[t,n]},simplify:function(n){var r=_.Simplify.strip(n);if(n=r.pop(),(n=_.Simplify.fracSimp(n)).isConstant()||n.group===e.groups.S)return r.push(n),_.Simplify.unstrip(r,n);var i,s=n.clone();return s=_.Simplify.trigSimp(s),s=_.Simplify.ratSimp(s),(s=_.Factor.factor(s)).group===e.groups.CP&&s.isLinear()&&(n=s.multiplier.clone(),s.toUnitMultiplier(),i=new y(0),s.each((function(e){e=_.Simplify.simplify(e),i=t.add(i,e)})),(s=i).multiplier=i.multiplier.multiply(n)),_.Simplify.unstrip(r,s)}},Classes:{Polynomial:x,Factors:M,MVTerm:S}};e.Expression.prototype.simplify=function(){return _.Simplify.simplify(this.symbol)},a.useAlgebraDiv=function(){var n=_.divideFn=t.divide,r=0;t.divide=function(t,i){return i=1==++r?e.Algebra.divide(t,i):n(t,i),r=0,i}},a.useParserDiv=function(){_.divideFn&&(t.divide=_.divideFn),delete _.divideFn},a.register([{name:"factor",visible:!0,numargs:1,build:function(){return _.Factor.factor}},{name:"simplify",visible:!0,numargs:1,build:function(){return _.Simplify.simplify}},{name:"gcd",visible:!0,numargs:[1],build:function(){return _.gcd}},{name:"lcm",visible:!0,numargs:[1],build:function(){return _.lcm}},{name:"roots",visible:!0,numargs:-1,build:function(){return _.roots}},{name:"divide",visible:!0,numargs:2,build:function(){return _.divide}},{name:"div",visible:!0,numargs:2,build:function(){return _.div}},{name:"partfrac",visible:!0,numargs:[1,2],build:function(){return _.PartFrac.partfrac}},{name:"deg",visible:!0,numargs:[1,2],build:function(){return _.degree}},{name:"coeffs",visible:!0,numargs:[1,2],build:function(){return function(){var t=_.coeffs.apply(_,arguments);return new e.Vector(t)}}},{name:"line",visible:!0,numargs:[2,3],build:function(){return _.line}},{name:"sqcomp",visible:!0,numargs:[1,2],build:function(){return function(e,t){try{return t=t||f(e)[0],_.sqComplete(e.clone(),t).f}catch(t){return e}}}}]),a.api()}(),void 0===a&&(a=r(407),r(374)),function(){"use strict";var e=a.getCore(),t=e.PARSER,n=e.Frac,r=e.Settings,i=e.Utils.isSymbol,s=e.groups.FN,o=e.Symbol,l=e.Utils.text,u=e.Utils.inBrackets,c=e.Utils.isInt,h=e.Utils.format,p=e.Utils.even,f=e.Utils.evaluate,m=e.groups.N,d=e.groups.S,g=(s=e.groups.FN,e.groups.PL),v=e.groups.CP,y=e.groups.CB,w=e.groups.EX,b=e.groups.P,x=r.LOG,M="sqrt",S="sin",_="cos",E="tan",T="sec",A="csc",L="cot",C="asin",R="atan",N="sinh",P="cosh",I="tanh";function O(e){this.message=e||""}O.prototype=new Error,o.prototype.hasIntegral=function(){return this.containsFunction("integrate")},o.prototype.fnTransform=function(){if(this.group!==s)return this;var e,n,r,i=this.args[0],a=new o(this.multiplier),l=this.clone().toUnitMultiplier();if(this.isLinear())switch(this.fname){case N:r=t.parse(h("(e^({0})-e^(-({0})))/2",i));break;case P:r=t.parse(h("(e^({0})+e^(-({0})))/2",i));break;case I:r=t.parse(h("(e^({0})-e^(-({0})))/(e^({0})+e^(-({0})))",i));break;case E:r=t.parse(h("sin({0})/cos({0})",i));break;case A:r=t.parse(h("1/sin({0})",i));break;case T:r=t.parse(h("1/cos({0})",i));break;default:r=l}else if(this.power.equals(2))switch(this.fname){case S:r=t.parse(h("1/2-cos(2*({0}))/2",i));break;case _:r=t.parse(h("1/2+cos(2*({0}))/2",i));break;case E:r=t.parse(h("sin({0})^2/cos({0})^2",i));break;case P:r=t.parse(h("1/2+cosh(2*({0}))/2",i));break;case N:r=t.parse(h("-1/2+cosh(2*({0}))/2",i));break;case I:r=t.parse(h("(1+cosh(2*({0})))/(-1+cosh(2*({0})))",i));break;case T:r=t.parse(h("(1-cos(2*({0})))/(1+cos(2*({0})))+1",i));break;default:r=l}else this.fname===T?r=t.parse(h("1/cos({0})^({1})",this.args[0],this.power)):this.fname===A?r=t.parse(h("1/sin({0})^({1})",this.args[0],this.power)):this.fname===E?r=this.power.lessThan(0)?t.parse(h("cos({0})^(-({1}))/sin({0})^({1})",this.args[0],this.power.negate())):t.parse(h("sin({0})^({1})/cos({0})^({1})",this.args[0],this.power)):this.fname===S&&this.power.lessThan(0)?r=t.parse(h("csc({0})^(-({1}))",this.args[0],this.power.negate())):this.fname===_&&this.power.lessThan(0)?r=t.parse(h("sec({0})^(-({1}))",this.args[0],this.power.negate())):this.fname===S&&this.power.equals(3)?r=t.parse(h("(3*sin({0})-sin(3*({0})))/4",this.args[0])):this.fname===_&&this.power.equals(3)?r=t.parse(h("(cos(3*({0}))+3*cos({0}))/4",this.args[0])):this.fname!==_&&this.fname!==S||!p(this.power)?r=l:(n=this.power/2,e=t.pow(this.clone().toLinear(),t.parse(2)).fnTransform(),n=t.expand(t.pow(e,t.parse(n))),r=new o(0),n.each((function(e){e=e.fnTransform(),r=t.add(r,e)}),!0));return t.multiply(r,a)},o.prototype.hasTrig=function(){if(this.isConstant(!0)||this.group===d)return!1;if(this.fname&&(e.Utils.in_trig(this.fname)||e.Utils.in_inverse_trig(this.fname)))return!0;if(this.symbols)for(var t in this.symbols)if(this.symbols[t].hasTrig())return!0;return!1},e.Expression.prototype.hasIntegral=function(){return this.symbol.hasIntegral()},e.Utils.toCommonDenominator=function(n){if(n.isComposite()&&n.isLinear()){var r=new o(n.multiplier),i=new o(1),s=new o(0);return n.each((function(e){i=t.multiply(i,e.getDenom())}),!0),n.each((function(e){var n=e.getNum();e=e.getDenom(),e=t.multiply(n,t.divide(i.clone(),e)),s=t.add(s,e)})),t.multiply(r,e.Algebra.divide(t.expand(s),t.expand(i)))}return n},e.Utils.in_inverse_trig=function(e){return-1!==[C,"acos",R,"acsc","asec","acot"].indexOf(e)},e.Utils.in_trig=function(e){return-1!==[_,S,E,T,A,L].indexOf(e)},e.Utils.in_htrig=function(e){return-1!==[N,P,I,"acsch","asech","acoth"].indexOf(e)},e.Matrix.jacobian=function(t,n){var r=new e.Matrix;return(n=n||e.Utils.arrayGetVariables(t)).forEach((function(n,i){t.forEach((function(t,s){t=e.Calculus.diff(t.clone(),n),r.set(s,i,t)}))})),r},e.Matrix.prototype.max=function(){var e=new o(0);return this.each((function(t){(t=t.abs()).gt(e)&&(e=t)})),e},e.Matrix.cMatrix=function(n,r){var i=new e.Matrix;return r.forEach((function(e,r){i.set(r,0,t.parse(n))})),i};var k=e.Utils.all_functions=function(e){for(var t=0,n=e.length;t<n;t++)if(e[t].group!==s)return!1;return!0},D=e.Utils.cosAsinBtranform=function(e,n){return e=e.args[0],n=n.args[0],t.parse(h("(sin(({0})+({1}))-sin(({0})-({1})))/2",e,n))},U=e.Utils.cosAsinAtranform=function(e,n){return 1!==Number(n.power)?t.multiply(e,n):(e=e.args[0],t.parse(h("(sin(2*({0})))/2",e)))},z=e.Utils.cosAsinBtranform=function(e,n){return e=e.args[0],n=n.args[0],t.parse(h("(cos(({0})+({1}))-cos(({0})-({1})))/2",e,n))},B=e.Utils.trigTransform=function(e){for(var n,r,i,a,l={},u=new o(1),c=0,h=e.length;c<h;c++)(i=e[c]).group===s?(r=i.fname)===_&&l.sin?(n=(l.sin.args[0].toString()!==i.args[0].toString()?D:U)(i,l.sin),delete l.sin,u=t.multiply(u,n)):r===S&&l.cos?(n=(l.cos.args[0].toString()!==i.args[0].toString()?D:U)(i,l.cos),delete l.cos,u=t.multiply(u,n)):r===S&&l.sin?(n=l.sin.args[0].toString()!==i.args[0].toString()?z(i,l.sin):t.multiply(i,l.sin),delete l.sin,u=n):l[r]=i:u=t.multiply(u,i);for(a in l)u=t.multiply(u,l[a]);return u};e.Settings.integration_depth=10,e.Settings.max_lim_depth=10;var F=e.Calculus={version:"1.4.6",sum:function(n,r,i,s){if(r.group!==e.groups.S)throw new e.exceptions.NerdamerTypeError("Index must be symbol. "+l(r)+" provided");var a;return r=r.value,e.Utils.isNumericSymbol(i)&&e.Utils.isNumericSymbol(s)?(a=s-i<200?"":"PARSE2NUMBER",i=Number(i),s=Number(s),e.Utils.block(a,(function(){for(var a=n.text(),l={"~":!0},u=new e.Symbol(0),c=i;c<=s;c++){l[r]=new o(c);var h=t.parse(a,l);u=t.add(u,h)}return u}))):t.symfunction("sum",arguments)},product:function(n,r,i,s){if(r.group!==e.groups.S)throw new e.exceptions.NerdamerTypeError("Index must be symbol. "+l(r)+" provided");return r=r.value,e.Utils.isNumericSymbol(i)&&e.Utils.isNumericSymbol(s)?e.Utils.block(s-i<200?"":"PARSE2NUMBER",(function(){i=Number(i),s=Number(s.multiplier);for(var a=n.text(),l={},u=new e.Symbol(1),c=i;c<=s;c++)l[r]=new o(c),u=t.multiply(u,t.parse(a,l));return u})):t.symfunction("product",arguments)},diff:function(a,c,p){if(e.Utils.isVector(a)){var f=new e.Vector([]);return a.each((function(e){f.elements.push(F.diff(e,c,p))})),f}if(e.Utils.isMatrix(a)){var N=new e.Matrix;return a.each((function(e,t,n){N.set(t,n,F.diff(e,c,p))})),N}var P,O,k=i(c)?c.text():c;return p=i(p)?p.multiplier:p||1,void 0===k&&(k=e.Utils.variables(a)[0]),a.group===s&&a.fname===M&&(O=a.args[0],P=a.power.clone(),O.group===m&&O.group===b||(O.power=i(O.power)?t.multiply(O.power,t.multiply(new o(.5)),P):O.power.multiply(new n(.5)).multiply(P),O.multiplier=O.multiplier.multiply(a.multiplier)),a=O),a=a.group!==s||i(a.power)?U(a):(P=U(t.parse(a)),O=F.diff(a.args[0].clone(),k),t.multiply(P,O)),1<p?F.diff(a,c,--p):a;function D(e){return e.value!==k&&!e.contains(k,!0)||(e.multiplier=e.multiplier.multiply(e.power),e.power=e.power.subtract(new n(1)),e.power.equals(0)&&(e=o(e.multiplier))),e}function U(e){if((O=e.group)===m||O===d&&e.value!==k||O===b)e=o(0);else if(O===d)e=D(e);else{if(O===y){var a=e.multiplier.clone();return e.toUnitMultiplier(),(M=t.multiply(function(e){for(var n=e.collectSymbols(),r=new o(0),i=n.length,s=0;s<i;s++){for(var a=F.diff(n[s].clone(),k),l=0;l<i;l++)s!==l&&(a=t.multiply(a,n[l].clone()));r=t.add(r,a)}return r}(e),D(e))).multiplier=M.multiplier.multiply(a),M}if(O===s&&e.power.equals(1))switch(e.fname){case x:f=e.clone(),(e=e.args[0].clone()).power=e.power.negate(),e.multiplier=f.multiplier.divide(e.multiplier);break;case _:e.fname=S,e.multiplier.negate();break;case S:e.fname=_;break;case E:e.fname=T,e.power=new n(2);break;case T:e=z(e,E);break;case A:e=z(e,"-cot");break;case L:e.fname=A,e.multiplier.negate(),e.power=new n(2);break;case C:e=t.parse("(sqrt(1-("+l(e.args[0])+")^2))^(-1)");break;case"acos":e=t.parse("-(sqrt(1-("+l(e.args[0])+")^2))^(-1)");break;case R:e=t.parse("(1+("+l(e.args[0])+")^2)^(-1)");break;case"abs":a=e.multiplier.clone(),e.toUnitMultiplier(),(N=e.args[0].clone()).toUnitMultiplier(),(e=t.parse(u(l(e.args[0]))+"/abs"+u(l(N)))).multiplier=a;break;case"parens":e=o(1);break;case"cosh":e.fname="sinh";break;case"sinh":e.fname="cosh";break;case I:e.fname="sech",e.power=new n(2);break;case"sech":e=z(e,"-tanh");break;case"csch":var p=String(e.args[0]);return t.parse("-coth("+p+")*csch("+p+")");case"coth":return p=String(e.args[0]),t.parse("-csch("+p+")^2");case"asinh":e=t.parse("(sqrt(1+("+l(e.args[0])+")^2))^(-1)");break;case"acosh":e=t.parse("(sqrt(-1+("+l(e.args[0])+")^2))^(-1)");break;case"atanh":e=t.parse("(1-("+l(e.args[0])+")^2)^(-1)");break;case"asech":p=String(e.args[0]),e=t.parse("-1/(sqrt(1/("+p+")^2-1)*("+p+")^2)");break;case"acoth":e=t.parse("-1/(("+e.args[0]+")^2-1)");break;case"acsch":p=String(e.args[0]),e=t.parse("-1/(sqrt(1/("+p+")^2+1)*("+p+")^2)");break;case"asec":p=String(e.args[0]),e=t.parse("1/(sqrt(1-1/("+p+")^2)*("+p+")^2)");break;case"acsc":p=String(e.args[0]),e=t.parse("-1/(sqrt(1-1/("+p+")^2)*("+p+")^2)");break;case"acot":e=t.parse("-1/(("+e.args[0]+")^2+1)");break;case"S":p=String(e.args[0]),e=t.parse("sin((pi*("+p+")^2)/2)");break;case"C":p=String(e.args[0]),e=t.parse("cos((pi*("+p+")^2)/2)");break;case"Si":p=e.args[0],e=t.parse("sin("+p+")/("+p+")");break;case"Shi":p=e.args[0],e=t.parse("sinh("+p+")/("+p+")");break;case"Ci":p=e.args[0],e=t.parse("cos("+p+")/("+p+")");break;case"Chi":p=e.args[0],e=t.parse("cosh("+p+")/("+p+")");break;case"Ei":p=e.args[0],e=t.parse("e^("+p+")/("+p+")");break;case"Li":p=e.args[0],e=t.parse("1/"+r.LOG+"("+p+")");break;case"erf":e=t.parse("(2*e^(-("+e.args[0]+")^2))/sqrt(pi)");break;case"atan2":var f=String(e.args[0]);p=String(e.args[1]),e=t.parse("("+p+")/(("+p+")^2+("+f+")^2)");break;case"sign":e=new o(0);break;case"sinc":e=t.parse(h("(({0})*cos({0})-sin({0}))*({0})^(-2)",e.args[0]));break;case r.LOG10:e=t.parse("1/(("+e.args[0]+")*"+r.LOG+"(10))");break;default:e=t.symfunction("diff",[e,c])}else if(O===w||O===s&&i(e.power)){var M=O===w?e.value:O===s&&e.contains(k)?e.fname+u(l(e.args[0])):e.value+u(l(e.args[0])),N=(t.multiply(t.parse(x+u(M)),e.power.clone()),F.diff(t.multiply(t.parse(x+u(M)),e.power.clone()),k));e=t.multiply(e,N)}else if(O!==s||e.power.equals(1)){if(O===v||O===g){var P,O=e.clone(),B=new o(0);for(P in e.symbols)B=t.add(B,F.diff(e.symbols[P].clone(),k));e=t.multiply(D(O),B)}}else(N=e.clone()).toLinear(),N.toUnitMultiplier(),e=t.multiply(D(e.clone()),U(N))}return e.updateHash(),e}function z(e,n,r){return t.multiply(e,t.parse(n+u(r||l(e.args[0]))))}},integration:{u_substitution:function(n,r){function i(e,n,i){var s=F.diff(n,r);return(s=i?i(e,n):t.divide(e.clone(),s)).contains(r,!0)?null:s}function a(e,n){return(e=(e=F.integrate(t.symfunction(e,[new o(p)]),p,0)).sub(new o(p),n)).updateHash(),e}var l,u=n[0].clone(),c=n[1].clone(),h=u.group,p=(n=c.group,"__u__");if(h===s&&n!==s)return(l=i(c,(m=u.args[0]).clone()))?t.multiply(l,a(u.fname,m)):(l=i(c,u))?F.integration.poly_integrate(u):void 0;if(n===s&&h!==s){if(l=i(u,(m=c.args[0]).clone()))return t.multiply(l,a(c.fname,m))}else{if(h===s&&n===s)return(l=i(u.clone(),c.clone()))||(l=i(c.clone(),u.clone()))?t.multiply(F.integration.poly_integrate(c),l):void 0;if(h===w&&n!==w){if(!(l=i(c,(d=u.power).clone()))){var f=F.integration.decompose_arg(d.clone(),r),m=F.diff(f[2].clone(),r);if(m=F.integration.decompose_arg(m.clone(),r),t.multiply(f[1],m[1]).power.equals(c.power))return m=t.divide(f[0].clone(),m[0].clone()),m=t.multiply(m.clone(),t.pow(new o(u.value),t.multiply(f[0],new o(p)))),m=t.multiply(m,new o(p)),F.integration.by_parts(m,p,0,{}).sub(p,f[1].clone())}return f=F.integrate(u.sub(d.clone(),new o(p)),p,0),t.multiply(f.sub(new o(p),d),l)}if(n===w&&h!==w)return l=i(u,(d=c.power).clone()),f=F.integrate(c.sub(d,new o(p)),p,0),t.multiply(f.sub(new o(p),d),l);if(u.isComposite()||c.isComposite()){h=function(n,i){return i=F.diff(i,r),n=e.Algebra.Factor.factor(n),i=e.Algebra.Factor.factor(i),t.divide(n,i)},f=u.isComposite()?u.clone().toLinear():u.clone();var d=c.isComposite()?c.clone().toLinear():c.clone();return(l=i(f.clone(),d.clone(),h))?t.multiply(F.integration.poly_integrate(c),l):(l=i(d.clone(),f.clone(),h))?t.multiply(F.integration.poly_integrate(u),l):void 0}}},poly_integrate:function(e){var n=e.power.toString(),r=e.multiplier.toDecimal();return e=e.toUnitMultiplier().toLinear(),-1===Number(n)?t.multiply(new o(r),t.symfunction(x,[e])):t.parse(h("({0})*({1})^(({2})+1)/(({2})+1)",r,e,n))},stop:function(t){throw e.Utils.warn(t=t||"Unable to compute integral!"),new O(t)},partial_fraction:function(n,r,s,a){var l;return i(r)||(r=t.parse(r)),l=new o(0),(n=e.Algebra.PartFrac.partfrac(n,r)).group===y&&n.isLinear()?(n.each((function(e){e.isLinear()||F.integration.stop()})),n.each((function(e){l=t.add(l,F.integrate(e,r,s,a))}))):l=t.add(l,F.integrate(n,r,s,a)),l},get_udv:function(n){function r(t){var n,r=t.group;r===s?(n=t.fname,e.Utils.in_trig(n)||e.Utils.in_htrig(n)?i[3].push(t):e.Utils.in_inverse_trig(n)?i[1].push(t):n===x?i[0].push(t):F.integration.stop()):r===d||t.isComposite()&&t.isLinear()||r===y&&t.isLinear()?i[2].push(t):r===w||t.isComposite()&&!t.isLinear()?i[4].push(t):F.integration.stop()}var i=[[],[],[],[],[]];n.group===y?n.each((function(e){r(o.unwrapSQRT(e,!0))})):r(n);for(var a,l=new o(1),u=0;u<5;u++){var c=i[u],h=c.length;if(0<h){if(1<h)for(var p=new o(1),f=0;f<h;f++)p=t.multiply(p,c[f].clone());else p=c[0].clone();a?l=t.multiply(l,p):(a=p).multiplier=a.multiplier.multiply(n.multiplier)}}return[a,l]},trig_sub:function(n,r,i,s,a,o){(a=a||F.integration.decompose_arg(n.clone().toLinear(),r))[3],a[2];var l=a[0],c=a[1];if(c.power.equals(2)&&l.greaterThan(0))return r=e.Utils.getU(n),a=t.parse(E+u(r)),l=t.parse(T+u(r)+"^2"),l=t.multiply(n.sub(c,a),l),c=F.integrate(l,r,i,s).sub(a,c),e.Utils.clearU(a),c},by_parts:function(n,r,i,s){var a,l,u,c,h,p;return s.previous=s.previous||[],u=(l=F.integration.get_udv(n))[0],a=l[1],h=(c=o.unwrapSQRT(t.expand(F.diff(u.clone(),r)),!0)).clone().stripVar(r),c=t.divide(c,h.clone()),n=F.integrate(a.clone(),r,i||0),c=(l=t.multiply(n.clone(),c)).toString(),-1!==s.previous.indexOf(c)&&e.Utils.in_trig(u.fname)&&a.isE()?(s.is_cyclic=!0,new o(1)):(s.previous.push(c),u=t.multiply(u,n),n=l.multiplier.clone(),l.toUnitMultiplier(),(h=t.multiply(F.integrate(l.clone(),r,i,s),h)).multiplier=h.multiplier.multiply(n),h=t.subtract(u,h),s.is_cyclic&&(s.previous.pop(),0===s.previous.length&&(h=t.expand(h),p=new o(0),h.each((function(e){e.contains(r)||(p=t.add(p,e.clone()))})),h=t.divide(t.subtract(h,p.clone()),t.subtract(new o(1),p)))),h)},decompose_arg:e.Utils.decompose_fn},integrate:function(a,l,f,m){var b;if(l||(b=e.Utils.variables(a),l=(l=1===b.length?b[0]:l)||"x"),e.Utils.isVector(a)){var D=new e.Vector([]);return a.each((function(e){D.elements.push(F.integrate(e,l))})),D}return isNaN(l)||t.error("variable expected but received "+l),a.isConstant(!0)?t.multiply(a.clone(),t.parse(l)):(m=m||{},e.Utils.block("PARSE2NUMBER",(function(){f=f||0;var b,D=i(l)?l.toString():l,U=(Xe=o.unwrapSQRT(a.clone(),!0)).group;try{if(++f>e.Settings.integration_depth&&F.integration.stop("Maximum depth reached. Exiting!"),Xe.contains(D,!0)){if(U===d)b=F.integration.poly_integrate(Xe,D,f);else if(U===w)if(Xe.previousGroup===s&&"sqrt"!==Xe.fname&&Xe.fname!==r.PARENTHESIS&&F.integration.stop(),Xe.contains(D)&&Xe.previousGroup!==s)Xe.power.contains(D)?F.integration.stop():((Ot=F.diff(Xe.clone().toLinear(),D)).contains(D)&&F.integration.stop(),b=F.integration.poly_integrate(Xe,D,f));else{if((Y=F.diff(Xe.power.clone(),D)).contains(D)){var z=Y.stripVar(D);if((J=t.divide(Y.clone(),z.clone())).group===d&&J.isLinear())return z.multiplier=z.multiplier.divide(new n(2)),t.parse(h("({2})*(sqrt(pi)*erf(sqrt(-{0})*{1}))/(2*sqrt(-{0}))",z,D,Xe.multiplier));F.integration.stop()}Xe.isE()?Y.isLinear()?b=Xe:Y.isE()&&Y.power.group===d&&Y.power.power.equals(1)?b=t.multiply(t.symfunction("Ei",[Xe.power.clone()]),Xe.power):F.integration.stop():(Q=t.symfunction(x,[t.parse(Xe.value)]),b=t.divide(Xe,Q)),b=t.divide(b,Y)}else if(Xe.isComposite()&&Xe.isLinear()){var q=t.parse(Xe.multiplier);Xe.toUnitMultiplier(),b=new o(0),Xe.each((function(e){b=t.add(b,F.integrate(e,D,f))})),b=t.multiply(q,b)}else if(U===v)if((Xe=Xe.power.greaterThan(1)?t.expand(Xe):Xe).power.equals(1))b=new o(0),Xe.each((function(e){b=t.add(b,F.integrate(e,D,f))}),!0);else{var H=Number(Xe.power);q=Xe.multiplier.clone(),Xe.toUnitMultiplier();var G,V,W,j=Xe.clone().toLinear(),X=(Et=F.integration.decompose_arg(j,D))[3],Z=Et[2],Y=Et[0],J=Et[1];if(-1===H&&J.group!==g&&J.power.equals(2)){var $,Q,K,ee,te,ne,re,ie,se,ae,oe,le=!c(X)||0<X;b=J.group===d&&J.power.equals(2)&&le?($=function(e){var n=new o(1);return e.each((function(e){n=t.multiply(n,"abs"===e.fname?e.args[0]:e)})),n},K=Y.clone(),ee=X.clone(),K=t.pow(K,new o(.5)),ee=t.pow(ee,new o(.5)),Q=t.multiply($(ee),$(K)),ve=t.symfunction(R,[t.divide(t.multiply(Y,J.toLinear()),Q.clone())]),t.divide(ve,Q)):J.group===d&&J.isLinear()?t.divide(F.integration.poly_integrate(Xe),Y):J.power.equals(4)?(oe=u,K=t.parse(M+oe(Y)+"*"+D+"^2"),ee=t.parse(M+oe(2)+"*"+oe(Y)+"^"+oe("1/4")+"*"+oe(X)+"^"+oe("1/4")+"*"+D),te=t.parse(M+oe(X)),we=t.add(t.add(K.clone(),ee.clone()),te.clone()),Le=t.add(t.subtract(K,ee),te),ne=t.parse(M+oe(2)+"*"+oe(X)+"^"+oe("3/4")),re=t.parse(M+oe(X)+"*"+oe(X)+"^"+oe("1/4")+"*"+D),ie=t.parse("2*"+oe(X)+"*"+M+oe(2)+"*"+oe(X)+"^"+oe("1/4")),se=t.divide(t.subtract(ne.clone(),re.clone()),t.multiply(ie.clone(),Le)),ae=t.divide(t.add(ne,re),t.multiply(ie,we.clone())),t.add(F.integrate(se,D,f,m),F.integrate(ae,D,f,m))):F.integration.partial_fraction(Xe,D,f)}else if(-.5===H)J.group===d&&J.power.equals(2)&&Z.multiplier.lessThan(0)&&!X.multiplier.lessThan(0)?(Y.negate(),b=X.isConstant()&&Y.isConstant()?(Q=t.symfunction(M,[Y.clone()]),G=t.symfunction(M,[t.multiply(Y.clone(),X)]),t.divide(t.symfunction(C,[t.divide(Z.toLinear(),G)]),Q)):(V=t.symfunction(M,[Y]),W=t.multiply(V.clone(),J.clone().toLinear()),t.divide(t.symfunction(R,[t.divide(W,t.symfunction(M,[j.clone()]))]),V))):F.integration.stop();else if(J.isLinear()&&J.group!==g)b=t.divide(F.integration.poly_integrate(Xe),Y);else{if(J.power.equals(2)&&Y.greaterThan(0)){var ue=t.parse(M+u(Y)),ce=t.parse(M+u(X)),he=t.multiply(ue.clone(),ce.clone()).invert(),pe=t.pow(X,new o(Xe.power)),fe=e.Utils.getU(Xe);Rt=t.multiply(he,J.clone().toLinear());var me=t.parse(R+u(Rt)),de=2*(Math.abs(Xe.power)-1),ge=F.integrate(t.parse(_+u(fe)+"^"+de));return e.Utils.clearU(fe),t.multiply(ge.sub(fe,me),pe)}if(Xe.group===y||Xe.power.lessThan(0)){var ve=Xe.clone().toLinear(),ye=e.Algebra.Factor.factor(ve).toString()!==ve.toString();if(e.Algebra.degree(ve,t.parse(D)).equals(2)&&!ye)try{var we,be,xe=e.Algebra.sqComplete(ve,D);Rt=e.Utils.getU(ve),we=xe.f.sub(xe.a,Rt),be=t.pow(we,t.parse(Xe.power)),b=F.integrate(be,Rt).sub(Rt,xe.a)}catch(U){F.integration.stop()}else b=F.integration.partial_fraction(Xe,D,f,m)}else b=F.integration.by_parts(Xe,D,f,m)}b.multiplier=b.multiplier.multiply(q)}else if(U===s){var Me=Xe.args[0];q=Xe.multiplier.clone(),Xe.toUnitMultiplier(),Y=(Et=F.integration.decompose_arg(Me,D))[0],J=Et[1];var Se,_e,Ee,Te,Ae,Le,Ce,Re,Ne,Pe=Xe.fname;if(Pe===x||Pe===C||"acos"===Pe||Pe===R&&J.isLinear()){var Ie;H=Xe.power.toString(),c(H)&&(f-=H),b=Me.isComposite()?(Rt=e.Utils.getU(Xe),ve=t.pow(t.parse(x+u(Rt)),new o(H)),ht=F.diff(Me,D),Ie=t.multiply(ve,ht),ge=F.integrate(Ie,Rt,f,m),t.multiply(t.parse(q),ge.sub(Rt,Me))):t.multiply(t.parse(q),F.integration.by_parts(Xe,D,f,m))}else{if(Pe===E&&Xe.power.lessThan(0))return(kt=Xe.clone()).power.negate(),kt.fname=L,t.multiply(t.parse(q),F.integrate(kt,D,f));if(!Y.contains(D,!0)&&Xe.isLinear())if("abs"===Pe)(J=t.divide(Me.clone(),Y.clone())).group!==d||J.power.lessThan(0)?F.integration.stop():b=e.Utils.even(J.power)?F.integrate(Me,D,f):((Ne=F.integrate(J,D,f)).power=Ne.power.subtract(new n(1)),t.multiply(t.multiply(t.symfunction("abs",[J.toLinear()]),Ne),Y));else{var Oe=Xe.args[0].group,ke=F.integration.decompose_arg(Me,D);switch((Oe!==v&&Oe!==d&&Oe!==y||!ke[1].power.equals(1)||Me.hasFunc())&&F.integration.stop(),Pe){case _:b=t.symfunction(S,[Me]);break;case S:(b=t.symfunction(_,[Me])).negate();break;case E:b=t.parse(h(r.LOG+"(sec({0}))",Me));break;case T:b=t.parse(h(r.LOG+"(tan({0})+sec({0}))",Me));break;case A:b=t.parse(h("-"+r.LOG+"(csc({0})+cot({0}))",Me));break;case L:b=t.parse(h(r.LOG+"(sin({0}))",Me));break;case N:b=t.symfunction(P,[Me]);break;case P:b=t.symfunction(N,[Me]);break;case I:b=t.parse(h(r.LOG+"(cosh({0}))",Me));break;case"asec":case"acsc":case"acot":case"asech":case"acsch":case"acoth":b=F.integration.by_parts(Xe,D,f,m);break;case"sech":b=t.parse(h("atan(sinh({0}))",Me));break;case"csch":b=t.parse(h(r.LOG+"(tanh(({0})/2))",Me));break;case"coth":b=t.parse(h(r.LOG+"(sinh({0}))",Me));break;case"exp":b=F.integrate(t.parse(h("e^({0})",Me)),D,f);break;case"S":Me=Xe.args[0].clone();var De=(it=F.integration.decompose_arg(Me,D))[1],Ue=it[0],ze=it[3];b=t.parse(h("(cos((1/2)*pi*(({1})+({0})*({2}))^2)+pi*(({1})+({0})*({2}))*S(({1})+({0})*({2})))/(({0})*pi)",Ue,ze,J));break;case"C":Me=Xe.args[0].clone(),De=(it=F.integration.decompose_arg(Me,D))[1],Ue=it[0],ze=it[3],b=t.parse(h("(pi*(({1})+({0})*({2}))*C(({1})+({0})*({2}))-sin((1/2)*pi*(({1})+({0})*({2}))^2))/(({0})*pi)",Ue,ze,De));break;case"erf":Me=Xe.args[0].clone(),De=(it=F.integration.decompose_arg(Me,D))[1],Ue=it[0],b=t.parse(h("e^(-(({2}))^2)/(({0})*sqrt(pi))+(1/({0})+({1}))*erf(({2}))",Ue,De,Me));break;case"sign":b=t.multiply(Xe.clone(),Me.clone());break;default:F.integration.stop()}b=t.divide(b,Y)}else J.isLinear()?Pe===_||Pe===S?(H=Number(Xe.power),b=H<0?(Xe.fname=Pe===S?A:T,Xe.invert().updateHash(),F.integrate(Xe,D,f)):(Me=Xe.args[0],Se=Xe.clone(),_e=Xe.clone(),ft=new o((H-1)/H),Ee=t.multiply(Y.clone(),new o(H)).invert(),Se.power=Se.power.subtract(new n(1)),_e.power=_e.power.subtract(new n(2)),Ot=t.symfunction(Pe===_?S:_,[Me.clone()]),Pe===S&&Ot.negate(),t.add(t.multiply(t.multiply(Ee,Se),Ot),t.multiply(ft,F.integrate(t.parse(_e),D,f))))):Pe===E||Pe===L?Xe.args[0].isLinear(D)&&(de=Xe.power.subtract(new n(1)).toString(),Bt=Xe.clone().toUnitMultiplier(),Re=t.parse(h((Pe===L?"-":"")+"1/({2}*{0})*{3}({1})^({0})",de,Me,Y,Pe)),Bt.power=Bt.power.subtract(new n(2)),Bt.power.equals(0)&&(Bt=t.parse(Bt)),b=t.subtract(Re,F.integrate(Bt,D,f))):Pe===T||Pe===A?(Te=Xe.power.subtract(new n(1)).toString(),Ae=Xe.power.subtract(new n(2)).toString(),Le=Pe===T?E:L,Bt=Xe.clone().toUnitMultiplier(),Ce=h((Pe===A?"-":"")+"1/({0}*{1})*{4}({3})^({2})*{5}({3})",Y,Te,Ae,Me,Pe,Le),Re=t.parse(Ce),Bt.power=Bt.power.subtract(new n(2)),Bt.power.equals(0)&&(Bt=t.parse(Bt)),b=t.add(Re,t.multiply(new o(Ae/Te),F.integrate(Bt,D,f)))):Pe!==P&&Pe!==N||!Xe.power.equals(2)?F.integration.stop():b=F.integrate(Xe.fnTransform(),D,f):F.integration.stop();b.multiplier=b.multiplier.multiply(q)}}else if(U===g)b=F.integration.partial_fraction(Xe,D,f);else if(U===y){var Be=(Xe=Xe.getDenom().group===d?t.expand(Xe):Xe).stripVar(D),Fe=t.divide(Xe.clone(),Be.clone());if(Be.contains(D)&&(Fe=t.multiply(Fe,Be),Be=new o(1)),Fe.group!==y){if(Fe.equals(1))return F.integrate(t.expand(Xe),D,f);Fe.clone().toLinear().isPoly(!0)&&1<e.Utils.variables(Fe).length&&(Fe=e.Algebra.Factor.factor(Fe)),b=F.integrate(Fe,D,f)}else{var qe=Fe.collectSymbols().sort((function(e,t){return e.group===t.group?Number(e.power)===Number(t.power)?e<t?1:-1:t.power-e.power:t.group-e.group})).map((function(e){return"exp"===(e=o.unwrapSQRT(e,!0)).fname?t.parse(h("({1})*e^({0})",e.args[0],e.multiplier)):e})),He=qe.length;if(Xe.power<0){if(2===He)return F.integrate(t.expand(Xe),D,f,m)}else if(2===He){try{b=F.integration.u_substitution(qe,D)}catch(U){}if(!b){var Ge,Ve,We,je,Xe,Ze,Ye,Je,$e,Qe,Ke,et,tt,nt,rt,it,st,at,ot,lt,ut,ct,ht,pt,ft,mt,dt,gt,vt,yt,wt=qe[0].group,bt=qe[1].group,xt=qe[0],Mt=qe[1],St=xt.fname,_t=Mt.fname;if(Xe=t.multiply(xt.clone(),Mt.clone()),wt===s&&bt===s)if(St===x||_t===x)b=F.integration.by_parts(Xe.clone(),D,f,m);else{qe.sort((function(e,t){return t.fname>e.fname}));var Et,Tt=xt.args[0];Tt.isLinear()&&(Tt.group===v||Tt.group===y||Tt.group===d)||F.integration.stop(),J=(Et=F.integration.decompose_arg(Tt,D))[1],Y=Et[0],J.isLinear()||F.integration.stop();var At,Lt=Mt.args[0];if(Tt.equals(Lt))if(St===S&&_t===_||St===_&&_t===S)if(xt.power.lessThan(0)&&F.integration.stop(),St===S&&xt.power.add(Mt.power).equals(0))xt.fname=E,xt.updateHash(),b=F.integrate(xt,D,f);else if(p(xt.power)&&_t===_&&Mt.power.lessThan(0)){de=Number(xt.power)/2;var Ct=t.parse(h("(1-cos({0})^2)^({1})",xt.args[0],de));b=F.integrate(t.expand(t.multiply(Ct,Mt.clone())),D,f,m)}else if(p(xt.power)&&_t===S&&Mt.power.lessThan(0))de=Number(xt.power)/2,Ct=t.parse(h("(1-sin({0})^2)^({1})",xt.args[0],de)),b=F.integrate(t.expand(t.multiply(Ct,Mt.clone())),D,f,m);else{var Rt,Nt=e.Utils.even(xt.power),Pt=e.Utils.even(Mt.power);if(b=new o(0),Nt&&Pt){var It=function(e){var n=e.power/2;return n=e.fname===_?"((1/2)+(cos(2*("+e.args[0]+"))/2))^"+n:"((1/2)-(cos(2*("+e.args[0]+"))/2))^"+n,t.parse(n)},Ot=(Y=It(xt),X=It(Mt),t.multiply(Y,X));return(kt=t.expand(Ot)).each((function(e){b=t.add(b,F.integrate(e,D,f))})),t.multiply(b,Be)}Bt=Nt?(Rt=xt,Mt):(Rt=Mt,xt);var kt,Dt=Rt.fname===_?-1:1,Ut=((de=Bt.power)-1)/2,zt=t.parse("(1-"+Rt.fname+e.Utils.inBrackets(Tt)+"^2)^"+Ut);(kt=t.expand(t.multiply(new o(Dt),t.multiply(Rt.clone(),zt)))).each((function(e){b=t.add(b,F.integration.poly_integrate(e.clone()))}))}else St===T&&_t===E&&J.isLinear()&&Mt.isLinear()?b=t.parse(h("sec({0})^({1})/({1})",xt.args[0],xt.power)):St===E&&_t===T&&J.isLinear()?xt.isLinear()&&Mt.isLinear()?b=t.divide(t.symfunction(T,[Tt.clone()]),Y):p(xt.power)?(H=Number(xt.power)/2,Ot=t.parse(h("(sec({0})^2-1)^({1})",xt.args[0],H)),b=F.integrate(t.expand(t.multiply(Ot,Mt)),D,f)):F.integration.stop():b=St===T&&_t===_?(xt.fname=_,xt.invert().updateHash(),F.integrate(t.multiply(xt,Mt),D,f)):St===S&&_t===A?(Mt.fname=S,Mt.invert().updateHash(),F.integrate(t.multiply(xt,Mt),D,f)):(Ot=St!==E||_t!==_&&_t!==S||!Mt.power.lessThan(0)?t.multiply(xt.fnTransform(),Mt.fnTransform()):t.multiply(xt.fnTransform(),Mt),F.integrate(t.expand(Ot),D,f));else St!==S&&St!==_||_t!==S&&_t!==_?F.integration.stop():xt.isLinear()&&Mt.isLinear()?b=xt.args[0].isLinear()&&Mt.args[0].isLinear()?(_t===S?(Z=xt.args[0],At=Mt.args[0]):(At=xt.args[0],Z=Mt.args[0]),ve=t.parse(h("(sin(({1})+({0}))+sin(({1})-({0})))/2",Z.toString(),At.toString())),F.integrate(ve,D,f)):(Ht=B(qe),F.integrate(t.expand(Ht),D,f)):(Ht=new o(1),qe.map((function(e){e=e.fnTransform(),Ht=t.multiply(Ht,e)})),Ot=t.expand(Ht),(b=F.integrate(Ot,D,f)).hasIntegral()&&(b=F.integrate(B(Ht.collectSymbols()),D,f)))}else wt===s&&bt===d?(Ge=xt.isLinear(),xt.fname===_&&Ge&&Mt.power.equals(-1)?b=t.symfunction("Ci",[xt.args[0]]):xt.fname===_&&Mt.power.equals(-1)?b=F.integrate(t.multiply(xt.fnTransform(),Mt.clone()),D,f):xt.fname===P&&Ge&&Mt.power.equals(-1)?b=t.symfunction("Chi",[xt.args[0]]):xt.fname===P&&Mt.power.equals(-1)?b=F.integrate(t.multiply(xt.fnTransform(),Mt.clone()),D,f):xt.fname===S&&Ge&&Mt.power.equals(-1)?b=t.symfunction("Si",[xt.args[0]]):xt.fname===S&&Mt.power.equals(-1)?b=F.integrate(t.multiply(xt.fnTransform(),Mt.clone()),D,f):xt.fname===N&&Ge&&Mt.power.equals(-1)?b=t.symfunction("Shi",[xt.args[0]]):xt.fname===N&&Mt.power.equals(-1)?b=F.integrate(t.multiply(xt.fnTransform(),Mt.clone()),D,f):xt.fname===x&&Mt.power.equals(-1)?b=F.integration.poly_integrate(xt,D,f):"erf"===xt.fname?Mt.power.equals(1)&&(Ue=(it=F.integration.decompose_arg(xt.args[0],D))[0],De=it[1],Me=xt.args[0].toString(),b=t.parse(h("(e^(-(({2}))^2)*(sqrt(pi)*e^((({2}))^2)*(2*({0})^2*({1})^2-3)*erf(({2}))+2*({0})*({1})-2))/(4*sqrt(pi)*({0})^2)",Ue,De,Me))):b=F.integration.by_parts(Xe,D,f,m)):wt===w&&bt===d?(J=St===x?F.integration.decompose_arg(xt.args[0],D)[1]:null,b=xt.isE()&&(xt.power.group===d||xt.power.group===y)&&Mt.power.equals(-1)?t.symfunction("Ei",[xt.power.clone()]):St===x&&J.value===Mt.value?F.integration.poly_integrate(xt,D,f):F.integration.by_parts(Xe,D,f,m)):wt===g&&bt===d?(Xe=Mt.value===xt.value&&xt.power.equals(-1)?(Ve=Math.min.apply(null,e.Utils.keys(xt.symbols)),We=Math.min(Ve,Mt.power),(je=Mt.clone()).power=new n(We),Mt=t.divide(Mt,je.clone()),Ot=new o(0),xt.each((function(e){Ot=t.add(Ot,t.divide(e.clone(),je.clone()))})),Ot.multiplier=xt.multiplier,t.divide(Mt,Ot)):t.expand(Xe),b=F.integration.partial_fraction(Xe,D,f)):wt===v&&bt===d?(ve=xt.clone().toLinear(),Ze=e.Algebra.degree(ve,t.parse(D)).equals(1),xt.power.equals(-.5)?(Y=(Et=F.integration.decompose_arg(xt.clone().toLinear(),D))[0].negate(),J=Et[1],X=Et[3],ut=Number(xt.power),ct=Number(Mt.power),c(ct)&&e.Utils.even(ct)&&J.power.equals(2)?(st=t.divide(t.multiply(t.pow(X.clone(),new o(2)),t.symfunction(M,[t.divide(X.clone(),Y.clone())])),t.pow(Y.clone(),new o(2))),st=t.multiply(st,t.symfunction(M,[X]).invert()),(Ye=t.parse("sin(u)")).power=Ye.power.multiply(Mt.power),ge=F.integrate(Ye,"u",f),Je=t.parse("asin(sqrt("+Y+"/"+X+")*"+D+")"),b=t.multiply(st,ge.sub(new o("u"),Je))):-.5===ut&&($e=function(e,n){if(!(n=t.parse(F.integrate(e,D,f,m).sub(D,h(n,D)))).hasIntegral())return n},-1===ct?b=$e(t.expand(t.expand(t.pow(t.multiply(xt.invert(),Mt.invert()),new o(2)))).invert(),"sqrt(1-1/({0})^2)"):-2===ct&&(b=$e(t.sqrt(t.expand(t.divide(t.pow(Xe,new o(2)).invert(),t.pow(new o(D),new o(2))).negate())).invert(),"sqrt(1-1/({0})^2)")))):xt.power.equals(-1)&&Mt.isLinear()&&Ze?b=F.integration.partial_fraction(Xe,D,f):!xt.power.lessThan(0)&&c(xt.power)?(Qe=t.expand(xt),b=new o(0),Qe.each((function(e){e.group===g?e.each((function(e){b=t.add(b,F.integrate(t.multiply(Mt.clone(),e),D,f))})):b=t.add(b,F.integrate(t.multiply(Mt.clone(),e),D,f))}))):xt.power.lessThan(-2)?b=F.integration.by_parts(Xe,D,f,m):xt.power.lessThan(0)&&Mt.power.greaterThan(1)?(Y=(Et=F.integration.decompose_arg(xt.clone().toLinear(),D))[0].negate(),J=Et[1],X=Et[3],j=xt.clone().toLinear(),b=J.group!==g&&J.isLinear()?(H=Number(Mt.power),Rt=new o(ht="_u_"),Ke=t.expand(t.divide(t.pow(t.subtract(Rt.clone(),X.clone()),new o(H)),Rt.clone())),(et={})[ht]=j,tt=t.parse(Ke,et),F.integrate(tt,D,0)):Mt.power.greaterThan(J.power)||Mt.power.equals(J.power)?(nt=new e.Algebra.Classes.Factors,xt=e.Algebra.Factor.coeffFactor(xt.invert(),nt),(rt=e.Algebra.divide(Mt,xt)).group!==y?(b=new o(0),rt.each((function(e){b=t.add(b,F.integrate(e,D,f))})),nt.each((function(e){b=t.divide(b,e)})),t.expand(b)):F.integration.by_parts(Xe,D,f,m)):F.integration.partial_fraction(Xe,D,f)):xt.power.den.equals(2)?(Y=(it=F.integration.decompose_arg(xt.clone().toLinear(),D))[3],J=it[1],X=it[0],At=it[2],b=J.power.equals(2)&&X.lessThan(0)?(Y.equals(1)||(Be=t.multiply(Be,t.pow(Y,new o(2)))),Rt=D,st=t.divide(t.pow(X.clone().negate(),new o(.5)),t.pow(Y,new o(.5))),ht=t.symfunction(_,[new o(Rt)]),at=t.pow(t.symfunction(_,[new o(Rt)]),new o(xt.power.num)),ot=t.pow(t.symfunction(S,[new o(Rt)]),new o(Mt.power)),lt=t.multiply(t.multiply(at,ht),ot),(ge=F.integrate(lt,Rt,f)).sub(Rt,t.symfunction(C,[t.multiply(new o(D),st)]))):F.integration.partial_fraction(Xe,D,f,m)):Ze&&(b=F.integration.partial_fraction(Xe,D,f))):xt.isComposite()&&Mt.isComposite()?(b=new o(0),xt.power.greaterThan(0)&&Mt.power.greaterThan(0)?(kt=t.expand(Xe)).each((function(e){b=t.add(b,F.integrate(e,D,f))}),!0):(ut=Number(xt.power),ct=Number(Mt.power),ut<0&&0<ct&&(Ot=xt,xt=Mt,Mt=Ot),-1===ut&&-1===ct?b=F.integration.partial_fraction(Xe,D):xt.each((function(e){e=t.multiply(e,Mt.clone()),e=F.integrate(e,D,f),b=t.add(b,e)})))):wt===v&&qe[0].power.greaterThan(0)?(xt=t.expand(xt),b=new o(0),xt.each((function(e){b=t.add(b,F.integrate(t.multiply(e,Mt.clone()),D,f))}),!0)):wt===s&&bt===w&&e.Utils.in_htrig(xt.fname)?(xt=xt.fnTransform(),b=F.integrate(t.expand(t.multiply(xt,Mt)),D,f)):wt===s&&bt===v||bt===s&&wt===v?(bt===s&&wt===v&&(Ot=xt,xt=Mt,Mt=Ot),ht=o.unwrapSQRT(F.diff(xt.clone(),D),!0),pt=o.unwrapSQRT(Mt,!0),ht.power.equals(pt.power)?(H=new o(Mt.power),mt=ht.clone().toLinear(),dt=Mt.clone().toLinear(),(ft=e.Algebra.divide(mt.toLinear(),dt)).isConstant()&&(gt=t.pow(ft,H.negate()),b=t.multiply(gt,F.integration.poly_integrate(xt.clone())))):b=F.integration.by_parts(Xe,D,f,m)):(vt=xt.clone().toLinear(),yt=Mt.clone().toLinear(),b=wt===w&&bt===w&&xt.power.contains(D)&&Mt.power.contains(D)&&!vt.contains(D)&&!yt.contains(D)?t.parse(h("(({0})^(({2})*({4}))*({1})^(({3})*({4})))/(log(({0})^({2}))+log(({1})^({3})))",vt.toString(),yt.toString(),xt.power.multiplier.toString(),Mt.power.multiplier.toString(),D)):F.integration.by_parts(Xe,D,f,m))}}else if(3===He&&(qe[2].group===d&&qe[2].power.lessThan(2)||qe[0].group===v)){var Bt,Ft=qe[0];Ft.group===v?(Ft.power.greaterThan(1)&&(Ft=t.expand(Ft)),Bt=t.multiply(qe[1],qe[2]),b=new o(0),Ft.each((function(e){e=t.multiply(e,Bt.clone()),e=F.integrate(e,D,f),b=t.add(b,e)}),!0)):b=F.integration.by_parts(Xe,D,f,m)}else if(k(qe)){Ot=new o(1);var qt=0;for(He=qe.length;qt<He;qt++)Ot=t.multiply(Ot,qe[qt].fnTransform());Ot=t.expand(Ot),b=F.integrate(Ot,D,f)}else{var Ht=B(qe);b=F.integrate(t.expand(Ht),D,f)}}b=t.multiply(b,Be)}}else b=t.multiply(Xe.clone(),t.parse(D));if(b)return b}catch(U){if(!(U instanceof O||U instanceof e.exceptions.DivisionByZero))throw U}return t.symfunction("integrate",[a,l])}),!1))},defint:function(n,r,i,s){function a(e,n,r){try{return t.parse(e,n)}catch(n){return F.Limit.limit(e,s,r)}}s=s||"x";var l,u,c=e.Utils.variables(n),h=n.hasTrig();return 1!==c.length||s||(s=c[0]),h||(l=F.integrate(n,s)),h||l.hasIntegral()?1===c.length&&r.isConstant()&&i.isConstant()?(u=e.Utils.build(n),new o(e.Math2.num_integrate(u,Number(r),Number(i)))):t.symfunction("defint",[n,r,i,s]):(u={},(n={})[s]=i,u[s]=r,i=a(l,n,i),r=a(l,u,r),t.subtract(i,r))},Limit:{interval:function(e,n){return t.parse(h("[{0}, {1}]",e,n))},diverges:function(){return F.Limit.interval("-Infinity","Infinity")},divide:function(n,i,s,a,l){if(!(l++>r.max_lim_depth)){n.clone();var u=i.clone();if("abs"===i.fname){var c=n.sign(),h=a.sign();if(a.isInfinity)return t.multiply(new o(c),new o(h));if(a.equals(0)){h=t.parse(n.multiplier);var p=t.parse(i.multiplier);return t.divide(t.multiply(h,F.Limit.interval("-1","1")),p)}F.Limit.diverges()}var m=function(t){if(e.Utils.isVector(t)){for(var n=0;n<t.elements.length;n++)if(!t.elements[n].isInfinity)return!1;return!0}return t.isInfinity},d=function(t,n){return!e.Utils.isVector(t)&&t.equals(n)};do{var g,v,y=f(F.Limit.limit(n.clone(),s,a,l)),w=f(F.Limit.limit(i.clone(),s,a,l)),b=m(y)&&m(w)||d(y,0)&&d(w,0)}while(b&&(g=F.diff(n.clone(),s),v=F.diff(i.clone(),s),n=(v=t.expand(t.divide(g,v))).getNum(),i=v.getDenom()),b);return p=w.equals(0),u=Number(u.power),a.isConstant(!0)&&p?o.infinity(e.Utils.even(u)&&y.lessThan(0)?-1:void 0):p?F.Limit.diverges():t.divide(y,w)}},rewriteToLog:function(e){var n=e.power.clone();return e.toLinear(),t.pow(new o("e"),t.multiply(n,t.symfunction(r.LOG+"",[e])))},getSubbed:function(e,t,n){var r;e.group===w&&(e=F.rewriteToLog(e));try{r=e.sub(t,n)}catch(t){r=e}return r},isInterval:function(t){return e.Utils.isVector(t)},isConvergent:function(e){return!(F.Limit.isInterval(e)&&e.elements[0].isInfinity&&e.elements[1].isInfinity||e.containsFunction("limit"))},limit:function(n,i,a,l){if(n.isLinear()&&n.isComposite()){var u=new o(0);return n.each((function(e){u=t.add(u,F.Limit.limit(e,i,a,l))}),!0),u}if(n=e.Algebra.Simplify.simplify(n),l=l||1,!(l++>r.max_lim_depth)){var c=t.parse(n.multiplier);n.toUnitMultiplier();try{if(n.isConstant(!0))R=n;else{var p={};p[i]=a;try{var m=t.parse(n.sub(i,a),p);(m.isConstant(!0)||m.isInfinity)&&(R=m)}catch(c){}if(!R){var g,v=n.getNum(),b=n.getDenom();if(b.isConstant(!0)){if(n.group===w){var M,T,A,L,C,R,N=n.clone().toLinear(),P=(n.power.clone(),N.getNum()),I=N.getDenom(),O=e.Utils.decompose_fn(I,i,!0);R=P.group===d&&P.multiplier.isOne()&&O.ax.group===d&&O.b.isConstant(!0)&&O.a.isOne()&&O.b.isConstant(!0)?t.parse(h("(1/e^({0}))",O.b)):(T=(M=F.Limit.rewriteToLog(n.clone())).power.clone(),A=M.clone().toLinear(),L=F.Limit.limit(A,i,a,l),C=F.Limit.limit(T,i,a,l),t.pow(L,C))}else if(n.group===s&&1===n.args.length){var k,D=F.Limit.limit(n.args[0],i,a,l);if(e.Utils.isVector(D))return R=D.map((function(e){return n.clone().args[0]=e,F.Limit.limit(t.symfunction(n.fname,[e]),i,a,l)})),t.multiply(c,R);if(D.isConstant(!0)){var U=t.symfunction(n.fname,[D]);try{f(U),k=!0}catch(c){k=!1}}if(k)R=U;else if(F.Limit.isConvergent(D))if(n.fname===x)switch(D.toString()){case"0":R=o.infinity().negate();break;case"Infinity":case"-Infinity":R=o.infinity()}else if(n.fname!==_&&n.fname!==S||!a.isInfinity){if(n.fname===E){var z=n.args[0],B=z.getNum(),q=z.getDenom(),H=B.toUnitMultiplier();(a.isInfinity||H.equals("pi")&&q.equals(2))&&(R=divergent())}else if(n.fname===r.FACTORIAL&&D.isInfinity)return o.infinity()}else R=F.Limit.interval(-1,1)}else if(n.group===d){if(0<n.power)return t.parse(n,p);R=e.Utils.even(n.power)?o.infinity():F.Limit.diverges()}else if(n.group===y){N=(j=n.collectSymbols().sort((function(e,t){return e.group-t.group}))).pop();for(var G=f(F.Limit.limit(N,i,a,l));j.length;){var V=j.pop(),W=f(F.Limit.limit(V,i,a,l));G.isInfinity||!F.Limit.isConvergent(G)&&W.equals(0)||G.equals(0)&&F.Limit.isConvergent(W)?((V=V.containsFunction(x)?[N,N=V][0]:V).invert(),G=G.isInfinity&&W.isInfinity?o.infinity():F.Limit.divide(N,V,i,a,l)):(G=t.multiply(G,W),N=t.multiply(N,V))}R=G}else if(n.isComposite()){n.isLinear()||(n=t.expand(n)),R=new o(0);for(var j=n.collectSymbols().sort((function(e,t){return t.group-e.group})),X=[],Z=new o(0),Y=0,J=j.length;Y<J;Y++)($=j[Y].clone()).group===s||$.group===y&&$.hasFunc()?Z=t.add(Z,$):X.push($);for(X.unshift(Z),1!==X.length&&(j=X),Y=0,J=j.length;Y<J;Y++){var $=j[Y];try{g=F.Limit.limit($,i,a,l)}catch(c){g=F.Limit.diverges()}try{R=t.add(R,g)}catch(c){if(l++>r.max_lim_depth)return;R=F.Limit.limit(F.diff(n,i),i,a,l)}}}}else R=F.Limit.divide(v,b,i,a,l)}}R=R||t.symfunction("limit",[n,i,a])}catch(c){R=t.symfunction("limit",[n,i,a])}return t.multiply(c,R)}}},Fresnel:{S:function(e){return e.isConstant(!0)?F.defint(t.parse("sin(pi*x^2/2)"),o(0),e,"x"):t.symfunction("S",arguments)},C:function(e){return e.isConstant(!0)?F.defint(t.parse("cos(pi*x^2/2)"),o(0),e,"x"):t.symfunction("C",arguments)}}};a.register([{name:"diff",visible:!0,numargs:[1,3],build:function(){return F.diff}},{name:"sum",visible:!0,numargs:4,build:function(){return F.sum}},{name:"product",visible:!0,numargs:4,build:function(){return F.product}},{name:"integrate",visible:!0,numargs:[1,2],build:function(){return F.integrate}},{name:"defint",visible:!0,numargs:[3,4],build:function(){return F.defint}},{name:"S",visible:!0,numargs:1,build:function(){return F.Fresnel.S}},{name:"C",visible:!0,numargs:1,build:function(){return F.Fresnel.C}},{name:"limit",visible:!0,numargs:[3,4],build:function(){return F.Limit.limit}}]),a.api()}(),a=r(407),r(426),r(374),function(){var e,t=a.getCore(),r=t.PARSER,i=t.Algebra,s=t.Calculus,o=s.integration.decompose_arg,l=t.Utils.evaluate,u=t.Utils.remove,c=t.Utils.format,h=t.Utils.build,p=t.Utils.knownVariable,f=t.Symbol,m=t.Utils.isSymbol,d=t.Utils.variables,g=t.groups.S,v=t.groups.PL,y=t.groups.CB,w=t.groups.CP,b=t.groups.FN,x=t.Settings,M=t.Utils.range,S=t.Utils.isArray;function _(e,n){if(n.isConstant()&&e.isConstant()&&!e.equals(n)||e.equals(t.Settings.IMAGINARY)||n.equals(t.Settings.IMAGINARY))throw new t.exceptions.NerdamerValueError(e.toString()+" does not equal "+n.toString());this.LHS=e,this.RHS=n}function E(e,t){return r.equals(e,t)}t.Settings.SOLVE_RADIUS=1e3,t.Settings.ROOTS_PER_SIDE=10,t.Settings.make_pi_conversions=!1,t.Settings.STEP_SIZE=.1,t.Settings.EPSILON=1e-13,t.Settings.MAX_NEWTON_ITERATIONS=200,t.Settings.MAX_NON_LINEAR_TRIES=12,t.Settings.NON_LINEAR_JUMP_AT=50,t.Settings.NON_LINEAR_JUMP_SIZE=100,t.Settings.NON_LINEAR_START=.01,t.Settings.NEWTON_SLICES=200,t.Settings.NEWTON_EPSILON=2*Number.EPSILON,t.Settings.SOLUTION_PROXIMITY=1e-14,t.Settings.FILTER_SOLUTIONS=!0,t.Settings.MAX_SOLVE_DEPTH=10,t.Settings.ZERO_EPSILON=1e-9,t.Settings.MAX_BISECTION_ITER=2e3,t.Settings.BI_SECTION_EPSILON=1e-12,t.Symbol.prototype.hasTrig=function(){return this.containsFunction(["cos","sin","tan","cot","csc","sec"])},t.Symbol.prototype.hasNegativeTerms=function(){if(this.isComposite())for(var e in this.symbols){var t=this.symbols[e];if(t.group===v&&t.hasNegativeTerms()||this.symbols[e].power.lessThan(0))return!0}return!1},_.prototype={toString:function(){return this.LHS.toString()+"="+this.RHS.toString()},text:function(e){return this.LHS.text(e)+"="+this.RHS.text(e)},toLHS:function(e){var t=(n=(e=void 0===e)?this.removeDenom():this.clone()).LHS,n=n.RHS;return t.isConstant(!0)&&!n.isConstant(!0)&&([t,n]=[n,t]),n=r.subtract(t,n),e?r.expand(n):n},removeDenom:function(){var e=this.LHS.clone(),t=this.RHS.clone(),n=r.multiply(e.getDenom(),t.getDenom());if(e=r.expand(r.multiply(e,n.clone())),(t=r.expand(r.multiply(t,n))).group===w&&t.group!==w&&(i=e,e=t,t=i),e.group===y){var i=new f(e.multiplier),s=t.clone();e.each((function(e){e.power.lessThan(0)?s=r.divide(s,e):i=r.multiply(i,e)})),e=i,t=s}else if(e.group===w)for(var a in e.symbols){var o=e.symbols[a];if(o.group===y)for(var l in o.symbols)if((l=o.symbols[l]).power.lessThan(0))return new _(r.expand(r.multiply(l.clone().toLinear(),e)),r.expand(r.multiply(l.clone().toLinear(),t)))}return new _(e,t)},clone:function(){return new _(this.LHS.clone(),this.RHS.clone())},sub:function(e,t){var n=this.clone();return n.LHS=n.LHS.sub(e.clone(),t.clone()),n.RHS=n.RHS.sub(e.clone(),t.clone()),n},isZero:function(){return t.Utils.evaluate(this.toLHS()).equals(0)},latex:function(e){return[this.LHS.latex(e),this.RHS.latex(e)].join("=")}},r.equals=function(e,t){return new _(e,t)},e=r.functions.simplify[0],r.functions.simplify[0]=function(t){return t instanceof _?(t.LHS=e(t.LHS),t.RHS=e(t.RHS),t):e(t)},t.Expression.prototype.equals=function(e){return e instanceof t.Expression&&(e=e.symbol),new _(this.symbol,e)},t.Expression.prototype.solveFor=function(e){var n;if(this.symbol instanceof _){if(this.symbol.LHS.isConstant()&&this.symbol.RHS.equals(e))return new t.Expression(this.symbol.LHS);if(this.symbol.RHS.isConstant()&&this.symbol.LHS.equals(e))return new t.Expression(this.symbol.RHS);n=this.symbol.toLHS()}else n=this.symbol;return L(n,e).map((function(e){return new t.Expression(e)}))},t.Expression.prototype.expand=function(){if(this.symbol instanceof _){var e=this.symbol.clone();return e.RHS=r.expand(e.RHS),e.LHS=r.expand(e.LHS),new t.Expression(e)}return new t.Expression(r.expand(this.symbol))},t.Expression.prototype.variables=function(){return this.symbol instanceof _?t.Utils.arrayUnique(d(this.symbol.LHS).concat(d(this.symbol.RHS))):d(this.symbol)},t.Equation=_;var T=t.Utils.checkAll=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return!1;return!0},A=t.Solve={version:"2.0.3",solutions:[],solve:function(e,n){return n=L(e,String(n)),new t.Vector(n)},toLHS:function(e,t){return m(e)?e:(e instanceof _||((n=e.split("="))[1]=n[1]||"0",e=new _(r.parse(n[0]),r.parse(n[1]))),e.toLHS(t));var n},solveCircle:function(e,n){for(var i=n.map((function(e){return r.parse(e)})),s=[],a=[],o=0;o<e.length;o++){for(var l=[],u=0;u<i.length;u++)l.push(Number(t.Algebra.degree(e[o],i[u])));l.push(t.Utils.arraySum(l,!0)),s.push(l)}var c,h,f=e[0],m=e[1];return s[0][2]>s[1][2]&&([m,f]=[f,m],[s[1],s[0]]=[s[0],s[1]]),1===s[0][0]&&2===s[0][2]&&2===s[1][0]&&4===s[1][2]&&(c=n[0],h=n[1],n=L(r.parse(m,p(c,L(r.parse(f),c)[0])),h).map((function(e){return e.toString()})),m=[L(r.parse(f,p(h,n[0])))[0].toString()],n[1]&&m.push(L(r.parse(f,p(h,n[1])))[0].toString()),x.SOLUTIONS_AS_OBJECT?((a={})[c]=m,a[h]=n):(n.unshift(h),m.unshift(c),a=[m,n])),a},solveNonLinearSystem:function(e,i,s){if(i<0)return[];s=void 0===s?t.Settings.NON_LINEAR_START:s;var a=t.Settings.MAX_NON_LINEAR_TRIES,o=Math.floor(a/2);i=void 0===i?a:i;var l,u,c,p,f,m=t.Settings.NON_LINEAR_JUMP_AT,d=t.Settings.NON_LINEAR_JUMP_SIZE,g=t.Utils.arrayGetVariables(e),v=(a=t.Matrix.jacobian(e,g,(function(e){return h(e,g)}),!0),t.Settings.MAX_NEWTON_ITERATIONS),y=e.map((function(e){return h(e,g)})),w=a.map((function(e){return h(e,g)}),!0),b=t.Matrix.cMatrix(0,g),x=t.Matrix.cMatrix(s,g),M=0;do{if(v<M)break;l=function(e,t){return e.map((function(e,n){return Number(t.get(n,0))}))}(g,x),p=x.clone(),y.forEach((function(e,t){x.set(t,0,e.apply(null,l))}));var S=new t.Matrix;if(w.each((function(e,t,n){e=e.apply(null,l),S.set(t,n,e)})),S=S.invert(),f=(u=r.multiply(S,x).negate()).subtract(b,(function(e){return r.parse(Number(e))})),b=p.add(u,(function(e){return r.parse(Number(e))})),x=b,m<=M&&1<c){i===o&&(s=0);var _=o<i?1:-1;return n=i%Math.floor(o)+1,s+=_*n*d,A.solveNonLinearSystem(e,--i,s)}}while(_=c,M++,c=f.max(),Number(c)!==Number(_)&&Number(c)>=Number.EPSILON);return A.systemSolutions(x,g,!0,(function(e){return t.Utils.round(Number(e),14)}))},systemSolutions:function(e,n,i,s){var a=t.Settings.SOLUTIONS_AS_OBJECT?{}:[];return e.each((function(e,o){var l=(i?r.expand(e):e).valueOf();s&&(l=s.call(e,l)),o=n[o],t.Settings.SOLUTIONS_AS_OBJECT?a[o]=l:a.push([o,l])})),a},solveSystemBySubstitution:function(e){var n=d(e[0]),r=d(e[1]);return 2===e.length&&2===n.length&&t.Utils.arrayEqual(n,r)?A.solveCircle(e,n):[]},solveSystem:function(e,n){for(var s=0;s<e.length;s++)e[s]=A.toLHS(e[s]);var l,c=e.length,h=new t.Matrix,p=new t.Matrix,m=!1;if(void 0===n){if(!i.allLinear(e))try{return A.solveNonLinearSystem(e)}catch(b){if(b instanceof t.exceptions.DivisionByZero)return A.solveSystemBySubstitution(e)}if((l=t.Utils.arrayGetVariables(e)).length<e.length){var d=[],g=e.length;for(s=0;s<g-1;s++)d.push(r.parse(e[s]));var v={},y=A.solveSystem(d,l);Array.isArray(y)?y.forEach((function(e){v[e[0]]=e[1]})):v=y;var w=!0;for(s=g-1;s<g;s++)r.parse(e[s],v).equals(0)||(w=!1);if(w)return y}for(s=0;s<l.length;s++)a.setVar(l[s],"delete");for(s=0;s<c;s++){for(var b=e[s],x=0;x<l.length;x++){var M=l[x],S=[];b.each((function(e){e.contains(M)&&(S=S.concat(e.coeffs()))}));var _=t.Utils.arraySum(S);h.set(s,x,_)}var E=b.clone();l.map((function(e){E=E.stripVar(e,!0)})),p.set(s,0,E.negate())}}else for(l=n,m=!0,s=0;s<c;s++){for(p.set(s,0,new f(0)),b=r.expand(e[s]).collectSymbols(),x=0;x<n.length;x++){h.set(s,x,new f(0)),M=n[x];for(var T=0;T<b.length;T++){for(var L,C=b[T],R=!1,N=0;N<n.length;N++)C.contains(n[N])&&(R&&t.err("Multiple variables found for term "+C),R=!0);C.contains(M)&&(L=o(u(b,T),M),h.set(s,x,r.add(h.get(s,x),L[0])))}}for(T=0;T<b.length;T++)p.set(s,0,r.add(p.get(s,0),b[T]))}if(l.length!==e.length||h.determinant().equals(0))throw new t.exceptions.SolveError("System does not have a distinct solution");return y=(h=h.invert()).multiply(p),t.Utils.isArray(n)&&y.each((function(e){return e.negate()})),A.systemSolutions(y,l,m)},quad:function(e,t,n){return e=r.subtract(r.pow(t.clone(),f(2)),r.multiply(r.multiply(n.clone(),e.clone()),f(4))),e=r.pow(e,f(.5)),n=r.parse(r.multiply(new f(2),n.clone())),[r.parse(c("(-({0})+({1}))/({2})",t,e,n)),r.parse(c("(-({0})-({1}))/({2})",t,e,n))]},cubic:function(e,t,n,i){return i=i.text(),n=`((${e=`(-(${n=n.text()})^3/(27*(${i})^3)+(${n})*(${t=t.text()})/(6*(${i})^2)-(${e.text()})/(2*(${i})))`})+sqrt((${e})^2+(${t=`((${t})/(3*(${i}))-(${n})^2/(9*(${i})^2))`})^3))^(1/3)+((${e})-sqrt((${e})^2+(${t})^3))^(1/3)-((${n})/(3*(${i})))`,i="1/2+sqrt(3)/2*i",[r.parse(n),r.parse(`(${n})(${i})`),r.parse(`(${n})(${i})^2`)]},quartic:function(e,n,i,s,a){var o,l,u,h={};return t.Utils.arrayUnique(d(a).concat(d(s)).concat(d(i)).concat(d(n)).concat(d(e))).map((function(e){h[e]=1})),a=a.toString(),s=s.toString(),i=i.toString(),n=n.toString(),e=e.toString(),o=r.parse(c("(8*({0})*({2})-3*({1})^2)/(8*({0})^2)",a,s,i)).toString(),l=r.parse(c("(({1})^3-4*({0})*({1})*({2})+8*({0})^2*({3}))/(8*({0})^3)",a,s,i,n)).toString(),u=r.parse(c("12*({0})*({4})-3*({1})*({3})+({2})^2",a,s,i,n,e)).toString(),e=r.parse(c("2*({2})^3-9*({1})*({2})*({3})+27*({1})^2*({4})+27*({0})*({3})^2-72*({0})*({2})*({4})",a,s,i,n,e)).toString(),e=r.parse(c("((({1})+(({1})^2-4*({0})^3)^(1/2))/2)^(1/3)",u,e)).toString(),g=r.parse(c("(1/2)*(-(2/3)*({1})+(1/(3*({0}))*(({2})+(({3})/({2})))))^(1/2)",a,o,e,u)).toString(),[r.parse(c("-(({1})/(4*({0})))-({4})+(1/2)*sqrt(-4*({4})^2-2*({2})+(({3})/({4})))",a,s,o,l,g)),r.parse(c("-(({1})/(4*({0})))-({4})-(1/2)*sqrt(-4*({4})^2-2*({2})+(({3})/({4})))",a,s,o,l,g)),r.parse(c("-(({1})/(4*({0})))+({4})+(1/2)*sqrt(-4*({4})^2-2*({2})-(({3})/({4})))",a,s,o,l,g)),r.parse(c("-(({1})/(4*({0})))+({4})-(1/2)*sqrt(-4*({4})^2-2*({2})-(({3})/({4})))",a,s,o,l,g))]},divideAndConquer:function(e,n){var r=[];return(e=t.Algebra.Factor.factor(e)).group===y&&e.each((function(e){e=f.unwrapPARENS(e),r=r.concat(L(e,n))})),r},csolve:function(e,n){return t.Utils.block("IGNORE_E",(function(){var i=[],s=t.Utils.decompose_fn(e,n,!0);if(s.x.group===g)for(var a,o=r.parse(s.x.power),l=Number(o),u=r.pow(r.divide(s.b.negate(),s.a),o.invert()),h=(u=(s=f.toPolarFormArray(u))[0],s[1],u.toString()),p=(o.toString(),0);p<l;p++)a=c("({0})*e^(2*{1}*pi*{2}*{3})",h,p,o,t.Settings.IMAGINARY),a=r.parse(a),i.push(a);return i}),!0)},getPoints:function(e,n,r){n=n||.01,r=r||[];var i=h(e),s=Math.round(0),a=(l=i(s))/Math.abs(l),o=t.Settings.ROOTS_PER_SIDE,l=o;return r.push(Math.floor(s/2)),r.push(Math.abs(s)),r.push(s),e.each((function(e){e.containsFunction(t.Settings.LOG)&&r.push(.1)})),e=M(-t.Settings.SOLVE_RADIUS,s,n),s=M(s,t.Settings.SOLVE_RADIUS,n),(n=function(e,t){for(var n,s,o,l=[],u=0,c=e.length;u<c;u++)n=e[u],o=(s=i(n))/Math.abs(s),isNaN(s)||!isFinite(s)||l.length>t||(o!==a&&l.push(n),a=o);r=r.concat(l)})(e,l),n(s,o),r},bisection:function(e,n){var r=e-1,i=e+1;if(Math.sign(n(r))!==Math.sign(n(i))){var s,a,o=0;do{if(s=Math.abs(i-r),o++>t.Settings.MAX_BISECTION_ITER||isNaN(s))return}while(a=(r+i)/2,0<n(r)*n(a)?r=a:i=a,s>=x.EPSILON);var l=(r+i)/2;if(e=n(l),!isNaN(e)&&Math.abs(e)<=t.Settings.BI_SECTION_EPSILON)return t.Utils.round(l,13)}},Newton:function(e,n,r){var i=t.Settings.MAX_NEWTON_ITERATIONS,s=0,a=e;do{var o=n(a);if(0===a&&0===o){l=0;break}if(i<++s)return;var l=a-o/r(a);o=Math.abs(l-a),a=l}while(o>x.NEWTON_EPSILON);if(Math.abs(n(l))<=x.EPSILON)return l},rewrite:function(e,n,i){var s,a;n=n||new f(0),e.isComposite()&&e.isLinear()?(s=[],a=[],e.each((function(e){("sqrt"===(e=e.clone()).fname&&e.contains(i)?s:a).push(e)}),!0),1===s.length&&(n=r.expand(r.pow(r.subtract(n,t.Utils.arraySum(a)),new f(2))),e=r.expand(r.pow(f.unwrapSQRT(s[0]),new f(2))))):e=f.unwrapSQRT(r.expand(e));var o=0,l=e.length;if(e.group===w&&e.contains(i)&&e.isLinear()){e.distributeMultiplier();var u=new f(0);return e.each((function(e){e.contains(i)?(o++,u=r.add(u,e.clone())):n=r.subtract(n,e.clone())})),e=u,o!==l?A.rewrite(e,n,i):[e,n]}return e.group===y&&e.contains(i)&&e.isLinear()?(e.multiplier.lessThan(0)&&(e.multiplier=e.multiplier.multiply(new t.Frac(-1)),n.multiplier=n.multiplier.multiply(new t.Frac(-1))),n.equals(0)?new f(0):(u=new f(1),e.each((function(e){e.contains(i)?u=r.multiply(u,e.clone()):n=r.divide(n,e.clone())})),A.rewrite(e=u,n,i))):!e.isLinear()&&e.contains(i)?(l=r.parse(e.power.clone().invert()),e=r.pow(e,l.clone()),n=r.pow(r.expand(n),l.clone()),A.rewrite(e,n,i)):e.group===b||e.group===g||e.group===v?[e,n]:void 0},sqrtSolve:function(e,t){var n=new f(0),i=new f(0);if(e.isComposite()&&(e.each((function(e){"sqrt"===e.fname&&e.contains(t)?n=r.add(n,e.clone()):i=r.add(i,e.clone())})),!n.equals(0))){var s=r.expand(r.multiply(r.parse(e.multiplier),r.subtract(r.pow(i,new f(2)),r.pow(n,new f(2)))));return L(s,t).filter((function(n){if(n.isImaginary())return n;var r={};return r[t]=n,l(e,r).equals(0)?n:void 0}))}}},L=function(e,n,a,u,c){if(u=u||0,u++>x.MAX_SOLVE_DEPTH)return a;if(e instanceof _){if(e.isZero())return[new f(0)];if(e.LHS.equals(n)&&!e.RHS.contains(n))return[e.RHS];if(e.RHS.equals(n)&&!e.LHS.contains(n))return[e.LHS]}if(e instanceof t.Vector&&(e=e.elements),n=n||"x",S(e))return A.solveSystem.apply(void 0,arguments);a=a||[];var p={};if((E={})[n]=0,m(e)&&!0===l(e.getDenom(),E).equals(0))return a;var d=function(e,n){var i,s=m(e);void 0===e||"number"==typeof e&&isNaN(e)||(S(e)?e.forEach((function(e){d(e)})):"null"!==e.valueOf()&&("function"==typeof t.Settings.PRE_ADD_SOLUTION&&(e=t.Settings.PRE_ADD_SOLUTION(e)),s||(e=r.parse(e)),t.Settings.make_pi_conversions&&n&&(s=(i=r.divide(e.clone(),new f(Math.PI))).multiplier,n=Math.abs(s.num),s=Math.abs(s.den),n<10&&s<10&&(e=r.multiply(i,new f("pi")))),i=e.toString(),p[i]||a.push(e),p[i]=!0))};if(e.group===g&&e.contains(n)){try{(R={})[n]=0,l(c,R,"numer"),d(new f(0))}catch(c){}return a}if(e.group===y){if((k=e.getNum()).group!==y)return L(k,n,a,u,c);var M=String(n);return k.each((function(t){t.contains(M)&&L(t,n,a,u,e)})),a}e.group===b&&"sqrt"===e.fname&&(e=r.pow(f.unwrapSQRT(e),new f(2)));var E,C=(t.Utils.isSymbol(e)?e:A.toLHS(e,!1)).getNum(),R=(E=t.Utils.variables(C)).length;if((C=t.Utils.isInt(C.power)&&0<C.power?r.parse(C).toLinear():C).group===g||C.group===y&&C.contains(n))return[new f(0)];function N(e){var t=new f(0),i=new f(0);return e.each((function(e){e.contains(n,!0)?t=r.add(t,e.clone()):i=r.subtract(i,e.clone())})),[t,i]}var P,I,O,k,D={},U=function(e){var i=(e=r.expand(e,{expand_denominator:!0,expand_functions:!0})).clone();if(e.symbols)for(var s in e.symbols){var a=e.symbols[s],l=a.getDenom();if(!l.isConstant(!0)&&e.isComposite()){var u=new f(0);return e.each((function(e){u=r.add(u,r.multiply(e,l.clone()))})),U(r.multiply(r.parse(e.multiplier),u))}var c=o(a,n),h=c[1].fname===t.Settings.SQRT,p=f.unwrapSQRT(c[1]);if(s=p.power.clone(),!m(s)&&!s.equals(.5))if(s.den.gt(1)){if(h)return e=r.subtract(e,a.clone()),e=r.add(e,r.multiply(c[0].clone(),p)),U(e);p=D[s.den],D[s.den]=p?p++:1}else{if(-1===s.sign()){var d=r.parse(n+"^"+Math.abs(s));return e.each((function(t,i){t.contains(n)&&(e.symbols[i]=r.multiply(t,d.clone()))})),D={},U(r.parse(e))}if(a.group===v&&(a=t.Utils.arrayMin(t.Utils.keys(a.symbols)))<0){d=r.parse(n+"^"+Math.abs(a));var g=new f(0);return i.each((function(e){g=r.add(g,r.multiply(e.clone(),d.clone()))}),!0),g}}}return e};if(A.inverseFunctionSolve=function(e,t,i){var s=o(t.args[0],n);if(s[1].group===g)return r.divide(r.symfunction(e,[r.divide(i,r.parse(t.multiplier))]),s[0])},(C=U(C)).equals(0))return[C];if(1===(k=t.Utils.keys(D)).length&&(P=k[0],C.each((function(e,i){var s,a;!e.contains(n)||(e=(a=(s=o(e,n))[1]).power).den.gt(1)&&(a.power=e.multiply(new t.Frac(P)),C.symbols[i]=r.multiply(a,s[0]))})),C=r.parse(C)),d(A.sqrtSolve(C,n)),1===R)if(C.isPoly(!0)){var z=new t.Algebra.Classes.Factors;if(t.Algebra.Factor.factor(C,z),1<z.getNumberSymbolics())for(var B in z.factors)d(L(z.factors[B],n));else{var F,q,H=(F=t.Utils.getCoeffs(C,n)).length-1;R=!1,E[0]===n&&(T(F,(function(e){return e.group!==t.groups.N}))&&(E=t.Algebra.proots(C),T(E,(function(e){return!t.Utils.isInt(e)}))&&(R=!0,E.map((function(e){d(new f(e))})))),R||((e=r.parse(e))instanceof t.Equation&&(e=e.toLHS()),1===H?d(r.divide(F[0],F[1].negate())):2===H?d(r.expand(A.quad.apply(void 0,F))):3===H?(a=[],q=t.Algebra.Factor.factor(e),0<(a=[]).length?d(a):d(A.cubic.apply(void 0,F))):i.proots(C).map(d)))}}else try{for(var G,V,W=C.hasTrig(),j=A.getPoints(C,.1),X=A.getPoints(C,.05),Z=A.getPoints(C,.01),Y=t.Utils.arrayUnique(j.concat(X).concat(Z)).sort((function(e,t){return e-t})),J=h(C.clone()),$=[],Q=0;Q<Y.length;Q++)G=Y[Q],void 0!==(V=A.bisection(G,J))?d(V,W):$.push(G);Y=$;var K=s.diff(C.clone()),ee=h(K);for(Q=0;Q<Y.length;Q++)G=Y[Q],d(A.Newton(G,J,ee),W);a.sort()}catch(c){console.log(c)}else if(!C.hasFunc(n)&&C.isComposite())try{if((q=t.Algebra.Factor.factor(C.clone())).group===y)q.each((function(e){d(L(e,n))}));else{switch(H=(F=t.Utils.getCoeffs(C,n)).length-1){case 0:var te,ne=(te=N(C))[0],re=te[1];ne.group===t.groups.EX&&d(r.parse(t.Utils.format(t.Settings.LOG+"(({0})/({2}))/"+t.Settings.LOG+"({1})",re,ne.value,ne.multiplier)));break;case 1:d(r.divide(F[0],F[1].negate()));break;case 2:d(A.quad.apply(void 0,F));break;case 3:d(A.cubic.apply(void 0,F));break;case 4:d(A.quartic.apply(void 0,F));break;default:d(A.csolve(C,n)),0===a.length&&d(A.divideAndConquer(C,n))}0===a.length&&d(L(q,n,a,u))}}catch(c){}else try{var ie,se=A.rewrite(C,null,n);if(ne=se[0],re=se[1],ne.group===b)"abs"===ne.fname?d([re.clone(),re.negate()]):"sin"===ne.fname?d(A.inverseFunctionSolve("asin",ne,re)):"cos"===ne.fname?d(A.inverseFunctionSolve("acos",ne,re)):"tan"===ne.fname?d(A.inverseFunctionSolve("atan",ne,re)):ne.fname===t.Settings.LOG?(B=(ie=o(ne.args[0],n))[1]).group===g&&(C=new _(B,re=r.divide(r.subtract(r.pow(1<ne.args.length?ne.args[1]:new f("e"),r.divide(re,r.parse(ne.multiplier))),ie[3]),ie[0])).toLHS(),d(L(C,n))):d(r.subtract(ne,re));else{var ae=new _(ne,re).toLHS();if(ae.equals(C))throw new Error("Stopping. No stop condition exists");d(L(ae,n))}}catch(c){try{C.group===y?d(0):C.group===w&&(ne=(te=N(C))[0],re=te[1],ne.group===t.groups.EX&&ne.value===n&&(I=ne.power.clone().invert(),d(r.pow(re,I))))}catch(c){}}return P&&(a=a.map((function(e){return r.pow(e,new f(P))}))),m(e)&&(O={},a=a.filter((function(t){try{O[n]=t;var r=Number(l(e,O));return isNaN(r),!0}catch(t){return!1}}))),a};a.register([{name:"solveEquations",parent:"nerdamer",numargs:-1,visible:!0,build:function(){return L}},{name:"solve",parent:"Solve",numargs:2,visible:!0,build:function(){return t.Solve.solve}},{name:"setEquation",parent:"Solve",visible:!0,build:function(){return E}}]),a.api()}(),a=r(407),r(426),r(374),function(){"use strict";var e=a.getCore(),t=e.PARSER,n=e.Symbol,r=e.Utils.format,i=e.Utils.isVector,s=e.Utils.isArray,o=(e.Vector,e.groups.S),l=(e.groups.EX,e.groups.CP),u=e.groups.CB,c=e.groups.FN;e.Settings.Laplace_integration_depth=40,n.prototype.findFunction=function(e){if(this.group===c&&this.fname===e)return this.clone();var t;if(this.symbols)for(var n in this.symbols)if(t=this.symbols[n].findFunction(e))break;return t};var h=e.Extra={version:"1.4.2",LaPlace:{transform:function(i,s,a){i=i.clone(),s=s.toString();var l=(i=n.unwrapSQRT(i,!0)).stripVar(s),p=i.group;if((i=t.divide(i,l.clone())).isConstant()||!i.contains(s,!0))m=t.parse(r("({0})/({1})",i,a));else if(p===o&&e.Utils.isInt(i.power))var f=String(i.power),m=t.parse(r("factorial({0})/({1})^({0}+1)",f,a));else if(i.group===o&&i.power.equals(.5))m=t.parse(r("sqrt(pi)/(2*({0})^(3/2))",a));else if(i.isComposite())m=new n(0),i.each((function(e){m=t.add(m,h.LaPlace.transform(e,s,a))}),!0);else if(!i.isE()||i.power.group!==o&&i.power.group!==u)if(i.group!==c||-1===["sin","cos","sinh","cosh"].indexOf(i.fname)||i.args[0].group!==o&&i.args[0].group!==u){var d;(f=e.Settings.integration_depth<e.Settings.Laplace_integration_depth)&&(d=e.Settings.integration_depth,e.Settings.integration_depth=e.Settings.Laplace_integration_depth),e.Utils.block("PARSE2NUMBER",(function(){var r=s,o=i.sub(s,r);if(o=t.parse("e^(-"+a+"*"+r+")*"+o),(m=e.Calculus.integrate(o,r)).hasIntegral())return t.symfunction("laplace",arguments);m=m.sub(s,0),m=(m=t.expand(t.multiply(m,new n(-1)))).sub(r,s)}),!1),m=e.Utils.block("PARSE2NUMBER",(function(){return t.parse(m)}),!0),f&&(e.Settings.integration_depth=d)}else switch(g=i.args[0].stripVar(s),i.fname){case"sin":m=t.parse(r("({0})/(({1})^2+({0})^2)",g,a));break;case"cos":m=t.parse(r("({1})/(({1})^2+({0})^2)",g,a));break;case"sinh":m=t.parse(r("({0})/(({1})^2-({0})^2)",g,a));break;case"cosh":m=t.parse(r("({1})/(({1})^2-({0})^2)",g,a))}else{var g=i.power.stripVar(s);m=t.parse(r("1/(({1})-({0}))",g,a))}return t.multiply(m,l)},inverse:function(i,s,a){var c=i.clone();return e.Utils.block("POSITIVE_MULTIPLIERS",(function(){if((i=i.group===u?e.Algebra.PartFrac.partfrac(t.expand(i),s):i).group===o||i.group===u||i.isComposite()){var p,f,m,d,g,v,y,w,b,x,M,S,_,E,T,A=function(){(v=t.multiply(v,p)).multiplier=v.multiplier.multiply(i.multiplier),v=t.divide(v,d.a)},L=i.multiplier.clone();if(i.toUnitMultiplier(),p=i.getNum(),(f=i.getDenom().toUnitMultiplier()).group===l?(g=f.power.clone(),f.toLinear()):g=new e.Frac(1),m=s.toString(),d=e.Utils.decompose_fn(f,m,!0),e.Utils.decompose_fn(t.expand(p.clone()),m,!0),p.multiplier=p.multiplier.multiply(L),(f.group===o||f.group===u)&&d.x.value===m&&d.b.equals(0)&&e.Utils.isInt(d.x.power))S=d.x.power-1,_=e.Math2.factorial(S),v=t.divide(t.pow(a,new n(S)),new n(_)),A();else if(f.group===l&&g.equals(1))d.x.group===e.groups.PL&&e.Algebra.degree(f).equals(2)?(b=e.Algebra.sqComplete(f,m),x=e.Utils.getU(f),E=e.Utils.decompose_fn(b.a,m,!0).b,M=h.LaPlace.inverse(t.parse(`1/((${x})^2+(${b.c}))`),x,a),v=t.multiply(M,t.parse(`(${L})*e^(-(${E})*(${a}))`))):d.x.isLinear()&&!p.contains(m)?(a=t.divide(a,d.a.clone()),v=t.parse(r("(({0})^({3}-1)*e^(-(({2})*({0}))/({1})))/(({4})*({1})^({3}))",a,d.a,d.b,g,_=0==(S=g-1)||1===S?"1":`(${g}-1)!`)),A()):d.x.group===o&&d.x.power.equals(2)&&(p.contains(m)?(E=new n(1),p.group===u&&(y=new n(1),p.each((function(e){e.contains(m)?y=t.multiply(y,e):E=t.multiply(E,e)})),p=y),b=(w=e.Utils.decompose_fn(p,m,!0)).a,x=w.b,M=b.containsFunction("sin"),S=b.containsFunction("cos"),_=x.containsFunction("cos"),A=x.containsFunction("sin"),w.x.value===m&&w.x.isLinear()&&!(M&&_||S||A)?v=t.parse(r("(({1})*cos((sqrt(({2})*({3}))*({0}))/({2})))/({2})",a,w.a,d.a,d.b)):M&&_&&(M=b.findFunction("sin"),_=x.findFunction("cos"),M.args[0].equals(_.args[0])&&!M.args[0].contains(m)&&(C=t.divide(x,_.toUnitMultiplier()).toString(),_=M.args[0].toString(),T=d.b,M=t.divide(b,M.toUnitMultiplier()),v=t.parse(r("(({1})*({2})*cos({3})*sin(sqrt({4})*({0})))/sqrt({4})+({1})*sin({3})*({5})*cos(sqrt({4})*({0}))",a,E,C,_,T,M))))):v=t.parse(r("(({1})*sin((sqrt(({2})*({3}))*({0}))/({2})))/sqrt(({2})*({3}))",a,p,d.a,d.b)));else if(d.x.power.num&&d.x.power.num.equals(3)&&d.x.power.den.equals(2)&&p.contains("sqrt(pi)")&&!p.contains(m)&&p.isLinear()){var C=t.divide(p.clone(),t.parse("sqrt(pi)"));v=t.parse(r("(2*({2})*sqrt({0}))/({1})",a,d.a,C,p))}else if(g.equals(2)&&d.x.power.equals(2))if(p.contains(m))if((w=e.Utils.decompose_fn(t.expand(p.clone()),m,!0)).x.isComposite()){var R=[],N=p.collectSymbols((function(t){t=n.unwrapPARENS(t);var r=e.Utils.decompose_fn(t,m,!0);return r.symbol=t,r})).sort((function(e,t){return e=e.x.value!==m?0:e.x.power,(t.x.value!==m?0:t.x.power)-e}));E=new n(-1);for(var P=0;P<N.length;P++){var I=N[P];I.x.value===m?R.push(I):E=t.multiply(E,I.symbol)}R[0].x.power.equals(2)&&R[1].x.power.equals(1)&&R[1].b.equals(0)&&!R[0].b.equals(0)&&(C=R[0].a.negate(),v=t.parse(r("-(({1})*({2})*({5})*({0})*sin((sqrt(({4})*({5}))*({0}))/({4})))/(2*({4})^2*sqrt(({4})*({5})))-(({1})*({3})*({0})*sin((sqrt(({4})*({5}))*({0}))/({4})))/(2*({4})*sqrt(({4})*({5})))+(({1})*({2})*cos((sqrt(({4})*({5}))*({0}))/({4})))/({4})^2",a,E,C,R[0].b,d.a,d.b)))}else w.x.isLinear()?(E=t.divide(w.a,new n(2)),v=t.parse(r("(({1})*({0})*sin((sqrt(({2})*({3}))*({0}))/({2})))/(({2})*sqrt(({2})*({3})))",a,E,d.a,d.b))):w.x.power.equals(2)&&(v=w.b.equals(0)?(E=t.divide(w.a,new n(2)),t.parse(r("(({1})*sin((sqrt(({2})*({3}))*({0}))/({2})))/(({2})*sqrt(({2})*({3})))+(({1})*({0})*cos((sqrt(({2})*({3}))*({0}))/({2})))/({2})^2",a,E,d.a,d.b))):(E=t.divide(w.a,new n(2)),T=w.b.negate(),t.parse(r("-((({2})*({4})-2*({1})*({3}))*sin((sqrt(({2})*({3}))*({0}))/({2})))/(2*({2})*({3})*sqrt(({2})*({3})))+(({4})*({0})*cos((sqrt(({2})*({3}))*({0}))/({2})))/(2*({2})*({3}))+(({1})*({0})*cos((sqrt(({2})*({3}))*({0}))/({2})))/({2})^2",a,E,d.a,d.b,T))));else E=t.divide(p,new n(2)),v=t.parse(r("(({1})*sin((sqrt(({2})*({3}))*({0}))/({2})))/(({3})*sqrt(({2})*({3})))-(({1})*({0})*cos((sqrt(({2})*({3}))*({0}))/({2})))/(({2})*({3}))",a,E,d.a,d.b));else i.isComposite()&&(g.equals(2)&&d.x.group===o?v=t.parse(`(${L})*(${a})*e^(-(${d.b})*(${a}))`):(v=new n(0),i.each((function(e){v=t.add(v,h.LaPlace.inverse(e,s,a))}),!0)))}return v=v||t.symfunction("ilt",[c,s,a])}),!0)}},Statistics:{frequencyMap:function(e){for(var t={},n=0,r=e.length;n<r;n++){var i=e[n].toString();t[i]||(t[i]=0),t[i]++}return t},sort:function(e){return e.sort((function(e,n){return e.isConstant()&&n.isConstant()||t.error("Unable to sort! All values must be numeric"),e.multiplier.subtract(n.multiplier)}))},count:function(e){return new n(e.length)},sum:function(e,r){for(var i=new n(0),s=0,a=e.length;s<a;s++){var o=e[s].clone();i=r?t.add(t.pow(t.subtract(o,r.clone()),new n(2)),i):t.add(o,i)}return i},mean:function(){var e=[].slice.call(arguments);return i(e[0])?h.Statistics.mean.apply(this,e[0].elements):t.divide(h.Statistics.sum(e),h.Statistics.count(e))},median:function(){var n=[].slice.call(arguments);if(i(n[0]))return h.Statistics.median.apply(this,n[0].elements);try{var r,s,a=h.Statistics.sort(n),o=n.length;s=e.Utils.even(o)?(r=o/2,h.Statistics.mean(a[r-1],a[r])):a[Math.floor(o/2)]}catch(r){s=t.symfunction("median",n)}return s},mode:function(){var n=[].slice.call(arguments);if(i(n[0]))return h.Statistics.mode.apply(this,n[0].elements);var r=h.Statistics.frequencyMap(n);if(1===e.Utils.keys(r).length)c=n[0];else{var a,o={};for(a in r){var l,u=r[a];u in o?(l=o[u],s(l)?l.push(a):o[u]=[a,o[u]]):o[u]=a}n=o[Math.max.apply(null,e.Utils.keys(o))];var c=s(n)?t.symfunction("mode",n.sort()):t.parse(n)}return c},gVariance:function(e,n){var r=h.Statistics.mean.apply(h.Statistics,n);return r=h.Statistics.sum(n,r),t.multiply(e,r)},variance:function(){var e=[].slice.call(arguments);if(i(e[0]))return h.Statistics.variance.apply(this,e[0].elements);var r=t.divide(new n(1),h.Statistics.count(e));return h.Statistics.gVariance(r,e)},sampleVariance:function(){var e=[].slice.call(arguments);if(i(e[0]))return h.Statistics.sampleVariance.apply(this,e[0].elements);var r=t.divide(new n(1),t.subtract(h.Statistics.count(e),new n(1)));return h.Statistics.gVariance(r,e)},standardDeviation:function(){var e=[].slice.call(arguments);return i(e[0])?h.Statistics.standardDeviation.apply(this,e[0].elements):t.pow(h.Statistics.variance.apply(h.Statistics,e),new n(.5))},sampleStandardDeviation:function(){var e=[].slice.call(arguments);return i(e[0])?h.Statistics.sampleStandardDeviation.apply(this,e[0].elements):t.pow(h.Statistics.sampleVariance.apply(h.Statistics,e),new n(.5))},zScore:function(e,n,r){return t.divide(t.subtract(e,n),r)}},Units:{table:{foot:"12 inch",meter:"100 cm",decimeter:"10 cm"}}};a.register([{name:"laplace",visible:!0,numargs:3,build:function(){return h.LaPlace.transform}},{name:"ilt",visible:!0,numargs:3,build:function(){return h.LaPlace.inverse}},{name:"mean",visible:!0,numargs:-1,build:function(){return h.Statistics.mean}},{name:"median",visible:!0,numargs:-1,build:function(){return h.Statistics.median}},{name:"mode",visible:!0,numargs:-1,build:function(){return h.Statistics.mode}},{name:"smpvar",visible:!0,numargs:-1,build:function(){return h.Statistics.sampleVariance}},{name:"variance",visible:!0,numargs:-1,build:function(){return h.Statistics.variance}},{name:"smpstdev",visible:!0,numargs:-1,build:function(){return h.Statistics.sampleStandardDeviation}},{name:"stdev",visible:!0,numargs:-1,build:function(){return h.Statistics.standardDeviation}},{name:"zscore",visible:!0,numargs:3,build:function(){return h.Statistics.zScore}}]),a.api()}(),e.exports=a},407:function(e,t,n){var r;e=n.nmd(e);var i,s=function(e){"use strict";var t=new qe,n=e.bigInt,r=e.bigDec;r.set({precision:250});var i={},a=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083],o={},l={callPeekers:!1,init_primes:1e3,exclude:[],suppress_errors:!1,PARSE2NUMBER:!1,SAFE:!1,IMAGINARY:"i",FUNCTION_MODULES:[Math],ALLOW_CHARS:["π"],USE_MULTICHARACTER_VARS:!0,POWER_OPERATOR:"^",VALIDATION_REGEX:/^[a-z_αAβBγΓδΔϵEζZηHθΘιIκKλΛμMνNξΞoOπΠρPσΣτTυϒϕΦχXψΨωΩ∞][0-9a-z_αAβBγΓδΔϵEζZηHθΘιIκKλΛμMνNξΞoOπΠρPσΣτTυϒϕΦχXψΨωΩ]*$/i,IMPLIED_MULTIPLICATION_REGEX:/([\+\-\/\*]*[0-9]+)([a-z_αAβBγΓδΔϵEζZηHθΘιIκKλΛμMνNξΞoOπΠρPσΣτTυϒϕΦχXψΨωΩ]+[\+\-\/\*]*)/gi,ALIASES:{π:"pi","∞":"Infinity"},POSITIVE_MULTIPLIERS:!1,CACHE:{},SILENCE_WARNINGS:!1,PRECISION:21,VECTOR:"vector",PARENTHESIS:"parens",SQRT:"sqrt",ABS:"abs",FACTORIAL:"factorial",DOUBLEFACTORIAL:"dfactorial",LONG_PI:"3.14159265358979323846264338327950288419716939937510582097494459230781640628620899862803482534211706798214808651328230664709384460955058223172535940812848111745028410270193852110555964462294895493038196",LONG_E:"2.71828182845904523536028747135266249775724709369995957496696762772407663035354759457138217852516642742746639193200305992181741359662904357290033429526059563073813232862794349076323382988075319525101901",PI:Math.PI,E:Math.E,LOG:"log",LOG10:"log10",LOG10_LATEX:"log_{10}",MAX_EXP:2e5,SCIENTIFIC_MAX_DECIMAL_PLACES:14,SCIENTIFIC_IGNORE_ZERO_EXPONENTS:!0};!function(){l.CACHE.roots={};for(var e=2;e<=40;e++)for(var t=2;t<=40;t++){var r=n(e).pow(t);l.CACHE.roots[r+"-"+t]=e}}();var u=i.N=1,c=i.P=2,h=i.S=3,p=i.EX=4,f=i.FN=5,m=i.PL=6,d=i.CB=7,g=i.CP=8,v=l.CONST_HASH="#",y=l.PARENTHESIS,w=l.SQRT,b=l.ABS,x=l.FACTORIAL,M=l.DOUBLEFACTORIAL,S=[],_={},E=[],T=[],A=function(e,t){if(!l.suppress_errors)throw t?new t(e):new Error(e)},L=function(e){var t=function(t){this.name=e,this.message=void 0!==t?t:"";var n=new Error(this.message);n.name=this.name,this.stack=n.stack};return t.prototype=Object.create(Error.prototype),t},C=function(e){return-1!==E.indexOf(e)},R=function(e){for(var t=e[0],n=1,r=e.length;n<r;n++)if(!e[n].equals(t))return!1;return!0},N=function(e){T.push(e),l.SHOW_WARNINGS&&console&&console.warn&&console.warn(e)},P=function(e,t){if(t=t||"variable",-1===l.ALLOW_CHARS.indexOf(e)&&!l.VALIDATION_REGEX.test(e))throw new Ae(e+" is not a valid "+t+" name")},I=function(e){var t=Math.sign(e);if(e=Math.abs(e),/\d+\.?\d*e[\+\-]*\d+/i.test(e)){var n=String(e).toLowerCase().split("e"),r=n.pop(),i=Math.abs(r),s=r/i,a=n[0].split(".");if(-1===s)e=(i-=a[0].length)<0?a[0].slice(0,i)+"."+a[0].slice(i)+(2===a.length?a[1]:""):"0."+new Array(i+1).join("0")+a.join("");else{var o=a[1];o&&(i-=o.length),e=i<0?a[0]+o.slice(0,i)+"."+o.slice(i):a.join("")+new Array(i+1).join("0")}}return t<0?"-"+e:e},O=function(e){for(var t=Math.floor(Math.sqrt(e)),n=2;n<=t;n++)if(e%n==0)return!1;return!0},k=function(e){return/^\d+\.?\d*$/.test(e)},D=function(e){return U(e)?D(e.multiplier.toDecimal()):e%1!=0},U=function(e){return e instanceof Fe},z=function(e){return e instanceof Ue},B=function(e,t,n){if(n=n||{c:[],add:function(e){-1===this.c.indexOf(e)&&isNaN(e)&&this.c.push(e)}},U(e)){var r=e.group,i=e.previousGroup;if(r===p&&B(e.power,t,n),r===g||r===d||i===g||i===d)for(var s in e.symbols)B(e.symbols[s],t,n);else if(r===h||i===h)"e"!==e.value&&"pi"!==e.value&&e.value!==l.IMAGINARY&&n.add(e.value);else if(r===m||i===m)B(Q(e.symbols),t,n);else if(r===p)isNaN(e.value)||n.add(e.value),B(e.power,t,n);else if(r===f&&!t)for(var a=0;a<e.args.length;a++)B(e.args[a],t,n)}return n.c.sort()},F=function(e,n){e=t.expand(e),n=n||{};var r=function(e,r){n[e]||(n[e]=new Fe(0)),n[e]=t.add(n[e],r.clone())};return e.each((function(e){if(e.isConstant("all"))r("constants",e);else if(e.group===h)r(e.value,e);else if(e.group!==f||e.fname!==b&&""!==e.fname){if(e.group===p||e.group===f)throw new Error("Unable to separate. Term cannot be a function!");r(B(e).join(" "),e)}else F(e.args[0])})),n},q=function(e){return e instanceof Ve},H=function(e){return e instanceof We},G=function(e){return e instanceof je},V=function(e){return e.group===u||e.group===c},W=function(e){return Array.isArray(e)},j=function(e){return/^[-+]?\d+e?\+?\d*$/gim.test(e.toString())},X=function(e){return U(e)&&(e=e.multiplier),e.lessThan(0)},Z=function(e){return e?String(e):e},Y=function(e){return"("+e+")"},J=function(){var e=[].slice.call(arguments),t=e.shift(),n=t.replace(/{(\d+)}/g,(function(t,n){var r=e[n];return"function"==typeof r?r():r}));return n},$=Object.keys,Q=function(e,t,n){for(var r in e)break;return t?r:n?{key:r,obj:e[r]}:e[r]},K=function(e,n,r){return P(e),C(e)?null:(n=n||B(t.parse(r)),t.functions[e]=[t.mapped_function,n.length,{name:e,params:n,body:r}],r)},ee=function(e){return Math.min.apply(void 0,e)},te=function(e,n,r){var i,s,a,o;if(n=String(n),e.group===g){var l=t.expand(e.clone()).stripVar(n);i=t.subtract(e.clone(),l.clone()),o=l}else i=e.clone();return s=i.stripVar(n),a=t.divide(i.clone(),s.clone()),o=o||new Fe(0),r?{a:s,x:a,ax:i,b:o}:[s,a,i,o]},ne=function(e,t){return j(e)?e>=Number.MAX_VALUE?e.toString():Number(e):(t=void 0===t?14:t,Math.round(e*Math.pow(10,t))/Math.pow(10,t))},re=function(e,t){if(W(e))for(var n=e.length,r=0;r<n;r++)t.call(e,r);else for(var i in e)e.hasOwnProperty(i)&&t.call(e,i)},ie=function(e){return e%2==0},se=function(e){return 1/(e%1)%2==0},ae=function(e){for(var t=e.length,n=[],r=0;r<t;r++){var i=e[r];-1===n.indexOf(i)&&n.push(i)}return n},oe=function(e){var t=function(e){-1===E.indexOf(e)&&E.push(e)};"string"==typeof e?t(e):re(e,(function(e){t(e)}))},le=function(e,t){var n;return W(e)?n=e.splice(t,1)[0]:(n=e[t],delete e[t]),n},ue=function(e,t,n,r){var i=l[e];l[e]=void 0===n||!!n;var s=t.call(r);return l[e]=i,s},ce=function(e){return[].slice.call(e)},he=function(e,n){return ue("PARSE2NUMBER",(function(){return t.parse(e,n)}),!0)},pe=function(e){if(W(e)){for(var n=new Ve([]),r=0;r<e.length;r++)n.elements.push(pe(e[r]));return n}return U(e)?e:t.parse(e)},fe=function(e){for(var t=a[a.length-1]||2;t<e;t++)O(t)&&a.push(t)},me=function(e){for(var t=0;t<e.length;t++)if(e[t].group!==u)return!1;return!0},de=function(e){for(var t=0;t<e.length;t++)if(!e[t].isPi()&&!e[t].isE()&&!e[t].isConstant(!0))return!1;return!0},ge=function(e,n,r){(n.isComposite()&&!e.isComposite()||n.isLinear()&&!e.isLinear())&&([e,n]=[n,e]);var i=new Fe(0);return e.isLinear()?e.each((function(e){if(n.isComposite())n.isLinear()?n.each((function(n){var s=t.multiply(t.parse(e),t.parse(n)),a=t.expand(t.parse(s),r);i=t.add(i,a)}),!0):i=t.add(i,t.multiply(e,t.parse(n)));else{var s=t.multiply(t.parse(e),t.parse(n));i=t.add(i,t.expand(s,r))}}),!0):i=t.multiply(e,n),i},ve=L("DivisionByZero"),ye=L("ParseError"),we=L("UndefinedError"),be=L("OutOfFunctionDomainError"),xe=L("MaximumIterationsReached"),Me=L("NerdamerTypeError"),Se=L("ParityError"),_e=L("OperatorError"),Ee=L("OutOfRangeError"),Te=L("DimensionError"),Ae=L("InvalidVariableNameError"),Le=L("ValueLimitExceededError"),Ce=L("NerdamerValueError"),Re=L("SolveError"),Ne=L("InfiniteLoopError"),Pe=L("UnexpectedTokenError"),Ie={DivisionByZero:ve,ParseError:ye,OutOfFunctionDomainError:be,UndefinedError:we,MaximumIterationsReached:xe,NerdamerTypeError:Me,ParityError:Se,OperatorError:_e,OutOfRangeError:Ee,DimensionError:Te,InvalidVariableNameError:Ae,ValueLimitExceededError:Le,NerdamerValueError:Ce,SolveError:Re,InfiniteLoopError:Ne,UnexpectedTokenError:Pe},Oe={csc:function(e){return 1/Math.sin(e)},sec:function(e){return 1/Math.cos(e)},cot:function(e){return 1/Math.tan(e)},acsc:function(e){return Math.asin(1/e)},asec:function(e){return Math.acos(1/e)},acot:function(e){return Math.PI/2-Math.atan(e)},erf:function(e){var t=1/(1+.5*Math.abs(e)),n=1-t*Math.exp(-e*e-1.26551223+t*(1.00002368+t*(.37409196+t*(.09678418+t*(t*(.27886807+t*(t*(1.48851587+t*(.17087277*t-.82215223))-1.13520398))-.18628806)))));return e>=0?n:-n},diff:function(e){var t=.001;return function(n){return(e(n+t)-e(n-t))/(2*t)}},median:function(...e){e.sort((function(e,t){return e-t}));var t=Math.floor(e.length/2);return e.length%2?e[t]:(e[t-1]+e[t])/2},fromContinued:function(e){for(var t=e.fractions.slice(),n=1/t.pop(),r=0,i=t.length;r<i;r++)n=1/(t.pop()+n);return e.sign*(e.whole+n)},continuedFraction:function(e,t){t=t||20;for(var n,r,i=Math.sign(e),s=Math.abs(e),a=Math.floor(s),o=s-a,l=0,u=!1,c={whole:a,sign:i,fractions:[]};!u&&0!==o&&(n=1/o,!((r=Math.floor(n))>1e7&&Oe.fromContinued(c)-e<=Number.EPSILON));)c.fractions.push(r),((o=n-r)<=1e-14||l>=t-1)&&(u=!0),l++;var h=c.fractions.length-1;return 1===c.fractions[h]&&(c.fractions.pop(),c.fractions[--h]++),c},bigpow:function(e,t){e instanceof Be||(e=Be.create(e)),t instanceof Be||(t=Be.create(t));var n=new Be(0);if(t.isInteger())n.num=e.num.pow(t.toString()),n.den=e.den.pow(t.toString());else{var r=Be.create(Math.pow(e.num,t.num)),i=Be.create(Math.pow(e.den,t.num));n.num=Oe.nthroot(r,t.den.toString()),n.den=Oe.nthroot(i,t.den)}return n},gamma:function(e){var t=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7];if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*Oe.gamma(1-e));e-=1;for(var n=t[0],r=1;r<9;r++)n+=t[r]/(e+r);var i=e+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(i,e+.5)*Math.exp(-i)*n},bigfactorial:function(e){for(var t=new n(1),r=2;r<=e;r++)t=t.times(r);return new Be(t)},bigLog:function(e){var t=["-253631954333118718762629409109262279926288908775918712466601196032/39970093576053625963957478139049824030906352922262642968060706375","0","24553090145869607172412918483124184864289170814122579923404694986469653261608528681589949629750677407356463601998534945057511664951799678336/35422621391945757431676178435630229283255250779216421054188228659061954317501699707236864189383591478024245495110561124597124995986978302375","369017335340917140706044240090243368728616279239227943871048759140274862131699550043150713059889196223917527172547/335894053932612728969975338549993764554481173661218585876475837409922537622385232776657791604345125227005476864000","24606853025626737903121303930100462245506322607985779603220820323211395607931699126390918477501325805513849611930008427268176602460462988972957593458726734897129954728102144/17750092415977639787139561330326170936321452137635322313122938207611787444311735251389066106937796085669460151963285086542745859461943369606018450213014148175716400146484375","399073568781976806715759409052286641738926636328983929439450824555613704676637191564699164303012247386095942144825603522401740680808466858044/247958349743620302021733249049411604982786755454514947379317600613433680222511897950658049325685140346169718465773927872179874971908848116625","1468102989495846944084741146947295378041808701256909016224309866143294556551407470861354311593351276612463858816796714569499021375899793849136855085849133702029337910502448189055357182595424959360/819363879309286303497217527375463120404739098260200279520788950777458900438307356738082930586032462601215802636320993648007907724899611296693997216938989854861043298494990214825163523387600982777","5896704855274661767824574093605344871722790278354431422729640950821239030785642943033153793245906863203822369276271050164634206965056233097479117980782641839669/3030306850569309344013726745100070601277982132543905537366562638553198167007159067544789592089960911065181606283478843359856123992707598685058297067179343872000","76631772943534985713873427262830314617912556928476573358548256872141516989538374761909611879922349479420014771499018155447198112155515453671128814488139633810493264352294560043912066253026059140653027326566801398784/36852092933388988649396042883218509607503204211148493545892849595498822817623842579026942621098851631842754395231561679671400197056377380063233740202370686144673585955581403046886083948450136247134308381940165804875","3159076083816399509754948610929467278257473888282947311280653574634802580912280940686954763313882823327077171624015737719617373932318151594325834524000275847475866299387913048/1437757485694188822758304467756419845842037623148461107362957994816554782989250555362514354661961482939226272309026092009962414616417412938087494467254146002233028411865234375","22266067259907364984531611601870291368272674573653403965630628996687370994139884833897773468149149664829922302484782423514167405397665098388400450149078982462318781750661005833037235183394221496186539779712428265837926417581952/9670030144664428565128962309657100138096047028794689249320859276197340398920725569428532293373676415359965773460364494998334259893079003125373872108770534788283842907318071170285038777091588292539102269617376180390982915567375","14604654564989239958569331443385369522850975185358647132770022716433280072271007767111036877803328768910274400515590151934676819262085211828028638417329558229123989556376108454497813055/6090614019162516693013973409650613208227889078878781039105047015752493519149314227721984436973374032279421344818329285207124280297611253861173835238379831004010748379874393292231671808","1901241885407696031217292877862925220917660047127261026827869027159993239567933534052663335498281439239753018507182016153657409777749792228538380379703411298411623469292891476969894084838876001545818141543890273256985768690847587711270930688/765116019778838839812655402103512685695769161212360553099732689795578904762091216998790589926057819838537805856579109910198553330075924857419395160755642371550113347465300208422126945265887065434116781678702741657275181694851670325469434625","139459806786604751793737926146840623607010208216289543036026206208962059593900745886202214788747453279179283344350478734275973878932538430194363355795823581315329311220701640235653288975569812161436/54371368534412517053056101353618694718215711767266376573138772968257303578467926450212293233332401067673270853953399269852376592855992724934941173346260129257754416412476202526978443681584633116375","1045669091124493070709683241190022970908640501171378776604126771144008324358233819560649021940145166254659028524319517244711645162132513416238958170819347361185944945680269442845829390112062101255500836072082817820950448463314034677353723256969344/396228259004446234921310936915931611736815598535963504660076315228798989932959459406702091180060429080345146735173591749448509810270759531977278642135591672189002006272326131885315743181289970885337574780897529347356567086535505950450897216796875","9912919238915437302006264477931031611447467070103973106567538528951878797932559935860738745374437522819124347510590800370471910492338584284092534264608801221235029062881964101996762011296996851893455828946521/3660537472668264151218961634689665210933936249986285290553357254224360417386515311493310199319523687171757653216994741150377508234317025158302057758196429623723072084157928224798322861732880034847243894784000","9263710175433181746575186369318246002919895649622127410824041370079225200282403368319370743363303164313395723904510539050157032684710468364067204876434546848634842333436957245275217583248805993142227630297924119330553308466662488683624783307023014909360640/3341177182697517248552428837661919299725031035849865632511882688786226888137634168024976033652753689210700218163621739078534353578510364301481093730054725078138658805025014615651043313990684347632166030359086885561104034510990826655289288319840595753002771","5116082230713622171832327542439052727465114322479570603905499496221224653983960598946033081212909066917137546065542953865612718836914393275681318667667521726785633638189373998191090501201427906618075889744489190209584/1805752553736060443820406101277706970767657006346276183748749630179442318063568286372320188433843729960294965366346522303898609655762491623098453269916163621089005711823488749297418113474056676109581110715068124438875","246569125619713282434448566970352231845414317018379160824176638351574938993535464763890962336882760882398479702237564384291290459961036068916857265499633061660562532011248501476114401629839742058389195725393702000011860799793778295606988057303225493814005789533570432/85307063020836305797178273029353623060860009152114361453434032434699636078115114412588719432277441055049132559782203988387794711585368296817222565434951256788867244687081233632650953850383220864394261763844194948389861147622944651546912394593164406926489862036343375","133672026303452911046163998480860917119290576658330909785707604886881155606725822685088929236266583416708668502760907677019598002175122453170574729028452721476464728566191464897928696630979863154661704374206171469014225143/45398130975270785045482567762871405072140548998125471025451666500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","6041693953360002800224091673336562508913199995987479264605216252220579740134601435770085920869376641180763419907442721705887169884230643795126568815123647603047739799302562095542459344811429882053086550900803768964612193941424128649976704727183797495759082741166938351872/2016766992122395667828553277997478570503475626107286343497917705446132017125079612756035254750822860815515899557855166824523851779156336235294914777307802256439645525835223691751931866188957324792276149549076500784191791380803500156776088683900346065830066370370083309875","705868391597244582764749229356331441978820024796066870551110486625729826111158236686696326058778874201639006234449557592353247542995871491078308187261304930042019640830629526023972693107193897009168955674240659026247094657679060/231848642748474339277532000336338632910990823562381469441716922006107433404523316252618490265927265734670539384485699132080062215196462178933963957679882342083893417545858074378754089719547920901917516016346211301054206383643383","101832160604157943093944673541651013907278188571533075311673249923948856034633446617630054761681006062910980371900782781226979391765818325065031889334563981235894369036439929651260587335544056975715076598739977065390678221999918899003881778449092038750712969437519295878491018112/32944277910571666002449086492515464541550138004002141571670657643770713783329063548790202120805341989608877739811787937782240802963962520261844114327432160788193314874913687387269408387417806176202979244637915812905426565263196954203487934225589622864145960079736633434831996625","10655703119271468913597640479490594180964700448340778168715956712130636958373270202484276402718566314881119559090842449610957974112230306343486091910217340665146602598568991520563987490686996746558858366002301982443029430290679385551/3398412687366638541233365137084722368200311117891192348532156645374786104142009695796409107380345795998400850838706661851176885183144928701608654514812261697598380070746520197171576610572921007069104300695592751543563472456384512000","1903039332876763837419920240543738799531131775028971323439870868730321221615515008394327723508670975623498588291298064320786970626232668956372004004897872810230178526101184611242511193415796638694370503100219710864543168952682617801833318493436174387568067811938490953495819438108686336/598806534367503338307287246320963280558134937382149405305466709787179429317914803617527827862441615350396864359976273212272586892074799651088317544101755361439294687323233086696182687664637422796995789967075271448560870681210580691574924544896656175563265378514188341796398162841796875","525573915563826130963525826191411949262846916750432019596028344808298471293378917508549164993368392834023782480702893643486699787870059946429810070222126260200026332874480239090370088123833491499400991181659445914352500247596757005142623368/163278727324937389095822405034435687776345799835442022795533783889356344755225815267819508608559076191292900367982490827396869405536484846115955581043091229202052407483776587687967125885665493681707461345895999542381476164157058393971431375","9263815657177858787273494705338516861045771674838057329170239610953039987023429736752079544014780707408666628475997291124805562998227296677616204140605356257712022384368492575381355563976330347792504605666631512343447560301417325154003481040250148561839861837778597346623630046623751094400/2843321709948499955095590862256744532227698001408929142548057792217790532624003190447363578048562448168721539177458065482170148482375585867230123873178100117094533143052886527452665480614620123764036974180917207421482431983407742154634391264619615289225747664532332469783301704643254076601","407959339726114455622180187758753007349209016396248763075759257357925636039752474207685682218422721827857994768023399625060206708378433960993946156803948655098667156937949174400873748557248801874735834957795040139401560494087476967548060208243867/123780218751812156744401121690996305978134694678934447237402511116731459214498784497436358160964198336874043702652746834763131444030185151143987331404604087778514863973633941401826334750268416015224906056576641018962863645043976537664227639296000","2547676391598917379516698439971914695230548782904479778605691338364453606537643088857116141939170899135026552016969320061900926954008522781162186995856580955090548471448276736878300717869625651893741316530109438876067419826217901657017506157997588944233677467357220316084583383623602865379325184/764562034757392298786420374672266498815021229519853724850874576419885380830752931701831256959159800764672605004880389358601658343203513177084389490286723240185146570925957286083025676875197029662038213216541352875570101363668917766225709569356861275434470568767077844675593176178611021135573625","186545352286463730559933346565311535598243666022232037054735807289501173444103692309735768703898330430135399033529355360391658728987379385732098960609744313878477967971557204207043802935782878745271859468248704012618254203101767841517569443555143252/55399179641621656233589820996143825959365789093262978988289445625153099592463372579496245442338653053662134699646413817866770218574795378644415019944304868289119443774932782235638737888469746745621382139263856603239588594078668393194675445556640625","664884440164786473344854955309049113269357314957985265728106924238588705533437169796551912202931185746193155801905841712503407258166135075966280435780812714252670362202091663287095423712596462690753468682634261029392794173636943978404002804413009590005984736612421172979101972556772005594499779860608/195485517776407145286424460448995460754674039560651791192647586550615878988380153730602665795647187884543361218962125172808792176382956599256188706636727418572541254480798303566840010217729386905041217793614214518363859058348249961790104618910877813067510758225302884815410347238200133693756493703875","2614957283934314904315471338485451166053664494383241929385424599389309215073267052860464009981063483440201193771607520572077231889699858482582363845275452280606276949653970992719332472370351170732899676316967244504534154616036371979031399425846100527685/761493664432749089312665480773496290658029971027686543404885407644062485746072719559288231362060149626237939029641098328278650939665665969011529293869562636656650999759724704272743235210867676873525147820749560155294022488994426729939894753293900972032","124843380518493746761140367283007507854364503961156704095198010255465940085534099747297600085903814014415830785663764373057896014399822131175202342399536439284123918855893825207202244831315575594886675813256448846863723093240955901916229136393454605455444105444987028391748121054399538064686074523506176/36022228212051654395480210378626648518430280334458144892889271272122662467638331091863215146548048144675657239846337165813938424387499358852301016926312083940212100001220180762189978024821166744964908871443681332664798940660421469519997746775275873085770018269706847741064037876137315001228315806659875","827992369063043155578730871896750570951766628472810506926098505028264552046829097082095665194000002802661600196840639204300804225352337632259980703832713031790922485730615305441309917696044954289187837653933158950774246017223571461858939407386087081525130831392/236805932823686534991153393869288530368011574665859226704279685567723830696754821658770176385138917722808377962346690757191122309876922069867472518117628639913077442806147910884267694879089753138429767401700283014143248445966474839193628309668702223994071394625","17347276886878323736540051321582548724378497839789943634071026331001588645519865992773157565595886250230140452154269197770615097377486013097979087647774513500701793885978192218455687078883766086309728287172567466406449372659680040183273634701092561727514713494914793425407149186041796935055187281744386432/4919325621804683623339606849970832094714371903709195539440424738973575902329797546592497378000858196173718145883783709223158260700365224756081275272021856393735663399552166737690038832550853145831185979094979556715294990257315369124065787473707136464772247917156232366320267601622617803514003753662109375","137984231830526866236186357461458917020538108058615632801298091031540729111527734872044790487396302545910108285921421417358113055522725197998483383380192391312304647004240060970929072498293210057120617332323445379424867965764749534125081131327565507524502163460761/38810445792642817561168950890315210470940006613819790543653745327778579787694809782601777514116858514049585074667085399925278459138508514838268321349069481334967221455722811414399738756151414906092225265355449011152267068726417045644222323488445626292574879744000","746567120547823334914136339633766098626636643449144032626270358619125402826113269699709721071135471625588981126637674402048519990010499180844665151971356149292818375448504122545400227696621572263621729512461528550588108384619064912224884465737417596190735966915167530332762203074440688676123756162572829692160/208334337057923929636884170505570363171441147899816815785150954417598643614152856767186132467069365605496210036171429712485182162940460120834349006784956522600679357307849981862006710239311750261522832996877712350330290831638640913932265004107623954913155144975252743257846945609734368518424172846119306643431","64649371728330695076928013661001819989330953381731372450140483779536126948957993261299287753791770622512248630224724990234903928056275080682537641377393210728546364176267034339221558641084730052304770498929958838997239635790469536857863963589118888238069738647239076/17903951498200212327802847425913723358452100686246224008745414214690047078122925247086521362329833307849817944645647750649290248110509395628305970523384831671737569872597295947593410067364379687588919135621621162007748635920864926867870502568935739725312687094047375","2454918942158003099688922026016393688092399295166304634317616773083386087532869193458590448918958337530406410803840837646465522656670050113548208618655070231274778592766244282964463702354872753657766121825196898916725498553882689210280080206627916046484942827487726300822318764058084323314109595329304407466188383616/674880185931325925966586583820010578979699141814417326552629206140252348822939845006845669570885271576698771404162512001549922909048916000017837898649100825976232784446638776021483802989797501705685620612986771521390439936066527738682396560462899753657942715306792783283782238662155922082005591512296007820682995125","74018558041066162916454010680594042518462756234254788158141115244349044958441521749277686851928706433556285971088455226217644009628399441967508838553345152310730562224910795446341601049647392069373970101491741830623078126344928804029524181578945586663110848142571149861/20204153620006780689923328634586091101021423979622170579036140596085566172775051595588438592742563923428900864000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","2127032036758045513335690185608563023954009095206088224487365541995326714285119384743928987635752931664240752323937321097955456543854943206092931247498833001499955456190701695430459583885125382086777607021670447795321669948733328973350279846928613949120929250312666393359442423066212311060931469017737106028339882830848/576612418511902928757340062840968526862381326698309578771238715462180282212422302261044980131594522407066369222998903808960617461164985318633518680304995784614308979881735537678182134128319596636920719106506829571072447362052319438091347699720147003209417806230149598345068078717948025207635448205253184540936478445125","35289653975561083576641954928762116897061274899517309102784750384002335187117263273488751066569234386120759866204372398611196356888479036949053282301027789530999737306501029700128744408015642211359442183943916106790666114870974212159410284751571905275610921784716184508440/9503006066880728386808143045924119024212377150217533250562188228062174064693375135306438120385877320162710918716613546077156389583384656340709638430674364232343609717735574035535102953482366914421205216675248471695111720986346092738728929878538430662191272737183832556131","102633551023964794485575491065909467125458972250222581133681080524371507544152979467328048718122409841060527545925136196267751819689935599599321090571687632103850847605493223603751038996548520557330016046032671961857623066292962260173840972332108111505971231021442896036760967107060309991355545554631003681544611731245475968/27459658121882266328752886605529964804078316737648012166874496015808620265471203512606463219297059547428855195782384236337998738233668399173746663289852416697917397644234441300570212555870401420579737973722145663287124151049692290432756231390864184491891697469874600345958989433125942336757049639797225309327019275689074625","10034393558388390065766795008210457368713365491566387292163814915435906649268119060550511145023450790393353937124495488860451123302412204483570913557762460385297770427946219119911920640306914453207097103853766023934602534502476962159682750262143380527529536498215384467975023/2667919902603322771586358077760621955455470781865624844984169443739075976572061827709528710108877015489050369589117491611045518221354793418884447632063538994046714401229510497599783726376490260140723032102883617341970952663947646017489439179953454964374887388652792446976000","248528145263843375390386172800048509380966183384567983242213959113927668429802237067505890436957693495616107089384741585283620097982859345081736730899912519273262934785992235852866637878831878448348444611412764161078458068549719800733237024285525816723480868704742804077255242682077291713092790250511567621735004237450946304/65676865669148624809340872151906045781446981664561196686217551358486802274698228825404698950974939545099727242259547145392352658637333562345477931951890984276718673618736565926663528625796412420753961231404680876558659735251469326707567479071881966875336951133475135427640218972722939427821842173216282390058040618896484375","7805448718805635696495809414501206964843262114470109146341305656318015059743127114324245035489577134938579856003956861881125856595981500593426840968087618241785931128978516340812066502964561231235073012672356530509663384739132686548934288703179479011016719045530855033205271548/2050525178024039744126592505352202216905491833360272553169520915020715464206141942151086176509423406413311520838568324134077402841030113427309725873344806030836314500267104070131451720947531994814710189000076651895520222646974590481497382830325485174899169093049299764813276375","3355325071293197839434119105039673324264765809771192815982246040415580387729382404624613875653005261578877047405365032178619450963731719777167015959920645055600439987161800547901539269321100559393048973255388860193948274255340335876890491746900991668165565729269698196233805991206691196045182214641935483083662356666996922240/876402579119117579582569839757462461050855174353108858954282915644790659429341853404829661899850841645529640454766173209897510988090318303454542547519850473808789222552969933222203420847859171250332350076509996295844203965564448154484566493395403967626596213792922784509892086361572955175655987334882030766001799867659814117","218871061991045868372866381545267589365410350294028138778572466235486397478028823720846191998825628156716190463263492304639890659254282445466806224943413446008645087186307985343574807361972238230520975439736199291019544576443791916302825193643774360055545186783819367378492631806297/56849560726416896431557940314760680962653658127458002233782028041537121216487790008085876994020812492987733987414743604239935223783349870516284048368761617736127892160849065895223288023531930411718807065209903593668117085505482007061969339237404945180379460053180570404846043136000","5008685108365226931582937964451700746853986170633433728409171904803795018146152804690759530990140552460596075588463394200510044617816085275660078502126507209302951286606953039953843685800941558212440519542602092919776366067720586295390886070120828199562643208637974347390938772070049344991272621102622931576339988103674070876518912/1293888539680354282541277646947380627241979967611883341823378331667976045287311988103163380651334828012840330710760757271860219584371109472132211215957402251594055009937397184768184517621978947384029376766290498101728971145633139541827544539988344772578184316843734267915665730981857376872622787627370859411909330227080697966353375","15388340113525711660227566446101909585796746979396093776960989868457211684028149502578116456785221720682202816140911944661051001675127262774824593420825587319436537346311831003212424497488485098543512314062112948777572038731823948224734505930748371522309451168088057190162878224801232/3954220582960831691377435160890656173654063611768428458807273708040518769541211737927975894584024448193835165167801976423275767590502552964407494549049777006346189436817215329891530811451811864579644894987864267389290848598289794977382504890216219362031324635609053075313568115234375","5099039333987561374222193551155323470675617979816941646196895589439391685938046865391119484510329634015275893520725135141878751153360264368353595348921951280561029028912953500944814771064409611917475818956659775131751121312316084465321917769679881052144364834485866477379437705913911371481828140817759401117780199246301705600020671104/1303503600297679371136943454060319958680553228879031326679449263682048703103464872914972900105569835004878963701599765030590097739639045890060548760692125546754294514068052902543220382104483822438283040090444827980927544440984823535260277595466339403795403200720622852069244768910603820007632395190204569927612348189089161551951106625","4902837141334073026145827027361937996261324349722726869116185158777439337041263482852376194988371853413467559557923410949898048139830183335197992754748294810838187068126867611615800383834975563313220497573778480109264178673389149671194149749735833378557143135481387904961537942569904075/1247045310545991266291285730016853118981099516935251861146038369985109288084420528171217942065832292739130145780833406014673689119563698528225048800794718789218267628507713621235056538202070171596177775095071513194885568843375526804796016261173388452184505503341132236719484809714335744","38114743522716832107917466438257616720476488812538316101658139632867788464381862291240727309611460187159930652186486096300862388591521625093237019662273764387591494074792574929490381910446287947994150655077877204446864004067956087975012773988833339521775463977233068498404144221045837190392670308437391686081418318624745039402145439223552/9647001083383999453668111809775451078976046488746916070976218645431946648087171586252172936600115032316383427265217993193444199863138429602138841976586190525451324093772097241349417938578878934577091671046050326087898259692917931230974174799815198493279413438192301437068820185757869608523761456160341754512329264442115351926967120404125","573695055225225727008803730767518906490704995929177617646275646884555707960986625481944101622708415415988844740028718027554452662358957933526173824325955904005404113684003841990198157072540659184995738719040024647370869010473254071681533880576462368600901824622431045529064651675640055917092/144509482511118816399089096021290587489594541280398871255876563615464628718527634679330291741479135415168539765887291789615790513527330600394937614433502341116068305347468133950204152174094704092402978083370792135432486240914953928188835819767755172666693219213868545854371103120604946200875","23876960329653589647925126180903391687666378233201794403339630995420215267415575142266707357255726330536094448314199602616026935251126469221925945960901748679919435908556550271504767784553484434363646489174587463466333864577705745452492395785557425904735048180164697040313528831173448025400634629163795223739061661461986923675833880378496/5986312408594306954013526197465608559068621248896320652512228238115589875514604632230098997609482248000888567135685167138762172475788060284232459813998201719590208742091697294562538265829954186149162974972471533202880368317237508987477069872431064075005305838801862900501819963793062041081601844759452202282545840716920793056488037109375","58168289917567723171226992383559866214094157894992327555495441698028867727845766488121900626912848698952863438654895252811583144479300382761129433911280049009362667380001406579175563745824368613319103673817094498117944856004415812877213722455299491145649879676787079744410765053845551958756701/14517067289347903655500020160671113450349743650636953726251191692074385521975132268313263723831804150872238173602847065423463131917373356798750100313145228608894881457107689499956903046984443545789053438946050974567665049237414588435796381674590098629779384355275820782532479708807512981504000","728621890568281859295409481422447012528302594365693410763821707074444799793690738137592101239862736313347273167450056625929591960610208335290882047413011571781161008296084630072829079783328937418641417642857196346026366370059522990813537731394823630207433267854616768658990289454635793326766697884798538576055949457122067828153655416688640/181030730759516991863708593747964787874073354051675597050399087612142539517308720603687322924426591889179726492403913356461908748733972707460063017057809060190437917851790767968877215795679844983288935075688219234885360839984681619084834228226744165610073685719017596630302462070188937998558312507638434329299017584329479516410907786681093","86855946923438322218622470067224691860808273886184997065663554841573982963995340977083049132518812923329423480393306918856650577072525633920456721265953575424233701929892019410099166322511413146891121248381648145391642571638857576890568882512129960291171866772665863159474602604647289052079991768/21485753507365901947528588896402264670781310878547726104482740647554738151100954835784115119035980523529677083504495839730499664052882400915208251594384038810917282207449860876251558307288700200910747338758723324686939379138206117634546981163355060740270734146780942696291669461182599512320099625","2158989152301022938148680102142188531448821359505188055264665167313418619665693092337665573150374231484840948447637297247277576415460889296724813940128955070240137590073233263168835678714131062764247434144994737610229909964847568491446606012581370840699582055341626266533733744293929658949697805855362114229666626620766245630122333733703618176/531794915405164005613733454597931482878479882704956110685223892325074211694837836221759995948610212818642789132749082430059593652854659130217225506942675608692701447738732031302987802196501895840510235161825501235133794449421919927396142470196961877376701957829921152848178076410141813926924749057304222282687697297216661687583257901415465125","139432548574396829074586704387656697097760057897628994548358619815052936481650396157428747411173567801047221928593253479330480454469358220685854351236980383914223693722868233819483137401339800304943891968050399345430243790898955416907228948287367356990263740207046902209563417267686591994743547621/34201151688775214071963206765436083445901621442002061707492082843232231754829227303539041286301398668437202547003300396162741375435703188500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","11008517174872833286150985180322584448162884832099344969609291070844193524816852920942383850580217443209402836100467940651581092350600329145627967515818684442171571156446321228596914355704205623857871497315955269266498229823278800717909321269179839084452384509142712677235552103459737790674103994445173074670347080506698168482564009465276165824768/2689223396936080856855299215659204161946704205931885125148201643087176556822542895325191478283706585400237901215485150928036895428721912118467760766508162631903585126377676412573187912443878232521444786090510891599171741773242011017926658231638022943018461086517502584854390836347781674626615709751386455292026775663545470794167629144456268750125","16108638074211260588800537540680707641986073914251424878121255234668558067988171568946079848860335948991834525552515669040163026131919804987340113244760738846884911038097907756220945883750502673899084880578229601870882631165510396775126850307838505063922101682333806284668762825609556049426829531780/3919363961344261777100658318137884299575193089462944554282218278496298610828757650104922583359642384253066896538203596057302203635134833545580869871333892935330950583664400555463557735723364497947986885146043017010159347046389604172186788902608216894094289769850517098027486468084407618748895626853","34420755849180279597302103726180110022640946692592540634353734157479505420320000324260530767186132260970572450489530034440214259559325114511265075416512316229177952140217732655405289808326341696986755141965043719344169685611217958619102774617224847284122901023774956887687026904767714958090256282893003000752947427857703259704682455375442735857024/8342030311716679826889917494957593165464748884572298173556257652389845294530325764837124998293398445804458613956489096007564811101361266196542129764287084823604897187311540561857741285793447174119667215803837719660675298308873496219385226998078648428368061868944322478384684509466965129972030932418920415308276430355882329457342937549162000252625","345888075261020004071220843714060353763382280664960929903544964118831237876694384053904571498830068831026644303797377762345709976595360421502594656308937649239978525713471393570536680412814805076323426256584504251728507416368609420882442293831684681071553766603478479006495757222912500012444787804577811/83505703731469734628961395063481893801938371516752417759131774530720075262459158384433785006689548434701904106312038822969658455364219435022841597243178757423598248565463985786213156556523685666430799283870548238467817226915680747412191245046634279766450629886904716776719219698922088211154187845632000","1061717830619177527082296723099890392273896386613997004874669053445943252046748251883532634529759169500795452576392700472771365240996842610207274128102329096619028487369622001737128463631016494371635687841733644339636164570819431573829173533941056258744442930643735587780907310433371453992062647737259587563398111688659657406089003293576961475848704/255359631537215747979895955806995352799574790340218399351168178555478073997876110889483456972687438702262017800167048243754141722496276537685853311434069991222324039005160057724073156957530106623908696241268268096879569794431919729620178375212905203484165745866913773304319069321426245521467122472046370356725530914587807274074293673038482666015625","274122944106300296738399632684955400761495830361663966466225652918683099779465438024846903286816813856490888796372134557295699980528187779624865098445756013563535339056233912394908544185885547842235097677765325396255649207317018754967666450708249125316192200151505568416495274671679500594656671785202496/65687592621976546250581560102201535533608158256953087745856906437400149205693427285162333502528793675585022025602144243543064185647792948495372442630333800126269123531636800213405254045262127593759539706750242430153456891792533267948231185296091297979933562727112487057234422009426868531651634706262125","7842680480716516803148821198697967237136721860017131244266974996267074742248599085253569637183007740566941125452215834642683053334607896723447140851344501084122965014242091312411884985569341166545074688756440728922408743841592658677792796881188604773469108807869960161395759837407978596679911066586626885830991556090978327508459276025943279064965688960/1872528612245648675720382138045071131304652050696842872529163720558126655075937845539792108048310219395746259570506175902206215101518698490144716531697689534559827422735649881381597761684154409796315455445459537515308174919488497154409643876490472215352056502193150125644288086294418253309947229151074464928874881827227706992859640236086417889990541889","5300824422251242070074569186825929119848111723012841627275830216301188228660779008353049603527567784119877706984722171178137272986345560485784907345500893648715341273841147320288851034078863843374665850852481747000237834238703248634174397792745914847774297223176674917912406659831206869442510948965571661/1261140476013707338477604677428573831791396352814802149994640617701773078174882455512668089072441176857892331468691160991310474734143842336092636848492066592397892638052212250229129355009939118431643425836944282456647571558383755315238500832868535816144280088644939696339160092963629012001958205063168000","2220223718762215584659309059880106334425515875615107369399767892051551634000614327272260081056973863669004224981561870246078120862256383581012183852291444462730018546753183156982897386563561418424093883164027305254176874653780425452987066512563140531367766900610414277825262239199580925879453806414860409441845631158680721091621460775043562065815179617536/526383206607841251253861841374779803798480623722760367843070466043030228662340154304405180907941079883976168609082254331465595267209149963786388600028701073430773581228212441424400748220833542964971495005714483235359479470452593264280645360131482713147116366500300066771223383007216182988263355451923333319170174755334598973202740108032097242475554128875","521891797109626296684891455959263713257353500867652268541535940159815152120871142196535233326890353914761242025931373491906127275561002910157909306979093246574207104081108188995072105948138299097848175016082947174156278439986705241571619793059501724269644447572323501261424770743329858038040685313621446524/123310256826873923765604825413207481739886340225713108649758575106598510022338480189649787216845041382860899099250547657534972156328080736149239332330143771138115695598493059325064119176038137294863053148618656356436332991079150723235214278848602671333076219529535123842212129829931654967367649078369140625","66086044538329677372986118727999622900471937619891337714357792768200341519193500393739322894033303245376225584865369486696276607060432449792893028061817203932068085863800494054274423512956136695211796751845295921015953538329385253280866669403169919614982155350899648626481405781514434761541281229159396787287553493046927448595964103589100429722948913403008/15562137339474350565671240515273666798063901504051979980452491653975250630723677279081058884163396938548780856293034775459223871281049026140999055923743471466471830572672766633086347312178711643724485955576579988182546105048041649947277672869613992334541438784737993706482731696809943027528882927942967419447250586964258807454003775693567366165507144866375","335377615394100148751647837967017467711612297170079949298328061159559939969228226474615711044891085626519877634842694983669611974807129333052471799687426665556738316626171408219730853872410792831871526174987402129691897433888027072807302411474690613948951673562473758814664346259109886876538510453475290967835/78715592752271462306588358880337347638000605031000575876214116610339827495261512281635361568951675037834544811575026718101166562072917855004822606752296233435017284127594847656529606648345533195437635894948829857913798336356647286032372695130461573940500785137424365840081503133157308796505622439791698116608","20090879701618729602554170716780970848925039917987945471322994867171660307998603515745066411687983450400412739285577269751603921163835619296822801840348319742203974023505186187060251544248644338412667631232247108675504629538319425769464277309915502144443973397371136256151336255138506001292355330875114245901820438821732843540725116728866301271466614762497024/4700223519410528857298732096729483544820841497820611795617923063440946097326817340637303431283005509904481323205480729806879570430868897342398783028649633951362398196137429076844504529051072393709154483678349272930361110568616112723747726853614661953537957117231900032044221535502745676310313569997665352252492568100075191900969170979460298189170486601502625","2904778979985524171206573028445379872240558084236464200857594814631031581387804621371822074061289363372523364167184697785570324832815972970658633551879143187709707164796663015180877412717910872234647704536817108676736661804878068078543241390828229923424191204586313620612539678930999769543756218765870513049986792/677408099044823641581658869221044375312077929976719183424865834811543737800956896926637625166844372424044003929341361734886232742770909683021563822987505236295727478159938135467975522336774471915167606673489722102077041330652185811196423400701795791669780695158730756241178262962515917389382302757366325768069625","31270155809329751863885224732454397292230969002004953832354065319735530624996254695453061851449600345977646455072512400760539747054003851289540339425848681804190284451253462663731135337775088379954403740058084949675460445909826322297817535400604180338201322667139062500269285493417563095365899631360901732684124930296643108551710704785906431324876072470231424/7269578038000504017073007978844992319987411732848567116655821196644382777088703228960020894756722675887473977480537577509061256138261063926845643360849217556370868752909531088361229374467207196928745673402380473721018157327193509586295879051411183657185176812738231456253321187419224704301236205478184115996135940848503487199394612616742961108684539794921875","432538822079707760382094121020421735679118830363764570640789368235407853152380328891350816400541189148550353337874309885334920995713154225799660601389784410911658967499100610376065640785585342035058364676314084595283850213942576431310823836792440218271879354669291052589804956435743500204185107215929849054782893113/100246574739326291035824954677502591279343311051719151327066341370995390423713403739043396503785261917771859220535505691760472395306543276314938287868734009582906895763073519374099272340577921671298878837400921045252035507925021904954445172372479744465666760762909731237634082051855588025732494461939980856983552000","1914333673689206389116942789116917579088664511118582610293383428712902211612554212779880638065888518488492298586641997844141510832940409501694726851666478650414191249534733087933879981733561565249818572204932715347752949087800778646065986244657260832234479202201129845117955957242616947361016603702640821256099895469088229339240402478576285854783063612307200/442333801076281757298117784528962837115323835962460661601905131618341609371649347131724700192551574625400701487125984359494804828935577124602622582550626336986871791407398609915208114339012374456785705161994343348351473385887949809051796407340988735853810174589261300681030826392672282630613354461927208579993042968520650313621522933214063366558703422757071","5704691626402072213006354545292364761246893919997531024861408248746241619817955824682639582830486790618668221530365426203424888737658778881721063941495350237419723855000515747725926735319471480027293210991869255971365522170749568996651406002311020883635577590045650037569906001924971041810547543163363976464780729932/1314240362076792592671773873754757443276256223533339004339330559325754574023619698171225777585408160438834449576526997055649849875516310105297894855264038450585295422343454458568152668980131977005808840141079502436391909349182185596381509091427752151860204235071122788499996991078935216686010888734471173124487937875","451219364084386208718456142329444023337343409261545444643031014769484085278440612677813682892926852469540118625738238137458321112005189595703619178533263706811689687213128887082197330137502064260105387500552856851972124172206996205919556553246133218441769325133725631665593372188755090094541462474970525820334385058333756591222492801647110594428922046641945259392/103648250172203340865458115839764297558925693061798169434516001775068769911768281084188883278842546791612199025413573394167639925287068809631958006622842716869211374513136766899877504136929177267362862319748507372147243911522667591375015611312165464514308451222180272935398828092646393830572838772085366567154646425598388620105539619174837489536378605144891769625","1591076564577634575701791393842535460875733974464805197283632670013516183281542903377750304419996681222758401497321278555686661981435637461350320471258386388843198706277657208526372100698700615835733712519332548607115875288787602084336341594576426630670911478276101702119972195558314357975365863803265163991961173/364433108410193393847203348728981296285742202617988970384277162225847256295865554341611171460436362780497179090329831885853324392923449579538286804729856000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","5307507148709435807261229345132535134848030343901300324623409721698217134932866488937772986386501538026693956121121771089740095760486362654754229904633476234090792827930433598453200536551779789049352131005222659995845427680686677324963223653949277037520711609343166926627713758990384011274777087968799793410506391884872456420041494598273703914689586637995139580794368/1212244290381524115082005575105703496583315188540177702780216570265159923654197746388568151706509243638302707511238539845531608313334248788980188054651601536067740709977678222790481348003085034888244447626347312094586389347535167903408519024105748523384932942441843118813819781347089702286481924493361058339731949844620763272778960860509570622673048786968660129650125","3046577098843580578619955603029073328361298436129791931304665777036152915858575282362742008136721284817899542475666054101957899858138590963789072530710775790433466847100422875906866496318804986202089528198912098377828580031852152997907433335176267300286466072997014023120087988748396598176622765923059385876855303940720/693911859077752895978833241338902695755528613729508555938416419864772385336777924892434701804078893822446727762077537955240605927550548046309823051841326355655848406646248595628715185413852040295631448250459076043816328082561248420925930431777502622148019371383254316636979070731427737764160145097293260938978413488819","155310926743873343426312607182060072939030765297630534544899230213054714482456829198485999782086944271490229412707980997432528653509945301574794242118433868747172279224118534460563400440670015323324602117517342201640016853927923976796453577048995243600967202462466681112804476672348206491490513419336308575442086511015101999847896197546900512764233674747415844045184/35278162986589659300679088538176070649273991865663041616088851923111175518405117391134863644540911005782372831496121355954470744169969774540892096320978686548284501139861783292226140413769665461494668479430833892857992401391262903582109993838728281915806394747833588629467613308837196269424421131934859079260185052081536487462257809987002198437182539441349474426375","46729591025621874782758519074451728476386657576036360734358719976400940301493939192083339293779149127132651616972817165172116269307276487158069293114860391502484125554406945249728802484128756924044633825692779783425628292959170597009935305429239702926898931975023598456207165067568919757902764815108751735753431153581849/10585868084079030838651390738371141142245086465033459640458366146849314274285871375459898014414833295804139979016362796357043372316321872357817727821559232353993714062535883074661734509440994664726425399880995133711038483607773782532430879196405793694658185175583691180757783597895616920432527125993118171361116684288000","3736372348124144720852190769710129461145889011598636925228657393934132828633132357232883470466940330848177425542748100211498184494252714616379450272611850068867816250209867530921278645286769418080018709947826876461419654782341309127709703626401211996255743831998918894661053669189312375159058718767082163156988766821194002596331826150321864927832618126580509732359424/844176851007504003627016945212023239308348428094023437269532743221937069345682900884618378849283002998220513307273333096775669556093005637615012750733216460458689282791632437851364674879152695438589692227159038555722539345972833161146108367329370564838671791241431125003401861887477969954740544092178721327724620450947646209914621007186497081420384347438812255859375","1258774755828991281578968023382624723772927642002016270484090409043454336040857926581316994594109169123354553321469500848146015719851609220423736153365139804086413284787598253618361769125996755159571523632747129480387254164008968993734442164892486441152227433281625391753702577143985047832519062595123255569172968685060844/283659859661671181526547833415653453506477950678651675193210969173130116121017723360258249430884213011988678011357458727603413521688184521573094783291496368005697481333739504490647194454695504722542014845706216224432373442438242355188461951883454664693262684873988061018976711201351382163527093784753398257094429403691625","84932063355292829988908961192574710493098897148701473172754949846455626381329456661808566365329266898990829247446356970454502007127269708487563279536825277374133681167235811080298134899629580318813382668399644553111080625918213250223197440426147821225593304993621451053135332451997633132772608233430131400186571793929377129211228689703376067763625568623535588709576320/19089978133324852910950469658566458037096027722326716800113107848115231563787455584278193954518442601810776347091253561956877155673550458955562102935555510392954425196165785410319126098393353878286400877305164869548380670204577544630353859009177051698096136470072137579698473017257397949994722015089768745013713383769765609613514021200888647472804720456494757423299627","802638881530832431828249604040579750916118423833791608589560402449036920165704012070349537114920882938466635598602387718300074733476150548724726460209016834416094317724261857969955414000155807312852092720310159572547644569797512233899495300028159721348599816083166712365215075728968005941610056018023633235372936903015771583/179951197386119079732438617407921535065140503043429174394605652913879982486051627760652197484142547447000508189455126493868229565647284332735552462525598465192073558793335913005459266977086104359621022691931002488052727597513413492393525660272900161375677499228252863529934576881596384036401784035248649026076581302370304000","25208742399375362881099811032135575360109715964024747212026245529087599633280142314962581193303683759605084995818253124445773115574470717199218828756449187055537877478033129862600982068782249943150019637186466260707552416433010545437321814115233841687700051830170191107127799355485920046505591193770164750886037885397478191534797655616745528343172318318678405576430544896/5637713398995569614196397857525646325234056219513202928587580534159596897880731043336790273040813044077153051260989730372846713618900145444802234629922717464041261370803598799826604841654608724727320798324006129524610666235998113655193642594744544226880944882342204407750193512869672849910003246504052298022468012594459974209940607450480609190841893267203392880360823875","732332637178584560220688900268566130246820235956768724845747830959547501950765063982943061181526237061809052444110437930100210105274824607344902764184151030827266142225894655531497849161692760385938786736436977268616029862577293984376170905024712952813234949508186306774257035535805330366742322777611063402455261391021097128/163377988152179636922409938163005948596822656868040662831003991395905185823836089887990201522673196719628247106777881741843786365701135555917263285268753605514812568258179391272113405920369587922702002732667842511108732068683407168090725712401954314293193572654347237716691784386690948494003094992876867763698101043701171875","22391374854299462107923583267570593886002658786775211597896252879708753450794332301142909715845151746786016535157797023153041007263258732991465037648536702217273897876864351559736449481285518249846264600935543582562018874574655740660800634883403597181876364712521253650744197321080655028374602772696770227741610874399454362583980465225235674816785988164157351243193265401728/4983275997188967758382167867656806681565521964135131710678447245984239733544941881418957694612909599261843693554043504855207170782744518943778096768859337980470219783210191765678908537645270392500777411134164918803949155037581108678968701961544979451081836872425574123683574475790997414488641534074873248802450108535183413970057319247033379016606809226547805269752123746375","21252344995592269775107236774689012760750850598567799560343535731251766780016530978663079386453430272698006977668063208502408607227544322945446079708000304179073184745623740466334127867464883762843346619853325415963062181018736410570113171387891518398846617197097407612852037905687899800932343156979591740310928257766081697645/4718515378484509142377558412184183991357747235892194234377932213613746008373918923611236346330189287336493794499188640380975364991548794341177060325509698404571318037298112293926833877103554546466055612498927474225619680186119313129604319096374924037870803554153458104225741255753314955115645304948564151765516183663634546688","76703085666560609319365659209445044957052359500745196718269665234646121134787807938680787341023203786904308047981099228357850016602203539979246579454229078497537148799349353250167621935384193502383187510928609818011142642954550330069991570983902841318203794113898871515702445720207144863877026526025447819537396146822201819435536435835285098485990260677737192230985069824/16989892821104122916312992616665764943723222199277412857053896319814438961475117951904867066845412639236790762432996309717924037467863024360211163971190006272168845197000304328480920483651558672879967350982199768255256753110375467976246339260326422891913564151453729285191351273342206198366624882195135056176502724912849575385576554208844814085228696838834665339811027625","40153831166521391225489894857551838468150576827129133168972859441122728710165233865309084872159583787083130713473702296122465319276461991457173085312407612757280915853584698420083436946976844240063731333638150599017886937783470942007376523947840104246927580254612991191040951001539641947153847776050138532219595746056076776809812/8873576113581065493273519627544307418139908640325227196912114520903505426722086265723900326735989771660987609604507503750212298754414472822477243293638486047313990878348820573874809636084574108909615044524663712495422565151340037564156235745628465172219286664653343193162657374410926171153516871765680561505768223660055617934625","200736374277835272485186523480177159453030082779872429648449412313247640312479214261681899286513818912991945046297334418102711629933437654377760028476767482162031641781499114859553677502002901248124750539270235098492377826240319766677856465093871367817683734079621359186477306173620331748496369122143019303740252461824523590096923561928354020960176605008889579578495073283712/44259440065125442964014453739391594153290923937737136823355312892557975399035370631521014554980129291582486968083228888083079118116286312583989433037097397252506140224404130371160608365777625538148303917306340620019882928744151294738308047800711028158277500317134537540772759486365658024194428796846364486187105343266398338060080611643110071184992193593643605709075927734375","488459049325494693259159444507437983381645757291858092983371672334043029615965882574409808932509285079401239403272414271652617474184321852388397021836909585659327974611273820676128650810907598106588433939541654215766888212287311943387232664417347883717203611092450971786083806323404432266197250919880225892099146722474124874256523/107455855466267410923480140898552598306699341366032095904938430084768624148829473848763761936703072253841751966906142283640379336131083461646777390874405323298406517250231389493084918065243079819898691146841695350589992171102939046740169198394671965069747042621265775948217054519855346617967866614303497258042439052681849864192000","8430374068596413768975326329313648683222744787097373111477788794692418932056901235174019333392845529821722488982447683794746518712070635063397464904489452840169472596494433874412726723065560358405027764015273789053064830528919091414531400589850704395887250756457780868677553068164933299802944396576360356896758745030955907258232257358056931680617626606715393885378887657377280/1850480358582748412767893656294669486390769246349349706200869446679212812264400876685764762211659843658541567071977813110496329850010288179702589501255367345935389050373021591572539260951149696801665953123597521983257852207280970577287472932167362521740230973547070264273850381896786822127290397075758780174083415923482640313277341120938690594859118603017930500014640169211239","58273615882491925540881784328370957720539797010816130007322211512070634295154626813477498607761260613353633996451797686143131893884559909668805628269959901044961666535533876340116728982072626875010391195372759135469446048394835148654407846242721443845351855234347422256700864370273092971804207514736924787577569355949601385705517152/12763172138328432984573837529764902730448666594097466544652830703737195804747682450548488162227364538052585484418491914323658215406327363805353540266048943197822838925184942600367647278764952826664684839953902567694832690683467635727409976388280092262839126779730168889686628630302519063225007497707028600865624133968363921915016625","2685278694947152969468407055109959900160804835228466214479525891103128459065131221736713585038130737099067040196326815283171857977706979990467444622550497565521863441617001097354649972660183038850033950647594754644997436624623325003537308428828750008305464174443210079059253920383411910911594636045517662796811001285984447671371943267419151220518726940455756833040934506414133888/586864816044968996825907488721678304211296267371936463272955488077666796280028127333229453342355554450708284934221461946991556216095213627059047984199091625921432110913096253352065238765240063555347292393427726758010888546427415276046238297382474708612526770055488323003698641493939145624184943388159614111350839555141202024991876221874110644879676602924730506882384603409121625","27700345710264347957758638741952394530538598225904772664391173119594616680996031886665218221392453628824570256438960349220263575741495285780845399187013582169907518462437966962923592601721119258663490655013419675469864809004562272799012227293974254329929404036071055528766397079743200179924243479370594973626764330855493789112414191/6040997839051213541001279276287478343874107660287651711609067205111574718442229224212245187655300348484144001298428958025052162253854676210451657425437588244676589965820312500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","80160269787574270953020489212619791839643207793889009503234879683494928396231769167082355143564723274576166638869430572977442020236299319718643894871736539109822173538266278165276591962215927816541165548699380129014840956895931285215480350321259054359835472320394089646764361802445068798451796525897304221529850133401768027469126408090577121172238802281079916258951770135485696/17444957084936455555074876721808241311651668802091828589911310253709517226715880722948267977560381436307152342821304525073651379763144281678911047276389231713860392794975453518107055568765009486973017341479560154792340888780337029481646046233967923289468141293699236815196553819373828280398488966665994092877680860643266914861837639322607761804740256920429518434353839878280875","2352816897072623416220002134476921108405735955266703519252095150412419264317091785317803024028565851487861978477208755211589867803009700996828082850796103789009194767813611798769297617674631277847910238088040257037678126316866517601388289837575778165301828137259948173292658462765645645868094197736382683775415645307647043205988394700/510973411316690313485681833991645423802776865720580280058344111363363091616558230182669376841383375321912553771027107891991318313938505988903735114191313214327683449514676737796942389784957658395806951715454372568523597420866050825822028817422805046287798054682484158011143949412956697442991898914560191411624040490122951328364833797","6403295584873165688372907494046202150046769667837790834896334486679541887567517050446119511695248926941383207478170182650927368177009669717288184903306689332746127845953193587519575304974203099873732502605739219028995266139383163062837007982999189114810534856227848568800302527760100163350814120545587074865568436789021082619398126713943637898657861949091545516403987546145915409024/1387794272010111535893205703999712437783041553900341112488641528986385462810448493444968969845352401058333929711237978223214186693177251566069419805757440174840170213159651962686467523533938145629444468366235554597245713128812532716616087753947246800626006504878203666972651384731498770435755225220796872155249202960801768048854869001310722927230237083418017482134588865244642658875","82993247683514419570466529457059660634483860665557779709153549045427987672829778520201315148149878525274005978368939092115193636113741972236218502664881450367443614971109677363668874484696543982239492409231870942414193419634675024621942196087473557914167832058111113476295926250739099284241826553737074679953551191767148712684157318697/17950946423927357725787689855263532224005643859095168852729513034456208872420513601894508438640531171097082516559962755244698695622824386001219435651555513795509616906355363573638916895074349491513539093024980575852693293474288638209680085037286354050958859425647536735341886663074581909148323105020337857959651624760873736590065664000","584891611376763781852144397260140844977346305541197362434227194779766612939978629636198589818106137319267243431810481928639442343946346034433828599323416877248326356345631611148749005937144684862502198147087702668524450709118588741606955966569427636630159793409544653944608958808602551061186799401212712216156799273254257486955348236914237644151956226336750212957092204830385441792/126256710861549838395499078249922986417488985866522660521294610280820007499099176190820291214370699289977888813109514854178180265382471972583921477022411657285850911270389720508719377071949050253246021921916685716353393018411683757067093259101151481189635423399611625009617884983318141463140199839724797412514785751549277231259345923662499623640886881048572831787168979644775390625","4743054867460856425399742072925732465660626340183690464743217147109403130730445842673866624947360862438925194786600531200056131309608642363389833474026007798643235346104937733349791667694862514383520689594596660275306247615314272223660862212527346572811422915223417783887717426641317921972456913534338708745549252254865615725859881457906376/1021840037832289788284691535543138164288462770384961802287250236519983887262771944174557087207566030730743075334169628971336358708580124427857321953981475719503574867471090607795242192417162791762511940848493176847925838738242153177311649130718886794249673254183907621449520415060660496225939963471753122766421338241291756892571824984344625","3784664074155769467702999785016514468281913375341134899878893061325465790589101335015569840325786070795267055386681356241209412947116340524588831510768864231937929260236754881829005065056310226407358204278658699999612596866156294195316867934035877283950841910726224355461522065773816109849107487214275801829843762482082803559183694631856772777313673086715631547326400170962722842240/813783281473223559981291694175087508812520505931454895884442580280342455516154674683217348039336712901850738745276445107477919518905155156380620466135946654952837573797479076027688866326359448543065305071605591497778941561986579230698384305536224430794233462949056326864499827444363206162251104552740175503996670997705423888382328014210171324376593090187604268086334796245552762333","1946671258536842642381655747294621776070051525209940130115769153666368932042152311477746728678182920842238801763565726086459485050237860693394471644023999467670017470376746609892484192072297938254898880354014176373253875722410186683852253828299669530022166361304397631667133689128358365296701757782382475692465977794960109690362462330857/417774039698408581013003883929127512062321623871486379101498968145670269174833505080260389860863417408848209525427705249526516766731427603641806256289098209429110794311660844125377702016056984573671024035213045475132134896835814746425864304907974005950155657789157496389234919107772201305672421982198984613601511388413381215220924416000","328578487723377153600821813410631465225159589727320893988991729306688663770697528156625398176929288628930496338036815910669579019719633124832162035588583242320537435554101841406566009219059042888412893352417446437227440076869427577701706713564212185163005644118869496869980925214424591264870388237079776503547314587137721633918824664946974571838634860386893404364499977966899068777016064/70382695927096628347637455030970644630942872888311870124896575877585692281624151103204551947776906510366521972834357031777287506848887607457751667816514216907338309372900327919413372044625602555866294337672022362865161523684052940126509854895320132828009551012639156341878073682501185688461720664801829933689280752623773789373199210473995823367199793407048741191786377993390965297664875","2617201476921368517857942326432090876874414269689140439151907982631768946799200744678055980827789859579196832718849393046147656447672531861353456343821196812881882023188898815179947651274131166835133965629115749368441605680383605331300030886676081418867305170012032824011912531673468215561506423833911621270680104083533917562622600478548/559567121085534865189976875600841717161617153776904752351231210970240323460800785728739412474960421770806162360125774000625035522428160837855944215417821324758873127567654244465281354654299068546570789547691342609793050301258532586131013585959164719533123826201937801986942606844854123769532447570107525081084531848318874835968017578125","636225736038986537559880265988431731529837451289737542395494683393492040808565905376235074534207026537145408562785279823547657299565440309510931336394031904920056464959974743525662459433889398003683078967642651812081450227654478095420306880762753401111260630654049389197602389949892636943971690212484981672010398108426002137114819838399222096538921225458913266993881960732663394566024064/135776510176793971074115131648637508758953050390591773574951317807919051619690313331192027871176160424663811116849856489187562728496099757910540362703888937768555824513740118941387831822900198029266206334350448626733139136083404404120210893986654422850183837974770675600952078956326317698998103770833069712616832650406225828969036781514645731022616236082175582937900731419575337473384125","266695771933124633677367149389643417608461366874310588884377151539325854547826373711099517873721616543570605935954334944030816383858485296542260152894035979141266909050267414072982042090341712035518685997484257326212454742816979806460287972757626105526907510197321350895873473656215941034605746494172316089636216915825022339855304925515685/56811706665210352283362623728191218698295056176625217939528332247537278605113496147630185544004654583441448319260578659922931798845493756189402805173037491645434052737405379674607517658118427614090338938517963215812444779184193933749520313676564187507594274551791388039139409235056119788261689087831209441779870873305232021728002651979776","3511806683161697708497547617957719390189982761002154386881580160856792742952365159764830433511949678304281539875366378131195670004345568047690216126001067194904446295336734931691743477531830892015690816210752795806120303198745685394015161323982229908105397857791180342330098240702332072396030780386362735967021055250450666535422528637737695053315137238368787607412459874094164027214953984/746741569878639983491390741637813989978804202898438708743258000150996080386381281307609038830698579358879333079215327202911977568726258527646560497079622703052765164031089590965199628534477381843079892123440214378949632707668935001371616475282883095939750704292616758568964786737752325652839226013335092148777788733453702438432279149298482004122593243860829060557386699231448957232420125","499543951252504651717279461487337168721376180441322735807713499521878076780205427598086756686061009718016175215146305489885835839673419698751530207404115002383180054704927695269921072232395828258826213554806570423602966743337801741633869267620843626804016742412046844770601322513184123515405692795346790813502805238635003099976693786012816/106032986203682550514602969462803214831559442358811656484036951559991322084935692953211120289352600484987931812632505499612220494311324679562152078883141464406938524087376964935494245010636163705698220308243980789514815579319533341929989455211613890905485981353837321342730307819060825125980500975023479813757024395422041501208805339176375","8540849722242122835873311629952985285477986765819584558233324868363310302206006773828897816547299245727087876984857726652932481899766510637403577175623031467933486823994040576431755172220921921877192006685053572215922347418846423419683723609799729359551828522978186208983138345476801247634773975311405913274552616037005854836040162212761099347518242200807692224460514057530656658616850816/1809694575992816440924165741094996511361288430727981159314194000585536832192004274726651828760263522962868944612215633976203596150606503849595633388319338251977160257979846235995654357082321611719654136058257458753105122024859078420173515189641515736029725847315662215778251370398007468665986604529263071981040014321717598469319370651877296085250322599247141397427185438573360443115234375","51377057693118720457387330519321684810411289582445982078756989158447711080414032055843805733348558621949380554029375294451303430269197115810494758213980833379214402452992657502777067850631862453239349835215260705131864911194740832694498014048717871429797341104227759557199716944554347879767916801106279081864127192611546757627038037780244683/10867246748205139797826516105458406878398263495890048637741584969144406206902037615496936724683237700974333817527350121106320991054058406504571347680049945745432432384570515723033245430148177097144850158758462968940525568041926860856763884474605057056550146491001458649244094211354153171337463406192651150028767064600270112838159624568832000","2517199821548153657910904242290029026229621935918771922146425373057248090467388430999870036608278542449661971830076845113363443421757278612394167195431759807908413353743377586893872930828548256216510734912027450642648789925142482023713336937258932978503310551945630359646777080073329099268529064437120002567758664419443374110941824106727218341795100740316967386497091058915066147604481280/531524260324016969370728057738851340792702640911631807178654723224511108065633433027773388768889035083734041289308124943130099580765995149865288328550751289346866467755881013217287175392101334538392596956248952430438673292186779006015549928829953979591250274457658042926539541422697852390294886719770034058916886894408015624288115732154492554105512936468520265305162358665491880968652687","937159485027553069020805864547349554547661693803137696125140510201297417077233061462068930061915381468160677500445535971818609631674361074587732183297775728389124966713749450996643183965795829780345678634356741756033039293590264355732129789110416943789326482663579413229893878422643110852069225671783017610387570935863228248464396615988222968188/197552642195166614912991396771845374656891854357948006221100585931656016640982345159207601253599235265353060942313995345483862152489766993442419668492877390774016299878943454249209917002169480134131612530977452579520564400124908392339263545911443803619972765231094502745980083350567509014991735227390978850048088378721210219321877150756855372125","5119346675109082499980756672052066247676641510661024682574296075659671743397880591881419516307292610449161239233139088348510165442597278965718490070997173182184417648987611422446347235659085092530927312760229499083348217392125906851921500360553758600756698605047197529446594606336369425040236883171542367713951500007600355406492128741649090501989105696576697387613035366083536629358444229248/1077349190930018641197987339365056771667455373500846354778079878558146320193384166982231171317419356136237346389570422332278447217033773023556383420372685049620361481309067017697564760747047839930422553324681218253359586320952896352245366885171583221864112040038531116947187482413031483309534553461613717398523132176948321964066833901215878133594739833910960843185464241840039390204295097875","58469980853327028628854378052548435225264353747414624620847476036979290604604988637469977624105451959796142112200285366199247075503424204044884512269071061176877225315884188402954249683107639777479663275428465242905314418930053869461904934138752031124685541853599407727446896558064252696813370692668496452783003306386669962110734257851955001481/12284458784412533668960387046583440199646081362484321078872891438551639470826582933879934711861551014258493898870867541349962531447724393381011633785884743889445407749238183080941846528000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","632694338036291086868292541736272151517212971647680989553388199374739841494700315711180961760384484042159533979873604395621016272772109619401112452105475906812313548587880899058905419220497456502543971131226430775692744506047039958551641270070996110661036371362526401525207493270590999387476275629412687473362310414634469788979236895300129227082421021999210841384596617452097273320509348159488/132710874087075221626157136110978536488168313127228703025408943153782802265472978945703742152954881438058373686972477195846162708986982742647038014147903817539418442869011995988024638278746664230046452545499722614320284478925059527086663455478374200352375121910000967044366831275681254530914306064535110528723482282501358749001657608122307686482720926189537227492041135055090784059994118192625","2022422468242151190347511883185841333968390991430363660248687284021524206079162212007263606819387821055183192871951076644707111802972354128011904720586729919826758651167984507804867954970064938022106484656560866447290934136610214175516487579122328055482392137619829739560923807880779865442016530712986750711199998190148885726144596663143651240/423528009127070458603837580844559347493775236970253513203186912091140251858605354218715508091394564000304400858761758838182654201653901408046974668599216804223721114331085507752600832390227068985693006017591304916519540245902645712532993889000048992026931475754508248265356181099817467608863068068953756055334213584649136541490530849577363647","150542201776735231618709653388506394887777837646651406023174643241783006776019388336318216053045300417086929061565868663031237502137150880313922488106751241006715449458736723129545400133450376339156062387859536289694727635468338235084533552501618659272047966040838509286942825414463511175531001410923014751124732748099355476332649458471135027773371541572374016038525336728276024676601778299264/31475618522527975728853391146702172347290819252268551219771201846701658848754300838383637247014705706066050673096278897933831272607774110183488615338021656923433335661890414740664480671162459271850877855521869741833030384682549648626038314686632195158507693321505500888988183270276134667071014075017317692121986144742473139078857816578133693776368882596780120407949076129685719314703426278875","162664351499283182546788129866259011542529017155637405328005084357078048074065548349602626724265307733005745244338982661090506394708170105916177679714664432754153795772811389612700051002336719842784098507498286260450939289109123759859710248621544296008356071415713931721102824434964336667980062728653562369697289761913925215639430496443820411811651/33956433298509232632327667206936379248172049619640091186698677954874297837764235300806836350019565970550533206216590639008637925266405524715041372407701947953283803854153876844320283735281209725651036513491246238622967031979233265136280687995181375582844780830517825595245506321879177965868747546127685256867456319112247572348416655367667187712000","27228583713734183629451808889147559240254570554044667607519238865891084165382075658707675405673276615039702916443152954157535195508033284355580742761569101934821088036084480297442018005972653124248838420021440899368869744141698556359295489470499243402799483082406238128875386939389123336303631993557844565927960009744780823166462314116039469622216263221278402673028225214534859076857413557466368/5675134787340359276387085910732530678163604187009567576895331134521132071092293139167824957253050637085885426100206370974479279292804959049999647539684766632278449357893560561608633329561385765035738071726214510832066885156767060324427330401967034889966727638276371320401053302413136551142103678412692111973028587922399670456670380189570979581674699102934733563330382821732200682163238525390625","1340937726818688387636018677960518622106989311577445614347061615417831160296369500704524022869612973331444242000788110133157689786976834913297544087249593601420972111789552905846168933014570399562460789075871112224533723259660967481288525220689577290386781169316008987012566216235876842757183233207943071523447855623001920854571597886491163165150556/279054368814522483241446594911968519760869180429079780837994812436395792594449929617293503975169489945136244602350941695478861584261665582123038340824700224583170270427163469762789603657025958695551448477050958557681299495041994050951692916032501884523150972841782658389836059236040091605838583126400660344344601879969354053137568588338096589095875","8910951660339249479517731530773509037034977353457185453617569046885132434552771722727442649095007828468878374139001808825741829728375370140505088133244952288239619141544661695065318568074863317054989982620944602245967155400712702259180443238473885690297281525960618905625084639870407113029712510345262279507055197024677292523214467306898573956604928730377318210588837126450942086527893437954864000/1851573255256476362977604759655284263358595254392797078730401113550522214182030016660458780180636930591149034499142464357511158868625309442843792189394292787657774627425816694628839987456477799348874853555586931850788645677998004186437300173080088839930384424797706381282430208961565555953254145002318893188197561315855286173276564036402546798318351229978103276843822345004757661005876638005274037","84997663352987536417038496128111159210386455419431137931308301989414462311135708114322046234708053448098538629166672456703651524480738219822858469100454933583774404032968304328859365484249897913676382909050450855222567147661842184538302991526635974158862033287154321908483007506326807469239745851379559259262425675035790574846229470041596801343087041/17634687575122715507915388096857069366146981156897230620371714518707518105157483283253374797127075689236298114335734874553183291806268149747826050838089931351158483980735336772879045027213982661634865556129548356487722537193914986994283729746578044621115589195066212043187229606921062007047940293972381121200723292297716621231320254309060321476608000","1648849257486312935416274009474520589799750757877252390543329851029437452988499485179026845292068377957697884739052491455807688429630524210823560524122596610276957537756142278585091315141096146341773982302888007751632401090642472506538817998043326415693840862261701364114923327286462650797963969289743571514890723145251583881752876340628073395708716735192690808352188867334842743895738955762067968/341580411902962140529547622267381834425264893226447658723654120920549166416114849731588552578626041597847002946105459812230979900480135423787717825697955152193526724029890829615845314765605770060975538542976523177976182401820926854406945392167140347444433885786340415437006775075196031433365827874254477351374236932624514469241634422312990555534789607377023339236417434574755566856489013828206625","4899626659231633406569362199187192352933567344960498139854460545644210119722856870634652562532083546344965166340063297647520613455037240144734014575196764021102614748218834054157165781057405100578668000290493431869797883155764963238760612333048336953434663867580862692267574574465371615023999531030446250351305046572267686566999209229202587258144318592/1013522377571209303732207048597964555261512342860326827024786500686692475697570284120359840724596444209277948648863014479460188496587721578075151793081823795161404110811480269106846359964436993190293615381593756076515012514100289406862487971220020752628653845345780766244842386136740768474703009091552043945843632199999007070800871588289737701416015625","362903847358088423032098939589019598036593525722040887883164115981767777873860799955715587436566233010543937498922435963385091400670303956612881974450548904906949032005878241638546734597308786514086678561900713741746905742866635779432216761799371793260025549698865319760786921444505323758235164807966277024031605673481480590193724980659448692487108892154809490199414370023696404259691299614147712/74959603173756091922435708504751461448318819548943586676159545028063979695880930926805574951275602951047845904770828900645717477098988124553474616764040938121171776556999069351772286262529729056288451037717198273521810585868307402693261479298923209587143468206907278220909447483738730657438961435587752873879244136801168836767273934997417156543866722171766794171623224855358640156858606843576125","8521348154958613550574095745596657249924328336262127244827955886474742319277424381360677655239017583606851483318951440691757875270001283229585075137091617073509041644097526047127618954293881264113694362598157456878784814696577083997902588926421675843291157049153701100218784481406086810264243143337016042301806376864424632290226377881206765051896745/1757584673254145109614914862134217345456065873908262753169404848658913774363650863904627183104777337461445063704655164325930891269843669860409763569362863600932267319335889540453302785099532688264425988677082044905948179153286276609910158854349711054144968131934713419772852663860893241364433872853338630216232313607969790083448433666334742108176384","1802461420562646993856730082999823508145602238125054717836501201545920604020389361370931345491160549787411668288359013059160331370751496329806488246135100776263777863399096485894306306621852596694700845918608199329091852956315870664531614358379176680326508877329862713333336188556181470928613423972314983964578645688876556351433429494008513812136152576866650152623510296911708111085518974142728903424/371238439252064016214448115231139360835481920731625321084601566992497057371416121407293286027832357816257507287295719261141426130159269433199862002841433235955835172774430690352481806933860390015899973299268361513643524088242973968537595085600335021120523852420135081643310663869327371821064862449426404044951571585406092523478861879148545678639697679215289523234342337347529225543852787599016265125","88795280670112240977945082069219541902481768504536167808816453021962616596410396813316064685579412429940019071114917828928080181638058444302439626425155946562362550070187433083541414569447612195370911498321149367969974762244140788494955146280201020345849385865084095189982291190135293114489407801749533448443222584092575861096946605418438181411489276/18262596223069549313969288693970246663726147886364354584825624311486557881239003216971630599389642752648815377795018130449384513824927138566203714891090017787258920529990523519479383032564209629983810866231367438270859421572641494420831435563580050954867101292568399107965982704216434467243223964964535464624988344342084084237484262612100980519602625","752911409358158070688133336918078236438086521781731735123294741731669530734909563155732092406099003582749182967246236657021875488130304108082404134004381196925042617909108654109138702993903561036987511410396567636331465803949049946947888490287210013788802287247422993384874670368649616782837096233384279817294778916419067404863458318451722971117669642134894906235066332205740872938406767767019265664/154635332883086377656813458754577288834216641577439356891585125701020579768315520324293435008561626926046988056302745604248220408154454267643222328696606367409715369481567213640103076112146615938180089303294709009813772509602954514391675152597458428326644988225555987883250642389550531163153338541870029415077982539614784206119074702022117790679351778993541426110436276530890609137713909149169921875","15286089077439918584953144558775765002061832952090847117286473868694909713791678395221438112006475047633028543501632631679316850512797978594476229228325228403849089079675681042224057234415951253954044235099139983386056610384489202589484570852048157272551098909455253037561994944665563291526597323199530997923272894119350512727802414680772513760081360291/3135161418037836259442831302977219750614726139657718770206960776514822107155928800694375522572523712277389679035632531727155957120566617736817225541673148354829212969778664144907503411589126111888917929495106029890532891919001138770210977012708107496187227751496980000137223047079127096028939624830654227758737339725345681745847598157538483308068864000","17723482381737693269787076798246423310802126092500438681864673375704464394105734049099094818738115345706100191580982712146882034618103161268453808819471603805345990162762722549964406042295355916458624836894291267553138041035528315839108252422478610879301656207772491548742981990469454529537049123948604931661837539943536878260665617524824604291547373872716194154198824107266275716083848262625068958720/3630091565725887087605600771358216927099748013831912080380983545872077197366172619225751217619097657405660172801849926220948413919823038425519006413005998509677472226729295278652284861834178791332630676772284971762683579047508016687969040658592436230062049051143001484384767836353233324570686249824980508520186643477313941054900197268584495128610811273834192099099592687485176400539748616360799518357","39160514032490258389003214587901781721548011632821053230881239001436341012396166857515197251499460842954863342641015306304854226194551189224721257664420778416733889030680295206179109679627522113592373938602737416822981698362363553492610842201005420727750505681358595340127099855823746410663750133019743170700888375554918213182862789028531284364877435896/8009919337434786244380818390213546866794958389603666737562053423775386173149395943310276429895991903753441584557917565343673605019989336264748588735390182130334278887642569515202100870042209261561001627386525182096090194076839370589780431326097965428311786635366819094633651297179987340498215947144870164066409654464551017761658775207392803825996394875","18188388167811476762477659006849121912679763597132233588170406666718758511478154418948855160838212151370453213943784067796172102916618102024199200086478021533171984254799008541948973652219533819511807681148179806051835318645591102296256347927018942348574774821478499092054497390790734798143983945096982240517058861467440217558586822663985584775920517755909444876443211404222400335500608733284461685888/3715278241795087610941547133490827711133909145414878217965273061493740719983191775105550559905283733134189195190321643965858771461560130864714477448011225816210219450040558581571206711791272284197614810026220745160693898421068168630870850392739817340370146186703867097982858560347971281142766235850971837330222970900661653800041795020382847588362774677568059355238174402415384788280852059532958121625","46353430636874284402376008361176880938798775506236714098123916668545331718677407145199311191108199195405139575147933283523305343027297808443653460575141799729554209181454676876263582758919969948546918471128299522715691694855904535448703118221685887195383025133924852224568922999317583667985459047407473419196367812949579858081181660610155317911318937349/9455890179897829052705408931064120820559254220394152447502395298827357144081378513080398823188243663943177539817982481713456798757563952162598464929784370305696420245648035222083207596797327498500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","13607414211126412689435920170832779523235279308039712294681570127241403406455725064605210473923965685858012114332021572088551127762628892611459785625407107300355287623761046438724706918300976102581928643740596336865698485838431972050267114940079353996100620311097561405192365496385584164725035842307146351211183443267583872067352881387294766804298681841402861626441205037637282007810811602289501477350144/2772205947240095684743358245950494400934136973845543049938212403703005150954425087866758842625041409060217562878157900197951382737615822655863548356735553650755342108183641353142157728364469706919993519071329069805875834057743793434164720370026073143626055293058601124362130539040404491770346043977106988100969901297669523170508321703496903672333781306743488573086901583022550356345156457496396749797875","23264350093315690507131500726914401771633259602904894387312742275462601574788485574913195967854009886824436237740789910851843045306673524324611130536719802717912615609109285261163220007241492964833933975789257681755002054890453747803418465119567389315754801791950553304034666399677630030683759466627797123971742061866928213780452325847848901682792886840980/4733430508316851445525799359992627142007028326865116523033957869609125212251136452396410236930025876982265915963089597825393317909648054808274488356887197933393799241941120691826916741647173843634076299630884655997401370400734954098249519111198509015387869462198674657171808841005212058822254513429836457539629035675822719720295352508916898476137111981397","538960934807826161927564251064896730663918579817797131801326848839524373936888402762331254883505157846659830555799909822861853145306547699817986010353774500545305596630924815657016569444824389893996399550343022444937690798126189162954188680257730893424775303801562327757655350002001080811866451425665301674688928515041429654624970707803336800125648742168380676815769457467038849213225206824671025803392/109517448833211208909213522579666376007937648875042608355810687327424621469323788799169718267715808580775296460944943658428295481347915131091297305260674731651980547668762317138753250458639043477453950774629862540017034566407286963562574188172753764978963685535201028286359818524519980885827473904574840285411260037264057197155527809916623487144493019982419606308144576939532055057697567269576800542875","24451481554350251656598350124163983489544445991992661049829014268366250968046589127810466483349378560701491445658725080497078590986743512397927747885285095846398852574219367580068049729894667374214861939897557930527646930793431512683750733092448862551580494245486308114129295467976874843852138144539250235632985676953662288536669286915983261820949386845806781/4962240683851186225340479316959605207278948397833849899236383273145853045488131674290332609876751222112917095096150531825255611911377071887145019702433883343849119017643117746273523770961304609989779231048095665388209125939879595509516490230961558353074751312876252070889983946768175488341370453053495319823381943793679003096504200440997908071027962806272000","166591964685609920525429719961758335887941461052357297159523350448241484106515158310298216150030768812873781356326923214637847449893575074813991141092681107583183275003570804134461187213143832123628701876041315736048451374824101256980832991214945762266748755723551899001458245164317581617731332466039757786839492869211248064662857987111284518155462148044812626055842061283907063784492325693994911811072/33765943466859756347231737285768516240749714264564410814839966011490233598006227246396923594069488496368994857718734549787000213944990695920130591750377483911116845697231074543526982580529937081378303555262933800375576494067959129682770065443667091668104132884375840812635624862495548888467575848428463895756394050252457592540570490061561616914443009224917652440212112452400106121785938739776611328125","142464729519206642943985715465196065680101634264787375740459792619754842396453535646509170066091478069799080172299369994438836484938378991283020978342879057271045033903518255546705211647900945143546293360496661466657600494787228476009216508124736254967761901224547269496682078470378676865981855568197705507111970901389105723589666709580851611656838285777566736/28839643075889294346635430272525349651555039807615358795334663734940126053968249608601725991946342449660829847322517564370606746964714098508298705743689729306507554363954348780144675937510900983622836770223945538844314468550644543502501484521561567788992156632892028591678742014134130878101553633195551605796158103033794695984958987367799607407626319024034625","380457154857422076784416625436182734840012277442496600178664323821064977485271288502806124740204295811759917468598315932331219906040253463960961995849761235911145436552991677050565022181516596464968316292789048809559129516930574340710998611088996508613850407294743457197519091160170604426002924022923388338999324182261954685794522778833029950214443271526469607532589775916381786492089432407550224137344640/76922142291839859196033215395526448408989799722090330866256930898223012427332209054699494033511478050536463051459450844520020426942553107946282832072826069342120835351421637970462054707566481086202287686453371483126873188020538661871147778312986131920021929455276187425940666580158173676284545586944833678819622895550345083175685846944633982680908505900099388037050135210936852210263717185637166725605577","79999800708369666670693340813609265988600461251844239982904928629083975986385235816587497657678297663151298709076884516168798694292862559083730259839524968813932151813233366175091317046758260934357096757322369138747731224414176608247605314668045838769433811781490030635374856042786947109101585097035794969502111354126773165391577217071956928171336060247633607/16154850265413610119312596299635391433380319311682208755390341659152160578366244774029302281068833963848811596545791104919556346810193385001196395489740571188884873246131813864782581356887110499639544662322008824704830818136660544673293865921754569356583698951612797219776290835161780326945625621758204931298948625885081325268123344406261740843197232316416000","26517014004241498798848003208133111307300592620947908933072661812816683085261359696887064436611747292468717739609776825664344064024535028242737616786238200200498291226984541942836459188328346609549239724653950302145388877472274074665166631509490297630344351573245265440164082334092997307729007429218385933622623935704482371360985836659823269511115937443161532987660855490906546130131716829909388620539153152/5348257529530073524280989257577050878033239486885664777340947102417077875628238501791711336803418503616042922880218860266611595594400020206192599559925169589023339295256084579966533260861249529670141854632965231468533448709363477120437277477668173149958267956654411822360053335695956270719680086524322530514249891157439878407417971839744392044064720476417844056346174795601710447583861127956455406902139625","71197348290771978405602732839537012310626009318133570890482364371056186523989330157966045289127980687764218363064941391483781008265266963537623770685390148810455244349859354857421474277963009857011653865476081389968122418691934354122230780300833008753686234433642072919923583176333668289998661499146617277981691372057042930131717336250309680764289256080895092/14342680993892886303954853579883363225921109635079605392320944523109187641283117181461662846411912306480691901515655220490850586434947504504317080144378185989596578890875561336496479576651516902048606328604696610314441229321219627021610788398730173161473456954861916116391687748151443335513249810808309201830214153565966339609616397865465842187404632568359375","342401018754023891059352629509715357053454506037284788725127073168445189422181540408896452651232759821766616850264122591225331120588918865882061344322996688880669665450231982002597398732201789017495427566260651180470635467002453249479483900268320570004293679361696197905823690145326531180324429318916092471863347575533714871355651558610515931373080997536792242278529575700808878786732127630024064418468916608/68894647682461956089382461406499759613691148650738957016015844830333168307020284281532026442272618372290646283794122772122665531108484704223311663270836645399554940741928358317884620420886609705267248656765357348477857852684140561714900614303731786621656041881975328169543884661780531057279582784036689401206706069028229798913082362331334839997133771880514515972024899408556517159759907883793675672065360125","190286571838805495686895463752492174798162827967490343625540320679760700551286395956241059969689020885714190883323266375067607282890063444652926151862650426323339187596278760962390404656342309737428214493422028545912504503974763216230927196187743439226243880933947417760147785405444976177822143722569696182520826218120595298059020305548681823408268556482981325/38242608291912408815838081993045123864617058390583394828737640036167893859507494091864963383596867701436244007905770284939991912884465101575490548813894148831966132970730263562113961685364216989999844961688441914455435934703797359360780356482629495214859917249465567846934284121032247250332634283689409883499295469118485912489058982596725212975311140618764288","15345379701153714436938289567639102307887273898834051456693981514956329731572600026866162286097662958712922836383881840211072389867463987895894067288699955858337488812343674818565432780224654423872618380928462939482247900055572079914753652915184313685270722583926261499687728814560680092231526501970431280783177357735398580700300402036873780385926225005561766822479878280891130232036389707452005183370152749056/3080426623087819678602049171756961824196425548529619576972793653585089380165862889092832375934535464160425580449193072125955685099151500755278763306599307218302635233595329082702148677300945556130106197481236122437978375963261172524503625593066102601042060541617791008722569799735202779005407381267021641545644264334109052258081225159748043792288699674153722046659880085850980843460715080965607434114275256125","36443601662144279337033484452272105547257065463167427418525882851507989449375452076227652634440476502702584889057376829320548464677623038648843251719168810701744338735202853412651160681259533015293997501525430222870696235141468274274064390273214484922080219643095978640300874086585386991338440415203863901714217818222666715642467237183267303214471854472286478344/7307237990148312451155090506264642657872224684879860008436735430879314349554023096366846856470375025555139219961666754780864835035902856314981482268319886395881809659368275720375576152008289949085453326722156553603358879420820012964006978808113307340321824660484441618487292138631579616351777191144073820686595597986548374588839763719082323114663844043046087375","1575294930860663922843149113097927168024893739962464327016763741314068438447271326302129681931564068796631337571133444163024224071270063174829664848259482066723104251718808936762938249028582992557822551950212098797718627418782376027133576209718376784834456568694813577764300716139817031545408608110880973380162736536313173329973171844528083756524804574267826691156368696436273087171467254161930265910972517504/315498546654512047637461608750018349421492986465373840347519942494904200733840189483934245529561231604050629653992944140351106887747105945984325466452136415067807666316202346895657914393512001212656936450425268507235863153258769360296536050028695266363553141327896064944506216017933135251875087069031098099192325817395958019524956320840925176589616439477134480262100237057953933117460110224783420562744140625","7692057599553133417225997786980128299372439542315125030077404519679450372805989755158000864378924877036225189784045171045139667691524763609840822628706422918926410377185494048355128046783294954373197082851501927410350313585640237550107070936498164597231431242858771457898152684298047446530220873884022213114819556822050178579707210264243087257050468000092842761/1538814487241112760739561704846381585063002784795057066438330325566843108114787083741788078680861495340026117682606689156065008672344707615420501964123121620401073675430690541617930520947170306763541251152854304975131871537939618684186766168376514664494488691311397307418298556185724993104760692216619178358268934740746932420562664234738576394742559349407744000","15190836470550557926140012263310230378455340797095100474720776113765300081463960235506950799869073894127884189857505951314428810423734978025409205413789025720642609035117121385453856877706229778165533034683130064865256448444765902482146676668197546098809055341050873494446231793312407516463576380102073171090898973046611572020564659042146465345334273595086941562425006763960197801018796906114925005810069684480/3035556598829526968124942916297025416522606357010637652635799096498208643970273828496655227572100159414352020909846298817521082538898702393916708804775798552206401718323929157863173504795127180177622667376867235806208021329981136637175570409791442328468473111768140746895005561471574356889047981458002257872092408771959478275534098789982899056118498417649167444480913552548249005268380838457505944462494874581","2923754549090941424546974281011770689534961442264350984393235983189168024079617848190236639328676436485460311093391982825027512234467853098757486086492333410753919927528867817406389678461354257841007722472106464785557179844602277350411593959136520732862935740433163383885526249897183805981219416420390137516812715245569037561966929572448247077578419534651990827044/583599691615378545100950777601104007812792435102945248411439102112424251478512952087517463400054567832353967731887062349496616445419782499817548928078665212077449420216892583997505908858360011413290038645573504472422610780073975450391707084016931661068694024023083417126286468909117254531307085545768412513447197205482285022417611018126886491416133665625891075125","441922815213568908489589193556560586318864326425397702047965372289295962228254658331201274291697626694859414786292266008476137667843874780506886929181835469302142365772763129838217316953835831059616268288399119642314758261677639945004547833810080700127847214666763863338091523753898362699222880772298183760217731228628442782431573977490761665091005756534420789258276075174436091798475838370152192077494553263232/88113527373573049332749294663402406454524640221866407165839162576979477138694653404281889227416977618913249275712917582743426231744980461918772793673202077716234026090308791893409200158969108910565467273725064769890443408324386897017825489615600787634985397885230455168591240328585041836771921929567914891379235573982442311269392541694564675053636078990836491104116280492254795616055818375774141667319774630875","91197133767962483852278456285591810579974783077874307589555559715577599604626819245000672929518645004771085106770784762994476973842713035791487204122653245797126906189270204029735872508462106527240320932458036231707311992868347221176460407003487373754014365881209649632547685657666691589606571865740595829983849941049450471212387808617247938941417000965198123059467/18163679611214677813643455199979098261849405189805364986036911945012016248297645596270602508015864371788974684317239728239847888960155365342460843559658233069613218442910226128113196984801126248862273503232000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","733396724434554481470656964167233690851279923085197144879644750437402627936723531635898542414136943003236478432848965516925891956615111678444586384493883113385335463639674699443808084827715994137410743992130712903997815471369201406683862985677774155704267039224546352414417632475628136460919900347977754644214725932476856018335195927604771408949980634142255497812566866795799230501026066145434755838336990365184/145912495644159810313026420025053989609942265686388630266226856650796088768164358961644113076809511566125145395699271530802891523741636707532676065833327082092521989958971154798465784847092870457944857590623097781956884297103961713362268264159015928554707158239398721416218953003215109202771651993622244788505649098445109438104466256408060944298437033058380804126574878377874459371251056800895394904459469832875","167606423853658713615749101123336326908381619586838606922565378505211386185130407423587264776519589295420758009764678759213587906216543160801059029133457062067529468464636376639307690657945597847080706144898920305379653754920571797771178341550808041652360635584401789901525709166172283390177673009483341826911179861584213314395893323035527116283758445038413646757280/33310364848744488727470761889861069993071965180756187311178124887286133554324042422503263994717993129539448310743598138364172889305532401505890384806078790034557049074169245078416704866867380089103064821732673967120808611636618526737138435792818828990403374766228037003927569643972203993263329403469747342204808360947840103843317533210523853631711601450617095736473","22466735478643771803624909352181817912387732117378538284107485621001246177152644141853604633676939694208131243081227668237716194316732125445041260568403752325416203858329469477774720998849334961751541191761521224644520742691981372782009394826739249604257098248751626957528543558542443122470657230835176462612530464044652140581367666271771882198747182114685116336512604038833327707163107207664705120728068987996560512/4460342260599110071819142535903990817893424192972341872394014748315090430999224107274777695306032783105944721337053156074851240201179902835353097683269298594190456286888326067932777720561181760369783486872666974623910515795208353605697065447942804414120030678603538761538385793829787734830129764152263691296719726909633580318897787729004972323599773548689272008712427926734258913271101899780538635213826239542884125","1972862002066252798837977155272535342727415329632252213508267781390870646909686724955861608046325765650407340102472833428905279473185818898693854344138403744757857928883601637909604082588338869612221777263582365745419719805587946558326048087138197694016224613118304623864709183681172362693106460535117459192992832969130895829916210933710820035479169562970982784580861/391262854245936198649509275719624152305206807261382621390946060636032376057385723427601113233050260359684153963520782285097664628279596618521963444574543409076428660874564026651742234728997339844161514273669735686516761239076529088145208958938384732800586298943281728435207452253170935715239392534815683367114290676180839217919539381651841151674859715992309727232000","25408691426286653276004556426513401767718328640048945917745783225459709487487356095164164652218100925888847689099153320777389381851598236046402124684511968385325107497047025485302333503075085562533472482645023963717347867696861885363417595298751490212495932766872748125111115039311507374363000062513977436921772096443948159289707996749061007112458126301618769295162649600673247799961118662602756889448152517364992/5033870770817104909025512331238419776407331281944565644457345507262881100618908405924951559853352841154730802006750688581603270849880756026262217651685813584900300357685874044482329601894134443542753690048962260914642678445058891387041919581376195543193199307524572671344323361282633828144708683536721118910549933336800461248338059209853766305058943888965279863852107507075916981165164543199352920055389404296875","616565940481577765011174617619124841631603944267256178093555235591208387588894068005162766513720546626399308168923904625210748051788652328072241494243040185611373035059619136712559505023703153194815611268503291295059648269772663939137446253437248541496631852986499688052678961495116210133458596866684413931188348798244969797973846568160999564540652111599082181871436/122025682149627484528651507368051367620578469392233875493556828623437869650284356703295836998178256875766319508797903923638967073687991229708051285605187358616531926112736402511567721889845693991963610192161413692928378708223712791930113386840109729368772998347036090902364801014045328348830748307179590755723160142468563977011700764517880467116766150322736003147125","979882056834583241477188686550561625289337025747787132773853690143359657519481397575561812727394470125172272246774578404543257210124412718725081536309818383310896102958167337333430555168671327992395916735022711297435263157670501117734412587691271084981140167017421900852550822579410636184333142944411060788723653596377015359036101170054828623669169047118551010102258802465554033173968468183492058271365801755986560/193732066620504775981759812703028757608600125742477178751189607602983198559778039141192492589734277739017909889924488699372940787977794555519474807920198944109549023547259912324279741006975129518191081373554817584214941629021088206977532599055014150433581544599721903881284581257812850697423350805715586436114842183295730680490110793225514602133304729484547181740290534056445482186430729398701311563285494964645419","1138059441890428903336718712159907364975959482163004276901676063186939296217569849990951930955270849692775077813359573394435924934540269310629731801376134549169322946310756738187834128956671195358413024062230774111935109203207768898525882417078119314003162592087920755572050993355843681931139257303484526223461840939880759908449181135029327442039666513325916729112853/224777393704985303260433439401503507705148576727364388720387174977154204629336985298082893443205223017966145098064861566754244624732671470935725326043491911142467178027013112527668183783450932992534517827863293825061296257420183669383719043873666284378647952385401303733274771042385666436214517205678674213118374889121542369996042313879258622144464565403138392064000","614262617634904509410555695398092190166323289787703954329113412647342230855826568873946233136303566178604275296873234926652080462259552775254755109931312516616838091852915397846984381183732773411263828600108443070778861986849272794442105107285234729077818614332155890946804257724112143631642663084660012362691100872465148864413343598067567142977134846266425075195546265101720326272502009234689388355365794889444257557504/121200854655310345878069155190734381476914416893031941761756379148622591310152793328910334357724762079139509813381997287954319983165971628429295803162563856219211627796200599196263868781937234015821367575512548522790158101892507996780675863234181700253545912643548466256938936835469646114659598727592390628209362096738343417775009361678599075671154405137663077798419897932404104579113056038271753988669813988076515476125","106893445531995430131837569895703697604978445859412739331042151546083234373443601923983714252801103551874986033841637079479794895452077803182698291822629713500021995241940133037200268381793282318691568234728329378829301282121562652452936297422136961147432559766896143081059518238234777055931999714973999553456547746825617168005650221542417216291412324174772893635832/21070287546583154895102927029203125577385528350171457634203261197137238923923245382493868134869009844094435068284335909266152042903157700510534904847257436666980671067329084409346149729385625108233234542133838924281113454526471855573271066865534480974484196644173270141056470857666632902827625475719738076524047736123182255306429677688129231682978570461273193359375","1112742798776748551928744983308584493817112400536084744850969025063360679785378789764875076529575583792571198510306186417773101346425704969671256564494135750783642910394213727189639661184379341961737135764570942961692159177189753139209638929302928699705042832922774012622017270172331722295881412111812933593370743210214549038212395941675257558442878012136484052827439007483777859391215222647499741572327725689840850048/219121905514652575155579185322367175400669386131891843382447432851122462422992147756333729893028362013318264155489537138133372703295804002840920402482110260590055749843170064921843460498824128274420925357547023876488939786863662801268798987685503391058250902634999352652063668663245829496836853509616873246554292796823779397317819134891873583857621623143253788854530146303641400986028503534408870194989478421253057625","983995170259637497940121707857673268620603982844439610076334749792119502557380361624096960070148627663305171311646851566811683351232268240169848810658089698606409195744471343416197434926513684882439596141368794175162315633192028977211909698595778839497844847281262559899914504080092844816319298286511436690429175757804604673752838786852277255064434365401871903307643705/193579499709739777577893639665643417521924510242119561765932078835121983190401762561436208758210519231103767232899529457440602166918701550386152070813526760823513884391055054076485295945972185402977095815609448651316824455250005505410192101148149284756928250258632031981439345164037318129987999546683113483700660879431801728391911161900686707231543216283304182063038464","30691013076836380319652884848585431917439358375118437035944950498156836885409110087616602043242747413728866747975631727566613593257623099549583001362246649928075859944695060947434885707102684568632559339383409378997568182445019183928058902445738702610436187907199482604867148445903921474846103586253320950728989228898324829144701782792767763794895137313050381112872972806712570559942583906619373159053654481250809168128/6031936190594376585238407905469035598668211679521553144958053099463931217856780171872253258738635531385711702176347575597387389685526098889278278029314982721284691198967204664771178761416891317672705719303088746953644978471289001577698554025410820041497108311270431130911021653860874238212040640737171103823631718483572464361276703378587106311153455557896527384426327053165214814954154328483257657424873929502112904625","33633002641218571027682690377239300567277297301791434890431645909447040830457253186262970747405514897340315490970846553666201190386457221846694126637998462873786334837901001833771510353365825087187582807843940479192544772559118293851131234910638705258664901225494129023244916125545283621607920983287799648992632814461828998517949449887522866259724675318233522060729654796/6603800575190864815125307817934327053530311915572323544225173935830559756077637251538096164499112411672913910767032482188570876526606118068929913515497400397562722669603861813453418621246538114872330536044519242663538662076583511078523573320035084744399535581216815034837553165853576616422592790103728141443697362408727056813977234078214386771115586436985105038873998875","9090550743395453237608373761422705922989356346696677314277463900103283296889488490217663400349361962695279888433677856471792856853109469433355422802663947305503479561493033851081993247556828544308258821557994512133708656174864544457143793106703578476914924328960109390350040954158797845288786321215010324565010420734044059968931558099077932776525974187717655105951506223649947806568984848883258144616897526257038550656/1783219994432430133950472014582130883873515063182143523712063859964133099770763874744121895885645346884371273930727450069430704145915261127061538288702855011220545530326588799412076879985026006593893648911637986337776174555198865379578424838210466703683642106934154603710587408512357351455891557594977191641529451749437270208258072920514602243985184744955476557012910446023911358037761232253615162335336208343505859375","396226087129511787616470716244996965529391571019620342657409150252952330537366537352182763477820160355931003174946109480036915624974500187179367618457008802667089004678925595775249725629495848146669773574395699032785024522882892752987825063933573399691764866816284097232869198405981830106568826923407996367321353003569052419999880089180418759265274331299787468134974811/77651132902382550540201641628906752945078964002822585000619340261128555048628863996784740469908853602590877726845475670110127527874088625214912598995012971630852593597027649154487264595100300180591016581254965295280089902497540043916128232871685159131211213497239568483141031137909208031392464815187505714066235868748950184065923236670418822911614780061752905170944000","1288523130900767412477856952035690867153496584747510253984686336382980221603917538996138294311274357713893956725672062832264871415025750136690143411884111580335458539824573239771267043414225271729141508235839982033182605445173050590151912297720800168687369852280323356691345317649445843078291369394324862039143247087442309135074453265658730028145500871559458519282433012494054724678302957276371418936282902434203225600/252284450515080370603949213084529993395050575951188044032908270470514999880554862449223347761507020354321422785760279154913310488296485989979706208254206974075438570521939826124860483842758137231373182496438568202110337751291106165654945352183167578675508602832478752400011567482434301614269579368882858973850914513870297071866544875650189106576672289734326492492059816669288907018095832842249738081022227281715919357","559506782175368748187145067236900803925823792088293851453005882621173124590368101213652371965740365119375069053747415415684193092607523211636912074219215053809881814859129515591479780669511533619258835199715146655774919418434080807837587396115955105126806762961292429904380132116986984435528307613054828929294602185927322238461491059740342387266084431988727321711184308176/109446188216864405154936682374609448082436347600301765944233278303643744736544109262794383069197271409398615846380701459882784547857821831816863216080069944818453908760476475874319791512782445408136169878207358663250499628002971644430164185578966399908622640732411885568638054229180673755690889471388585521113862492432946110902070139679164884208988489955874131206343597375","365842109776085256207829452385781129402656684569922320812625438296958174120084800064669048017227033185969596458778213306152397766619692644694641677223213185977626940193107608138827771259334379895020377700759789774994800008933137569543592829220611543060189849601828342989023692876182148818363689293009174358168826340010491728715549904988196347316703985894355217235339548078187164176255405596310602921647203428200269666176/71497266937783826306774367225149833789788300609530680399994804704196212252148324552193149332755057982662844988588678159610516634667597707204818296457616315484973288944637139939912166034691155272078609876888919170894915224022982785138928008133003473320018151370486895637936102520353951511525996197267572355782608352075229547764732602557133494648237258900273354364050662921889937355682486287799239363976556848320046933875","59378684894605773397070783936113244261297966863668546282887298999811950599772732377979382620766180662159460666220894896896564357533604962977968843474062092083279165837424210591042655271577974272394203253875965589611493384384257117088518521598379301169916060951350650621757237206805037261878212424267780312614942173870651684587166691539909068452932891649554575072205080763/11593916877920131260484148322810317629326850763057953025674154928920977965095141485536566217873796019006709247938019404840440511433467040918770165456925609124166970862430104329357419669175323763143377917913760028500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","440706629842402075137926797732405268015915199334341565218443748798479563505125605478061664327658137598204192554352688830679475840386882350034150077506804799859586772904929402683276898098601814091430598259347980573084686932949502809068565420937301632494387691284902026088950093888426872222813857928092871267130505744095697172494119689779474840037266295586359244899477781345249657455186847452249040895151288114085352974933708544/85971876318334010542313048056773419567285701852816309711738644074302467763075671531248793080425349570584102078764464196653843973936119037322000695949209283327606280423406302517302874806092835694196353778161663338667091195199032831587897410329509487165187753418615356836636352319310103639079123698118997500068644500893282438137614420288839230827096109835206605385673197123994357393257304049093683934224826006704198171592304125","13220371178312284248107863849287558696210741535280184003301555188086761767176560823174196915070378763091889333203635784037294769747641959860810039816533609140662043493962707445564057197150603226797446933532133956054671103942520142568674339411250001585991743608723150284270101326419464088290151483823061613403673956918458456165552482913079283537536214967294211244361353060/2576683013797055224377707713704899315377379548630511095136568220145808780162671473907260623503552385384482723173913562423316997528913651044277418227616447815609873991028073011738113927961824632868956802271260292075825561646156680740323686126811928372672670917332613490241615850953660246271541592056143611581223295045062157404996958100136358649109693659623847024011265147","1538372578072246705266078247950089219881197139399081643650271348770110178217959856819170325400476655944115553238940541695152110949081675985299189913515975242840473616169775880272489805123124548256666658584129873597192213080038937409046114908719298170078476325423466734429870048697383304265342125425087105698152643145531760853127801123272389134514333752173173161562273487752064850461823726948588221913540799816489566883798912/299566102446745552813544808169323270315327122249327394279467999308669285416179486075255023523726449428151807672528368606071047812907935426406886253284580296349349558797128593446316786243666290649442956134448480598303527795996222703837663605600624271807461605295956674925277658331760000117761013381199880905748188151556184620779667670278558839116983636972680749836497346863752662521197700717702790359162307617024566689271625","281696937222363685333688097915539146272117417024070728031063821781398985795813333650547982965341298894634762289669256129805545549280355643122501181852136332529515756074502902204877664395456278205770206019663082511098956468724829475220996427130295010430751942126263620206886404244432409164651524408198286831329682605959881993845189585640874220032515465014097345759490750307207/54806274927935495596891312029173862473687610099325998583092091915101265393157631244775387832621032230434007486602816972765210205596482942091518459849775458089575743699797096697542306049628939919466378189656065461708686421130956996965004776108499273871055615413566043083634090083096967567965373203683231171594922347812966905149873265654962896456451681332216735396249206784000","228506238533410805238253122961471637501498406104430046727793420497895852412513560203475440156216063574654372726194215013407325207763369075250819386897086702757125418327084312933061738392406321003231853349865003322697360659712771167066453430309997639548320673279964210730701373707765051246595806673865646607841876463608039111252607452843372970797479959213447237540830563469297144446069689149549515457318899981763489792/44418759813188470246596822974281932219088697005123285598909329328419879212164564561558656547678211265529803086702843380128457744445765859393426675396393053094588240457569380155526179040891009717323059641035189017918495485630657360525410506453554255734005459614858972904374739673834145083512160883402151636664208253116362089211658645312778404886460203600762546810897889629330022309705583438699250109493732452392578125","2396110297187570506257836426251930521245117960980667897194680897478996322590925380310917400763581787981992131769075961259393685331523600287377841990678117113566991100720996059187144934569703045966210306282348527729533806882408323961336166190162075154579344185244957673138372347997134388801085788353482276257401005734929059700346687783400772331280644647089520646562669857652648/465370154262863030800729180763091967573522779260407615567563274096037297593764955820626213827962697601334935773802201919483657310282236100250543992334865461800976838791035335861420892967699843608855185710753433852279737724446294443337363478679601049432404435672469098850676302728116369979460222148206944323730586138087862719386327396334468302608499235112520318322763857676375","1188272888075247520453568790651819187486389546755745961952033150576243575862120569399808467067800830890874391487822723879717525264875722720416173276963170672622214121308038530968291758445510982186014289745026439477197148445087614813262170975056866881909056450023324743409114115141145340480846088869807540798073417035168139476153897066325127540609756310068558610112731607522096096821938163134080426356894899245575410494080/230586762395914863625709048789913840511134004337945700368117795195769576856434588144361459740833007125516905017415184787078710001969815416281381427387949263792200577791644278234661952852149216540491852757174842146376788280677956350901082838474705227642420261641783722891948710833898248566893322144435457967452449965772543077421407816225704952270697016152452032506898311260979594550143344971416786595888053149375287120733","1072184299258468249004114536023934869518152618369895613271618698908405514630154819453979477077738526673716264830106745031385951736108376866253955319711026042389282009348594845497252059906901748860111986811345742998968284077119165082435598381810306691078037018432766116865792677955520465319184311529667642995217214507658693259694586107847099911341219913576038605872218680562047/207882129535607118520818565811162643811811563516006836924341123976848022970024793004700710992938987476728640943834012473687892481059618823520721737479364352887178017866425027953255856440099446112508663603319745066750522936408781591578321031173620445865113295407603090322283539974563690157418931060565698315406021569491751612761888641141446406531645379264720684248398299136000","158094023904374464057702010126993231151433474361820266584020400101533651587072432728050776506672527718975042616651177034635188178967462982926261516748842073587981953038445977514446838733557926696939591069712397947055261777416704028506441173540338327591514650398349069348381309688677335132100441905603664282735310299686268721634369502296867409514777359935022301425165750780988231639828675424239931533849896744198012747670272/30626384366513923671063955469537776291182594080083494737341604579575446319190916924682809546024369330706012653799783122328775875399363759308193432327358837772825609356553955350401725689682838701996446404559005896479618311357573203081153855961484398360670837599853294627153740224543175497655414585918231215639906924313779933211774291565425360415684556655021031131349317390382320286092667852173815259422737956767922154798375","12216278924286401897470540169822542417611356797676160128176706721343511598951866107858729405615631246003458062949723290192242594609994613705183460814797527214549142043573863947658832694800184691222426521703728394203722420336773310908687071670107794543022567943478843065246011544888390757810534211554666736239506503613750756246364621509359804902243487113673014588325806249988332/2364584127734680580481708368927921125934330000162935118371174269642831409084634375654239735054363928748162229294829526339927907778510530444646754603322373712788147193691037688552857183116332292048731726305451516954679277320777955342295564000586923227775208580772868590742136150431152495718132142742153643081187691849828217592954519485869135930755646768375299870967864990234375","578939195017447864385837341975558679292903716580114421030538728778491606282153588930983966100514147976321305616196463174070345884292672842497715966933722088536619333912687108737657068701352918582656105418491672377271304970407730786932913490869797471081081431072836814581099271832696990064828717287258860166842791984158634684078346453202928137987930328826212011774670396356151265781053547412633310327737900786639842674288716416/111966291649651600701875186827360807558960817589719096407887999108024557254221008849510152469119211567152616745769256123968832250104006560061907741567034087109512483357851919402017950812795426393415409198268246337542639470834168040295134130657073201020340432236723824670803498949071870597039309004562024033656488150406105175401372709011082725359382691270659245312133919518760328422827067578306005644825927050994860723405473375","8041514821545833865350873212853873042112343327573364523948780030849543753072688526717886590013028227714585965095216381829914996539132359247488639692828639170075726301411777307168737667077730792892326979446426349813642680537699905651125068091362135055902152994216233622733424128982011248923051410141033146604688083721413402395290842738021365861670415833356403364696759583009635/1553937833499559104910551811592138833189892464446761247731330672284191313590708439680460540329836344767557599746234213006493842842879398684745864919973051635127080738612248150108793397855113122368507483429209127035263504194847798809612278864438287815470711036548695032421148125849669175729331459149833945183228413961985381338162155596008680906676498435954178226973272371625984","12059659399309169167301353842123191409306995788633965680414620302285606896146667751472818541537183787935352700725982053536032930866708413010971856856768384974849695774437178790890015242323873769697407411558706626105140596160049735605389301414460825674631122462760014451298494875244754354054447697502521388381253293175367558014453865905104467382184997528879171136492277222127399012368677604910497789360212571238146627048080568400384/2328494054002703067219004484782931471919751585969487160602269605916676223315055450845942763690581877771159615428854802721943114463834992106300185328876910271612375509166975628540839858771078495267566008071532876816826751069408153323840515037497664871689085370699991860738368371510578076683395101062439493831773194498579620513073693022191702398601471237166387045790480861932005012807234071429628725981935147069738988682858417182625","683009426705008850682549700382901603742691705123356866338951397347368059105140826655486518416578697931244347554322654428162554903861783227680935341690740579867651545205562690172425016836559678937794312287639193745517811234257062356826622207475918293015140472942579713388671782202262396642735640315948612572908444501108579457520714632371056288874351015666995549139003946314085696/131769214246522869780429817236150406548549044658474416909806179734873399109656411633488099249198882165279745627038984487365589625562901914030850178330133080409420340227179447548044572594184601425691821617928130423410997853384425373999967759499571890326740433081063424903098252502791477854302204200941376983295622430177445507316706609802292121282957519571162158620971952084486375","1418116259749091420309271913909337143756589314597557128553117870573928055109322864794169592355058370891251425125187770724828108988587888087023982451205475980371440423992838481547236638456717520835668859093413956339261802305597694403381021863258753441889536361061407579332570493634254542013337999844407181346815549594836374497512447969751514466481466717590255369810506813543577735080228718660747940956248427356785784199073569408/273368882980516556922532339653303822104510203916024760371844491705599093435133738774975538364241630079468712981056336655766117378160822393876348755370711942273876284944422610974149712212944211513462921649872232656449940987552227525504529710373144228818606127541937831103642415534318303187393593236209298242574677293352798419428712873685798636474667204083938875672934235816396371477146089168375198141802684403955936431884765625","546411077581845999248238069684194831621691193366466972898628141511422317954477211865167402284211971296286346492698354214043840080181702652132835681239302798339667835439189275457116051279366194551632712819028177402221815140045210690908631767786711675029194359998826252332434573121740830827417293557234891406021102083555472155479148332697839972702631641910213821827820374586459319/105246945889799140338072754365901705544530661781295362563214285953881890233987516230568663143342952799036341701952267011236663118111226623815975847494372076420199418712941018288738590264475520229651370015377608638075866459684692488079223686296541020897904588347083045723167762682959422858996673894180805702299907478685374065593161226849447131100462022089783265346597553176576000","2398330640958841474772606439916070050977544535580605737383995160447105736276950196885906408317628083110923322157113892928963237845914017845444295040924101784423382681801754191301860383927129006953354739240926643562987838836997453985855576402628166875869041032631651591871962852884189548538272285387092843044669499688035134181859376665409767886188304314888753894905317929877238322615838524354191263502347881033855441181420399360/461588070868590122892265681879734295007029130965626060552783760068897000195207878227714842617470320231527222074701444349530952699708435668339712860464533455345665068841333232359698449088497137068713309811942968433868609329301082001752617420002377892756821532220676085014874112083615054550278903960627185675459015343606391094523511117705747842645927349130302549554534056269331809016770715819934970200483161548527932617036185253","6041015879424725383006424536130409209607854044642113747266098198777011981328765528361630516108680392500990580908509403483891763219659726090675140672989657743882183951954294745396417829943469201306594018454995862321821016087416840247422350906412007336103086620396467456181771583200365740253389107968122850063607085957109965406634738740996318415514360956028575560979203447735121436/1161752799109428422288020947061281540989708937450568100764830251908850596717606701047413407636907934320789870175907792017513896999208892282137299070761467096211814586909598705615312819596495636017728313513520193786266452836805291464826226833593878504804389728477191170027729963773716267868284479768397603444919008915279522376004326398403851684761808785381609370767169521034383625","13240077436443988749179508462267267187169441948722358165090554769250505713747934643200804819418670147225695324432684266924694524337920816452346599774452681831320005286326986675907899608537972384924882996757503264622991355949039882526389342174307168805166215838138277557052303430492669193939212362638263582899713198716541723383138016564027766560215944409353427176135895982596327685665844815618402881202645610620284792793420780517248/2544223084468158291883698813309541801455311468982232546872485444308211415529998472787377800559884210837213042932180479090277285630234238711851480232520137856848809986631784843528381778520727465146661792797924458540957133423665746229799675650290296217658444899605236550972043549278128087645211909479009099766619355677984218929672461506691980442071860591767266913041147587815452007726513853820116629482732060593116624596368806566625","1953999166296955830935495158735359200362904181792947794529339487489730042568305997099959302322956898299616194932283060554261566410988618045107398092345476532371402134206635235570281738377188438407703089325315446371127042537576093536896282955524842632708645655481028161471313608974238110718242273935956977555610147714316158486553633871312187084618154014921190595222799283957140353/375191165084882521037046014569185165885459082629136124177286500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"];if(t[e])return Be.quick.apply(null,t[e].split("/"));e=new Be(e);for(var n=new Be(0),r=e.subtract(new Be(1)),i=e.add(new Be(1)),s=0;s<80;s++){var a=new Be(2*s+1),o=Oe.bigpow(r.divide(i),a),l=a.clone().invert().multiply(o);n=n.add(l)}return n.multiply(new Be(2))},factorial:function(e){var t=e%1==0;if(t&&e<0)return NaN;if(!t)return Oe.gamma(e+1);for(var n=1,r=2;r<=e;r++)n*=r;return n},dfactorial:function(e){if(j(e)){var t=e%2==0,n=t?e/2:(e+1)/2,r=new Be(1);if(t)for(var i=1;i<=n;i++)r=r.multiply(new Be(2).multiply(new Be(i)));else for(i=1;i<=n;i++)r=r.multiply(new Be(2).multiply(new Be(i)).subtract(new Be(1)))}else r=Math.pow(2,(1+2*e-Math.cos(Math.PI*e))/4)*Math.pow(Math.PI,(Math.cos(Math.PI*e)-1)/4)*Oe.gamma(1+e/2);return r},GCD:function(){for(var e=ae([].slice.call(arguments).map((function(e){return Math.abs(e)}))).sort(),t=Math.abs(e.shift()),n=e.length;n-- >0;)for(var r=Math.abs(e.shift());;){if(0==(t%=r)){t=r;break}if(0==(r%=t))break}return t},QGCD:function(){for(var e=[].slice.call(arguments),t=e[0],n=1;n<e.length;n++){var r=e[n],i=t.isNegative()&&r.isNegative()?-1:1;t=r.gcd(t),i<0&&t.negate()}return t},LCM:function(e,t){return e*t/Oe.GCD(e,t)},pow:function(e,t){return e<0&&Math.abs(t)<1?1/t%2==0?NaN:-Math.pow(Math.abs(e),t):Math.pow(e,t)},factor:function(e){e=Number(e);var t=Math.sign(e);e=Math.abs(e);var n=Oe.ifactor(e),r=new Fe;for(var i in r.symbols={},r.group=d,n){var s=new Fe(1);s.group=c,s.value=i,s.power=new Fe(n[i]),r.symbols[i]=s}return r.updateHash(),1===e&&(r=new Fe(e)),t<0&&r.negate(),r},sfactor:function(e,t){t=t||{};var n=Math.floor(Math.sqrt(e));n>a[a.length-1]&&e<1e6&&fe(n);for(var r=a.length,i=0;i<r;i++)for(var s=a[i];e%s==0;)e/=s,t[s]=(t[s]||0)+1;return e>1&&(t[e]=1),t},ifactor:function(e){var t=new n(e);if("0"===(e=String(e)))return{0:1};var r=(e=new n(e)).sign?-1:1;e=e.abs();var i={};if(e.lt("65536"))i=Oe.sfactor(e,i);else{var s=function(e){e.isPrime()?i[e]=(i[e]||0)+1:i=Oe.sfactor(e,i)};try{for(var a=0;!e.abs().equals(1);){if(e.isPrime()){s(e);break}{function t(r){for(var i=new n(r),s=2,o=new n(r),l=new n(1);l.equals(1);){for(var u=0;u<=s&&l.equals(1);u++){if(a++>1e3)throw new Error("stopping");o=o.pow(2).add(1).mod(e),l=n.gcd(o.minus(i).abs(),e)}s*=2,i=o}return l.equals(e)?t(r+1):l}var o=t(2);s(o),e=e.divide(o)}}}catch(e){i={},s(t)}}if(-1===r){var l=ee($(i));i["-"+l]=i[l],delete i[l]}return i},boxfactor:function(e,t){t=t||200;for(var n,r,i=Math.floor(5/12*e),s=0,a=!1;n=Math.floor(e/i),0!=(r=e%i);){if(a)return[e,1];i=Math.max(r,i-r),a=++s>t}return[n,i,s]},fib:function(e){var t=Math.sign(e);e=Math.abs(e),t=ie(e)?t:Math.abs(t);for(var n=0,r=1,i=1,s=2;s<=e;s++)i=n+r,n=r,r=i;return i*t},mod:function(e,t){return e%t},integer_part:function(e){return Math.sign(e)*Math.floor(Math.abs(e))},simpson:function(e,t,n,r){var i=function(e,t,n){var r=e(t);return isNaN(r)&&(r=e(1===n?t+1e-12:t-1e-12)),r};r=r||1e-4;var s=Math.abs(Math.floor((n-t)/r));s%2!=0&&s++;for(var a=(n-t)/s,o=i(e,t,1),l=!1,u=t+a,c=1;c<s;c++)o+=(l?2:4)*i(e,u,1),l=!l,u+=a;return(o+i(e,u,2))*(a/3)},num_integrate:function(e,t,n,r,i){if(i<0)throw new Error("max depth cannot be negative");function s(e,t,n,r,i,a,o,l,u,c,h){if(h.nanEncountered)return NaN;var p,f,m,d,g,v,y,w,b,x;if(f=e(t+.25*(p=n-t)),m=e(n-.25*p),isNaN(f))h.nanEncountered=!0;else if(isNaN(m))h.nanEncountered=!0;else if(x=((v=(d=p*(r+4*f+i)/12)+(g=p*(i+4*m+a)/12))-o)/15,!(h.maxDepthCount>1e3*u))return c>u?(h.maxDepthCount++,v+x):Math.abs(x)<l?v+x:(w=s(e,t,y=t+.5*p,r,f,i,d,.5*l,u,c+1,h),isNaN(w)?(h.nanEncountered=!0,NaN):(b=s(e,y,n,i,m,a,g,.5*l,u,c+1,h),isNaN(b)?(h.nanEncountered=!0,NaN):w+b))}var a;try{a=function(e,t,n,r,i){var a={maxDepthCount:0,nanEncountered:!1};void 0===r&&(r=1e-9),void 0===i&&(i=45);var o=e(t),l=e(.5*(t+n)),u=e(n),c=s(e,t,n,o,l,u,(o+4*l+u)*(n-t)/6,r,i,1,a);if(a.maxDepthCount>0&&N("integrate-adaptive-simpson: Warning: maximum recursion depth ("+i+") reached "+a.maxDepthCount+" times"),a.nanEncountered)throw new Error("Function does not converge over interval!");return c}(e,t,n,r,i)}catch(r){return Oe.simpson(e,t,n)}return ne(a,12)},Ci:function(e){for(var t=0,n=1;n<20;n++){var r=2*n;t+=Math.pow(-1,n)*Math.pow(e,r)/(r*Oe.factorial(r))}return Math.log(e)+.5772156649015329+t},Si:function(e){for(var t=0,n=0;n<20;n++){var r=2*n;t+=Math.pow(-1,n)*Math.pow(e,r+1)/((r+1)*Oe.factorial(r+1))}return t},Ei:function(e){if(0===Number(e))return-1/0;for(var t=0,n=1;n<30;n++)t+=Math.pow(e,n)/(n*Oe.factorial(n));return.5772156649015329+Math.abs(Math.log(e))+t},Shi:function(e){for(var t,n,r=0,i=0;i<30;i++)n=1+(t=2*i),r+=Math.pow(e,n)/(n*n*Oe.factorial(t));return r},Chi:function(e){var t;return t=function(e){return(Math.cosh(e)-1)/e},Math.log(e)+.5772156649015329+Oe.num_integrate(t,.002,e,.001)},Li:function(e){return Oe.Ei(Oe.bigLog(e))},gamma_incomplete:function(e,t){for(var n=e-1,r=0,i=(t=t||0,0);i<n;i++)r+=Math.pow(t,i)/Oe.factorial(i);return Oe.factorial(n)*Math.exp(-t)*r},step:function(e){return e>0?1:e<0?0:.5},rect:function(e){return.5===(e=Math.abs(e))?e:e>.5?0:1},sinc:function(e){return e.equals(0)?1:Math.sin(e)/e},tri:function(e){return(e=Math.abs(e))>=1?0:1-e},nthroot:function(e,t){if(e instanceof Be||(e=new Be(e.toString())),t instanceof Be||(t=new Be(t.toString())),t.equals(1))return e;var n,r,i,s=e.divide(new Be(2)),a=new Be(1e-15),o=t.clone().invert(),l=t.subtract(new Be(1));do{var u=Oe.bigpow(s,l),c=o.multiply(e.divide(u).subtract(s)).toDecimal(25);if(n=Be.create(c),i)break;s=s.add(n),c=n.toDecimal(),i=!!r&&r===c,r=c}while(n.abs().gte(a));return s},sqrt:function(e){var t,n,r,i;e instanceof Be||(e=new Be(e));var s=0,a=!1,o=new Be(1e-20);t=e.divide(new Be(2));do{if(s>1e3)throw new Error("Unable to calculate square root for "+e);t=t.add(e.divide(t)).divide(new Be(2)),t=new Be(t.decimal(30)),n=e.subtract(t.multiply(t)),i=!!r&&r.equals(n),(n.clone().abs().lessThan(o)||i)&&(a=!0),r=n,s++}while(!a);return t}};function ke(e,t,r,i){var s="hash"===t,a=void 0,v=s?void 0:t,w="decimal"===v||"decimals"===v;function b(e){switch(t){case"decimals":case"decimal":return a=a||function(e){return!1},e.valueOf();case"recurring":a=a||function(e){return-1!==e.indexOf("'")};var r=e.toString();if(0===(g=/^-?\d+(?:\/\d+)?$/.exec(r)).length)return r;var i=g[0].split("/"),s=!1,o=Number(i[0]);o<0&&(o=-o,s=!0);var u=Number(i[1]);u||(u=1);var c=10*(o-(b=Math.floor(o/u))*u);for(b=b.toString()+".";c&&c<u;)c*=10,b+="0";for(var h="",p=[],f=0;;){if(void 0!==p[c])return(s?"-":"")+(b+h.slice(0,p[c])+"'"+h.slice(p[c])+"'").replace("'0'","").replace(/\.$/,"");var m=Math.floor(c/u),d=c-m*u;p[c]=f,h+=m.toString(),f+=1,c=10*d}case"mixed":var g;if(a=a||function(e){return-1!==e.indexOf("/")},r=e.toString(),0===(g=/^-?\d+(?:\/\d+)?$/.exec(r)).length)return r;i=g[0].split("/");var v=new n(i[0]),y=new n(i[1]);y.equals(0)&&(y=new n(1));var w=v.divmod(y),b=w.quotient,x=w.remainder,M="-"===i[0][0]||b.equals(0)||x.equals(0)?"":"+";return(b.equals(0)?"":b.toString())+M+(x.equals(0)?"":x.toString()+"/"+i[1]);case"scientific":return a=a||function(e){return!1},new ze(e.valueOf()).toString(l.SCIENTIFIC_MAX_DECIMAL_PLACES);default:return a=a||function(e){return-1!==e.indexOf("/")},e.toString()}}if(w&&void 0===i&&(i=16),U(e)){var x="",M="",S="",_=e.group||r,E=e.value;if(!s){var T=b(e.multiplier);"-1"==T&&"-1"===String(e.multiplier)&&(S="-",T="1"),"1"!=T&&(x=T);var A=e.power?b(e.power):"";"1"!=A&&(M=U(A)?ke(A,v):A)}switch(_){case u:x="";var L=i&&w?e.multiplier.toDecimal(i):b(e.multiplier);E="-1"==String(e.multiplier)?"1":L,M="";break;case m:E=e.collectSymbols().map((function(e){var t=ke(e,v,r,i);return"0"==t&&(t=""),t})).sort().join("+").replace(/\+\-/g,"-");break;case g:E=e.collectSymbols().map((function(e){var t=ke(e,v,r,i);return"0"==t&&(t=""),t})).sort().join("+").replace(/\+\-/g,"-");break;case d:E=e.collectSymbols((function(e){var t=e.group;return(t===m||t===g)&&e.power.equals(1)&&e.multiplier.equals(1)?Y(ke(e,v)):ke(e,v)})).join("*");break;case p:var C=e.previousGroup,R=e.power.group;C===m&&(E=e.collectSymbols(ke,v).join("+").replace("+-","-")),C===u||C===h||C===f||s||(E=Y(E)),R!==g&&R!==d&&R!==m&&"1"==e.power.multiplier.toString()||!M||(M=Y(M))}if(_===f&&(E=e.fname+Y(e.args.map((function(e){return ke(e,v)})).join(","))),_===f&&e.fname in o){var N=ke(e.args[0]),P=ke(e.args[1]);e.args[0].isComposite()&&(N=Y(N)),e.args[1].isComposite()&&(P=Y(P)),E=N+o[e.fname]+P}M&&_!==p&&a(M)&&(M=Y(M)),((_===g||_===m)&&(x&&"1"!=x||"-"===S)||(_===d||_===g||_===m)&&M&&"1"!=M||!s&&_===c&&-1==E||e.fname===y)&&(E=Y(E)),i&&("decimal"===t||"decimals"===t&&x)&&(x=ne(x,i));var I=S+x;if(x&&a(x)&&(I=Y(I)),M<0&&(M=Y(M)),x&&(I+="*"),M){if("e"===E&&l.E_TO_EXP)return I+"exp"+Y(M);M=l.POWER_OPERATOR+M}_===p&&"-"===E.charAt(0)&&(E=Y(E));var O=I+E;return e.parens&&(O=Y(O)),O+M}if(q(e)){for(var k=e.elements.length,D=(I=[],0);D<k;D++)I.push(e.elements[D].text(t));return"["+I.join(",")+"]"}try{return e.toString()}catch(e){return""}}function De(e){if(O(e))return[e];for(var t=e,n=1,r=[];n<t;){var i=e/n,s=Math.floor(i);if(i-s<=2220446049250313e-31&&n>1){if(O(n)&&(-1===a.indexOf(n)&&a.push(n),r.push(n)),O(s)){r.push(s);break}t=s}n++}return r.sort((function(e,t){return e-t}))}function Ue(e){this.symbol=e}function ze(e){return this instanceof ze?((e=String(void 0===e?0:e)).startsWith("-")?(this.sign=-1,e=e.substr(1,e.length)):this.sign=1,ze.isScientific(e)?this.fromScientific(e):this.convert(e),this):new ze(e)}function ze(e){return this instanceof ze?((e=String(void 0===e?0:e)).startsWith("-")?(this.sign=-1,e=e.substr(1,e.length)):this.sign=1,ze.isScientific(e)?this.fromScientific(e):this.convert(e),this):new ze(e)}function Be(e){if(e instanceof Be)return e;if(void 0===e)return this;try{if(j(e))try{this.num=n(e),this.den=n(1)}catch(t){return Be.simple(e)}else{var t=e instanceof r?He.quickConversion(e):He.convert(e);this.num=new n(t[0]),this.den=new n(t[1])}}catch(t){return Be.simple(e)}}function Fe(e){var t="Infinity"===e;return this instanceof Fe?(e instanceof r&&(e=e.toString()),/^(\-?\+?\d+)\.?\d*e?\-?\+?\d*/i.test(e)||e instanceof r?(this.group=u,this.value=v,this.multiplier=new Be(e)):(this.group=h,P(e),this.value=e,this.multiplier=new Be(1),this.imaginary=e===l.IMAGINARY,this.isInfinity=t),this.power=new Be(1),this):new Fe(e)}function qe(){var e=this,t={},n={names:[],actions:[]};function i(e,t){this.start=e,this.end=t}function s(){this.elements=[]}function a(e,t,n){if(this.type=t,this.value=e,void 0!==n&&(this.column=n+1),t===a.OPERATOR){var r=T[e];for(var i in r)this[i]=r[i]}else t===a.FUNCTION&&(this.precedence=a.MAX_PRECEDENCE,this.leftAssoc=!1)}i.prototype.isConstant=function(){return this.start.isConstant()&&this.end.isConstant()},i.prototype.text=function(){return ke(this.start)+":"+ke(this.end)},s.prototype.append=function(e){this.elements.push(e)},s.prototype.getItems=function(){return this.elements},s.prototype.toString=function(){return e.pretty_print(this.elements)},s.create=function(e){var t=new s;return e&&t.append(e),t},a.prototype.toString=function(){return this.value},a.prototype.toString=function(){return this.is_prefix?"`"+this.value:this.value},a.OPERATOR="OPERATOR",a.VARIABLE_OR_LITERAL="VARIABLE_OR_LITERAL",a.FUNCTION="FUNCTION",a.UNIT="UNIT",a.KEYWORD="KEYWORD",a.MAX_PRECEDENCE=999,this.classes={Collection:s,Slice:i,Token:a};var o={prec:void 0,cos:function(t,n){var r,i;return r=e.parse(Math.cos(t)*Math.cosh(n)),i=e.parse(Math.sin(t)*Math.sinh(n)),e.subtract(r,e.multiply(i,Fe.imaginary()))},sin:function(t,n){var r,i;return r=e.parse(Math.sin(t)*Math.cosh(n)),i=e.parse(Math.cos(t)*Math.sinh(n)),e.subtract(r,e.multiply(i,Fe.imaginary()))},tan:function(t,n){var r,i;return r=e.parse(Math.sin(2*t)/(Math.cos(2*t)+Math.cosh(2*n))),i=e.parse(Math.sinh(2*n)/(Math.cos(2*t)+Math.cosh(2*n))),e.add(r,e.multiply(i,Fe.imaginary()))},sec:function(t,n){var r=this.removeDen(this.cos(t,n));return e.subtract(r[0],e.multiply(r[1],Fe.imaginary()))},csc:function(t,n){var r=this.removeDen(this.sin(t,n));return e.add(r[0],e.multiply(r[1],Fe.imaginary()))},cot:function(t,n){var r=this.removeDen(this.tan(t,n));return e.subtract(r[0],e.multiply(r[1],Fe.imaginary()))},acos:function(t,n){var r,i,s,a,o;return r=this.fromArray([t,n]),o=e.pow(r.clone(),new Fe(2)),i=e.expand(o),s=e.multiply(Y(e.subtract(new Fe(1),i)),Fe.imaginary()),a=Me(e.expand(e.add(r.clone(),s))),e.expand(e.multiply(Fe.imaginary().negate(),a))},asin:function(t,n){return e.subtract(e.parse("pi/2"),this.acos(t,n))},atan:function(t,n){return t.equals(0)&&(n.equals(1)||n.equals(-1))?e.parse(`${Fe.infinity()}*${l.IMAGINARY}*${n}`):(a=o.fromArray([t,n]),r=e.expand(e.multiply(Fe.imaginary(),a.clone())),i=Me(e.expand(e.subtract(new Fe(1),r.clone()))),s=Me(e.expand(e.add(new Fe(1),r.clone()))),e.expand(e.multiply(e.divide(Fe.imaginary(),new Fe(2)),e.subtract(i,s))));var r,i,s,a},asec:function(e,t){var n=this.removeDen([e,t]);return n[1].negate(),this.acos.apply(this,n)},acsc:function(e,t){var n=this.removeDen([e,t]);return n[1].negate(),this.asin.apply(this,n)},acot:function(e,t){var n=this.removeDen([e,t]);return n[1].negate(),this.atan.apply(this,n)},cosh:function(t,n){var r,i;return r=e.parse(Math.cosh(t)*Math.cos(n)),i=e.parse(Math.sinh(t)*Math.sin(n)),e.add(r,e.multiply(i,Fe.imaginary()))},sinh:function(t,n){var r,i;return r=e.parse(Math.sinh(t)*Math.cos(n)),i=e.parse(Math.cosh(t)*Math.sin(n)),e.add(r,e.multiply(i,Fe.imaginary()))},tanh:function(t,n){var r,i;return r=e.parse(Math.sinh(2*t)/(Math.cos(2*n)+Math.cosh(2*t))),i=e.parse(Math.sin(2*n)/(Math.cos(2*n)+Math.cosh(2*t))),e.subtract(r,e.multiply(i,Fe.imaginary()))},sech:function(t,n){var r=this.removeDen(this.cosh(t,n));return e.subtract(r[0],e.multiply(r[1],Fe.imaginary()))},csch:function(t,n){var r=this.removeDen(this.sinh(t,n));return e.subtract(r[0],e.multiply(r[1],Fe.imaginary()))},coth:function(t,n){var r=this.removeDen(this.tanh(t,n));return e.add(r[0],e.multiply(r[1],Fe.imaginary()))},acosh:function(t,n){var r,i,s;return s=this.fromArray([t,n]),r=Y(e.add(s.clone(),new Fe(1))),i=Y(e.subtract(s.clone(),new Fe(1))),e.expand(Me(e.add(s,e.expand(e.multiply(r,i)))))},asinh:function(t,n){var r,i;return i=this.fromArray([t,n]),r=Y(e.add(new Fe(1),e.expand(e.pow(i.clone(),new Fe(2))))),e.expand(Me(e.add(i,r)))},atanh:function(t,n){var r,i,s;return s=this.fromArray([t,n]),r=Me(e.add(s.clone(),new Fe(1))),i=Me(e.subtract(new Fe(1),s)),e.expand(e.divide(e.subtract(r,i),new Fe(2)))},asech:function(e,t){var n=this.removeDen([e,t]);return n[1].negate(),this.acosh.apply(this,n)},acsch:function(e,t){var n=this.removeDen([e,t]);return n[1].negate(),this.asinh.apply(this,n)},acoth:function(e,t){var n=this.removeDen([e,t]);return n[1].negate(),this.atanh.apply(this,n)},sqrt:function(t){var n,r,i,s,a;return n=t.realpart(),r=t.imagpart(),i=Fe.hyp(n,r),s=e.add(n.clone(),i),a=Y(e.multiply(new Fe(2),s.clone())),e.add(e.divide(s.clone(),a.clone()),e.multiply(e.divide(r,a),Fe.imaginary()))},log:function(t,n){var i,s,a;return i=Me(Fe.hyp(t,n)),a=l.USE_BIG?Fe(r.atan2(n.multiplier.toDecimal(),t.multiplier.toDecimal())):Math.atan2(n,t),s=e.parse(a),e.add(i,e.multiply(Fe.imaginary(),s))},erf:(t,n)=>e.symfunction("erf",[t]),removeDen:function(t){var n,r,i;return W(t)?(r=t[0],i=t[1]):(r=t.realpart(),i=t.imagpart()),n=Math.pow(r,2)+Math.pow(i,2),[e.parse(r/n),e.parse(i/n)]},fromArray:function(t){return e.add(t[0],e.multiply(Fe.imaginary(),t[1]))},evaluate:function(t,n){var r,i,s;if(s=t.power.sign(),t.power=t.power.abs(),t.power.greaterThan(1)&&(t=e.expand(t)),s<0){var a=this.removeDen(t);r=a[0],i=a[1]}else r=t.realpart(),i=t.imagpart();return r.isConstant("all")&&i.isConstant("all")?this[n].call(this,r,i):e.symfunction(n,[t])}},v=this.trig={cos:function(t){if(t.equals("pi")&&t.multiplier.den.equals(2))return new Fe(0);if(l.PARSE2NUMBER){if(t.equals(new Fe(l.PI/2)))return new Fe(0);if(t.isConstant())return l.USE_BIG?new Fe(r.cos(t.multiplier.toDecimal())):new Fe(Math.cos(t.valueOf()));if(t.isImaginary())return o.evaluate(t,"cos")}if(t.equals(0))return new Fe(1);var n,i=!1,s=Le(t.multiplier.toDecimal()),a=t.multiplier.abs();if(t.multiplier=a,t.isPi()&&t.isLinear())if(j(a))n=new Fe(ie(a)?1:-1);else{Number(a.num);var u=Number(a.den);2===u?n=new Fe(0):3===u?(n=e.parse("1/2"),i=!0):4===u?(n=e.parse("1/sqrt(2)"),i=!0):6===u?(n=e.parse("sqrt(3)/2"),i=!0):n=e.symfunction("cos",[t])}return!i||2!==s&&3!==s||n.negate(),n||(n=e.symfunction("cos",[t])),n},sin:function(t){if(l.PARSE2NUMBER){if(t.isConstant())return t%Math.PI==0?new Fe(0):l.USE_BIG?new Fe(r.sin(t.multiplier.toDecimal())):new Fe(Math.sin(t.valueOf()));if(t.isImaginary())return o.evaluate(t,"sin")}if(t.equals(0))return new Fe(0);var n,i=!1,s=Le(t.multiplier.toDecimal()),a=t.multiplier.sign(),u=t.multiplier.abs();if(t.multiplier=u,t.equals("pi"))n=new Fe(0);else if(t.isPi()&&t.isLinear())if(j(u))n=new Fe(0);else{u.num;var c=u.den;2==c?(n=new Fe(1),i=!0):3==c?(n=e.parse("sqrt(3)/2"),i=!0):4==c?(n=e.parse("1/sqrt(2)"),i=!0):6==c?(n=e.parse("1/2"),i=!0):n=e.multiply(new Fe(a),e.symfunction("sin",[t]))}return n||(n=e.multiply(new Fe(a),e.symfunction("sin",[t]))),!i||3!==s&&4!==s||n.negate(),n},tan:function(t){if(l.PARSE2NUMBER){if(t%Math.PI==0&&t.isLinear())return new Fe(0);if(t.isConstant())return l.USE_BIG?new Fe(r.tan(t.multiplier.toDecimal())):new Fe(Math.tan(t.valueOf()));if(t.isImaginary())return o.evaluate(t,"tan")}var n,i=!1,s=Le(t.multiplier.toDecimal()),a=t.multiplier;if(t.multiplier=a,t.isPi()&&t.isLinear())if(j(a))n=new Fe(0);else{a.num;var u=a.den;if(2==u)throw new we("tan is undefined for "+t.toString());3==u?(n=e.parse("sqrt(3)"),i=!0):4==u?(n=new Fe(1),i=!0):6==u?(n=e.parse("1/sqrt(3)"),i=!0):n=e.symfunction("tan",[t])}return n||(n=e.symfunction("tan",[t])),!i||2!==s&&4!==s||n.negate(),n},sec:function(t){if(l.PARSE2NUMBER)return t.isConstant()?l.USE_BIG?new Fe(new r(1).dividedBy(r.cos(t.multiplier.toDecimal()))):new Fe(Oe.sec(t.valueOf())):t.isImaginary()?o.evaluate(t,"sec"):e.parse(J("1/cos({0})",t));var n,i=!1,s=Le(t.multiplier.toDecimal()),a=t.multiplier.abs();if(t.multiplier=a,t.isPi()&&t.isLinear())if(j(a))n=new Fe(ie(a)?1:-1);else{a.num;var u=a.den;if(2==u)throw new we("sec is undefined for "+t.toString());3==u?(n=new Fe(2),i=!0):4==u?(n=e.parse("sqrt(2)"),i=!0):6==u?(n=e.parse("2/sqrt(3)"),i=!0):n=e.symfunction("sec",[t])}return!i||2!==s&&3!==s||n.negate(),n||(n=e.symfunction("sec",[t])),n},csc:function(t){if(l.PARSE2NUMBER)return t.isConstant()?l.USE_BIG?new Fe(new r(1).dividedBy(r.sin(t.multiplier.toDecimal()))):new Fe(Oe.csc(t.valueOf())):t.isImaginary()?o.evaluate(t,"csc"):e.parse(J("1/sin({0})",t));var n,i=!1,s=Le(t.multiplier.toDecimal()),a=t.multiplier.sign(),u=t.multiplier.abs();if(t.multiplier=u,t.isPi()&&t.isLinear()){if(j(u))throw new we("csc is undefined for "+t.toString());u.num;var c=u.den;2==c?(n=new Fe(1),i=!0):3==c?(n=e.parse("2/sqrt(3)"),i=!0):4==c?(n=e.parse("sqrt(2)"),i=!0):6==c?(n=new Fe(2),i=!0):n=e.multiply(new Fe(a),e.symfunction("csc",[t]))}return n||(n=e.multiply(new Fe(a),e.symfunction("csc",[t]))),!i||3!==s&&4!==s||n.negate(),n},cot:function(t){if(l.PARSE2NUMBER)return t%(Math.PI/2)==0?new Fe(0):t.isConstant()?l.USE_BIG?new Fe(new r(1).dividedBy(r.tan(t.multiplier.toDecimal()))):new Fe(Oe.cot(t.valueOf())):t.isImaginary()?o.evaluate(t,"cot"):e.parse(J("1/tan({0})",t));var n,i=!1,s=Le(t.multiplier.toDecimal()),a=t.multiplier;if(t.multiplier=a,t.isPi()&&t.isLinear()){if(j(a))throw new we("cot is undefined for "+t.toString());a.num;var u=a.den;2==u?n=new Fe(0):3==u?(n=e.parse("1/sqrt(3)"),i=!0):4==u?(n=new Fe(1),i=!0):6==u?(n=e.parse("sqrt(3)"),i=!0):n=e.symfunction("cot",[t])}return n||(n=e.symfunction("cot",[t])),!i||2!==s&&4!==s||n.negate(),n},acos:function(t){if(l.PARSE2NUMBER){if(t.isConstant()){if(t.gt(1)||t.lt(-1)){var n=t.toString();return Ne(he(`pi/2-asin(${n})`))}return l.USE_BIG?new Fe(r.acos(t.multiplier.toDecimal())):new Fe(Math.acos(t.valueOf()))}if(t.isImaginary())return o.evaluate(t,"acos")}return e.symfunction("acos",arguments)},asin:function(t){if(l.PARSE2NUMBER){if(t.isConstant()){if(t.gt(1)||t.lt(-1)){var n=l.IMAGINARY,i=t.multiplier.toDecimal();return Ne(he(`${n}*log(sqrt(1-${i}^2)-${n}*${i})`))}return l.USE_BIG?new Fe(r.asin(t.multiplier.toDecimal())):new Fe(Math.asin(t.valueOf()))}if(t.isImaginary())return o.evaluate(t,"asin")}return e.symfunction("asin",arguments)},atan:function(t){var n;if(t.equals(0))n=new Fe(0);else{if(l.PARSE2NUMBER)return t.isConstant()?l.USE_BIG?new Fe(r.atan(t.multiplier.toDecimal())):new Fe(Math.atan(t.valueOf())):t.isImaginary()?o.evaluate(t,"atan"):e.symfunction("atan",arguments);n=t.equals(-1)?e.parse("-pi/4"):e.symfunction("atan",arguments)}return n},asec:function(t){if(l.PARSE2NUMBER){if(t.equals(0))throw new be("Input is out of the domain of sec!");if(t.isConstant())return v.acos(t.invert());if(t.isImaginary())return o.evaluate(t,"asec")}return e.symfunction("asec",arguments)},acsc:function(t){if(l.PARSE2NUMBER){if(t.isConstant())return v.asin(t.invert());if(t.isImaginary())return o.evaluate(t,"acsc")}return e.symfunction("acsc",arguments)},acot:function(t){if(l.PARSE2NUMBER){if(t.isConstant())return new e.add(e.parse("pi/2"),v.atan(t).negate());if(t.isImaginary())return o.evaluate(t,"acot")}return e.symfunction("acot",arguments)},atan2:function(t,n){if(t.equals(0)&&n.equals(0))throw new we("atan2 is undefined for 0, 0");return l.PARSE2NUMBER&&t.isConstant()&&n.isConstant()?new Fe(Math.atan2(t,n)):e.symfunction("atan2",arguments)}},S=this.trigh={cosh:function(t){if(l.PARSE2NUMBER){if(t.isConstant())return new Fe(Math.cosh(t.valueOf()));if(t.isImaginary())return o.evaluate(t,"cosh")}return e.symfunction("cosh",arguments)},sinh:function(t){if(l.PARSE2NUMBER){if(t.isConstant())return new Fe(Math.sinh(t.valueOf()));if(t.isImaginary())return o.evaluate(t,"sinh")}return e.symfunction("sinh",arguments)},tanh:function(t){if(l.PARSE2NUMBER){if(t.isConstant())return new Fe(Math.tanh(t.valueOf()));if(t.isImaginary())return o.evaluate(t,"tanh")}return e.symfunction("tanh",arguments)},sech:function(t){return l.PARSE2NUMBER?t.isConstant()?new Fe(Math.sech(t.valueOf())):t.isImaginary()?o.evaluate(t,"sech"):e.parse(J("1/cosh({0})",t)):e.symfunction("sech",arguments)},csch:function(t){return l.PARSE2NUMBER?t.isConstant()?new Fe(Math.csch(t.valueOf())):t.isImaginary()?o.evaluate(t,"csch"):e.parse(J("1/sinh({0})",t)):e.symfunction("csch",arguments)},coth:function(t){return l.PARSE2NUMBER?t.isConstant()?new Fe(Math.coth(t.valueOf())):t.isImaginary()?o.evaluate(t,"coth"):e.parse(J("1/tanh({0})",t)):e.symfunction("coth",arguments)},acosh:function(t){return l.PARSE2NUMBER&&t.isImaginary()?o.evaluate(t,"acosh"):l.PARSE2NUMBER?he(e.parse(J(l.LOG+"(({0})+sqrt(({0})^2-1))",t.toString()))):e.symfunction("acosh",arguments)},asinh:function(t){return l.PARSE2NUMBER&&t.isImaginary()?o.evaluate(t,"asinh"):l.PARSE2NUMBER?he(e.parse(J(l.LOG+"(({0})+sqrt(({0})^2+1))",t.toString()))):e.symfunction("asinh",arguments)},atanh:function(t){return l.PARSE2NUMBER&&t.isImaginary()?o.evaluate(t,"atanh"):l.PARSE2NUMBER?he(e.parse(J("(1/2)*"+l.LOG+"((1+({0}))/(1-({0})))",t.toString()))):e.symfunction("atanh",arguments)},asech:function(t){return l.PARSE2NUMBER&&t.isImaginary()?o.evaluate(t,"asech"):l.PARSE2NUMBER?he(Me(e.add(t.clone().invert(),Y(e.subtract(e.pow(t,new Fe(-2)),new Fe(1)))))):e.symfunction("asech",arguments)},acsch:function(t){return l.PARSE2NUMBER&&t.isImaginary()?o.evaluate(t,"acsch"):l.PARSE2NUMBER?he(e.parse(J(l.LOG+"((1+sqrt(1+({0})^2))/({0}))",t.toString()))):e.symfunction("acsch",arguments)},acoth:function(t){return l.PARSE2NUMBER&&t.isImaginary()?o.evaluate(t,"acoth"):l.PARSE2NUMBER?t.equals(1)?Fe.infinity():he(e.divide(Me(e.divide(e.add(t.clone(),new Fe(1)),e.subtract(t.clone(),new Fe(1)))),new Fe(2))):e.symfunction("acoth",arguments)}};this.units={};var E,T={"\\":{precedence:8,operator:"\\",action:"slash",prefix:!0,postfix:!1,leftAssoc:!0,operation:function(e){return e}},"!!":{precedence:7,operator:"!!",action:"dfactorial",prefix:!1,postfix:!0,leftAssoc:!0,operation:function(t){return e.symfunction(l.DOUBLEFACTORIAL,[t])}},"!":{precedence:7,operator:"!",action:"factorial",prefix:!1,postfix:!0,leftAssoc:!0,operation:function(e){return B(e)}},"^":{precedence:6,operator:"^",action:"pow",prefix:!1,postfix:!1,leftAssoc:!0},"**":{precedence:6,operator:"**",action:"pow",prefix:!1,postfix:!1,leftAssoc:!0},"%":{precedence:4,operator:"%",action:"percent",prefix:!1,postfix:!0,leftAssoc:!0,overloaded:!0,overloadAction:"mod",overloadLeftAssoc:!1,operation:function(t){return e.divide(t,new Fe(100))}},"*":{precedence:4,operator:"*",action:"multiply",prefix:!1,postfix:!1,leftAssoc:!1},"/":{precedence:4,operator:"/",action:"divide",prefix:!1,postfix:!1,leftAssoc:!1},"+":{precedence:3,operator:"+",action:"add",prefix:!0,postfix:!1,leftAssoc:!1,operation:function(e){return e}},plus:{precedence:3,operator:"plus",action:"add",prefix:!0,postfix:!1,leftAssoc:!1,operation:function(e){return e}},"-":{precedence:3,operator:"-",action:"subtract",prefix:!0,postfix:!1,leftAssoc:!1,operation:function(e){return e.negate()}},"=":{precedence:2,operator:"=",action:"equals",prefix:!1,postfix:!1,leftAssoc:!1},"==":{precedence:1,operator:"==",action:"eq",prefix:!1,postfix:!1,leftAssoc:!1},"<":{precedence:1,operator:"<",action:"lt",prefix:!1,postfix:!1,leftAssoc:!1},"<=":{precedence:1,operator:"<=",action:"lte",prefix:!1,postfix:!1,leftAssoc:!1},">":{precedence:1,operator:">",action:"gt",prefix:!1,postfix:!1,leftAssoc:!1},"=>":{precedence:1,operator:"=>",action:"gte",prefix:!1,postfix:!1,leftAssoc:!1},",":{precedence:0,operator:",",action:"comma",prefix:!1,postfix:!1,leftAssoc:!1},":":{precedence:0,operator:",",action:"assign",prefix:!1,postfix:!1,leftAssoc:!1,vectorFn:"slice"},":=":{precedence:0,operator:",",action:"function_assign",prefix:!1,postfix:!1,leftAssoc:!0}},L={"(":{type:"round",id:1,is_open:!0,is_close:!1},")":{type:"round",id:2,is_open:!1,is_close:!0},"[":{type:"square",id:3,is_open:!0,is_close:!1,maps_to:"vector"},"]":{type:"square",id:4,is_open:!1,is_close:!0},"{":{type:"curly",id:5,is_open:!0,is_close:!1,maps_to:"Set"},"}":{type:"curly",id:6,is_open:!1,is_close:!0}},C=this.functions={cos:[v.cos,1],sin:[v.sin,1],tan:[v.tan,1],sec:[v.sec,1],csc:[v.csc,1],cot:[v.cot,1],acos:[v.acos,1],asin:[v.asin,1],atan:[v.atan,1],arccos:[v.acos,1],arcsin:[v.asin,1],arctan:[v.atan,1],asec:[v.asec,1],acsc:[v.acsc,1],acot:[v.acot,1],atan2:[v.atan2,2],acoth:[S.acoth,1],asech:[S.asech,1],acsch:[S.acsch,1],sinh:[S.sinh,1],cosh:[S.cosh,1],tanh:[S.tanh,1],asinh:[S.asinh,1],sech:[S.sech,1],csch:[S.csch,1],coth:[S.coth,1],acosh:[S.acosh,1],atanh:[S.atanh,1],log10:[,1],exp:[function(t){return t.fname===l.LOG&&t.isLinear()?e.pow(t.args[0],Fe.create(t.multiplier)):e.parse(J("e^({0})",t))},1],radians:[function(t){return e.parse(J("({0})*pi/180",t))},1],degrees:[function(t){return e.parse(J("({0})*180/pi",t))},1],min:[function(){var t=[].slice.call(arguments);return R(t)?t[0]:me(t)?new Fe(Math.min.apply(null,t)):l.SYMBOLIC_MIN_MAX&&de(t)?xe("min",t):e.symfunction("min",t)},-1],max:[function(){var t=[].slice.call(arguments);return R(t)?t[0]:me(t)?new Fe(Math.max.apply(null,t)):l.SYMBOLIC_MIN_MAX&&de(t)?xe("max",t):e.symfunction("max",t)},-1],erf:[,1],floor:[,1],ceil:[,1],trunc:[,1],Si:[,1],step:[,1],rect:[,1],sinc:[function(t){return l.PARSE2NUMBER?t.isConstant()?new Fe(Oe.sinc(t)):e.parse(J("sin({0})/({0})",t)):e.symfunction("sinc",[t])},1],tri:[,1],sign:[function(t){return t.isConstant(!0)?new Fe(Math.sign(he(t))):e.symfunction("sign",arguments)},1],Ci:[,1],Ei:[,1],Shi:[,1],Chi:[,1],Li:[,1],fib:[,1],fact:[B,1],factorial:[B,1],continued_fraction:[function(t,n){var r=he(t);if(r.isConstant()){var i=Oe.continuedFraction(r,n),s=Ve.fromArray(i.fractions.map((function(e){return new Fe(e)})));return Ve.fromArray([new Fe(i.sign),new Fe(i.whole),s])}return e.symfunction("continued_fraction",arguments)},[1,2]],dfactorial:[,1],gamma_incomplete:[,[1,2]],round:[Ae,[1,2]],scientific:[function(e,t){return e.scientific=t||10,e},[1,2]],mod:[F,2],pfactor:[re,1],vector:[function(){return new Ve([].slice.call(arguments))},-1],matrix:[function(){return We.fromArray(arguments)},-1],Set:[function(){return je.fromArray(arguments)},-1],imatrix:[function(e){return We.identity(e)},-1],parens:[function(t){return l.PARSE2NUMBER?t:e.symfunction("parens",[t])},-1],sqrt:[Y,1],cbrt:[$,1],nthroot:[ee,2],log:[Me,[1,2]],expand:[function(e,t){return Ne(e,t=t||{expand_denominator:!0,expand_functions:!0})},1],abs:[z,1],invert:[function(e){if(H(e))return e.invert();A("invert expects a matrix")},1],determinant:[function(e){return H(e)?e.determinant():e},1],size:[function(e){var t;return H(e)?t=[new Fe(e.cols()),new Fe(e.rows())]:q(e)||G(e)?t=new Fe(e.elements.length):A("size expects a matrix or a vector"),t},1],transpose:[function(e){if(H(e))return e.transpose();A("function transpose expects a matrix")},1],dot:[function(e,t){if(q(e)&&q(t))return e.dot(t);A("function dot expects 2 vectors")},2],cross:[function(e,t){if(q(e)&&q(t))return e.cross(t);A("function cross expects 2 vectors")},2],vecget:[function(t,n){return n.isConstant()&&j(n)?t.elements[n]:e.symfunction("vecget",arguments)},2],vecset:[function(t,n,r){return n.isConstant?(t.elements[n]=r,t):e.symfunction("vecset",arguments)},3],vectrim:[function(t,n){return n=void 0===n?1e-14:n,t=t.clone(),n=Number(n),t.elements.sort((function(e,t){return t.group-e.group})),t.elements=function(e,t){var n=typeof t;"function"===n&&"undefined"!==n||(t=function(e,t){return e===t});for(var r=[];e.length;){var i=e[0];if(1===e.length){r.push(i);break}var s=[];r.push(i);for(var a=1;a<e.length;a++){var o=e[a];t(i,o)||s.push(o)}e=s}return r}(t.elements,(function(t,r){return Number(e.subtract(he(t),he(r)).abs())<=n})),t},[1,2]],matget:[function(t,n,r){return n.isConstant()&&r.isConstant()?t.elements[n][r]:e.symfunction("matget",arguments)},3],matset:[function(e,t,n,r){return e.elements[t][n]=r,e},4],matgetrow:[function(t,n){return n.isConstant()?new We(t.elements[n]):e.symfunction("matgetrow",arguments)},2],matsetrow:[function(t,n,r){if(!n.isConstant())return e.symfunction("matsetrow",arguments);if(t.elements[n].length!==r.elements.length)throw new Te("Matrix row must match row dimensions!");var i=t.clone();return i.elements[n]=r.clone().elements,i},3],matgetcol:[function(t,n){if(!n.isConstant())return e.symfunction("matgetcol",arguments);n=Number(n);var r=We.fromArray([]);return t.each((function(e,t,i){i===n&&r.elements.push([e.clone()])})),r},2],matsetcol:[function(t,n,r){if(!n.isConstant())return e.symfunction("matsetcol",arguments);if(n=Number(n),t.rows()!==r.elements.length)throw new Te("Matrix columns must match number of columns!");return r.each((function(e,r){t.set(r-1,n,e.elements[0].clone())})),t},3],rationalize:[X,1],IF:[function(e,t,n){return"boolean"!=typeof e&&V(e)&&(e=!!Number(e)),e?t:n},3],is_in:[function(e,t){if(H(e)){for(var n=0,r=e.rows();n<r;n++)for(var i=0,s=e.cols();i<s;i++)if(e.elements[n][i].equals(t))return new Fe(1)}else if(e.elements)for(n=0,r=e.elements.length;n<r;n++)if(e.elements[n].equals(t))return new Fe(1);return new Fe(0)},2],realpart:[ae,1],imagpart:[oe,1],conjugate:[pe,1],arg:[fe,1],polarform:[function(t){var n,r,i,s;return s=(n=Fe.toPolarFormArray(t))[1],r=n[0],i=e.parse(J("e^({0}*({1}))",l.IMAGINARY,s)),e.multiply(r,i)},1],rectform:[function(t){var n=t.clone();try{var r,i,s,a,o;return r=te(t,"e",!0),i=e.divide(r.x.power,Fe.imaginary()),s=he(v.tan(i)),e.pow(r.a,new Fe(2)),a=s.getDenom(!0),o=s.getNum(),Fe.hyp(o,a).equals(r.a)?e.add(a,e.multiply(Fe.imaginary(),o)):n}catch(e){return n}},1],sort:[function(e,t){t=t?t.toString():"asc";var n=function(e){return e.group===u?e.multiplier:e.group===f?""===e.fname?n(e.args[0]):e.fname:e.group===h?e.power:e.value};return new Ve((q(e)?e.elements:e.collectSymbols()).sort((function(e,r){var i=n(e),s=n(r);return"desc"===t?s-i:i-s})))},[1,2]],integer_part:[,1],union:[function(e,t){return e.union(t)},2],contains:[function(e,t){return e.contains(t)},2],intersection:[function(e,t){return e.intersection(t)},2],difference:[function(e,t){return e.difference(t)},2],intersects:[function(e,t){return new Fe(Number(e.intersects(t)))},2],is_subset:[function(e,t){return new Fe(Number(e.is_subset(t)))},2],print:[function(){ce(arguments).map((function(e){console.log(e.toString())}))},-1]};function P(e){this.type=e.type,this.value=e.value,this.left=e.left,this.right=e.right}this.error=A,this.override=function(e,n){t[e]||(t[e]=[]),t[e].push(this[e]),this[e]=n},this.restore=function(e){this[e]&&(this[e]=t[e].pop())},this.extend=function(e,t,n){var r=this;if("function"==typeof this[e]&&"function"==typeof t){var i=this[e];this[e]=function(e,s){return U(e)&&U(s)&&!n?i.call(r,e,s):t.call(r,e,s,i)}}},this.symfunction=function(e,t){var n=new Fe(e);return n.group=f,"object"==typeof t&&(t=[].slice.call(t)),n.args=t,n.fname=e===y?"":e,n.updateHash(),n},this.callfunction=function(t,n,r){var i=C[t];i||A("Nerdamer currently does not support the function "+t);var s,a=i[1]||r,o=i[0];if(n instanceof Array||(n=void 0!==n?[n]:[]),-1!==a){var u=W(a),c=u?a[0]:a,h=u?a[1]:a,p=n.length,f=t+" requires a {0} of {1} arguments. {2} provided!";p<c&&A(J(f,"minimum",c,p)),p>h&&A(J(f,"maximum",h,p))}var m=me(n);return o?s=o.apply(i[2],n):(o=function(e){for(var t=l.FUNCTION_MODULES,n=t.length,r=0;r<n;r++){var i=t[r];if(e in i)return i[e]}A("The function "+e+" is undefined!")}(t),s=l.PARSE2NUMBER&&m?Re(o.apply(o,n)):e.symfunction(t,n)),s},this.operator_filter_regex=(E="^\\"+Object.keys(T).filter((function(e){if(1===e.length)return e})).join("\\"),new RegExp("(["+E+"])\\s+(["+E+"])")),this.setOperator=function(t,n,r){var i=t.operator;if(T[i]=t,n&&(this[t.action]=n),e[i]=t.operation,t.action||t.prefix||t.postif||(t.action=i),"over"===r||"under"===r){var s=t.precedence;for(var a in T){var o=T[a];("over"===r?o.precedence>=s:o.precedence>s)&&o.precedence++}}},this.getOperator=function(e){return T[e]},this.aliasOperator=function(e,t){var n={},r=T[e];for(var i in r)n[i]=r[i];n.operator=t,this.setOperator(n)},this.getOperators=function(){return T},this.getBrackets=function(){return L},this.initConstants=function(){this.CONSTANTS={E:new Fe(l.E),PI:new Fe(l.PI)}},this.pretty_print=function(t){if(Array.isArray(t)){var n=t.map((t=>e.pretty_print(t))).join(", ");return"vector"===t.type?"vector<"+n+">":"("+n+")"}return t.toString()},this.peekers={pre_operator:[],post_operator:[],pre_function:[],post_function:[]},this.callPeekers=function(e){if(l.callPeekers)for(var t=this.peekers[e],n=ce(arguments).slice(1).map(Z),r=0;r<t.length;r++)t[r].apply(null,n)},this.tokenize=function(t){for(var n in t=(t=String(t)).trim().replace(/\s+/g," "),L){var r=new RegExp(L[n].is_close?"\\s+\\"+n:"\\"+n+"\\s+","g");t=t.replace(r,n)}for(var i=0,s=t.length,o=0,l=[],u=[l],c=u[0],h=0,p=[],f=!1,m=function(e,t){var n=[];void 0!==e&&(n.type=e),n.column=t,u.push(n),c.push(n),c=n,h++},d=function(){u.pop(),c=u[--h]},g=function(e){for(var n=(e=void 0!==e?e:i)+1;t.charAt(n++)in T;);return t.substring(e,n-1)},v=function(e){for(var t=i-e.length,n=[],r=e.charAt(0),s=1,o=e.length;s<o;s++){var l=e.charAt(s),u=r+l;u in T?r=u:(n.push(new a(r,a.OPERATOR,t+s)),r=l)}return n.push(new a(r,a.OPERATOR,t+s)),n},y=function(n,r){void 0===r&&(r=t.substring(o,n)),r in e.units?c.push(new a(r,a.UNIT,o)):""!==r&&c.push(new a(r,a.VARIABLE_OR_LITERAL,o))},w=function(e){c.push(new a(e,a.FUNCTION,o))},b=function(e){o=e+1};i<s;i++){var x=t.charAt(i);if(x in T){y(i);var M=c[0]&&k(c[0]);f&&o<i&&","!==x&&!(M&&"*"===x)&&(f=!1,d()),b(i+1);var S=g(i);o=o+S.length-2,i=o-1,c.push.apply(c,v(S))}else if(x in L){var _=L[x];if(_.is_open)p.push([_,o]),(P=t.substring(o,i))in C?w(P):""!==P&&c.push(new a(P,a.VARIABLE_OR_LITERAL,o)),m(_.maps_to,i);else if(_.is_close){var E=p.pop();if(!E)throw new Se("Missing open bracket for bracket at: "+(i+1));if(E[0].id!==_.id-1)throw new Se("Parity error");y(i),d()}b(i)}else if(" "===x){var A=t.substring(o,i),R=t.charAt(i+1);if(f){if(A in T)c.push(new a(A,a.OPERATOR,i));else{y(void 0,A),d();var N=R in T;(N&&"-"===T[R].value||!N)&&c.push(new a("*",a.OPERATOR,i))}f=!1}else{var P;(P=t.substring(o,i))in C?(f=!0,w(P),m()):P in T?c.push(new a(P,a.OPERATOR,i)):(y(void 0,P),R=t.charAt(i+1),""===A||""===R||A in T||R in T||c.push(new a("*",a.OPERATOR,i)))}b(i)}}if(p.length){var I=p.pop();throw new Se("Missing closed bracket for bracket at "+(I[1]+1))}return y(i),l},this.toRPN=function(e){var t,n=e.type,r=e.length,i=[],s=[],o=[],l=function(e,t){for(;e.length;)t.push(e.pop())};for(t=0;t<r;t++){var u=e[t];if(u.type!==a.OPERATOR)break;if(!u.prefix)throw new _e("Not a prefix operator");u.is_prefix=!0,s.push(u)}for(;t<r;t++){var c=e[t];if(c.type===a.OPERATOR){var h=c;for(h.overloaded&&(m=e[t+1])&&m.type===a.VARIABLE_OR_LITERAL&&(h.postfix=!1,h.action=h.overloadAction,h.leftAssoc=h.overloadLeftAssoc);s.length;){var p=s[s.length-1];if(!(p.precedence>h.precedence||!h.leftAssoc&&p.precedence===h.precedence))break;i.push(s.pop())}if("vector"!==n&&"set"!==n||!("vectorFn"in h)||(h.action=h.vectorFn),h.postfix){var f=e[t-1];if(!f)throw new _e("Unexpected prefix operator '"+c.value+"'! at "+c.column);if(f.type===a.OPERATOR&&!f.postfix)throw new _e("Unexpected prefix operator '"+f.value+"'! at "+f.column)}else do{var m,d=!!(m=e[t+1])&&m.type===a.OPERATOR;if(d){if(!m.prefix)throw new _e("A prefix operator was expected at "+m.column);m.is_prefix=!0,o.push(m),t++}}while(d);for(h.is_prefix?o.push(h):s.push(h);o.length&&(h.leftAssoc||!h.leftAssoc&&o[o.length-1].precedence>=h.precedence);)s.push(o.pop())}else if(c.type===a.VARIABLE_OR_LITERAL){0===i.length&&l(o,s),i.push(c);var g=s[s.length-1];g&&g.leftAssoc||l(o,i)}else c.type===a.FUNCTION?s.push(c):c.type===a.UNIT&&i.push(c);Array.isArray(c)&&(i.push(this.toRPN(c)),c.type&&i.push(new a(c.type,a.FUNCTION,c.column)))}return l(s,i),l(o,i),i},this.parseRPN=function(t,n){try{for(var r in n=n||{})n[r]=e.parse(n[r],{});l.PARSE2NUMBER&&("e"in n||(n.e=new Fe(l.E)),"pi"in n||(n.pi=new Fe(l.PI)));for(var o=[],u=0,c=t.length;u<c;u++){var h=t[u];if(Array.isArray(h)&&(h=this.parseRPN(h,n)),h)if(h.type===a.OPERATOR)if(h.is_prefix||h.postfix)o.push(h.operation(o.pop()));else{var p=o.pop(),f=o.pop();if(void 0===f)throw new _e(h+" is not a valid postfix operator at "+h.column);var m="comma"===h.action;f instanceof je&&!m&&(f=Ve.fromSet(f)),p instanceof je&&!m&&(p=Ve.fromSet(p)),this.callPeekers("pre_operator",f,p,h);var d=e[h.action](f,p);this.callPeekers("post_operator",d,f,p,h),o.push(d)}else if(h.type===a.FUNCTION){var g=o.pop(),v=g.parent;g instanceof s||(g=s.create(g));var y=h.value,w=g.getItems();this.callPeekers("pre_function",y,w);var b=e.callfunction(y,w);this.callPeekers("post_function",b,y,w);var x=o[o.length-1],M=t[u+1];if(M&&M.type===a.OPERATOR&&","===M.value||!(b instanceof Ve)||!x||!x.elements||x instanceof s)v&&(b.parent=v),o.push(b);else{var S=o.pop(),E=b.elements[0];if(E.isConstant())if(E instanceof i)o.push(Ve.fromArray(S.elements.slice(E.start,E.end)));else{var T=Number(E),A=S.elements.length;if(T<0&&(T=A+T),T<0||T>=A)throw new Ee("Index out of range "+(h.column+1));var L=S.elements[T];S.getter=T,L.parent=S,o.push(L)}else S.getter=E,o.push(S),o.push(b)}}else{var C,R=h.value;R in l.ALIASES?h=e.parse(l.ALIASES[h]):h.type===a.VARIABLE_OR_LITERAL?h=new Fe(R):h.type===a.UNIT&&((h=new Fe(R)).isUnit=!0),R in e.CONSTANTS?(C=h,h=new Fe(e.CONSTANTS[R])):R in n&&R!==n[R].toString()?(C=h,h=n[R].clone()):R in _&&(C=h,h=_[R].clone()),C&&(h.subbed=C),o.push(h)}}var N=o[0];if(-1!==["undefined","string","number"].indexOf(typeof N))throw new Pe("Unexpected token!");return N}catch(e){throw[be].forEach((function(t){if(e instanceof t)throw new t(e.message+": "+h.column)})),new ye(e.message+": "+h.column)}},P.prototype.toString=function(){var e=this.left?this.left.toString()+"---":"",t=this.right?"---"+this.right.toString():"";return e+"("+this.value+")"+t},P.prototype.toHTML=function(e,t){e=e||0,t=void 0===t?4:t;var n=function(e){return" ".repeat(t*e)},r="",i=this.left?n(e+1)+"<li>\n"+this.left.toHTML(e+2,t)+n(e+1)+"</li> \n":"",s=this.right?n(e+1)+"<li>\n"+this.right.toHTML(e+2,t)+n(e+1)+"</li>\n":"";return r=n(e)+'<div class="'+this.type.toLowerCase()+'"><span>'+this.value+"</span></div>"+n(e)+"\n",(i||s)&&(r+=n(e)+"<ul>\n"+i+s+n(e)+"</ul>\n"),r+""},this.tree=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(Array.isArray(r))r=this.tree(r),t.push(r);else if(r.type===a.OPERATOR)if(r.is_prefix||r.postfix){var i=r.is_prefix?"left":"right",s=t.pop();(r=new P(r))[i]=s,t.push(r)}else(r=new P(r)).right=t.pop(),r.left=t.pop(),t.push(r);else if(r.type===a.FUNCTION){r=new P(r);var o=t.pop();if(r.right=o,"object"===r.value&&(s=t[t.length-1])){for(;s.right;)s=s.right;s.right=r;continue}t.push(r)}else t.push(new P(r))}return t[0]},this.parse=function(e,t){e=function(e){e=String(e);for(var t=0;t<n.actions.length;t++)e=n.actions[t].call(this,e);for(e=e.replace(/\s+/g," "),/e/gi.test(e)&&(e=e.replace(/\-*\d+\.*\d*e\+?\-?\d+/gi,(function(e){return I(e)}))),e=e.replace(l.IMPLIED_MULTIPLICATION_REGEX,(function(){var e=arguments[4],t=arguments[1],n=arguments[2],r=arguments[3],i="",s="*";return e.charAt(r).match(/[\+\-\/\*]/)||(i=e.charAt(r-1)),i.match(/[a-z]/i)&&(s=""),t+s+n})).replace(/([a-z0-9_]+)/gi,(function(e,t){return!1!==l.USE_MULTICHARACTER_VARS||t in C?t:isNaN(t)?t.split("").join("*"):t})).replace(/\)\(/g,")*(")||"0";e!==(e=e.replace(/([a-z0-9_]+)(\()|(\))([a-z0-9]+)/gi,(function(e,t,n,r,i){var s=t||r,a=n||i;return s in C?s+a:s+"*"+a}))););return e}(e),t=t||{};var r=this.tokenize(e),i=this.toRPN(r);return this.parseRPN(i,t)},this.toObject=function(t){var n=function(t){for(var r=[],i=0,s=t.length;i<s;i++){var o=t[i],l=o.value;if(o.type===a.VARIABLE_OR_LITERAL)r.push(new Fe(l));else if(o.type===a.FUNCTION){i++;var u=e.symfunction(l,n(t[i]));u.isConversion=!0,r.push(u)}else o.type===a.OPERATOR?r.push(l):r.push(n(o))}return r};return n(e.tokenize(t))};var O=function(e){for(var t=0,n=[[]],r=0,i=e.length;r<i;r++)","===e[r]?n[++t]=[]:n[t].push(e[r]);return n},D=function(e){return e.replace(/^\\left\((.+)\\right\)$/g,(function(e,t){return t||e}))};function z(t){if(t.isInfinity)return Fe.infinity();if(t.multiplier.lessThan(0)&&t.multiplier.negate(),t.isImaginary()){var n=t.realpart(),r=t.imagpart();if(n.isConstant()&&r.isConstant())return Y(e.add(e.pow(n,new Fe(2)),e.pow(r,new Fe(2))))}else if(V(t)||ie(t.power))return t;if(t.isComposite()){var i=[];t.each((function(e){i.push(e.multiplier)})),Oe.QGCD.apply(null,i).lessThan(0)&&(t.multiplier=t.multiplier.multiply(new Be(-1)),t.distributeMultiplier())}var s=e.parse(t.multiplier);return t.toUnitMultiplier(),e.multiply(s,e.symfunction(b,[t]))}function B(t){if(q(t)){var n=new Ve;return t.each((function(e,t){n.set(t-1,B(e))})),n}if(H(t)){var r=new We;return t.each((function(e,t,n){r.set(t,n,B(e))})),r}if(l.PARSE2NUMBER&&t.isConstant())return Re(j(t)?Oe.bigfactorial(t):Oe.gamma(t.multiplier.add(new Be(1)).toDecimal()));if(t.isConstant()&&t.getDenom().equals(2)){var i,s,a,o,u=t.getNum();return t.multiplier.isNegative()?(o=e.subtract(u.negate(),new Fe(1)).multiplier.divide(new Be(2)),i=e.pow(new Fe(-4),new Fe(o)).multiplier.multiply(Oe.bigfactorial(o)),s=Oe.bigfactorial(new Be(2).multiply(o))):(o=e.add(u,new Fe(1)).multiplier.divide(new Be(2)),i=Oe.bigfactorial(new Be(2).multiply(o)),s=e.pow(new Fe(4),new Fe(o)).multiplier.multiply(Oe.bigfactorial(o))),a=i.divide(s),e.multiply(e.parse("sqrt(pi)"),new Fe(a))}return e.symfunction(x,[t])}function F(t,n){if(t.isConstant()&&n.isConstant()){var r=new Fe(1);return r.multiplier=r.multiplier.multiply(t.multiplier.mod(n.multiplier)),r}var i=e.divide(t.clone(),n.clone());return j(i)?new Fe(0):e.symfunction("mod",[t,n])}function X(t){if(t.isComposite()){var n,r,i,s,a,o,l,u,c=new Fe(0);return t.each((function(t){n=t.getNum(),r=t.getDenom(),i=c.getNum(),s=c.getDenom(),a=e.multiply(r,i),o=e.multiply(n,s),l=e.expand(e.add(a,o)),u=e.multiply(s,r),c=e.divide(l,u)}),!0),c}return t}function Y(t){if(U(t)||(t=e.parse(t)),t.group===p)return e.symfunction(w,[t]);""===t.fname&&t.power.equals(1)&&(t=t.args[0]);var n=t.multiplier.sign()<0;if(l.PARSE2NUMBER){if(t.isConstant()&&!n)return new Fe(r.sqrt(t.multiplier.toDecimal()));if(t.isImaginary())return o.sqrt(t);if(t.group===h)return e.symfunction("sqrt",[t])}var i,s,a=t.isConstant();if(t.group===d&&t.isLinear()){var u=Y(Fe(t.multiplier));for(var c in t.symbols){var f=t.symbols[c];u=e.multiply(u,Y(f))}s=u}else if(t.fname===w){c=t.args[0];var m=t.multiplier;c.setPower(t.power.multiply(new Be(.25))),s=c,m.equals(1)||(s=e.multiply(Y(e.parse(m)),s))}else if(t.power.isInteger())if(t.multiplier<0&&t.group===h){var g=e.parse(t.multiplier).negate(),v=e.parse(t).toUnitMultiplier().negate();s=e.multiply(e.symfunction(l.SQRT,[v]),Y(g))}else{var y=t.power.sign();t.power=t.power.abs(),a&&t.multiplier.lessThan(0)&&(i=Fe.imaginary(),t.multiplier=t.multiplier.abs());var b=t.multiplier.toDecimal(),x=Math.abs(b),M=Math.sqrt(x);if(j(M))u=new Fe(M);else if(j(b)){var S=Oe.ifactor(b),_=1;for(var f in S){var E=(N=S[f])-N%2;if(E){var T=Math.pow(f,E);_*=Math.pow(f,E/2),b/=T}}u=e.multiply(e.symfunction(w,[new Fe(b)]),new Fe(_))}else{for(var A=[new Fe(t.multiplier.num),new Fe(t.multiplier.den)],L=[new Fe(1),new Fe(1)],C=[new Fe(1),new Fe(1)],R=0;R<2;R++){var N;re(N=A[R]).each((function(t){var n=(t=Fe.unwrapPARENS(t)).clone().toLinear(),r=Number(t.power),i=r%2,s=(r-i)/2;L[R]=e.multiply(L[R],e.pow(n,new Fe(s))),C[R]=e.multiply(C[R],Y(e.pow(n,new Fe(i))))}))}u=e.divide(e.multiply(L[0],C[0]),e.multiply(L[1],C[1]))}s=(t=t.toUnitMultiplier(!0)).isOne()?t:ie(t.power.toString())?e.pow(t.clone(),new Fe(.5)):e.symfunction(w,[t]),y<0&&s.power.negate(),u&&(s=e.multiply(u,s)),i&&(s=e.multiply(i,s))}else t.setPower(t.power.multiply(new Be(.5))),s=t;return n&&l.PARSE2NUMBER?e.parse(s):s}function $(t){if(!t.isConstant(!0)){var n,r=t.power/3,i=e.pow(e.parse(t.multiplier),new Fe(1/3)),s=t.toUnitMultiplier();return j(r)?n=e.pow(s.toLinear(),e.parse(r)):s.group===d?(n=new Fe(1),s.each((function(t){n=e.multiply(n,$(t))}))):n=e.symfunction("cbrt",[s]),e.multiply(i,n)}return ee(t,new Fe(3))}function ee(t,n,r,i){if((n=he(e.parse(n))).equals(0))throw new we("Unable to calculate nthroots of zero");if(t<0&&ie(n))throw new Error("Cannot calculate nthroot of negative number for even powers");if(!t.isConstant(!0))return e.symfunction("nthroot",arguments);t.group!==u&&(t=he(t)),void 0===i&&(i=!0),r=r||25;var s,a,o=t.sign();return o<0&&(t=z(t)),j(t)&&n.isConstant()?(s=t<0x10000000000000000?Be.create(Math.pow(t,1/n)):Oe.nthroot(t,n),i&&(a=new Fe(s)),a=new Fe(s.toDecimal(r)),e.multiply(new Fe(o),a)):void 0}function re(t){if(t.greaterThan(9999999999998891e26)||t.equals(-1))return t;if(t.equals(Math.PI))return new Fe(Math.PI);if((t=he(t.clone())).isConstant()){var n=new Fe(1),r=t.toString();if(j(r)){var i=Oe.ifactor(r);for(var s in i){var a=i[s];n=e.multiply(n,e.symfunction("parens",[new Fe(s).setPower(new Be(a))]))}}else{var o=re(new Fe(t.multiplier.num)),l=re(new Fe(t.multiplier.den));n=e.multiply(e.symfunction("parens",[o]),e.symfunction("parens",[l]).invert())}}else n=e.symfunction("pfactor",arguments);return n}function ae(e){return e.realpart()}function oe(e){return e.imagpart()}function pe(t){var n=t.realpart(),r=t.imagpart();return e.add(n,e.multiply(r.negate(),Fe.imaginary()))}function fe(t){var n=t.realpart(),r=t.imagpart();return n.isConstant()&&r.isConstant()?new Fe(Math.atan2(r,n)):e.symfunction("atan2",[r,n])}function fe(t){var n=t.realpart(),r=t.imagpart();return n.isConstant()&&r.isConstant()?r.equals(0)&&n.equals(-1)?e.parse("pi"):r.equals(1)&&n.equals(0)?e.parse("pi/2"):r.equals(1)&&n.equals(1)?e.parse("pi/4"):new Fe(Math.atan2(r,n)):e.symfunction("atan2",[r,n])}function xe(e,t){var n,r,i;for(t.map((function(e){e.numVal=he(e).multiplier}));;){if((n=t.length)<2)return t[0];r=t.pop(),i=t[n-2],("min"===e?r.numVal<i.numVal:r.numVal>i.numVal)&&(t.pop(),t.push(r))}}function Me(t,n){if(t.equals(1))return new Fe(0);var r;if(t.fname===w&&t.multiplier.equals(1))return r=e.divide(Me(t.args[0]),new Fe(2)),t.power.sign()<0&&r.negate(),r;if(t.equals(0))throw new we(l.LOG+"(0) is undefined!");if(t.isImaginary())return o.evaluate(t,l.LOG);if(t.isConstant()&&void 0!==n&&n.isConstant()){var i=Math.log(t),s=Math.log(n);r=new Fe(i/s)}else if(t.group===p&&t.power.multiplier.lessThan(0)||"-1"===t.power.toString())t.power.negate(),r=Me(t).negate();else if("e"===t.value&&t.multiplier.equals(1)){var a=t.power;r=U(a)?a:new Fe(a)}else if(t.group===f&&"exp"===t.fname){var u=t.args[0];r=t.multiplier.equals(1)?e.multiply(u,new Fe(t.power)):e.symfunction(l.LOG,[t])}else if(l.PARSE2NUMBER&&V(t)){var c;(t=e.parse(t)).multiplier.lessThan(0)&&(t.negate(),c=e.multiply(new Fe(Math.PI),new Fe("i"))),r=new Fe(Math.log(t.multiplier.toDecimal())),c&&(r=e.add(r,c))}else t.power.equals(1)||t.contains("e")||(u=t.group===p?t.power:new Fe(t.power),t.toLinear()),r=arguments.length>1&&R(arguments)?new Fe(1):e.symfunction(l.LOG,arguments),u&&(r=e.multiply(u,r));return r}function Ae(t,n){var r,i,s,a,o=n&&n.isConstant()||void 0===n;return t.isConstant()&&o?(r=t,n&&n.lessThan(0)&&(n=z(n),r=(i=Number(t).toExponential().toString().split("e"))[0],s=i[1]),a=new Fe(ne(r,Number(n||0))),e.multiply(a,e.pow(new Fe(10),new Fe(s||0)))):e.symfunction("round",arguments)}function Le(e){var t=e%2;return t<0&&(t=2+t),t>=0&&t<=.5?1:t>.5&&t<=1?2:t>1&&t<=1.5?3:4}function Re(e){if(!isFinite(e)){var t=Math.sign(e),n=new Fe(String(Math.abs(e)));return n.multiplier=n.multiplier.multiply(new Be(t)),n}if(U(e))return e;if("number"==typeof e)try{e=Be.simple(e)}catch(t){e=new Be(e)}var r=new Fe(0);return r.multiplier=e,r}function Ne(t,n){if(Array.isArray(t))return t.map((function(e){return Ne(e,n)}));if(n=n||{},t.group===f&&""===t.fname){var r=Ne(t.args[0],n),i=Ne(e.pow(r,e.parse(t.power)),n);return e.multiply(e.parse(t.multiplier),i).distributeMultiplier()}if(-1!==[u,c,h].indexOf(t.group))return t;var s=t.clone();try{var a=t.multiplier.toString(),o=Number(t.power),l=t;if(t.isComposite()&&j(t.power)&&t.power>0){var p=o-1;r=new Fe(0),t.each((function(t){r=e.add(r,Ne(e.parse(t),n))}));for(var v=e.parse(r),y=0;y<p;y++)v=ge(v,r,n);l=e.multiply(e.parse(a),v).distributeMultiplier()}else if(t.group===f&&!0===n.expand_functions){var w=[];t.args.forEach((function(e){w.push(Ne(e,n))})),l=e.pow(e.symfunction(t.fname,w),e.parse(t.power)),l=e.multiply(l,e.parse(t.multiplier))}else if(t.isComposite()&&j(t.power)&&t.power<0&&!0===n.expand_denominator)t=t.invert(),(l=Ne(t,n)).invert();else if(t.group===d){var b=function(e){switch(e.group){case g:return 0;case m:return 1;case d:return 2;case f:return 3;default:return 4}},x=t.collectSymbols().sort((function(e,t){return b(t)-b(e)})).map((function(t){return Ne(e.pow(t,e.parse(o)),n)}));(r=x.pop()).isComposite()&&r.isLinear()?(x.forEach((function(e){r=ge(r,e,n)})),r.isComposite()?(r.power>1&&(r=Ne(e.pow(r,e.parse(r.power)),n)),l=e.multiply(e.parse(a),r).distributeMultiplier()):l=r):(l=r,x.forEach((function(t){l=e.multiply(l,t)})),l=e.multiply(l,e.parse(a)).distributeMultiplier()),l.group===d&&(l=e.parse(l))}else l=t;return l}catch(e){return s}return s}function Ie(e){if(!U(e.power)&&e.power.absEquals(.5)){var t=e.power.sign(),n=Y(e.group===c?new Fe(e.value):e.toLinear());return t<0&&n.invert(),n}return e}this.toTeX=function(t,n){var r=!0===(n=n||{}).decimals?"decimals":void 0,i="string"==typeof t?this.toObject(t):t,s=[],a=void 0===n.cdot?"\\cdot":n.cdot;if(i=function(e){for(var t=[];e.length;){var n=e.shift(),r=e[0],i=W(r),s="-"===r;if("^"===n&&("+"===r?e.shift():i&&"+"===r[0]&&r.shift(),i&&1===r.length&&e.unshift(e.shift()[0])),"^"===n&&(i&&"-"===r[0]||s)){var a=t.pop(),o=t[t.length-1],l="1";"*"===o?(t.pop(),l=t.pop()):W(o)&&(l=t.pop()),t.push(l,"/",a,n),i?r.shift():e.shift(),i&&1===r.length&&t.push(e.shift()[0])}else t.push(n)}return t}(i),W(i)){for(var o,u,c=[],h=0;h<i.length;h++)o=i[h],"^"===i[h+1]?(u=i[h+2],c.push(Ge.braces(this.toTeX([o]))+"^"+Ge.braces(this.toTeX([u]))),h+=2):c.push(o);i=c}h=0;for(var p=i.length;h<p;h++){var m=i[h];if("*"===m&&(m=a),U(m))if(m.group===f){var d,g=m.fname;if(g===w)d="\\sqrt"+Ge.braces(this.toTeX(m.args));else if(g===b)d=Ge.brackets(this.toTeX(m.args),"abs");else if(g===y)d=Ge.brackets(this.toTeX(m.args),"parens");else if(g===l.LOG10)d="\\"+l.LOG10_LATEX+"\\left( "+this.toTeX(m.args)+"\\right)";else if("integrate"===g){var v=O(m.args);d="\\int "+(S=Ge.braces(this.toTeX(v[0])))+"\\, d"+(_=this.toTeX(v[1]))}else if("defint"===g){v=O(m.args);var S=Ge.braces(this.toTeX(v[0])),_=this.toTeX(v[3]);d="\\int\\limits_{"+this.toTeX(v[1])+"}^{"+this.toTeX(v[2])+"} "+S+"\\, d"+_}else if("diff"===g){if(v=O(m.args),_="",S=Ge.braces(this.toTeX(v[0])),1===v.length){var E=[];for(A=0;A<v[0].length;A++)3===v[0][A].group&&E.push(v[0][A].value);E.sort(),_=E.length>0?"\\frac{d}{d "+E[0]+"}":"\\frac{d}{d x}"}else _=2===v.length?"\\frac{d}{d "+v[1]+"}":"\\frac{d^{"+v[2]+"}}{d "+this.toTeX(v[1])+"^{"+v[2]+"}}";d=_+"\\left("+S+"\\right)"}else if("sum"===g||"product"===g){var T=[[],[],[],[]],A=0;for(h=0;h<m.args.length;h++)","!==m.args[h]?T[A].push(m.args[h]):A++;d=("sum"===g?"\\sum_":"\\prod_")+Ge.braces(this.toTeX(T[1])+" = "+this.toTeX(T[2])),d+="^"+Ge.braces(this.toTeX(T[3]))+Ge.braces(this.toTeX(T[0]))}else if("limit"===g){var L=O(m.args).map((function(t){return Array.isArray(t)?e.toTeX(t.join("")):e.toTeX(String(t))}));d="\\lim_"+Ge.braces(L[1]+"\\to "+L[2])+" "+Ge.braces(L[0])}else d=g===x||g===M?this.toTeX(m.args)+(g===x?"!":"!!"):Ge.latex(m,r);s.push(d)}else s.push(Ge.latex(m,r));else W(m)?s.push(Ge.brackets(this.toTeX(m))):"/"===m?s.push(Ge.frac(D(s.pop()),D(this.toTeX([i[++h]])))):s.push(m)}return s.join(" ")},this.expand=Ne,this.round=Ae,this.clean=function t(n){var r,i=n.group;if(i===g){var s=n.getNum(),a=n.getDenom()||new Fe(1),o=Number(n.power),l=new Fe(1);if(1===Math.abs(o)){a.each((function(n){n.group===d?l=e.multiply(l,t(n.getDenom())):n.power.lessThan(0)&&(l=e.multiply(l,t(n.clone().toUnitMultiplier())))}));var u,c=new Fe(0);a.each((function(t){c=e.add(e.divide(t,l.clone()),c)})),l.invert(),s.isComposite()?(u=new Fe(0),s.each((function(n){u=e.add(e.multiply(t(n),l.clone()),u)}))):u=e.multiply(l,s),r=e.divide(u,c)}}else i===d?(r=new Fe(1),n.each((function(t){r=e.multiply(r,e.clean(t))}))):i===f&&1===n.args.length&&n.args[0].isConstant()&&(r=ue("PARSE2NUMBER",(function(){return e.parse(n)}),!0));return r||(r=n),r},this.sqrt=Y,this.cbrt=$,this.abs=z,this.log=Me,this.rationalize=X,this.nthroot=ee,this.arg=fe,this.conjugate=pe,this.imagpart=oe,this.realpart=ae,this.getFunction=function(e){return C[e][0]},this.addPreprocessor=function(e,t,r,i){var s=n.names,a=n.actions;if("function"!=typeof t)throw new PreprocessorError("Incorrect parameters. Function expected!");r?i?(s.splice(r,0,e),a.splice(r,0,t)):(s[r]=e,a[r]=t):(s.push(e),a.push(t))},this.getPreprocessors=function(){for(var e={},t=0,n=e.names.length;t<n;t++)e[e.names[t]]={order:t,action:e.actions[t]};return e},this.removePreprocessor=function(e,t){var r=n.names.indexOf(e);t?(le(n.names,r),le(n.actions,r)):(n.names[r]=void 0,n.actions[r]=void 0)},this.mapped_function=function(){for(var t={},n=this.params,r=0;r<n.length;r++)t[n[r]]=String(arguments[r]);return e.parse(this.body,t)},this.add=function(t,n){var r=U(t),i=U(n);if(r&&i){if(t.unit||n.unit)return e.Unit.add(t,n);if(t.isInfinity||n.isInfinity){var s=t.multiplier.lessThan(0),a=n.multiplier.lessThan(0);if(t.isInfinity&&n.isInfinity&&s!==a)throw new we("("+t+")+("+n+") is not defined!");var o=Fe.infinity();return a&&o.negate(),o}if(t.isComposite()&&t.isLinear()&&n.isComposite()&&n.isLinear()&&(t.distributeMultiplier(),n.distributeMultiplier(),n.length>t.length&&t.group===n.group&&([t,n]=[n,t])),t.multiplier.equals(0))return n;if(n.multiplier.equals(0))return t;if(t.isConstant()&&n.isConstant()&&l.PARSE2NUMBER)return new Fe(t.multiplier.add(n.multiplier).toDecimal(l.PRECISION));var v=t.group,y=n.group,b=t.power.toString(),x=n.power.toString();if(v<y||v===y&&b>x&&x>0)return this.add(n,t);if(v===d&&y===m&&t.value===n.value){var M=t;t=n,n=M,v=t.group,y=n.group,b=t.power.toString(),x=n.power.toString()}var S,_,E,T=b===x,L=t.value,C=n.value,R=t.isComposite(),N=n.isComposite();if(R&&(S=ke(t,"hash")),N&&(_=ke(n,"hash")),v===g&&y===g&&n.isLinear()&&!t.isLinear()&&S!==_)return this.add(n,t);v===m&&y===m&&(L=S,C=_);var P=v===c&&y===u,I=t.value===n.multiplier.toString(),O=L===C||S===_&&void 0!==S||P&&I;if(O&&T&&v===y)if(P&&(n=n.convert(c)),v!==m||y!==h&&y!==c)if(E=t,t.multiplier.isOne()&&n.multiplier.isOne()&&v===g&&t.isLinear()&&n.isLinear())for(var k in n.symbols){var D=n.symbols[k];E.attach(D)}else E.multiplier=E.multiplier.add(n.multiplier);else t.distributeMultiplier(),E=t.attach(n);else if(O&&v!==m)v===g&&y===m?(n.insert(t,"add"),E=n):(E=Fe.shell(m).attach([t,n])).value=v===m?S:L;else if(R&&t.isLinear()){var z=v===y,B=v===m&&y===m;if(B&&(z=t.value===n.value),t.distributeMultiplier(),n.isComposite()&&n.isLinear()&&z){for(var k in n.distributeMultiplier(),n.symbols)D=n.symbols[k],t.attach(D);E=t}else B&&t.value!==_||v===m&&!O?(E=Fe.shell(g).attach([t,n])).updateHash():E=t.attach(n)}else{if(v===f&&t.fname===w&&y!==p&&n.power.equals(.5)){var F=n.multiplier.clone();(n=Y(n.toUnitMultiplier().toLinear())).multiplier=F}2===t.length&&2===n.length&&ie(t.power)&&ie(n.power)?E=e.add(Ne(t),Ne(n)):(E=Fe.shell(g).attach([t,n])).updateHash()}return E.multiplier.equals(0)&&(E=new Fe(0)),1===E.length&&(F=E.multiplier,(E=Q(E.symbols)).multiplier=E.multiplier.multiply(F)),E}i&&!r&&(M=t,t=n,n=M,M=i,i=r,r=M);var G=H(n);if(r&&G){var V=new We;n.eachElement((function(n,r,i){V.set(r,i,e.add(t.clone(),n))})),n=V}else if(H(t)&&G)n=t.add(n);else if(r&&q(n))n.each((function(r,i){i--,n.elements[i]=e.add(t.clone(),n.elements[i])}));else if(q(t)&&q(n))n.each((function(r,i){i--,n.elements[i]=e.add(t.elements[i],n.elements[i])}));else{if(q(t)&&H(n))return e.add(n,t);if(H(t)&&q(n)){if(n.elements.length===t.rows()){V=new We;var W=t.cols();return n.each((function(n,r){for(var i=[],s=0;s<W;s++)i.push(e.add(t.elements[r-1][s].clone(),n.clone()));V.elements.push(i)})),V}A("Dimensions must match!")}}return n},this.subtract=function(t,n){var r=r=U(t),i=U(n);if(r&&i)return t.unit||n.unit?e.Unit.subtract(t,n):this.add(t,n.negate());if(i&&q(t))n=t.map((function(t){return e.subtract(t,n.clone())}));else if(r&&q(n))n=n.map((function(n){return e.subtract(t.clone(),n)}));else if(q(t)&&q(n))t.dimensions()===n.dimensions()?n=t.subtract(n):e.error("Unable to subtract vectors. Dimensions do not match.");else if(H(t)&&q(n)){if(n.elements.length===t.rows()){var s=new We,a=t.cols();return n.each((function(n,r){for(var i=[],o=0;o<a;o++)i.push(e.subtract(t.elements[r-1][o].clone(),n.clone()));s.elements.push(i)})),s}A("Dimensions must match!")}else{if(q(t)&&H(n))return s=n.clone().negate(),e.add(s,t);H(t)&&H(n)?n=t.subtract(n):H(t)&&i?(s=new We,t.each((function(t,r,i){s.set(r,i,e.subtract(t,n.clone()))})),n=s):r&&H(n)&&(s=new We,n.each((function(n,r,i){s.set(r,i,e.subtract(t.clone(),n))})),n=s)}return n},this.multiply=function(t,n){var i=U(t),a=U(n);if(i&&n instanceof s)return n.elements.push(t),n;if(i&&a){if(n.isUnit){var o=t.clone();return t.unit=n,o}if(t.unit||n.unit)return e.Unit.multiply(t,n);if(t.isInfinity||n.isInfinity){if(t.equals(0)||n.equals(0))throw new we(t+"*"+n+" is undefined!");if(n.power.lessThan(0)){if(t.isInfinity)throw new we("Infinity/Infinity is not defined!");return new Fe(0)}var v=t.multiplier.multiply(n.multiplier).sign(),y=Fe.infinity();if(t.isConstant()||n.isConstant()||t.isInfinity&&n.isInfinity)return v<0&&y.negate(),y}if(t.isConstant()&&n.isConstant()&&l.PARSE2NUMBER)return new Fe(b=new r(t.multiplier.toDecimal()).times(new r(n.multiplier.toDecimal())).toFixed());if(t.isOne())return n.clone();if(n.isOne())return t.clone();if(t.multiplier.equals(0)||n.multiplier.equals(0))return new Fe(0);if(n.group>t.group&&n.group!==g)return this.multiply(n,t);if(t.group===d&&n.group===m&&t.value===n.value){var b=t;t=n,n=b}var M=t.group,S=n.group,_=n.multiplier.num,E=n.multiplier.den;if(M!==f||t.fname!==w||n.isConstant()||t.args[0].value!==n.value||t.args[0].multiplier.lessThan(0))M===f&&t.fname===w&&t.multiplier.equals(1)&&t.power.equals(-1)&&n.isConstant()&&t.args[0].equals(n)&&(t=e.symfunction(w,[n.clone()]),n=new Fe(1));else{var T=t.power,L=e.parse(t.multiplier);(t=e.multiply(L,t.args[0].clone())).setPower(new Be(.5).multiply(T)),M=t.group}var C=t.value,R=n.value,N=(v=new Be(t.sign()),M===c&&S===u&&n.multiplier.equals(t.value)),P=N?new Be(1).multiply(t.multiplier).abs():t.multiplier.multiply(n.multiplier).abs();if(o=t.clone().toUnitMultiplier(),n=n.clone().toUnitMultiplier(!0),M===f&&S===f){var I=t.args[0].clone(),O=n.args[0].clone();if(t.fname===w&&n.fname===w&&t.isLinear()&&n.isLinear()){var k=e.divide(I,O).invert();k.gt(1)&&j(k)&&(o=e.multiply(t.args[0].clone(),Y(k.clone())),n=new Fe(1))}else if(t.fname===x&&n.fname===x&&!I.isConstant()&&!O.isConstant()&&n.power<0){var D=e.subtract(I.clone(),O.clone());if(D.isConstant())if(b=new Fe(1),D<0){for(var z=0,B=Math.abs(D);z<=B;z++){var F=e.add(I.clone(),new Fe(z));b=e.multiply(b,F)}o=e.multiply(e.pow(I,new Fe(t.power)),e.pow(b,new Fe(n.power))),n=new Fe(1)}else{for(z=0,B=Math.abs(D);z<=B;z++)F=e.add(O.clone(),new Fe(z)),b=e.multiply(b,F);o=e.multiply(e.pow(b,new Fe(t.power)),e.pow(O,new Fe(n.power))),n=new Fe(1)}}}if(C===R&&M===m&&M===S&&(C=t.text("hash"),R=n.text("hash")),S===p&&n.previousGroup===m&&M===m&&(C=ke(t,"hash",p)),C!==R&&!N||M===m&&(S===h||S===c||S===f)||M===m&&S===d)if(M===d&&t.isLinear())if(S===d&&n.distributeExponent(),S===d&&n.isLinear()){for(var F in n.symbols){var G=n.symbols[F];o=o.combine(G)}o.multiplier=o.multiplier.multiply(n.multiplier)}else o.combine(n);else if(M!==u){if(M===d)o.distributeExponent(),o.combine(n);else if(!n.isOne()){var V=n.multiplier.clone();n.toUnitMultiplier(),(o=Fe.shell(d).combine([o,n])).multiplier=o.multiplier.multiply(V)}}else o=n.clone().toUnitMultiplier();else{var W=t.power,X=n.power,Z=U(W),J=U(X),$=Z||J;M===m&&S!==m&&n.previousGroup!==m&&W.equals(1)?(o=new Fe(0),t.each((function(t){o=e.add(o,e.multiply(t,n.clone()))}),!0)):(o.power=$?e.add(U(W)?W:new Fe(W),U(X)?X:new Fe(X)):M===u?W:W.add(X),o.power.equals(0)&&(o=o.convert(u)),$&&o.convert(p),t.imaginary&&n.imaginary&&ie(o.power%2)&&(o=new Fe(1),P.negate()),o.group!==p&&o.previousGroup&&(o.previousGroup=void 0),o.multiplier=o.multiplier.multiply(n.multiplier))}if(o.group===c){var K=Math.log(o.value),ee=Math.log(_)/K,te=Math.log(E)/K,ne=P.num/_,re=P.den/E;0!==ee&&j(ee)&&j(ne)&&(o.power=o.power.add(new Be(ee)),P.num/=_),0!==te&&j(te)&&j(re)&&(o.power=o.power.subtract(new Be(te)),P.den/=E)}1===o.length&&(b=o.multiplier,(o=Q(o.symbols)).multiplier=o.multiplier.multiply(b));var se=o.power.toString();if(ie(se)&&o.fname===w){v*=o.sign();var ae=o.power;o=o.args[0],o=e.multiply(new Fe(P),e.pow(o,new Fe(ae.divide(new Be(2))))),v<0&&o.negate()}else o.multiplier=o.multiplier.multiply(P).multiply(v),o.group===g&&o.isImaginary()&&o.distributeMultiplier();return o.group===c&&j(o.power.toDecimal())&&(o=o.convert(u)),o}a&&!i&&(b=t,t=n,n=b,b=a,a=i,i=b);var oe=H(n),le=H(t);if(i&&oe){var ue=new We;n.eachElement((function(n,r,i){ue.set(r,i,e.multiply(t.clone(),n))})),n=ue}else if(le&&oe)n=t.multiply(n);else if(i&&q(n))n.each((function(r,i){i--,n.elements[i]=e.multiply(t.clone(),n.elements[i])}));else if(q(t)&&q(n))n.each((function(r,i){i--,n.elements[i]=e.multiply(t.elements[i],n.elements[i])}));else{if(q(t)&&H(n))return this.multiply(n,t);if(H(t)&&q(n)){if(n.elements.length===t.rows()){ue=new We;var ce=t.cols();return n.each((function(n,r){for(var i=[],s=0;s<ce;s++)i.push(e.multiply(t.elements[r-1][s].clone(),n.clone()));ue.elements.push(i)})),ue}A("Dimensions must match!")}}return n},this.divide=function(t,n){var r=U(t),i=U(n);if(r&&i){if(t.unit||n.unit)return e.Unit.divide(t,n);var s;if(n.equals(0))throw new ve("Division by zero not allowed!");return t.isConstant()&&n.isConstant()?(s=t.clone()).multiplier=s.multiplier.divide(n.multiplier):(n.invert(),s=e.multiply(t,n)),s}var a=q(t),o=q(n);if(r&&o)n=n.map((function(n){return e.divide(t.clone(),n)}));else if(a&&i)n=t.map((function(t){return e.divide(t,n.clone())}));else if(a&&o)t.dimensions()===n.dimensions()?n=n.map((function(n,r){return e.divide(t.elements[--r],n)})):e.error("Cannot divide vectors. Dimensions do not match!");else{var l=H(t),u=H(n);if(l&&i){var c=new We;t.eachElement((function(t,r,i){c.set(r,i,e.divide(t,n.clone()))})),n=c}else r&&u?(c=new We,n.eachElement((function(n,r,i){c.set(r,i,e.divide(t.clone(),n))})),n=c):l&&u?(c=new We,t.rows()===n.rows()&&t.cols()===n.cols()?(t.eachElement((function(t,r,i){c.set(r,i,e.divide(t,n.elements[r][i]))})),n=c):e.error("Dimensions do not match!")):l&&o&&(t.cols()===n.dimensions()?(c=new We,t.eachElement((function(t,r,i){c.set(r,i,e.divide(t,n.elements[r].clone()))})),n=c):e.error("Unable to divide matrix by vector."))}return n},this.pow=function(t,n){var i=U(t),s=U(n);if(i&&s){if(t.unit||n.unit)return e.Unit.pow(t,n);if(t.group===f&&t.fname===b&&ie(n)){var a=t.multiplier.clone(),o=e.pow(t.args[0],n);return o.multiplier=a,o}if(t.isInfinity||n.isInfinity){if(t.isInfinity&&n.isInfinity)throw new we("("+t+")^("+n+") is undefined!");if(t.isConstant()&&n.isInfinity){if(t.equals(0)){if(n.lessThan(0))throw new we("0^Infinity is undefined!");return new Fe(0)}if(t.equals(1))throw new we("1^"+n.toString()+" is undefined!");if(n.lessThan(0))return new Fe(0);if(!t.lessThan(0))return Fe.infinity()}if(t.isInfinity&&n.isConstant()){if(n.equals(0))throw new we(t+"^0 is undefined!");return n.lessThan(0)?new Fe(0):e.multiply(Fe.infinity(),e.pow(new Fe(t.sign()),n.clone()))}}var h=t.equals(0),m=n.equals(0);if(h&&m)throw new we("0^0 is undefined!");if(h&&n.isConstant()&&n.multiplier.greaterThan(0))return new Fe(0);if(m)return new Fe(1);var g,x,M,S,_,E=n.isConstant(),T=t.isConstant(),A=n.isInteger(),L=(a=t.multiplier,t.clone());if(T&&E&&t.equals(0)&&n.lessThan(0))throw new we("Division by zero is not allowed!");if(l.PARSE2NUMBER&&T&&E&&t.sign()<0&&se(n))return g=Math.PI*n,F=new Fe(Math.cos(g)),G=e.multiply(Fe.imaginary(),new Fe(Math.sin(g))),e.add(F,G);if(l.PARSE2NUMBER&&t.isImaginary()&&E&&j(n)&&!n.lessThan(0)&&(F=t.realpart(),G=t.imagpart(),F.isConstant("all")&&G.isConstant("all")))return S=l.USE_BIG?Fe(r.atan2(O.multiplier.toDecimal(),B.multiplier.toDecimal()).times(n.toString())):Math.atan2(G,F)*n,pe=new Fe(S),B=e.pow(Fe.hyp(F,G),n),x=e.multiply(B.clone(),e.trig.cos(pe.clone())),M=e.multiply(B,e.trig.sin(pe)),e.add(x,e.multiply(Fe.imaginary(),M));if(L.toUnitMultiplier(),L.group!==f||L.fname!==w||E){var C=a.sign();se(n)&&C<0&&(L.negate(),(L=e.symfunction(y,[L])).negate()),L.multiplyPower(n)}else(K=L.args[0]).multiplyPower(new Fe(.5)),K.multiplier.multiply(L.multiplier),K.multiplyPower(n),L=K;if(T&&E&&l.PARSE2NUMBER)C<0&&(t.negate(),_=n.multiplier.den.equals(2)?new Fe(l.IMAGINARY):j(n.multiplier)?ie(n.multiplier)?new Fe(1):new Fe(-1):ie(n.multiplier.den)?e.pow(e.symfunction(y,[new Fe(C)]),n.clone()):new Fe(Math.pow(C,n.multiplier.num))),L=new Fe(Math.pow(t.multiplier.toDecimal(),n.multiplier.toDecimal())),_&&(L=e.multiply(L,_));else if(A&&!a.equals(1)){if(n.abs().gt(l.MAX_EXP))return n.sign()<0?new Fe(0):Fe.infinity();var R=n.multiplier.toDecimal(),P=Math.sign(R);R=Math.abs(R);var I=new Be(1);I.num=a.num.pow(R),I.den=a.den.pow(R),P<0&&I.invert(),L.multiplier=L.multiplier.multiply(I)}else if(C=t.sign(),n.isConstant()&&t.isConstant()&&!n.multiplier.den.equals(1)&&C<0)if(n.multiplier.den.equals(2)){var O=new Fe(l.IMAGINARY);t.negate(),n.lessThan(0)&&(O.negate(),n.negate()),L=e.multiply(e.pow(t,n),O)}else{(V=t.clone()).multiplier.negate(),L=e.pow(e.symfunction(y,[new Fe(C)]),n.clone());var k=e.pow(new Fe(V.multiplier.num),n.clone()),D=e.pow(new Fe(V.multiplier.den),n.clone()),B=e.divide(k,D);L=e.multiply(L,B)}else if(l.PARSE2NUMBER&&n.isImaginary()){var F=n.realpart(),G=n.imagpart(),V=t.clone().toLinear(),W=e.pow(V.clone(),F),X=Me(V.clone()),Z=v.cos(e.multiply(G.clone(),X)),Y=e.multiply(v.sin(e.multiply(G,Me(V))),Fe.imaginary());L=e.multiply(W,e.add(Z,Y)),L=e.expand(e.parse(L))}else{var J=t.group===u&&C<0,$=Ie(new Fe(J?a.num:Math.abs(a.num)).setPower(n.clone())),Q=Ie(new Fe(a.den).setPower(n.clone()).invert());if(t.imaginary)if(A){var K;K=Math.sign(n),R=z(n),L=new Fe(ie(ae=R%4)?-1:l.IMAGINARY),(0===ae||K<0&&1===ae||K>0&&3===ae)&&L.negate()}else{var ee=n.multiplier.multiply(Be.quick(1,2)),te=Math.pow(-1,ee.num);L=ie(ee.den)?new Fe(-1).setPower(ee,!0):new Fe(te)}if(C<0&&!J&&L.negate(),E&&t.group!==p){var ne=ie(n.multiplier.den),re=ie(t.power),ae=L.power.toDecimal(),oe=ie(ae);ne&&re&&!oe&&(1===ae?L=e.symfunction(b,[L]):j(ae)?L=e.multiply(e.symfunction(b,[L.clone().toLinear()]),L.clone().setPower(new Be(ae-1))):(R=L.power,L=e.symfunction(b,[L.toLinear()]).setPower(R)),l.POSITIVE_MULTIPLIERS&&L.fname===b&&(L=L.args[0]))}if(n.equals(2)&&L.group===d){var le=new Fe(1);L.each((function(t){le=e.multiply(le,e.pow(t,n))})),L=le}}if(L=Ie(L),$&&Q&&(L=e.multiply(L,function(e){if(e.group===c){var t=e.value,n=De(t)[0];if(!n)return N("Unable to compute prime factors. This should not happen. Please review and report."),e;var r=new Be(Math.log(t)/Math.log(n)).multiply(e.power);if(r.den>e.power.den)return e;e=j(r)?Fe(Math.pow(n,r)):new Fe(n).setPower(r)}return e}(e.multiply($,Q)))),L.fname===w){var ue=L.group===p,ce=ue?L.power.multiplier.toString():L.power.toString();if(ie(ce)){var he=ue?e.divide(L.power,new Fe(2)):new Fe(L.power.divide(new Be(2)));a=L.multiplier,(L=e.pow(L.args[0],he)).multiplier=L.multiplier.multiply(a)}}else if(!l.IGNORE_E&&L.isE()&&L.group===p&&L.power.contains("pi")&&L.power.contains(l.IMAGINARY)&&n.group===d){var pe=n.stripVar(l.IMAGINARY);L=e.add(v.cos(pe),e.multiply(Fe.imaginary(),v.sin(pe)))}return L}if(q(t)&&s)t=t.map((function(t){return e.pow(t,n.clone())}));else if(H(t)&&s){var fe=new We;t.eachElement((function(t,r,i){fe.set(r,i,e.pow(t,n.clone()))})),t=fe}else i&&H(n)&&(fe=new We,n.eachElement((function(n,r,i){fe.set(r,i,e.pow(t.clone(),n))})),t=fe);return t},this.comma=function(e,t){return e instanceof s||(e=s.create(e)),e.append(t),e},this.mod=function(e,t){return F(e,t)},this.slice=function(e,t){return new i(e,t)},this.equals=function(e,t){return e.group===h||e.isLinear()||A("Cannot set equality for "+e.toString()),_[e.value]=t.clone(),t},this.percent=function(t){return e.divide(t,new Fe(100))},this.assign=function(t,n){if(t instanceof s&&n instanceof s)return t.elements.map((function(t,r){return e.assign(t,n.elements[r])})),Ve.fromArray(n.elements);if(t.parent){var r=t.parent;return r.elements[r.getter]=n,delete r.getter,r}if(t.group!==h)throw new Ce("Cannot complete operation. Incorrect LH value for "+t);return _[t.value]=n,n},this.function_assign=function(e,t){var n=e.elements.pop();return K(n,e.elements,t)};var Ue=function(e){return new Fe(!0===e?1:0)};this.eq=function(e,t){return Ue(e.equals(t))},this.gt=function(e,t){return Ue(e.gt(t))},this.gte=function(e,t){return Ue(e.gte(t))},this.lt=function(e,t){return Ue(e.lt(t))},this.lte=function(e,t){return Ue(e.lte(t))},this.factorial=function(e){return this.symfunction(x,[e])},this.dfactorial=function(e){return this.symfunction(M,[e])}}l.FUNCTION_MODULES.push(Oe),oe(Oe),Math.sign=Math.sign||function(e){return 0==(e=+e)||isNaN(e)?e:e>0?1:-1},Math.cosh=Math.cosh||function(e){var t=Math.exp(e);return(t+1/t)/2},Math.sech=Math.sech||function(e){return 1/Math.cosh(e)},Math.csch=Math.csch||function(e){return 1/Math.sinh(e)},Math.coth=Math.coth||function(e){return 1/Math.tanh(e)},Math.sinh=Math.sinh||function(e){var t=Math.exp(e);return(t-1/t)/2},Math.tanh=Math.tanh||function(e){if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)},Math.asinh=Math.asinh||function(e){return e===-1/0?e:Math.log(e+Math.sqrt(e*e+1))},Math.acosh=Math.acosh||function(e){return Math.log(e+Math.sqrt(e*e-1))},Math.atanh=Math.atanh||function(e){return Math.log((1+e)/(1-e))/2},Math.log10=Math.log10||function(e){return Math.log(e)*Math.LOG10E},Math.trunc=Math.trunc||function(e){return isNaN(e)?NaN:e>0?Math.floor(e):Math.ceil(e)},De(314146179365),Ue.getExpression=function(e,t){"last"!==e&&e||(e=S.length),"first"===e&&(e=1);var n=S[e-1];return n?new Ue(n):n},Ue.prototype={text:function(e,t){return t=t||19,e=e||"decimals",this.symbol.text_?this.symbol.text_(e):ke(this.symbol,e,void 0,t)},latex:function(e){return this.symbol.latex?this.symbol.latex(e):Ge.latex(this.symbol,e)},valueOf:function(){return this.symbol.valueOf()},evaluate:function(){if(q(this.symbol)&&0===this.symbol.dimensions())return this;var e,n=arguments[0],r=1;"string"==typeof n?e="%"===n.charAt(0)?Ue.getExpression(n.substr(1)).text():n:n instanceof Ue||U(n)?e=n.text():(e=this.symbol.text(),r--);var i=arguments[r]||{},s=new Ue(ue("PARSE2NUMBER",(function(){return t.parse(e,i)}),!0));return s},buildFunction:function(e){return Xe.build(this.symbol,e)},isNumber:function(){return V(this.symbol)},isInfinity:function(){return Math.abs(this.symbol.multiplier)===1/0},isImaginary:function(){return he(t.parse(this.symbol)).isImaginary()},variables:function(){return B(this.symbol)},toString:function(){try{return W(this.symbol)?"["+this.symbol.toString()+"]":this.symbol.toString()}catch(e){return""}},toDecimal:function(e){l.precision=e;var t=ke(this.symbol,"decimals");return l.precision=void 0,t},isFraction:function(){return D(this.symbol)},isPolynomial:function(){return this.symbol.isPoly()},sub:function(e,n){return new Ue(this.symbol.sub(t.parse(e),t.parse(n)))},operation:function(e,n){return z(n)?n=n.symbol:U(n)||(n=t.parse(n)),new Ue(t[e](this.symbol.clone(),n.clone()))},add:function(e){return this.operation("add",e)},subtract:function(e){return this.operation("subtract",e)},multiply:function(e){return this.operation("multiply",e)},divide:function(e){return this.operation("divide",e)},pow:function(e){return this.operation("pow",e)},expand:function(){return new Ue(t.expand(this.symbol))},each:function(e,t){if(this.symbol.each)this.symbol.each(e,t);else if(W(this.symbol))for(t=0;t<this.symbol.length;t++)e.call(this.symbol,this.symbol[t],t);else e.call(this.symbol)},eq:function(e){U(e)||(e=t.parse(e));try{return t.subtract(this.symbol.clone(),e).equals(0)}catch(e){return!1}},lt:function(e){U(e)||(e=t.parse(e));try{return he(t.subtract(this.symbol.clone(),e)).lessThan(0)}catch(e){return!1}},gt:function(e){U(e)||(e=t.parse(e));try{return he(t.subtract(this.symbol.clone(),e)).greaterThan(0)}catch(e){return!1}},gte:function(e){return this.gt(e)||this.eq(e)},lte:function(e){return this.lt(e)||this.eq(e)},numerator:function(){return new Ue(this.symbol.getNum())},denominator:function(){return new Ue(this.symbol.getDenom())},hasFunction:function(e){return this.symbol.containsFunction(e)},contains:function(e){return this.symbol.contains(e)}},Ue.prototype.toTeX=Ue.prototype.latex,ze.prototype={fromScientific:function(e){var t=String(e).toLowerCase().split("e");return this.coeff=t[0],this.exponent=t[1],this},convert:function(e){var t=e.split("."),n=t[0]||"",r=t[1]||"";n=ze.removeLeadingZeroes(n),r=ze.removeTrailingZeroes(r);var i=n.length,s=n+r,a=ze.leadingZeroes(s).length;this.exponent=i-(a+1);var o=ze.removeLeadingZeroes(s);return this.coeff=o.charAt(0)+"."+(o.substr(1,o.length)||"0"),this},round:function(e){var t=this.copy();if(0===(e=Number(e)))t.coeff=t.coeff.charAt(0);else{var n=this.coeff.substring(0,e+1),r=this.coeff.substring(e+1,e+3),i=r.charAt(0);r.charAt(1)>4&&i++,t.coeff=n+i}return t},copy:function(){var e=new ze(0);return e.coeff=this.coeff,e.exponent=this.exponent,e.sign=this.sign,e},toString:function(e){var t,n=void 0===e?this.coeff:ze.round(this.coeff,e);return t=0===this.exponent&&l.SCIENTIFIC_IGNORE_INTS?this.coeff:n+"e"+this.exponent,(-1===this.sign?"-":"")+t}},ze.isScientific=function(e){return/\d+\.?\d*e[\+\-]*\d+/i.test(e)},ze.leadingZeroes=function(e){var t=e.match(/^(0*).*$/);return t?t[1]:""},ze.removeLeadingZeroes=function(e){var t=e.match(/^0*(.*)$/);return t?t[1]:""},ze.removeTrailingZeroes=function(e){var t=e.match(/0*$/);return t?e.substring(0,e.length-t[0].length):""},ze.round=function(e,t){var n=ne(e,t),r=t-String(n).split(".").pop().length;return r>0&&(n+=new Array(r+1).join(0)),n},ze.prototype={fromScientific:function(e){var t=String(e).toLowerCase().split("e");return this.coeff=t[0],this.exponent=t[1],this},convert:function(e){var t=e.split("."),n=t[0]||"",r=t[1]||"";n=ze.removeLeadingZeroes(n),r=ze.removeTrailingZeroes(r);var i=n.length,s=n+r,a=ze.leadingZeroes(s).length;this.exponent=i-(a+1);var o=ze.removeLeadingZeroes(s);this.coeff=o.charAt(0)+"."+(o.substr(1,o.length)||"0");var l=this.coeff.split(".")[1]||"";return this.decp="0"===l?0:l.length,this.dec=r,this.wholes=n,this},round:function(e){var t=this.copy();if(0===(e=Number(e)))t.coeff=t.coeff.charAt(0);else{var n=this.coeff.substring(0,e+1),r=this.coeff.substring(e+1,e+3),i=r.charAt(0);r.charAt(1)>4&&i++,t.coeff=n+i}return t},copy:function(){var e=new ze(0);return e.coeff=this.coeff,e.exponent=this.exponent,e.sign=this.sign,e},toString:function(e){var t;if(l.SCIENTIFIC_IGNORE_ZERO_EXPONENTS&&0===this.exponent&&this.decp<e)t=0===this.decp?this.wholes:this.coeff;else{var n=void 0===e?this.coeff:ze.round(this.coeff,Math.min(e,this.decp||1));t=0===this.exponent?n:n+"e"+this.exponent}return(-1===this.sign?"-":"")+t}},ze.isScientific=function(e){return/\d+\.?\d*e[\+\-]*\d+/i.test(e)},ze.leadingZeroes=function(e){var t=e.match(/^(0*).*$/);return t?t[1]:""},ze.removeLeadingZeroes=function(e){var t=e.match(/^0*(.*)$/);return t?t[1]:""},ze.removeTrailingZeroes=function(e){var t=e.match(/0*$/);return t?e.substring(0,e.length-t[0].length):""},Be.create=function(e){if(e instanceof Be)return e;var t="-"===(e=e.toString()).charAt(0);t&&(e=e.substr(1,e.length-1));var n=new Be(e);return t&&n.negate(),n},Be.isFrac=function(e){return e instanceof Be},Be.quick=function(e,t){var r=new Be;return r.num=new n(e),r.den=new n(t),r},Be.simple=function(e){for(var t=String(I(e)).split("."),n=t.join(""),r=1,i=(t[1]||"").length,s=0;s<i;s++)r+="0";return Be.quick(n,r).simplify()},Be.prototype={multiply:function(e){if(this.isOne())return e.clone();if(e.isOne())return this.clone();var t=this.clone();return t.num=t.num.multiply(e.num),t.den=t.den.multiply(e.den),t.simplify()},divide:function(e){if(e.equals(0))throw new ve("Division by zero not allowed!");return this.clone().multiply(e.clone().invert()).simplify()},subtract:function(e){return this.clone().add(e.clone().neg())},neg:function(){return this.num=this.num.multiply(-1),this},add:function(e){var t=this.den,n=e.den,r=this.clone(),i=r.num,s=e.num;return t.equals(n)?r.num=i.add(s):(r.num=i.multiply(n).add(s.multiply(t)),r.den=t.multiply(n)),r.simplify()},mod:function(e){var t=this.clone(),n=e.clone();return t.num=t.num.multiply(n.den),t.den=t.den.multiply(n.den),n.num=n.num.multiply(this.den),n.den=n.den.multiply(this.den),t.num=t.num.mod(n.num),t.simplify()},simplify:function(){var e=n.gcd(this.num,this.den);return this.num=this.num.divide(e),this.den=this.den.divide(e),this},clone:function(){var e=new Be;return e.num=new n(this.num),e.den=new n(this.den),e},decimal:function(e){var t=this.num.isNegative()?"-":"";if(this.num.equals(this.den))return"1";e=e||l.PRECISION,e++;for(var n=[],r=this.num.abs(),i=this.den,s=0;s<e;s++){var a=r.divide(i),o=r.subtract(a.multiply(i));if(n.push(a),o.equals(0))break;r=o.times(10)}var u=n.shift();if(0===n.length)return t+u.toString();if(s===e){var c=[];for(s=0;s<2;s++)c.unshift(n.pop());n.push(Math.round(c.join(".")))}return t+(u.toString()+".")+n.join("")},toDecimal:function(e){return(e=e||l.PRECISION)?this.decimal(e):this.num/this.den},qcompare:function(e){return[this.num.multiply(e.den),e.num.multiply(this.den)]},equals:function(e){isNaN(e)||(e=new Be(e));var t=this.qcompare(e);return t[0].equals(t[1])},absEquals:function(e){isNaN(e)||(e=new Be(e));var t=this.qcompare(e);return t[0].abs().equals(t[1])},greaterThan:function(e){isNaN(e)||(e=new Be(e));var t=this.qcompare(e);return t[0].gt(t[1])},gte:function(e){return this.greaterThan(e)||this.equals(e)},lte:function(e){return this.lessThan(e)||this.equals(e)},lessThan:function(e){isNaN(e)||(e=new Be(e));var t=this.qcompare(e);return t[0].lt(t[1])},isInteger:function(){return this.den.equals(1)},negate:function(){return this.num=this.num.multiply(-1),this},invert:function(){var e=this.den;if(!this.num.equals(0)){var t=this.num.isNegative();this.den=this.num.abs(),this.num=e,t&&(this.num=this.num.multiply(-1))}return this},isOne:function(){return this.num.equals(1)&&this.den.equals(1)},sign:function(){return this.num.isNegative()?-1:1},abs:function(){return this.num=this.num.abs(),this},gcd:function(e){return Be.quick(n.gcd(e.num,this.num),n.lcm(e.den,this.den))},toString:function(){return this.den.equals(1)?this.num.toString():this.num.toString()+"/"+this.den.toString()},valueOf:function(){return l.USE_BIG?new r(this.num.toString()).div(new r(this.den.toString())):this.num/this.den},isNegative:function(){return this.toDecimal()<0}},Fe.imaginary=function(){var e=new Fe(l.IMAGINARY);return e.imaginary=!0,e},Fe.infinity=function(e){var t=new Fe("Infinity");return-1===e&&t.negate(),t},Fe.shell=function(e,t){var n=new Fe(t);return n.group=e,n.symbols={},n.length=0,n},Fe.unwrapSQRT=function(e,t){var n=e.power;if(e.fname===w&&(e.isLinear()||t)){var r=e.args[0].clone();r.power=r.power.multiply(new Be(.5)),r.multiplier=r.multiplier.multiply(e.multiplier),e=r,t&&(e.power=n.multiply(new Be(.5)))}return e},Fe.hyp=function(e,n){return e=e||new Fe(0),n=n||new Fe(0),t.sqrt(t.add(t.pow(e.clone(),new Fe(2)),t.pow(n.clone(),new Fe(2))))},Fe.toPolarFormArray=function(e){var n,r;return n=e.realpart(),r=e.imagpart(),[Fe.hyp(n,r),n.equals(0)?t.parse("pi/2"):t.trig.atan(t.divide(r,n))]},Fe.unwrapPARENS=function(e){if(""===e.fname){var t=e.args[0];return t.power=t.power.multiply(e.power),t.multiplier=t.multiplier.multiply(e.multiplier),""===e.fname?Fe.unwrapPARENS(t):t}return e},Fe.create=function(e,n){return n=void 0===n?1:n,t.parse("("+e+")^("+n+")")},Fe.prototype={getNth:function(e){var n=he(t.pow(t.parse(this.multiplier),t.parse(e).invert())),r=t.parse(ne(n));return he(t.pow(r,t.parse(e))).equals(t.parse(this.multiplier))?r:n},isToNth:function(e){var n,r=this.getNth(e),i=j(r);return this.group===d?(n=!0,this.each((function(t){t.isToNth(e)||(n=!1)}))):n=this.group===u||j(t.divide(t.parse(this.power),t.parse(e))),i&&n},isSquare:function(){return this.isToNth(2)},isCube:function(){return this.isToNth(3)},isSimple:function(){return this.power.equals(1)&&this.multiplier.equals(1)},powSimp:function(){if(this.group===d){var e=[],n=this.multiplier.sign();this.each((function(t){var n=t.power;if(U(n)||n.equals(1))return this.clone();e.push(n)}));var r=new Be(ee(e)),i=(n=this.multiplier.sign(),this.multiplier.clone().abs()),s=Oe.ifactor(i),a=new Be(1),o=new Be(1);for(var l in s){var u=new Be(s[l]);u.lessThan(r)||(u=u.divide(r).subtract(new Be(1)),o=o.multiply(new Be(l))),a=a.multiply(t.parse(Y(l)+"^"+Y(u)).multiplier)}var c=new Fe(o);this.each((function(e){(e=e.clone()).power=e.power.divide(r),c=t.multiply(c,e)}));var h=t.symfunction(y,[c]);return h.power=r,h.multiplier=n<0?a.negate():a,h}return this.clone()},equals:function(e){return U(e)||(e=new Fe(e)),this.value===e.value&&this.power.equals(e.power)&&this.multiplier.equals(e.multiplier)&&this.group===e.group},abs:function(){var e=this.clone();return e.multiplier.abs(),e},gt:function(e){return U(e)||(e=new Fe(e)),this.isConstant()&&e.isConstant()&&this.multiplier.greaterThan(e.multiplier)},gte:function(e){return U(e)||(e=new Fe(e)),this.equals(e)||this.isConstant()&&e.isConstant()&&this.multiplier.greaterThan(e.multiplier)},lt:function(e){return U(e)||(e=new Fe(e)),this.isConstant()&&e.isConstant()&&this.multiplier.lessThan(e.multiplier)},lte:function(e){return U(e)||(e=new Fe(e)),this.equals(e)||this.isConstant()&&e.isConstant()&&this.multiplier.lessThan(e.multiplier)},isPoly:function(e){var t=this.group,n=this.power;if(!j(n)||n<0)return!1;if(t===u||t===h||this.isConstant(!0))return!0;var r=B(this);if(t===d&&1===r.length){var i=r[0];if(!i)return!0;for(var s in this.symbols){var a=this.symbols[s];if(a.group===f&&!a.args[0].isConstant())return!1;if(!a.contains(i)&&!a.isConstant(!0))return!1}return!0}if(this.isComposite()||t===d&&e){if(!e&&r.length>1)return!1;for(var s in this.symbols)if(!this.symbols[s].isPoly(e))return!1;return!0}return!1},stripVar:function(e,n){var r;return this.group!==m&&this.group!==h||this.value!==e?this.group===d&&this.isLinear()?(r=new Fe(1),this.each((function(n){n.contains(e,!0)||(r=t.multiply(r,n.clone()))})),r.multiplier=r.multiplier.multiply(this.multiplier)):this.group!==g||this.isLinear()?this.group===g&&this.isLinear()?(r=new Fe(0),this.each((function(n){if(!n.contains(e)){var i=n.clone();i.multiplier=i.multiplier.multiply(this.multiplier),r=t.add(r,i)}})),r.equals(0)&&(r=new Fe(this.multiplier))):r=this.group===p&&this.power.contains(e,!0)||this.group===f&&this.contains(e)?new Fe(this.multiplier):this.clone():r=new Fe(this.multiplier):r=new Fe(n?0:this.multiplier),r},toArray:function(e,n){n=n||{arr:[],add:function(e,n){var r=this.arr[n];this.arr[n]=r?t.add(r,e):e}};var r=this.group;if(r===h&&this.contains(e))n.add(new Fe(this.multiplier),this.power);else if(r===d){var i=this.stripVar(e),s=t.divide(this.clone(),i.clone()),a=s.isConstant()?0:s.power;n.add(i,a)}else if(r===m&&this.value===e)this.each((function(t,r){n.add(t.stripVar(e),r)}));else if(r===g)this.each((function(t){t.toArray(e,n)}));else{if(this.contains(e))throw new Me("Cannot convert to array! Exiting");n.add(this.clone(),0)}n=n.arr;for(var o=0;o<n.length;o++)n[o]||(n[o]=new Fe(0));return n},hasFunc:function(e){var t=this.group===f||this.group===p;if(t&&!e||t&&this.contains(e))return!0;if(this.symbols)for(var n in this.symbols)if(this.symbols[n].hasFunc(e))return!0;return!1},sub:function(e,n){e=U(e)?e.clone():t.parse(e),n=U(n)?n.clone():t.parse(n),e.group!==u&&e.group!==c||A("Cannot substitute a number. Must be a variable");var r,i=!1,s=e.multiplier.equals(1),a=this.multiplier.clone();if(this.value===e.value&&(this.group!==m&&e.group!==m||this.group===m&&e.group===m))(s||e.multiplier.equals(this.multiplier))&&(e.isLinear()?r=n:e.power.equals(this.power)&&(r=n,i=!0),e.multiplier.equals(this.multiplier)&&(a=new Be(1)));else if(this.group===d||this.previousGroup===d)r=new Fe(1),this.each((function(i){var s=t.parse(i.sub(e,n));r=t.multiply(r,s)}));else if(this.isComposite()){var o=this.clone();if(e.isComposite()&&o.isComposite()&&o.isLinear()&&e.isLinear()){var l=function(e,t){for(var n in e.symbols){var r=e.symbols[n];if(r.isComposite()&&l(r,t)||r.equals(t))return!0}return!1};for(var h in e.symbols)if(!l(o,e.symbols[h]))return o.clone();r=t.add(t.subtract(o.clone(),e),n)}else r=new Fe(0),o.each((function(i){r=t.add(r,i.sub(e,n))}))}else if(this.group===p)r=t.parse(this.value).sub(e,n);else if(this.group===f){for(var g=[],v=0;v<this.args.length;v++){var y=this.args[v];U(y)||(y=t.parse(y)),g.push(y.sub(e,n))}r=t.symfunction(this.fname,g)}if(r){if(!i){var w=this.group===p?this.power.sub(e,n):t.parse(this.power);r=t.pow(r,w)}return r.multiplier=r.multiplier.multiply(a),r}return this.clone()},isMonomial:function(){if(this.group===h)return!0;if(this.group!==d)return!1;for(var e in this.symbols)if(this.symbols[e].group!==h)return!1;return!0},isPi:function(){return this.group===h&&"pi"===this.value},sign:function(){return this.multiplier.sign()},isE:function(){return"e"===this.value},isSQRT:function(){return this.fname===w},isConstant:function(e,t){if(t&&this.group===d)for(var n in this.symbols)if(this.symbols[n].isConstant(!0))return!0;if("functions"===e&&this.isComposite()){var r=!0;return this.each((function(n){n.isConstant(e,t)||(r=!1)}),!0),r}if("all"===e&&(this.isPi()||this.isE()))return!0;if(e&&this.group===f){for(var i=0;i<this.args.length;i++)if(!this.args[i].isConstant(e))return!1;return!0}return e?V(this):this.value===v},isImaginary:function(){if(this.imaginary)return!0;if(this.symbols)for(var e in this.symbols)if(this.symbols[e].isImaginary())return!0;return!1},realpart:function(){if(this.isConstant())return this.clone();if(this.imaginary)return new Fe(0);if(this.isComposite()){var e=new Fe(0);return this.each((function(n){e=t.add(e,n.realpart())})),e}return this.isImaginary()?new Fe(0):this.clone()},imagpart:function(){if(this.group===h&&this.isImaginary())return new Fe(this.multiplier);if(this.isComposite()){var e=new Fe(0);return this.each((function(n){e=t.add(e,n.imagpart())})),e}return this.group===d?this.stripVar(l.IMAGINARY):new Fe(0)},isInteger:function(){return this.isConstant()&&this.multiplier.isInteger()},isLinear:function(e){if(e){if(this.isConstant())return!0;if(this.group===h)return this.value!==e||this.power.equals(1);if(this.isComposite()&&this.power.equals(1)){for(var t in this.symbols)if(!this.symbols[t].isLinear(e))return!1;return!0}return!(this.group!==d||!this.symbols[e])&&this.symbols[e].isLinear(e)}return this.power.equals(1)},containsFunction:function(e){if("string"==typeof e&&(e=[e]),this.group===f&&-1!==e.indexOf(this.fname))return!0;if(this.symbols)for(var t in this.symbols)if(this.symbols[t].containsFunction(e))return!0;return!1},multiplyPower:function(e){if(this.group===u&&this.multiplier.equals(1))return this;var n=this.power;if(this.group!==p&&e.group===u){var r=e.multiplier;this.group!==u||r.isInteger()||this.convert(c),this.power=n.equals(1)?r.clone():n.multiply(r),this.group===c&&j(this.power)&&(this.value=Math.pow(this.value,this.power),this.toLinear(),this.convert(u))}else this.group!==p&&(n=new Fe(n),this.convert(p)),this.power=t.multiply(n,e);return this},setPower:function(e,t){if(this.group===u&&this.multiplier.equals(1))return this;if(this.group!==p||U(e)){var n=!1;U(e)&&(e.group===u?e=e.multiplier:n=!0);var r=n?p:c;this.power=e,this.group===u&&r&&this.convert(r,t)}else this.group=this.previousGroup,delete this.previousGroup,this.group===u?(this.multiplier=new Be(this.value),this.value=v):this.power=e;return this},isInverse:function(){return this.group===p?this.power.multiplier.lessThan(0):this.power<0},clone:function(e){var t,n=e||new Fe(0),r=["value","group","length","previousGroup","imaginary","fname","args","isInfinity","scientific"],i=r.length;if(this.symbols)for(var s in n.symbols={},this.symbols)n.symbols[s]=this.symbols[s].clone();for(t=0;t<i;t++)void 0!==this[r[t]]&&(n[r[t]]=this[r[t]]);return n.power=this.power.clone(),n.multiplier=this.multiplier.clone(),this.isConversion&&(n.isConversion=this.isConversion),this.isUnit&&(n.isUnit=this.isUnit),n},toUnitMultiplier:function(e){return this.multiplier.num=new n(this.multiplier.num.isNegative()&&e?-1:1),this.multiplier.den=new n(1),this},toLinear:function(){return this.power.equals(1)||this.setPower(new Be(1)),this},each:function(e,t){if(this.symbols)for(var n in this.symbols){var r=this.symbols[n];if(r.group===m&&t)for(var i in r.symbols)e.call(n,r.symbols[i],i);else e.call(this,r,n)}else e.call(this,this,this.value)},valueOf:function(){return this.group===u?this.multiplier.valueOf():0===this.power?1:0===this.multiplier?0:ke(this,"decimals")},contains:function(e,t){e=String(e);var n=this.group;if(this.value===e)return!0;if(this.symbols)for(var r in this.symbols)if(this.symbols[r].contains(e,t))return!0;if(n===f||this.previousGroup===f)for(var i=0;i<this.args.length;i++)if(this.args[i].contains(e,t))return!0;if(n===p){if(t&&this.power.contains(e,t))return!0;if(this.value===e)return!0}return this.value===e},negate:function(){return this.multiplier.negate(),this.group!==g&&this.group!==m||this.distributeMultiplier(),this},invert:function(e,t){return e||(this.multiplier=this.multiplier.invert()),U(this.power)?this.power.negate():this.group===d&&t?this.each((function(e){return e.invert()})):this.power&&this.group!==u&&this.power.negate(),this},distributeMultiplier:function(e){var t=e?this.power.absEquals(1):this.power.equals(1);if(this.symbols&&t&&this.group!==d&&!this.multiplier.equals(1)){for(var n in this.symbols){var r=this.symbols[n];r.multiplier=r.multiplier.multiply(this.multiplier),r.distributeMultiplier()}this.toUnitMultiplier()}return this},distributeExponent:function(){if(!this.power.equals(1)){var e=this.power;for(var n in this.symbols){var r=this.symbols[n];r.group===p?r.power=t.multiply(r.power,new Fe(e)):this.symbols[n].power=this.symbols[n].power.multiply(e)}this.toLinear()}return this},convert:function(e,t){if(e>f){var n=this.clone();this.symbols={},e===d?n.toUnitMultiplier():this.toUnitMultiplier(),this.group===f&&(n.args=this.args,delete this.args,delete this.fname),this.isImgSymbol&&delete this.isImgSymbol,this.toLinear(),this.symbols[n.keyForGroup(e)]=n,this.group=e,this.length=1}else if(e===p)this.group===u&&this.multiplier.equals(1)||(this.group!==p&&(this.previousGroup=this.group),this.group===u?(this.value=this.multiplier.num.toString(),this.toUnitMultiplier()):this.value=ke(this,"hash"),this.group=p);else if(e===u){var r=this.multiplier.toDecimal();this.symbols&&(this.symbols=void 0),new Fe(this.group===c?r*Math.pow(this.value,this.power):r).clone(this)}else e===c&&this.group===u&&(this.value=t?this.multiplier.num.toString():Math.abs(this.multiplier.num.toString()),this.toUnitMultiplier(!t),this.group=c);return this},insert:function(e,n){if(U(e)||A("Object "+e+" is not of type Symbol!"),this.symbols){var r=this.group;if(r>f){var i=e.keyForGroup(r),s=i in this.symbols&&this.symbols[i];if("add"===n){var a=i;s?(this.symbols[a]=t.add(s,e),this.symbols[a].multiplier.equals(0)&&(delete this.symbols[a],this.length--,0===this.length&&(this.convert(u),this.multiplier=new Be(0)))):(this.symbols[i]=e,this.length++)}else e.group===c&&j(e.power)&&e.convert(u),e.group!==p?(this.multiplier=this.multiplier.multiply(e.multiplier),e.toUnitMultiplier()):(e.parens=e.multiplier.lessThan(0),this.multiplier=this.multiplier.multiply(e.multiplier.clone().abs()),e.toUnitMultiplier(!0)),s&&((e=t.multiply(le(this.symbols,i),e)).isConstant()&&(this.multiplier=this.multiplier.multiply(e.multiplier),e=new Fe(1)),this.length--),e.isOne(!0)?e.multiplier.lessThan(0)&&this.negate():(this.symbols[i]=e,this.length++);0===this.length&&this.convert(u),this.group!==g&&this.group!==d||this.updateHash()}}return this},attach:function(e){if(W(e)){for(var t=0;t<e.length;t++)this.insert(e[t],"add");return this}return this.insert(e,"add")},combine:function(e){if(W(e)){for(var t=0;t<e.length;t++)this.insert(e[t],"multiply");return this}return this.insert(e,"multiply")},updateHash:function(){if(this.group!==u)if(this.group===f){for(var e="",t=this.args,n=this.fname===y,r=0;r<t.length;r++)e+=(0===r?"":",")+ke(t[r]);var i=n?"":this.fname;this.value=i+(n?e:Y(e))}else this.group!==h&&this.group!==m&&(this.value=ke(this,"hash"))},keyForGroup:function(e){var t,n=this.group;if(n===u)t=this.value;else if(n===h||n===c)t=e===m?this.power.toDecimal():this.value;else if(n===f)t=e===m?this.power.toDecimal():ke(this,"hash");else{if(n===m)return e===d?ke(this,"hash"):e===g?this.power.equals(1)?this.value:Y(ke(this,"hash"))+l.POWER_OPERATOR+this.power.toDecimal():e===m?this.power.toString():this.value;n===g?(e===g&&(t=ke(this,"hash")),t=e===m?this.power.toDecimal():this.value):n===d?t=e===m?this.power.toDecimal():ke(this,"hash"):n===p&&(t=e===m?ke(this.power):ke(this,"hash"))}return t},collectSymbols:function(e,t,n,r){var i=[];if(this.symbols)for(var s in this.symbols){var a=this.symbols[s];!r||a.group!==m&&a.group!==g?i.push(e?e(a,t):a):i=i.concat(a.collectSymbols())}else i.push(this);return null===n&&(n=void 0),i.sort(n)},latex:function(e){return Ge.latex(this,e)},text:function(e){return ke(this,e)},isOne:function(e){var t=e?"absEquals":"equals";return this.group===u?this.multiplier[t](1):this.power.equals(0)},isComposite:function(){var e=this.group,t=this.previousGroup;return e===g||e===m||t===m||t===g},isCombination:function(){var e=this.group,t=this.previousGroup;return e===d||t===d},lessThan:function(e){return this.multiplier.lessThan(e)},greaterThan:function(e){return U(e)||(e=new Fe(e)),!(!this.isConstant(!0)||!e.isConstant(!0))&&this.multiplier.greaterThan(e.multiplier)},getDenom:function(){var e,n;if(n=this.clone(),this.group===d&&this.power.lessThan(0)&&(n=t.expand(n)),n.power.lessThan(0)){var r=t.parse(n.multiplier.den);(e=n.toUnitMultiplier()).power.negate(),e=t.multiply(r,e)}else if(n.group===d)for(var i in e=t.parse(n.multiplier.den),n.symbols)n.symbols[i].power<0&&(e=t.multiply(e,n.symbols[i].clone().invert()));else e=t.parse(n.multiplier.den);return e},getNum:function(){var e,n;return(n=this.clone()).group===d&&n.power.lessThan(0)&&(n=t.expand(n)),n.power.greaterThan(0)&&n.group!==d?e=t.multiply(t.parse(n.multiplier.num),n.toUnitMultiplier()):n.group===d?(e=t.parse(n.multiplier.num),n.each((function(n){(n.power>0||n.group===p&&n.power.multiplier>0)&&(e=t.multiply(e,n.clone()))}))):e=t.parse(n.multiplier.num),e},toString:function(){return this.text()}};var He={convert:function(e,t){var n;if(0===e)n=[0,1];else if(e<1e-6||e>1e20){var r=this.quickConversion(Number(e));if(r[1]<=1e20){var i=Math.abs(e),s=e/i;(n=this.fullConversion(i.toFixed((r[1]+"").length-1)))[0]=n[0]*s}else n=r}else n=this.fullConversion(e);return n},quickConversion:function(e){return function(e){ze.isScientific(e)&&(e=I(e));var t,n=function(e){"string"!=typeof e&&(e=e.toString());var t="",n=e.charAt(0);return"-"===n?(e=e.substr(1,e.length),t="-"):"+"===n&&(e=e.substr(1,e.length)),{sign:t,value:e}}(e),r=n.value.split(".");t=1===r.length?r[0]:r[0]+r[1];var i=r[1]?r[1].length:0,s=`1${"0".repeat(i)}`;return"0"!==t&&(t=t.replace(/^0+/,"")),[n.sign+t,s]}(e)},fullConversion:function(e){for(var t=!1,n=0,r=1,i=1,s=0,a=0,o=e;!t;){++a>1e4&&(t=!0);var l=Math.floor(o),u=n+l*i,c=r+l*s,h=o-l;h<1e-16&&(t=!0),o=1/h,n=i,r=s,i=u,s=c,(Math.abs(u/c-e)<1e-16||a>30)&&(t=!0)}return[u,c]}},Ge={parser:function(){var e=["classes","setOperator","getOperators","getBrackets","tokenize","toRPN","tree","units"],t=new qe;for(var n in t)-1===e.indexOf(n)&&delete t[n];return t.setOperator({precedence:8,operator:"\\",action:"slash",prefix:!0,postfix:!1,leftAssoc:!0,operation:function(e){return e}}),t.setOperator({precedence:8,operator:"\\,",action:"slash_comma",prefix:!0,postfix:!1,leftAssoc:!0,operation:function(e){return e}}),t.getBrackets()["{"].maps_to=void 0,t}(),space:"~",dot:" \\cdot ",latex:function(e,n){if(e.clone&&(e=e.clone()),e instanceof t.classes.Collection&&(e=e.elements),W(e)){for(var r=[],i=0;i<e.length;i++){var s=e[i];U(s)||(s=t.parse(s)),r.push(this.latex(s,n))}return this.brackets(r.join(", "),"square")}if(H(e)){var a="\\begin{pmatrix}\n";for(i=0;i<e.elements.length;i++){for(var o=[],l=e.elements[i],u=0;u<l.length;u++)o.push(this.latex(l[u],n));a+=o.join(" & "),i<e.elements.length-1&&(a+="\\\\\n")}return a+"\\end{pmatrix}"}if(q(e)){for(a="\\left[",i=0;i<e.elements.length;i++)a+=this.latex(e.elements[i],n)+" "+(i!==e.elements.length-1?",\\,":"");return a+"\\right]"}if(G(e)){for(a="\\{",i=0;i<e.elements.length;i++)a+=this.latex(e.elements[i],n)+" "+(i!==e.elements.length-1?",\\,":"");return a+"\\}"}var h,p="decimal"===n||"decimals"===n,f=(e=e.clone()).power,m=X(f),g=e.multiplier.lessThan(0);if(e.group===c&&p)return String(e.multiplier.toDecimal()*Math.pow(e.value,e.power.toDecimal()));e.multiplier=e.multiplier.abs(),h=p?[String(e.multiplier.toDecimal()),""]:[e.multiplier.num,e.multiplier.den];var v,y=this.value(e,m,n,g);m&&f.negate(),p?(v=U(f)?Ge.latex(f,n):String(f.toDecimal()),"1"===String(v)&&(v="")):v=U(f)?this.latex(f,n):this.formatFrac(f,!0);var w=["",""];return w[m?1:0]=v,((g?"-":"")+this.set(h,y,w,e.group===d)).replace(/\+\-/gi,"-")},greek:{alpha:"\\alpha",beta:"\\beta",gamma:"\\gamma",delta:"\\delta",epsilon:"\\epsilon",zeta:"\\zeta",eta:"\\eta",theta:"\\theta",iota:"\\iota",kappa:"\\kappa",lambda:"\\lambda",mu:"\\mu",nu:"\\nu",xi:"\\xi",omnikron:"\\omnikron",pi:"\\pi",rho:"\\rho",sigma:"\\sigma",tau:"\\tau",upsilon:"\\upsilon",phi:"\\phi",chi:"\\chi",psi:"\\psi",omega:"\\omega",Gamma:"\\Gamma",Delta:"\\Delta",Epsilon:"\\Epsilon",Theta:"\\Theta",Lambda:"\\Lambda",Xi:"\\Xi",Pi:"\\Pi",Sigma:"\\Sigma",Phi:"\\Phi",Psi:"\\Psi",Omega:"\\Omega"},symbols:{arccos:"\\arccos",cos:"\\cos",csc:"\\csc",exp:"\\exp",ker:"\\ker",limsup:"\\limsup",min:"\\min",sinh:"\\sinh",arcsin:"\\arcsin",cosh:"\\cosh",deg:"\\deg",gcd:"\\gcd",lg:"\\lg",ln:"\\ln",Pr:"\\Pr",sqrt:"\\sqrt",sup:"\\sup",arctan:"\\arctan",cot:"\\cot",det:"\\det",hom:"\\hom",lim:"\\lim",log:"\\log",LN:"\\LN",sec:"\\sec",tan:"\\tan",arg:"\\arg",coth:"\\coth",dim:"\\dim",inf:"\\inf",liminf:"\\liminf",max:"\\max",sin:"\\sin",tanh:"\\tanh"},value:function(e,t,n,r){var i=e.group,s=e.previousGroup,a=["",""],o=t?1:0;if(e.isInfinity)a[o]="\\infty";else if(i===h||i===c||s===h||s===c||s===u){(D=this.formatSubscripts(e.value)).replace&&(D=D.replace(/(.+)_$/,"$1\\_"));var m=String(D).split("_"),v=this.greek[m[0]];v&&(m[0]=v,D=m.join("_")),(e=this.symbols[m[0]])&&(m[0]=e,D=m.join("_")),a[o]=D}else if(i===f||s===f){for(var S=[],_=e.fname,E=0;E<e.args.length;E++){var T;T="string"==typeof(A=e.args[E])?A:this.latex(A,n),S.push(T)}if(_===w)a[o]="\\sqrt"+this.braces(S.join(","));else if(_===b)a[o]=this.brackets(S.join(","),"abs");else if(_===y)a[o]=this.brackets(S.join(","),"parens");else if("limit"===_)a[o]=" \\lim\\limits_{"+S[1]+" \\to "+S[2]+"} "+S[0];else if("integrate"===_)a[o]="\\int"+this.braces(S[0])+this.braces("d"+S[1]);else if("defint"===_)a[o]="\\int\\limits_"+this.braces(S[1])+"^"+this.braces(S[2])+" "+S[0]+" d"+S[3];else if(_===x||_===M){var A;(A=e.args[0]).power.equals(1)&&(A.isComposite()||A.isCombination())&&(S[0]=this.brackets(S[0])),a[o]=S[0]+(_===x?"!":"!!")}else if("floor"===_)a[o]="\\left \\lfloor"+this.braces(S[0])+"\\right \\rfloor";else if("ceil"===_)a[o]="\\left \\lceil"+this.braces(S[0])+"\\right \\rceil";else if(_===l.LOG&&S.length>1)a[o]="\\mathrm"+this.braces(l.LOG)+"_"+this.braces(S[1])+this.brackets(S[0]);else if(_===l.LOG10)a[o]="\\mathrm"+this.braces(l.LOG)+"_"+this.braces(10)+this.brackets(S[0]);else if("sum"===_){var L=S[0],C=S[1],R=S[2],N=S[3];a[o]="\\sum\\limits_{"+this.braces(C)+"="+this.braces(R)+"}^"+this.braces(N)+" "+this.braces(L)}else if("product"===_)L=S[0],C=S[1],R=S[2],N=S[3],a[o]="\\prod\\limits_{"+this.braces(C)+"="+this.braces(R)+"}^"+this.braces(N)+" "+this.braces(L);else if("nthroot"===_)a[o]="\\sqrt["+S[1]+"]"+this.braces(S[0]);else if("mod"===_)a[o]=S[0]+" \\bmod "+S[1];else if("realpart"===_)a[o]="\\operatorname{Re}"+this.brackets(S[0]);else if("imagpart"===_)a[o]="\\operatorname{Im}"+this.brackets(S[0]);else{var P=""!==_?"\\mathrm"+this.braces(_.replace(/_/g,"\\_")):"";e.isConversion?a[o]=P+this.brackets(S.join(""),"parens"):a[o]=P+this.brackets(S.join(","),"parens")}}else if(e.isComposite()){var I=e.collectSymbols().sort(i===g||s===g?function(e,t){return t.group-e.group}:function(e,t){var n=U(e.power)?-1:e.power;return(U(t.power)?-1:t.power)-n}),O=[],k=I.length;for(E=0;E<k;E++)O.push(Ge.latex(I[E],n));var D=O.join("+");a[o]=e.isLinear()&&e.multiplier.equals(1)&&!r?D:this.brackets(D,"parens")}else if(i===d||s===p||s===d){i===d&&e.distributeExponent();var z=[],B=[],F=[],q=[],H=0,G=0,V=function(e,t,n){if(n>1&&t.length>0)for(var r=t.length,i=0;i<r;i++){var s=t[i],a=e[s];/^\\left\(.+\\right\)\^\{.+\}$/g.test(a)||/^\\left\(.+\\right\)$/g.test(a)||(e[s]=Ge.brackets(a,"parens"))}return e};e.each((function(t){var r;X(t.power)?(r=Ge.latex(t.invert(),n),G++,t.isComposite()&&(1!=e.multiplier.den&&1==Math.abs(t.power)&&(r=Ge.brackets(r,"parens")),F.push(z.length)),z.push(r)):(r=Ge.latex(t,n),H++,t.isComposite()&&(1!=e.multiplier.num&&1==Math.abs(t.power)&&(r=Ge.brackets(r,"parens")),q.push(B.length)),B.push(r))})),V(B,q,H),a[0]=B.join(this.dot),V(z,F,G),a[1]=z.join(this.dot)}return a},set:function(e,t,n,r){var i=function(e){return/^\\left\(.+\\right\)$/.test(e)};if(n&&(n=this.formatP(n)),r){var s=n[0];n[0]=""}t=this.merge(t,n);var a=e[0],o=e[1],l=t[0],u=t[1];l&&1===Number(a)&&(a=""),1===Number(o)&&(o="");var c=this.join(a,l,i(l)?"":this.dot),h=this.join(o,u,i(u)?"":this.dot);if(c&&h){var p=this.frac(c,h);return r&&s&&(p=this.brackets(p)+s),p}return c},merge:function(e,t){for(var n=[],r=0;r<2;r++)n[r]=e[r]+t[r];return n},join:function(e,t,n){return e||t?e&&!t?e:t&&!e?t:e+n+t:""},formatSubscripts:function(e){for(var t=e.toString().split("_"),n="";t.length>1;)t.length>0&&(n="_"+this.braces(t.pop()+n));return t[0]+n},formatP:function(e){for(var t=0;t<2;t++){var n=e[t];n&&(e[t]="^"+this.braces(n))}return e},formatFrac:function(e,t){var n=e.num.toString(),r=e.den.toString();return t&&"1"===n&&"1"===r?"":"1"===r?n:this.frac(n,r)},frac:function(e,t){return"\\frac"+this.braces(e)+this.braces(t)},braces:function(e){return"{"+e+"}"},brackets:function(e,t){var n={parens:["(",")"],square:["[","]"],brace:["{","}"],abs:["|","|"],angle:["\\langle","\\rangle"]}[t=t||"parens"];return"\\left"+n[0]+e+"\\right"+n[1]},filterTokens:function(e){var t=[];W(e)&&(t.type=e.type);for(var n=["\\","left","right","big","Big","large","Large"],r=0,i=e.length;r<i;r++){var s=e[r],a=e[r+1];"\\"===s.value&&"\\"===a.value?t.push(s):W(s)?t.push(Ge.filterTokens(s)):-1===n.indexOf(s.value)&&t.push(s)}return t},parse:function(e){var t,n="",r=this.filterTokens(e),i={cdot:"",times:"",infty:"Infinity"},s=function(e){return r[void 0===e?++t:t+=e]},a=function(){return Ge.parse(s())},o=function(e){return e in i?i[e]:"*"===e&&"&"===r[t+1].value?(s(2),","):"&"===e?(s(),","):"\\"===e?"],[":e};for(t=0,h=r.length;t<h;t++){var l=r[t];if("frac"===l.value)n+=a()+"/"+a();else if(l.value in Ge.symbols)if(l.value===w&&"vector"===r[t+1].type&&"Set"===r[t+2].type){var u=a();n+=a()+"^"+Y("1/"+u)}else n+=l.value+a();else if("int"===l.value){var c=a();t++,f=o((f=s().value).substring(1,f.length)),n+="integrate"+Y(c+","+f)}else if("int_"===l.value){var h=a();if(t++,void 0===(p=s().value)){t--;var p=a()}if(c=a(),","===(f=s().value))var f=s().value;"differentialD"===f&&(t++,f=s().value),"mathrm"===f&&(t++,f=s().value),n+="defint"+Y(c+","+h+","+p+","+f)}else if(l.value&&l.value.startsWith("int_"))h=l.value.replace("int_",""),console.log("uppernow"),t++,void 0===(p=s().value)&&(t--,p=a()),c=a(),","===(f=s().value)&&(f=s().value),"differentialD"===f&&(t++,f=s().value),"mathrm"===f&&(t++,f=s().value),n+="defint"+Y(c+","+h+","+p+","+f);else if("mathrm"===l.value)n+=(c=r[++t][0].value)+a();else if("sum_"===l.value||"prod_"===l.value){var m="sum_"===l.value?"sum":"product",d=s();t++;var g=a();c=a(),n+=m+Y([c,o(d[0]),o(d[2]),o(g)].join(","))}else"lim_"===l.value?(d=s(),n+="limit"+Y([a(),o(d[0]),o(d[2])].join(","))):"begin"===l.value?(d=s(),Array.isArray(d)&&"matrix"===d[0].value&&(n+="matrix([")):"end"===l.value?(d=s(),Array.isArray(d)&&"matrix"===d[0].value&&(n+="])")):Array.isArray(l)?n+=o(Ge.parse(l)):n+=o(l.value.toString())}return Y(n)}};function Ve(e){q(e)?this.elements=e.items.slice(0):W(e)?this.elements=e.slice(0):this.elements=[].slice.call(arguments)}function We(){var e,t,n,r,i=arguments,s=i.length,a=[];if(H(i))for(e=0;e<s;e++)a.push(i[e].slice(0));else for(e=0;e<s;e++)t=i[e],q(t)&&(t=t.elements),W(t)||(t=[t]),r=t.length,n&&n!==r&&A("Unable to create Matrix. Row dimensions do not match!"),a.push(t),n=r;this.elements=a}function je(e){if(this.elements=[],q(e)||(e=Ve.fromArray(arguments)),e)for(var t=e.elements,n=0,r=t.length;n<r;n++)this.add(t[n])}Ve.arrayPrefill=function(e,t){var n=[];t=t||0;for(var r=0;r<e;r++)n[r]=t;return n},Ve.fromArray=function(e){var t=new Ve;return t.elements=e,t},Ve.fromSet=function(e){return Ve.fromArray(e.elements)},Ve.prototype={custom:!0,e:function(e){return e<1||e>this.elements.length?null:this.elements[e-1]},set:function(e,t){U(t)||(t=new Fe(t)),this.elements[e]=t},dimensions:function(){return this.elements.length},modulus:function(){return ue("SAFE",(function(){return t.pow(this.dot(this.clone()),new Fe(.5))}),void 0,this)},eql:function(e){var n=this.elements.length,r=e.elements||e;if(n!==r.length)return!1;do{if(Math.abs(t.subtract(this.elements[n-1],r[n-1]).valueOf())>PRECISION)return!1}while(--n);return!0},clone:function(){for(var e=new Ve,t=this.elements.length,n=0;n<t;n++)e.elements.push(this.elements[n].clone());return this.getter&&(e.getter=this.getter.clone()),e},map:function(e){var t=[];return this.each((function(n,r){t.push(e(n,r))})),new Ve(t)},each:function(e){var t,n=this.elements.length,r=n;do{t=r-n,e(this.elements[t],t+1)}while(--n)},toUnitVector:function(){return ue("SAFE",(function(){var e=this.modulus();return 0===e.valueOf()?this.clone():this.map((function(n){return t.divide(n,e)}))}),void 0,this)},angleFrom:function(e){return ue("SAFE",(function(){var n=e.elements||e;if(this.elements.length!==n.length)return null;var r=new Fe(0),i=new Fe(0),s=new Fe(0);this.each((function(e,a){r=t.add(r,t.multiply(e,n[a-1])),i=t.add(i,t.multiply(e,e)),s=t.add(s,t.multiply(n[a-1],n[a-1]))})),i=t.pow(i,new Fe(.5)),s=t.pow(s,new Fe(.5));var a=t.multiply(i,s);if(0===a.valueOf())return null;var o=t.divide(r,a),l=o.valueOf();return l<-1&&(o=-1),l>1&&(o=1),new Fe(Math.acos(o))}),void 0,this)},isParallelTo:function(e){var t=this.angleFrom(e).valueOf();return null===t?null:t<=PRECISION},isAntiparallelTo:function(e){var t=this.angleFrom(e).valueOf();return null===t?null:Math.abs(t-Math.PI)<=PRECISION},isPerpendicularTo:function(e){var t=this.dot(e);return null===t?null:Math.abs(t)<=PRECISION},add:function(e){return ue("SAFE",(function(){var n=e.elements||e;return this.elements.length!==n.length?null:this.map((function(e,r){return t.add(e,n[r-1])}))}),void 0,this)},subtract:function(e){return ue("SAFE",(function(){var n=e.elements||e;return this.elements.length!==n.length?null:this.map((function(e,r){return t.subtract(e,n[r-1])}))}),void 0,this)},multiply:function(e){return this.map((function(t){return t.clone()*e.clone()}))},x:function(e){return this.multiply(e)},dot:function(e){return ue("SAFE",(function(){var n=e.elements||e,r=new Fe(0),i=this.elements.length;if(i!==n.length)return null;do{r=t.add(r,t.multiply(this.elements[i-1],n[i-1]))}while(--i);return r}),void 0,this)},cross:function(e){var n=e.elements||e;if(3!==this.elements.length||3!==n.length)return null;var r=this.elements;return ue("SAFE",(function(){return new Ve([t.subtract(t.multiply(r[1],n[2]),t.multiply(r[2],n[1])),t.subtract(t.multiply(r[2],n[0]),t.multiply(r[0],n[2])),t.subtract(t.multiply(r[0],n[1]),t.multiply(r[1],n[0]))])}),void 0,this)},max:function(){var e,t=0,n=this.elements.length,r=n;do{e=r-n,Math.abs(this.elements[e].valueOf())>Math.abs(t.valueOf())&&(t=this.elements[e])}while(--n);return t},magnitude:function(){var e=new Fe(0);return this.each((function(n){e=t.add(e,t.pow(n,new Fe(2)))})),t.sqrt(e)},indexOf:function(e){var t,n=null,r=this.elements.length,i=r;do{t=i-r,null===n&&this.elements[t].valueOf()===e.valueOf()&&(n=t+1)}while(--r);return n},text:function(e){return ke(this)},toString:function(){return this.text()},latex:function(e){for(var t=[],n=0;n<this.elements.length;n++)t.push(Ge.latex.call(Ge,this.elements[n],e));return"["+t.join(", ")+"]"}},We.identity=function(e){for(var t=new We,n=0;n<e;n++){t.elements.push([]);for(var r=0;r<e;r++)t.set(n,r,new Fe(n===r?1:0))}return t},We.fromArray=function(e){function t(e){return We.apply(this,e)}return t.prototype=We.prototype,new t(e)},We.zeroMatrix=function(e,t){for(var n=new We,r=0;r<e;r++)n.elements.push(Ve.arrayPrefill(t,new Fe(0)));return n},We.prototype={custom:!0,get:function(e,t){if(this.elements[e])return this.elements[e][t]},map:function(e,t){var n=new We;return this.each((function(r,i,s){n.set(i,s,e.call(n,r),t)})),n},set:function(e,t,n,r){this.elements[e]||(this.elements[e]=[]),this.elements[e][t]=r||U(n)?n:new Fe(n)},cols:function(){return this.elements[0].length},rows:function(){return this.elements.length},row:function(e){return!e||e>this.cols()?[]:this.elements[e-1]},col:function(e){var t=this.rows(),n=[];if(e>this.cols()||!e)return n;for(var r=0;r<t;r++)n.push(this.elements[r][e-1]);return n},eachElement:function(e){var t,n,r=this.rows(),i=this.cols();for(t=0;t<r;t++)for(n=0;n<i;n++)e.call(this,this.elements[t][n],t,n)},determinant:function(){if(!this.isSquare())return null;var e,n=this.toRightTriangular(),r=n.elements[0][0],i=n.elements.length-1,s=i;do{e=s-i+1,r=t.multiply(r,n.elements[e][e])}while(--i);return r},isSquare:function(){return this.elements.length===this.elements[0].length},isSingular:function(){return this.isSquare()&&0===this.determinant()},augment:function(e){var t=this.rows();t!==e.rows()&&A("Cannot augment matrix. Rows don't match.");for(var n=0;n<t;n++)this.elements[n]=this.elements[n].concat(e.elements[n]);return this},clone:function(){for(var e=this.rows(),t=this.cols(),n=new We,r=0;r<e;r++){n.elements[r]=[];for(var i=0;i<t;i++){var s=this.elements[r][i];n.elements[r][i]=U(s)?s.clone():s}}return n},invert:function(){return this.isSquare()||A("Matrix is not square!"),ue("SAFE",(function(){var e,n,r,i,s,a,o,l=this.elements.length,u=l,c=We.identity(l),h=this.augment(c).toRightTriangular(),p=h.elements[0].length,f=[];do{s=[],r=p,f[e=l-1]=[],a=h.elements[e][e];do{i=p-r,o=t.divide(h.elements[e][i],a.clone()),s.push(o),i>=u&&f[e].push(o)}while(--r);for(h.elements[e]=s,n=0;n<e;n++){s=[],r=p;do{i=p-r,s.push(t.subtract(h.elements[n][i].clone(),t.multiply(h.elements[e][i].clone(),h.elements[n][e].clone())))}while(--r);h.elements[n]=s}}while(--l);return We.fromArray(f)}),void 0,this)},toRightTriangular:function(){return ue("SAFE",(function(){var e,n,r,i,s,a=this.clone(),o=this.elements.length,l=o,u=this.elements[0].length;do{if(r=l-o,0===a.elements[r][r].valueOf())for(var c=r+1;c<l;c++)if((n=a.elements[c][r])&&0!==n.valueOf()){e=[],i=u;do{s=u-i,e.push(t.add(a.elements[r][s].clone(),a.elements[c][s].clone()))}while(--i);a.elements[r]=e;break}if(0!==a.elements[r][r].valueOf())for(c=r+1;c<l;c++){var h=t.divide(a.elements[c][r].clone(),a.elements[r][r].clone());e=[],i=u;do{s=u-i,e.push(s<=r?new Fe(0):t.subtract(a.elements[c][s].clone(),t.multiply(a.elements[r][s].clone(),h.clone())))}while(--i);a.elements[c]=e}}while(--o);return a}),void 0,this)},transpose:function(){var e,t,n,r=this.elements.length,i=this.elements[0].length,s=new We,a=i;do{e=i-a,s.elements[e]=[],t=r;do{n=r-t,s.elements[e][n]=this.elements[n][e].clone()}while(--t)}while(--a);return s},canMultiplyFromLeft:function(e){var t=H(e)?e.elements.length:e.length;return this.elements[0].length===t},sameSize:function(e){return this.rows()===e.rows()&&this.cols()===e.cols()},multiply:function(e){return ue("SAFE",(function(){var n=e.elements||e;if(!this.canMultiplyFromLeft(n)){if(this.sameSize(e)){for(var r=new We,i=this.rows(),s=0;s<i;s++){var a=t.multiply(new Ve(this.elements[s]),new Ve(e.elements[s]));r.elements[s]=a.elements}return r}return null}var o,l,u,c,h,p=this.elements.length,f=p,m=n[0].length,d=this.elements[0].length,g=[];do{g[s=f-p]=[],o=m;do{l=m-o,u=new Fe(0),c=d;do{h=d-c,u=t.add(u,t.multiply(this.elements[s][h],n[h][l]))}while(--c);g[s][l]=u}while(--o)}while(--p);return We.fromArray(g)}),void 0,this)},add:function(e,n){var r=new We;return this.sameSize(e)&&this.eachElement((function(i,s,a){var o=t.add(i.clone(),e.elements[s][a].clone());n&&(o=n.call(r,o,i,e.elements[s][a])),r.set(s,a,o)})),r},subtract:function(e,n){var r=new We;return this.sameSize(e)&&this.eachElement((function(i,s,a){var o=t.subtract(i.clone(),e.elements[s][a].clone());n&&(o=n.call(r,o,i,e.elements[s][a])),r.set(s,a,o)})),r},negate:function(){return this.each((function(e){return e.negate()})),this},toVector:function(){if(1===this.rows()||1===this.cols()){var e=new Ve;return e.elements=this.elements,e}return this},toString:function(e,t){var n=this.rows(),r=[];e=void 0===e?"\n":e;for(var i=0;i<n;i++)r.push("["+this.elements[i].map((function(e){var n=t?e.multiplier.toDecimal():e.toString();return void 0!==e?n:""})).join(",")+"]");return"matrix"+Y(r.join(","))},text:function(){return"matrix("+this.elements.toString("")+")"},latex:function(e){var t=this.cols(),n=this.elements;return J("\\begin{vmatrix}{0}\\end{vmatrix}",(function(){var r=[];for(var i in n){for(var s=[],a=0;a<t;a++)s.push(Ge.latex.call(Ge,n[i][a],e));r.push(s.join(" & "))}return r.join(" \\cr ")}))}},We.prototype.each=We.prototype.eachElement,je.fromArray=function(e){function t(e){return je.apply(this,e)}return t.prototype=je.prototype,new t(e)},je.prototype={add:function(e){this.contains(e)||this.elements.push(e.clone())},contains:function(e){for(var t=0;t<this.elements.length;t++){var n=this.elements[t];if(e.equals(n))return!0}return!1},each:function(e){for(var t=this.elements,n=new je,r=0,i=t.length;r<i;r++){var s=t[r];e.call(this,s,n,r)}return n},clone:function(){var e=new je;return this.each((function(t){e.add(t.clone())})),e},union:function(e){var t=this.clone();return e.each((function(e){t.add(e)})),t},difference:function(e){var t=this.clone();return e.each((function(e){t.remove(e)})),t},remove:function(e){for(var t=0,n=this.elements.length;t<n;t++)if(this.elements[t].equals(e))return le(this.elements,t),!0;return!1},intersection:function(e){var t=new je,n=this;return e.each((function(e){n.contains(e)&&t.add(e)})),t},intersects:function(e){return this.intersection(e).elements.length>0},is_subset:function(e){for(var t=e.elements,n=0,r=t.length;n<r;n++)if(!this.contains(t[n]))return!1;return!0},toString:function(){return"{"+this.elements.join(",")+"}"}};var Xe={dependencies:{_rename:{"Math2.factorial":"factorial"},factorial:{"Math2.gamma":Oe.gamma},gamma_incomplete:{"Math2.factorial":Oe.factorial},Li:{"Math2.Ei":Oe.Ei,"Math2.bigLog":Oe.bigLog,Frac:Be},Ci:{"Math2.factorial":Oe.factorial},Ei:{"Math2.factorial":Oe.factorial},Si:{"Math2.factorial":Oe.factorial},Shi:{"Math2.factorial":Oe.factorial},Chi:{isInt:j,nround:ne,"Math2.num_integrate":Oe.num_integrate},factor:{"Math2.ifactor":Oe.ifactor,Symbol:Fe},num_integrate:{"Math2.simpson":Oe.simpson,nround:ne},fib:{even:ie}},reformat:{diff:function(e,t){var n=e.args[1].toString(),r="var f = "+Xe.build(e.args[0].toString(),[n])+";";return t[1]+="var diff = "+Oe.diff.toString()+";",t[1]+=r,["diff(f)("+n+")",t]}},getProperName:function(e){return{continued_fraction:"continuedFraction"}[e]||e},compileDependencies:function(e,t){var n=Xe.dependencies[e],r=t&&t[1]?t[1]:"",i=t&&t[0]?t[0]:{};for(var s in n)if("object"!=typeof n[s]){var a=s.split(".");r+="var "+(a.length>1?a[1]:a[0])+"="+n[s]+";",i[s]=a.pop()}return[i,r]},getArgsDeps:function(e,t){for(var n=e.args,r=0;r<n.length;r++)e.args[r].each((function(e){e.group===f&&(t=Xe.compileDependencies(e.fname,t))}));return t},build:function(e,n){e=ue("PARSE2NUMBER",(function(){return t.parse(e)}),!0);var r=B(e),i=[],s=[],a=function(e,n){""===e.fname&&(e=Fe.unwrapPARENS(e)),n=n||[];var r,o=[],l=e.group,m="",g=function(t){var r=t===d?"*":"+",i=[];for(var s in e.symbols){var o=e.symbols[s],l=a(o,n)[0];o.isComposite()&&(l=Y(l)),i.push(l)}var u=i.join(r);return u&&!e.multiplier.equals(1)?Y(u):u},v=function(t){var r;return t in Math?r="Math."+t:(t=Xe.getProperName(t),-1===i.indexOf(t)&&(n.push("var "+t+" = "+Oe[t].toString()+"; "),i.push(t)),r=t),r+Y(e.args.map((function(e){return a(e,n)[0]})).join(","))};if(l===u?o.push(e.multiplier.toDecimal()):e.multiplier.equals(-1)?m="-":e.multiplier.equals(1)||o.push(e.multiplier.toDecimal()),l===h||l===c)r=e.value;else if(l===f)if(s=Xe.compileDependencies(e.fname,s),s=Xe.getArgsDeps(e,s),Xe.reformat[e.fname]){var y=Xe.reformat[e.fname](e,s);s=y[1],r=y[0]}else r=v(e.fname);else if(l===p){var w=e.previousGroup;w===u||w===h?r=e.value:w===f?(r=v(e.fname),s=Xe.compileDependencies(e.fname,s),s=Xe.getArgsDeps(e,s)):r=g(e.previousGroup)}else r=g(e.group);if(e.group!==u&&!e.power.equals(1)){var b=a(t.parse(e.power));n.push(b[1]),r="Math.pow"+Y(r+","+b[0])}return r&&o.push(m+r),[o.join("*"),n.join("").replace(/\n+\s+/g," ")]};n&&(r=n);var o=a(e);for(var l in s[0]){var m=s[0][l];o[1]=o[1].replace(l,m),s[1]=s[1].replace(l,m)}return new Function(r,(s[1]||"")+o[1]+" return "+o[0]+";")}};oe(t.CONSTANTS),oe(t.functions),t.initConstants(),t.error||(t.error=A),l.LOG_FNS={log:t.functions.log,log10:t.functions.log10};var Ze={allSame:R,allNumeric:function(e){for(var t=0;t<e.length;t++)if(!k(e[t]))return!1;return!0},arguments2Array:ce,arrayAddSlices:function(e,t){t=t||20;var n,r,i=[];i.push(e[0]);for(var s=0;s<e.length-1;s++){n=e[s],r=(e[s+1]-n)/t;for(var a=0;a<t;a++)n+=r,i.push(n)}return i},arrayClone:function(e){for(var t=[],n=e.length,r=0;r<n;r++)t[r]=e[r].clone();return t},arrayMax:function(e){return Math.max.apply(void 0,e)},arrayMin:ee,arrayEqual:function(e,t){if(e.sort(),t.sort(),e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return!1},arrayUnique:ae,arrayGetVariables:function(e){for(var t=B(e[0],null,null,!0),n=1,r=e.length;n<r;n++)t=t.concat(B(e[n]));return ae(t).sort()},arraySum:function(e,n){for(var r=new Fe(0),i=0;i<e.length;i++){var s=e[i];r=t.add(r,U(s)?s:t.parse(s))}return n?Number(r):r},block:ue,build:Xe.build,clearU:function(e){var t=E.indexOf(e);-1!==t&&(E[t]=void 0)},comboSort:function(e,t){for(var n=e.length,r=[],i=0;i<e.length;i++)r.push([e[i],t[i]]);r.sort((function(e,t){return e[0]-t[0]}));var s=[],a=[];for(i=0;i<n;i++)s.push(r[i][0]),a.push(r[i][1]);return[s,a]},compare:function(e,n,r){for(var i,s={},a=0;a<r.length;a++)s[r[a]]=new Fe(Math.floor(5*Math.random())+1);return ue("PARSE2NUMBER",(function(){i=t.parse(e,s).equals(t.parse(n,s))})),i},convertToVector:pe,customError:L,customType:function(e){return void 0!==e&&e.custom},decompose_fn:te,each:re,evaluate:he,even:ie,evenFraction:se,fillHoles:function(e,t){t=t||e.length;for(var n=0;n<t;n++)e[n]||(e[n]=new Fe(0));return e},firstObject:Q,format:J,generatePrimes:fe,getCoeffs:function(e,n,r){var i=[];e.each((function(e){if(e.contains(n))var r=e.stripVar(n),s=t.divide(e.clone(),r.clone()).power.toDecimal();else r=e,s=0;var a=i[s];i[s]=a?t.add(a,r):r}),!0);for(var s=0;s<i.length;s++)i[s]||(i[s]=new Fe(0));return i},getU:function(e){for(var t="u",n=0,r=B(e);-1!==E.indexOf(t)||-1!==r.indexOf(t);)t="u"+n++;for(var i=0,s=E.length;i<=s;i++)if(!E[i]){E[i]=t;break}return t},importFunctions:function(){var e={};for(var n in t.functions)e[n]=t.functions[n][0];return e},inBrackets:Y,isArray:W,isExpression:z,isFraction:D,isInt:j,isMatrix:H,isNegative:X,isNumericSymbol:V,isPrime:O,isReserved:C,isSymbol:U,isVariableSymbol:function(e){return e.group===h&&e.multiplier.equals(1)&&e.power.equals(1)},isVector:q,keys:$,knownVariable:function(e,t){var n={};return n[e]=t,n},nroots:function(e){var n,r;if(e.group===f&&""===e.fname?(n=Fe.unwrapPARENS(t.parse(e).toLinear()),r=t.parse(e.power)):e.group===c&&(n=t.parse(e.value),r=t.parse(e.power)),n&&r&&n.group===u&&r.group===u&&n.multiplier.isNegative()){for(var i=[],s=Fe.toPolarFormArray(he(e))[0],a=t.arg(n),o=r.multiplier.den.toString(),h=r.multiplier.num.toString(),p=0;p<o;p++){var m=he(t.parse(J("(({0})+2*pi*({1}))/({2})",a,p,o))).multiplier.toDecimal();i.push(he(t.parse(J("(({0})^({1})*(cos({3})+({2})*sin({3})))^({4})",s,o,l.IMAGINARY,m,h))))}return Ve.fromArray(i)}if(e.isConstant(!0,!0)){var d=e.sign(),g=(a=he(e.abs()),t.sqrt(a));i=[g.clone(),g.negate()],d<0&&(i=i.map((function(e){return t.multiply(e,Fe.imaginary())})))}else i=[t.parse(e)];return Ve.fromArray(i)},remove:le,reserveNames:oe,range:function(e,t,n){var r=[];n=n||1;for(var i=e;i<=t;i++)r.push(i*n);return r},round:ne,sameSign:function(e,t){return e<0==t<0},scientificToDecimal:I,separate:F,stringReplace:function(e,t,n,r){return e.substr(0,t)+r+e.substr(n,e.length)},text:ke,validateName:P,variables:B,warn:N},Ye={groups:i,Symbol:Fe,Expression:Ue,Frac:Be,Vector:Ve,Matrix:We,Parser:qe,Scientific:ze,Fraction:He,Math2:Oe,LaTeX:Ge,Utils:Ze,PARSER:t,PARENTHESIS:y,Settings:l,err:A,bigInt:n,bigDec:r,exceptions:Ie},Je=function(e,n,r,i){var a=!1,o=/^([a-z_][a-z\d\_]*)\(([a-z_,\s]*)\):=(.+)$/gi.exec(e);if(o)return s.setFunction(o[1],o[2].split(","),o[3]);e instanceof Ue&&(e=e.toString()),W(r)||(r=void 0===r?[]:[r]),r.forEach((function(n){if("numer"!==n){var i=t.functions[r];i&&1===i[1]&&(e=`${n}(${e})`)}else a=!0}));var u=ue("PARSE2NUMBER",(function(){return t.parse(e,n)}),a||l.PARSE2NUMBER);return i?S[i-1]=u:S.push(u),new Ue(u)};return Je.rpn=function(e){return t.tokenize(t.toRPN(e))},Je.convertToLaTeX=function(e,n){return t.toTeX(e,n)},Je.convertFromLaTeX=function(e){var n=Ge.parse(t.tokenize(e));return new Ue(t.parse(n))},Je.version=function(e){if(e)try{return Ye[e].version}catch(t){return"No module named "+e+" found!"}return"1.1.12"},Je.getWarnings=function(){return T},Je.setConstant=function(e,n){if(P(e),!C(e))if("delete"===n||""===n)delete t.CONSTANTS[e];else{if(isNaN(n))throw new Me("Constant must be a number!");t.CONSTANTS[e]=n}return this},Je.getConstant=function(e){return String(t.constant[e])},Je.setFunction=K,Je.getCore=function(){return Ye},Je.getExpression=Je.getEquation=Ue.getExpression,Je.reserved=function(e){return e?E:E.join(", ")},Je.clear=function(e,t){if("all"===e)S=[];else if("last"===e)S.pop();else if("first"===e)S.shift();else{var n=e?e-1:S.length;!0===t?S[n]=void 0:le(S,n)}return this},Je.flush=function(){return this.clear("all"),this},Je.expressions=function(e,t,n){for(var r=e?{}:[],i=0;i<S.length;i++){var s=t?Ge.latex(S[i],n):ke(S[i],n);e?r[i+1]=s:r.push(s)}return r},Je.register=function(e){var n=this.getCore();if(W(e))for(var r=0;r<e.length;r++)e&&this.register(e[r]);else if(e&&-1===l.exclude.indexOf(e.name)){if(e.dependencies)for(r=0;r<e.dependencies.length;r++)if(!n[e.dependencies[r]])throw new Error(J("{0} requires {1} to be loaded!",e.name,e.dependencies[r]));var i=e.parent,s=e.build.call(n);i&&(n[i]||(n[e.parent]={}),("nerdamer"===i?this:n[i])[e.name]=s),e.visible&&(t.functions[e.name]=[s,e.numargs])}},Je.validateName=P,Je.validVarName=function(e){try{return P(e),-1===E.indexOf(e)}catch(e){return!1}},Je.supported=function(){return $(t.functions)},Je.numEquations=Je.numExpressions=function(){return S.length},Je.setVar=function(e,n){return P(e),e in t.CONSTANTS&&A("Cannot set value for constant "+e),"delete"===n||""===n?delete _[e]:_[e]=U(n)?n:t.parse(n),this},Je.getVar=function(e){return _[e]},Je.clearVars=function(){return _={},this},Je.load=function(e){return e.call(this),this},Je.getVars=function(e,t){var n={};if("object"===(e=e||"text"))n=_;else for(var r in _)"latex"===e?n[r]=_[r].latex(t):"text"===e&&(n[r]=_[r].text(t));return n},Je.set=function(e,n){if("object"==typeof e)for(var i in e)Je.set(i,e[i]);-1!==["SAFE"].indexOf(e)&&A("Cannot modify setting: "+e),"PRECISION"===e?(r.set({precision:n}),l.PRECISION=n,n>21&&this.set("USE_BIG",!0)):"USE_LN"===e&&!0===n?(l.LOG="LN",l.LOG10="log",t.functions.log=l.LOG_FNS.log10,t.functions.log[0]=function(e){return e.isConstant()?new Fe(Math.log10(e)):t.symfunction(l.LOG10,[e])},t.functions.LN=l.LOG_FNS.log,delete t.functions.log10):l[e]=n},Je.get=function(e){return l[e]},Je.api=function(e){var n=function(e){return function(){for(var n=[].slice.call(arguments),r=0;r<n.length;r++)n[r]=t.parse(n[r]);return new Ue(ue("PARSE2NUMBER",(function(){return t.callfunction(e,n)})))}};for(var r in t.functions)r in Je&&!e||(Je[r]=n(r))},Je.replaceFunction=function(e,n,r){var i=t.functions[e],s=void 0===r?i[1]:r;t.functions[e]=[n.call(void 0,i[0],Ye),s]},Je.setOperator=function(e,n){t.setOperator(e,n)},Je.getOperator=function(e){return t.getOperator(e)},Je.aliasOperator=function(e,n){t.aliasOperator(e,n)},Je.tree=function(e){return t.tree(t.toRPN(t.tokenize(e)))},Je.htmlTree=function(e,t){return'<div class="tree">\n    <ul>\n        <li>\n'+this.tree(e).toHTML(3,t)+"\n        </li>\n    </ul>\n</div>"},Je.addPeeker=function(e,n){t.peekers[e]&&t.peekers[e].push(n)},Je.removePeeker=function(e,n){le(t.peekers[e],n)},Je.parse=function(e){return String(e).split(";").map((function(e){return t.parse(e)}))},Je.api(),Je}({bigInt:(i=function(e){"use strict";var t=1e7,n=9007199254740992,r=c(n),s=Math.log(n);function a(e,t){return void 0===e?a[0]:void 0!==t?10==+t?X(e):q(e,t):X(e)}function o(e,t){this.value=e,this.sign=t,this.isSmall=!1}function l(e){this.value=e,this.sign=e<0,this.isSmall=!0}function u(e){return-n<e&&e<n}function c(e){return e<1e7?[e]:e<1e14?[e%1e7,Math.floor(e/1e7)]:[e%1e7,Math.floor(e/1e7)%1e7,Math.floor(e/1e14)]}function h(e){p(e);var n=e.length;if(n<4&&L(e,r)<0)switch(n){case 0:return 0;case 1:return e[0];case 2:return e[0]+e[1]*t;default:return e[0]+(e[1]+e[2]*t)*t}return e}function p(e){for(var t=e.length;0===e[--t];);e.length=t+1}function f(e){for(var t=new Array(e),n=-1;++n<e;)t[n]=0;return t}function m(e){return e>0?Math.floor(e):Math.ceil(e)}function d(e,n){var r,i,s=e.length,a=n.length,o=new Array(s),l=0,u=t;for(i=0;i<a;i++)l=(r=e[i]+n[i]+l)>=u?1:0,o[i]=r-l*u;for(;i<s;)l=(r=e[i]+l)===u?1:0,o[i++]=r-l*u;return l>0&&o.push(l),o}function g(e,t){return e.length>=t.length?d(e,t):d(t,e)}function v(e,n){var r,i,s=e.length,a=new Array(s),o=t;for(i=0;i<s;i++)r=e[i]-o+n,n=Math.floor(r/o),a[i]=r-n*o,n+=1;for(;n>0;)a[i++]=n%o,n=Math.floor(n/o);return a}function y(e,n){var r,i,s=e.length,a=n.length,o=new Array(s),l=0,u=t;for(r=0;r<a;r++)(i=e[r]-l-n[r])<0?(i+=u,l=1):l=0,o[r]=i;for(r=a;r<s;r++){if(!((i=e[r]-l)<0)){o[r++]=i;break}i+=u,o[r]=i}for(;r<s;r++)o[r]=e[r];return p(o),o}function w(e,n,r){var i,s,a=e.length,u=new Array(a),c=-n,p=t;for(i=0;i<a;i++)s=e[i]+c,c=Math.floor(s/p),s%=p,u[i]=s<0?s+p:s;return"number"==typeof(u=h(u))?(r&&(u=-u),new l(u)):new o(u,r)}function b(e,n){var r,i,s,a,o=e.length,l=n.length,u=f(o+l),c=t;for(s=0;s<o;++s){a=e[s];for(var h=0;h<l;++h)r=a*n[h]+u[s+h],i=Math.floor(r/c),u[s+h]=r-i*c,u[s+h+1]+=i}return p(u),u}function x(e,n){var r,i,s=e.length,a=new Array(s),o=t,l=0;for(i=0;i<s;i++)r=e[i]*n+l,l=Math.floor(r/o),a[i]=r-l*o;for(;l>0;)a[i++]=l%o,l=Math.floor(l/o);return a}function M(e,t){for(var n=[];t-- >0;)n.push(0);return n.concat(e)}function S(e,t){var n=Math.max(e.length,t.length);if(n<=30)return b(e,t);n=Math.ceil(n/2);var r=e.slice(n),i=e.slice(0,n),s=t.slice(n),a=t.slice(0,n),o=S(i,a),l=S(r,s),u=S(g(i,r),g(a,s)),c=g(g(o,M(y(y(u,o),l),n)),M(l,2*n));return p(c),c}function _(e,n,r){return new o(e<t?x(n,e):b(n,c(e)),r)}function E(e){var n,r,i,s,a=e.length,o=f(a+a),l=t;for(i=0;i<a;i++){r=0-(s=e[i])*s;for(var u=i;u<a;u++)n=s*e[u]*2+o[i+u]+r,r=Math.floor(n/l),o[i+u]=n-r*l;o[i+a]=r}return p(o),o}function T(e,t){var n,r,i,s,a=e.length,o=f(a);for(i=0,n=a-1;n>=0;--n)i=(s=1e7*i+e[n])-(r=m(s/t))*t,o[n]=0|r;return[o,0|i]}function A(e,n){var r,i,s=X(n),u=e.value,d=s.value;if(0===d)throw new Error("Cannot divide by zero");if(e.isSmall)return s.isSmall?[new l(m(u/d)),new l(u%d)]:[a[0],e];if(s.isSmall){if(1===d)return[e,a[0]];if(-1==d)return[e.negate(),a[0]];var g=Math.abs(d);if(g<t){i=h((r=T(u,g))[0]);var v=r[1];return e.sign&&(v=-v),"number"==typeof i?(e.sign!==s.sign&&(i=-i),[new l(i),new l(v)]):[new o(i,e.sign!==s.sign),new l(v)]}d=c(g)}var w=L(u,d);if(-1===w)return[a[0],e];if(0===w)return[a[e.sign===s.sign?1:-1],a[0]];i=(r=u.length+d.length<=200?function(e,n){var r,i,s,a,o,l,u,c=e.length,p=n.length,m=t,d=f(n.length),g=n[p-1],v=Math.ceil(m/(2*g)),y=x(e,v),w=x(n,v);for(y.length<=c&&y.push(0),w.push(0),g=w[p-1],i=c-p;i>=0;i--){for(r=m-1,y[i+p]!==g&&(r=Math.floor((y[i+p]*m+y[i+p-1])/g)),s=0,a=0,l=w.length,o=0;o<l;o++)s+=r*w[o],u=Math.floor(s/m),a+=y[i+o]-(s-u*m),s=u,a<0?(y[i+o]=a+m,a=-1):(y[i+o]=a,a=0);for(;0!==a;){for(r-=1,s=0,o=0;o<l;o++)(s+=y[i+o]-m+w[o])<0?(y[i+o]=s+m,s=0):(y[i+o]=s,s=1);a+=s}d[i]=r}return y=T(y,v)[0],[h(d),h(y)]}(u,d):function(e,n){for(var r,i,s,a,o,l=e.length,u=n.length,c=[],f=[],m=t;l;)if(f.unshift(e[--l]),p(f),L(f,n)<0)c.push(0);else{s=f[(i=f.length)-1]*m+f[i-2],a=n[u-1]*m+n[u-2],i>u&&(s=(s+1)*m),r=Math.ceil(s/a);do{if(L(o=x(n,r),f)<=0)break;r--}while(r);c.push(r),f=y(f,o)}return c.reverse(),[h(c),h(f)]}(u,d))[0];var b=e.sign!==s.sign,M=r[1],S=e.sign;return"number"==typeof i?(b&&(i=-i),i=new l(i)):i=new o(i,b),"number"==typeof M?(S&&(M=-M),M=new l(M)):M=new o(M,S),[i,M]}function L(e,t){if(e.length!==t.length)return e.length>t.length?1:-1;for(var n=e.length-1;n>=0;n--)if(e[n]!==t[n])return e[n]>t[n]?1:-1;return 0}function C(e){var t=e.abs();return!t.isUnit()&&(!!(t.equals(2)||t.equals(3)||t.equals(5))||!(t.isEven()||t.isDivisibleBy(3)||t.isDivisibleBy(5))&&(!!t.lesser(49)||void 0))}function R(e,t){for(var n,r,s,o=e.prev(),l=o,u=0;l.isEven();)l=l.divide(2),u++;e:for(r=0;r<t.length;r++)if(!e.lesser(t[r])&&!(s=i(t[r]).modPow(l,e)).equals(a[1])&&!s.equals(o)){for(n=u-1;0!=n;n--){if((s=s.square().mod(e)).isUnit())return!1;if(s.equals(o))continue e}return!1}return!0}o.prototype=Object.create(a.prototype),l.prototype=Object.create(a.prototype),o.prototype.add=function(e){var t=X(e);if(this.sign!==t.sign)return this.subtract(t.negate());var n=this.value,r=t.value;return t.isSmall?new o(v(n,Math.abs(r)),this.sign):new o(g(n,r),this.sign)},o.prototype.plus=o.prototype.add,l.prototype.add=function(e){var t=X(e),n=this.value;if(n<0!==t.sign)return this.subtract(t.negate());var r=t.value;if(t.isSmall){if(u(n+r))return new l(n+r);r=c(Math.abs(r))}return new o(v(r,Math.abs(n)),n<0)},l.prototype.plus=l.prototype.add,o.prototype.subtract=function(e){var t=X(e);if(this.sign!==t.sign)return this.add(t.negate());var n=this.value,r=t.value;return t.isSmall?w(n,Math.abs(r),this.sign):function(e,t,n){var r;return L(e,t)>=0?r=y(e,t):(r=y(t,e),n=!n),"number"==typeof(r=h(r))?(n&&(r=-r),new l(r)):new o(r,n)}(n,r,this.sign)},o.prototype.minus=o.prototype.subtract,l.prototype.subtract=function(e){var t=X(e),n=this.value;if(n<0!==t.sign)return this.add(t.negate());var r=t.value;return t.isSmall?new l(n-r):w(r,Math.abs(n),n>=0)},l.prototype.minus=l.prototype.subtract,o.prototype.negate=function(){return new o(this.value,!this.sign)},l.prototype.negate=function(){var e=this.sign,t=new l(-this.value);return t.sign=!e,t},o.prototype.abs=function(){return new o(this.value,!1)},l.prototype.abs=function(){return new l(Math.abs(this.value))},o.prototype.multiply=function(e){var n,r,i,s=X(e),l=this.value,u=s.value,h=this.sign!==s.sign;if(s.isSmall){if(0===u)return a[0];if(1===u)return this;if(-1===u)return this.negate();if((n=Math.abs(u))<t)return new o(x(l,n),h);u=c(n)}return new o(-.012*(r=l.length)-.012*(i=u.length)+15e-6*r*i>0?S(l,u):b(l,u),h)},o.prototype.times=o.prototype.multiply,l.prototype._multiplyBySmall=function(e){return u(e.value*this.value)?new l(e.value*this.value):_(Math.abs(e.value),c(Math.abs(this.value)),this.sign!==e.sign)},o.prototype._multiplyBySmall=function(e){return 0===e.value?a[0]:1===e.value?this:-1===e.value?this.negate():_(Math.abs(e.value),this.value,this.sign!==e.sign)},l.prototype.multiply=function(e){return X(e)._multiplyBySmall(this)},l.prototype.times=l.prototype.multiply,o.prototype.square=function(){return new o(E(this.value),!1)},l.prototype.square=function(){var e=this.value*this.value;return u(e)?new l(e):new o(E(c(Math.abs(this.value))),!1)},o.prototype.divmod=function(e){var t=A(this,e);return{quotient:t[0],remainder:t[1]}},l.prototype.divmod=o.prototype.divmod,o.prototype.divide=function(e){return A(this,e)[0]},l.prototype.over=l.prototype.divide=o.prototype.over=o.prototype.divide,o.prototype.mod=function(e){return A(this,e)[1]},l.prototype.remainder=l.prototype.mod=o.prototype.remainder=o.prototype.mod,o.prototype.pow=function(e){var t,n,r,i=X(e),s=this.value,o=i.value;if(0===o)return a[1];if(0===s)return a[0];if(1===s)return a[1];if(-1===s)return i.isEven()?a[1]:a[-1];if(i.sign)return a[0];if(!i.isSmall)throw new Error("The exponent "+i.toString()+" is too large.");if(this.isSmall&&u(t=Math.pow(s,o)))return new l(m(t));for(n=this,r=a[1];!0&o&&(r=r.times(n),--o),0!==o;)o/=2,n=n.square();return r},l.prototype.pow=o.prototype.pow,o.prototype.modPow=function(e,t){if(e=X(e),(t=X(t)).isZero())throw new Error("Cannot take modPow with modulus 0");for(var n=a[1],r=this.mod(t);e.isPositive();){if(r.isZero())return a[0];e.isOdd()&&(n=n.multiply(r).mod(t)),e=e.divide(2),r=r.square().mod(t)}return n},l.prototype.modPow=o.prototype.modPow,o.prototype.compareAbs=function(e){var t=X(e),n=this.value,r=t.value;return t.isSmall?1:L(n,r)},l.prototype.compareAbs=function(e){var t=X(e),n=Math.abs(this.value),r=t.value;return t.isSmall?n===(r=Math.abs(r))?0:n>r?1:-1:-1},o.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=X(e),n=this.value,r=t.value;return this.sign!==t.sign?t.sign?1:-1:t.isSmall?this.sign?-1:1:L(n,r)*(this.sign?-1:1)},o.prototype.compareTo=o.prototype.compare,l.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=X(e),n=this.value,r=t.value;return t.isSmall?n==r?0:n>r?1:-1:n<0!==t.sign?n<0?-1:1:n<0?1:-1},l.prototype.compareTo=l.prototype.compare,o.prototype.equals=function(e){return 0===this.compare(e)},l.prototype.eq=l.prototype.equals=o.prototype.eq=o.prototype.equals,o.prototype.notEquals=function(e){return 0!==this.compare(e)},l.prototype.neq=l.prototype.notEquals=o.prototype.neq=o.prototype.notEquals,o.prototype.greater=function(e){return this.compare(e)>0},l.prototype.gt=l.prototype.greater=o.prototype.gt=o.prototype.greater,o.prototype.lesser=function(e){return this.compare(e)<0},l.prototype.lt=l.prototype.lesser=o.prototype.lt=o.prototype.lesser,o.prototype.greaterOrEquals=function(e){return this.compare(e)>=0},l.prototype.geq=l.prototype.greaterOrEquals=o.prototype.geq=o.prototype.greaterOrEquals,o.prototype.lesserOrEquals=function(e){return this.compare(e)<=0},l.prototype.leq=l.prototype.lesserOrEquals=o.prototype.leq=o.prototype.lesserOrEquals,o.prototype.isEven=function(){return 0==(1&this.value[0])},l.prototype.isEven=function(){return 0==(1&this.value)},o.prototype.isOdd=function(){return 1==(1&this.value[0])},l.prototype.isOdd=function(){return 1==(1&this.value)},o.prototype.isPositive=function(){return!this.sign},l.prototype.isPositive=function(){return this.value>0},o.prototype.isNegative=function(){return this.sign},l.prototype.isNegative=function(){return this.value<0},o.prototype.isUnit=function(){return!1},l.prototype.isUnit=function(){return 1===Math.abs(this.value)},o.prototype.isZero=function(){return!1},l.prototype.isZero=function(){return 0===this.value},o.prototype.isDivisibleBy=function(e){var t=X(e),n=t.value;return 0!==n&&(1===n||(2===n?this.isEven():this.mod(t).equals(a[0])))},l.prototype.isDivisibleBy=o.prototype.isDivisibleBy,o.prototype.isPrime=function(t){var n=C(this);if(n!==e)return n;var r=this.abs(),s=r.bitLength();if(s<=64)return R(r,[2,325,9375,28178,450775,9780504,1795265022]);for(var a=Math.log(2)*s,o=Math.ceil(!0===t?2*Math.pow(a,2):a),l=[],u=0;u<o;u++)l.push(i(u+2));return R(r,l)},l.prototype.isPrime=o.prototype.isPrime,o.prototype.isProbablePrime=function(t){var n=C(this);if(n!==e)return n;for(var r=this.abs(),s=t===e?5:t,a=[],o=0;o<s;o++)a.push(i.randBetween(2,r.minus(2)));return R(r,a)},l.prototype.isProbablePrime=o.prototype.isProbablePrime,o.prototype.modInv=function(e){for(var t,n,r,s=i.zero,a=i.one,o=X(e),l=this.abs();!l.equals(i.zero);)t=o.divide(l),n=s,r=o,s=a,o=l,a=n.subtract(t.multiply(a)),l=r.subtract(t.multiply(l));if(!o.equals(1))throw new Error(this.toString()+" and "+e.toString()+" are not co-prime");return-1===s.compare(0)&&(s=s.add(e)),this.isNegative()?s.negate():s},l.prototype.modInv=o.prototype.modInv,o.prototype.next=function(){var e=this.value;return this.sign?w(e,1,this.sign):new o(v(e,1),this.sign)},l.prototype.next=function(){var e=this.value;return e+1<n?new l(e+1):new o(r,!1)},o.prototype.prev=function(){var e=this.value;return this.sign?new o(v(e,1),!0):w(e,1,this.sign)},l.prototype.prev=function(){var e=this.value;return e-1>-n?new l(e-1):new o(r,!0)};for(var N=[1];2*N[N.length-1]<=t;)N.push(2*N[N.length-1]);var P=N.length,I=N[P-1];function O(e){return("number"==typeof e||"string"==typeof e)&&+Math.abs(e)<=t||e instanceof o&&e.value.length<=1}function k(e,t,n){t=X(t);for(var r=e.isNegative(),s=t.isNegative(),a=r?e.not():e,o=s?t.not():t,l=0,u=0,c=null,h=null,p=[];!a.isZero()||!o.isZero();)l=(c=A(a,I))[1].toJSNumber(),r&&(l=I-1-l),u=(h=A(o,I))[1].toJSNumber(),s&&(u=I-1-u),a=c[0],o=h[0],p.push(n(l,u));for(var f=0!==n(r?1:0,s?1:0)?i(-1):i(0),m=p.length-1;m>=0;m-=1)f=f.multiply(I).add(i(p[m]));return f}o.prototype.shiftLeft=function(e){if(!O(e))throw new Error(String(e)+" is too large for shifting.");if((e=+e)<0)return this.shiftRight(-e);var t=this;if(t.isZero())return t;for(;e>=P;)t=t.multiply(I),e-=P-1;return t.multiply(N[e])},l.prototype.shiftLeft=o.prototype.shiftLeft,o.prototype.shiftRight=function(e){var t;if(!O(e))throw new Error(String(e)+" is too large for shifting.");if((e=+e)<0)return this.shiftLeft(-e);for(var n=this;e>=P;){if(n.isZero()||n.isNegative()&&n.isUnit())return n;n=(t=A(n,I))[1].isNegative()?t[0].prev():t[0],e-=P-1}return(t=A(n,N[e]))[1].isNegative()?t[0].prev():t[0]},l.prototype.shiftRight=o.prototype.shiftRight,o.prototype.not=function(){return this.negate().prev()},l.prototype.not=o.prototype.not,o.prototype.and=function(e){return k(this,e,(function(e,t){return e&t}))},l.prototype.and=o.prototype.and,o.prototype.or=function(e){return k(this,e,(function(e,t){return e|t}))},l.prototype.or=o.prototype.or,o.prototype.xor=function(e){return k(this,e,(function(e,t){return e^t}))},l.prototype.xor=o.prototype.xor;function D(e){var n=e.value,r="number"==typeof n?1073741824|n:n[0]+n[1]*t|1073758208;return r&-r}function U(e,t){if(t.compareTo(e)<=0){var n=U(e,t.square(t)),r=n.p,s=n.e,a=r.multiply(t);return a.compareTo(e)<=0?{p:a,e:2*s+1}:{p:r,e:2*s}}return{p:i(1),e:0}}function z(e,t){return e=X(e),t=X(t),e.greater(t)?e:t}function B(e,t){return e=X(e),t=X(t),e.lesser(t)?e:t}function F(e,t){if(e=X(e).abs(),t=X(t).abs(),e.equals(t))return e;if(e.isZero())return t;if(t.isZero())return e;for(var n,r,i=a[1];e.isEven()&&t.isEven();)n=Math.min(D(e),D(t)),e=e.divide(n),t=t.divide(n),i=i.multiply(n);for(;e.isEven();)e=e.divide(D(e));do{for(;t.isEven();)t=t.divide(D(t));e.greater(t)&&(r=t,t=e,e=r),t=t.subtract(e)}while(!t.isZero());return i.isUnit()?e:e.multiply(i)}o.prototype.bitLength=function(){var e=this;return e.compareTo(i(0))<0&&(e=e.negate().subtract(i(1))),0===e.compareTo(i(0))?i(0):i(U(e,i(2)).e).add(i(1))},l.prototype.bitLength=o.prototype.bitLength;var q=function(e,t){for(var n=e.length,r=Math.abs(t),i=0;i<n;i++)if("-"!==(c=e[i].toLowerCase())&&/[a-z0-9]/.test(c)){if(/[0-9]/.test(c)&&+c>=r){if("1"===c&&1===r)continue;throw new Error(c+" is not a valid digit in base "+t+".")}if(c.charCodeAt(0)-87>=r)throw new Error(c+" is not a valid digit in base "+t+".")}if(2<=t&&t<=36&&n<=s/Math.log(t)){var a=parseInt(e,t);if(isNaN(a))throw new Error(c+" is not a valid digit in base "+t+".");return new l(parseInt(e,t))}t=X(t);var o=[],u="-"===e[0];for(i=u?1:0;i<e.length;i++){var c,h=(c=e[i].toLowerCase()).charCodeAt(0);if(48<=h&&h<=57)o.push(X(c));else if(97<=h&&h<=122)o.push(X(c.charCodeAt(0)-87));else{if("<"!==c)throw new Error(c+" is not a valid character");var p=i;do{i++}while(">"!==e[i]);o.push(X(e.slice(p+1,i)))}}return H(o,t,u)};function H(e,t,n){var r,i=a[0],s=a[1];for(r=e.length-1;r>=0;r--)i=i.add(e[r].times(s)),s=s.times(t);return n?i.negate():i}function G(e){return e<=35?"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e):"<"+e+">"}function V(e,t){if((t=i(t)).isZero()){if(e.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(t.equals(-1)){if(e.isZero())return{value:[0],isNegative:!1};if(e.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-e)).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var n=Array.apply(null,Array(+e-1)).map(Array.prototype.valueOf,[0,1]);return n.unshift([1]),{value:[].concat.apply([],n),isNegative:!1}}var r=!1;if(e.isNegative()&&t.isPositive()&&(r=!0,e=e.abs()),t.equals(1))return e.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(+e)).map(Number.prototype.valueOf,1),isNegative:r};for(var s,a=[],o=e;o.isNegative()||o.compareAbs(t)>=0;){s=o.divmod(t),o=s.quotient;var l=s.remainder;l.isNegative()&&(l=t.minus(l).abs(),o=o.next()),a.push(l.toJSNumber())}return a.push(o.toJSNumber()),{value:a.reverse(),isNegative:r}}function W(e,t){var n=V(e,t);return(n.isNegative?"-":"")+n.value.map(G).join("")}function j(e){if(u(+e)){var t=+e;if(t===m(t))return new l(t);throw new Error("Invalid integer: "+e)}var n="-"===e[0];n&&(e=e.slice(1));var r=e.split(/e/i);if(r.length>2)throw new Error("Invalid integer: "+r.join("e"));if(2===r.length){var i=r[1];if("+"===i[0]&&(i=i.slice(1)),(i=+i)!==m(i)||!u(i))throw new Error("Invalid integer: "+i+" is not a valid exponent.");var s=r[0],a=s.indexOf(".");if(a>=0&&(i-=s.length-a-1,s=s.slice(0,a)+s.slice(a+1)),i<0)throw new Error("Cannot include negative exponent part for integers");e=s+=new Array(i+1).join("0")}if(!/^([0-9][0-9]*)$/.test(e))throw new Error("Invalid integer: "+e);for(var c=[],h=e.length,f=h-7;h>0;)c.push(+e.slice(f,h)),(f-=7)<0&&(f=0),h-=7;return p(c),new o(c,n)}function X(e){return"number"==typeof e?function(e){if(u(e)){if(e!==m(e))throw new Error(e+" is not an integer.");return new l(e)}return j(e.toString())}(e):"string"==typeof e?j(e):e}o.prototype.toArray=function(e){return V(this,e)},l.prototype.toArray=function(e){return V(this,e)},o.prototype.toString=function(t){if(t===e&&(t=10),10!==t)return W(this,t);for(var n,r=this.value,i=r.length,s=String(r[--i]);--i>=0;)n=String(r[i]),s+="0000000".slice(n.length)+n;return(this.sign?"-":"")+s},l.prototype.toString=function(t){return t===e&&(t=10),10!=t?W(this,t):String(this.value)},o.prototype.toJSON=l.prototype.toJSON=function(){return this.toString()},o.prototype.valueOf=function(){return parseInt(this.toString(),10)},o.prototype.toJSNumber=o.prototype.valueOf,l.prototype.valueOf=function(){return this.value},l.prototype.toJSNumber=l.prototype.valueOf;for(var Z=0;Z<1e3;Z++)a[Z]=new l(Z),Z>0&&(a[-Z]=new l(-Z));return a.one=a[1],a.zero=a[0],a.minusOne=a[-1],a.max=z,a.min=B,a.gcd=F,a.lcm=function(e,t){return e=X(e).abs(),t=X(t).abs(),e.divide(F(e,t)).multiply(t)},a.isInstance=function(e){return e instanceof o||e instanceof l},a.randBetween=function(e,n){var r=B(e=X(e),n=X(n)),i=z(e,n).subtract(r).add(1);if(i.isSmall)return r.add(Math.floor(Math.random()*i));for(var s=[],a=!0,u=i.value.length-1;u>=0;u--){var c=a?i.value[u]:t,p=m(Math.random()*c);s.unshift(p),p<c&&(a=!1)}return s=h(s),r.add("number"==typeof s?new l(s):new o(s,!1))},a.fromArray=function(e,t,n){return H(e.map(X),X(t||10),n)},a}(),e.hasOwnProperty("exports")&&(e.exports=i),void 0===(r=function(){return i}.apply(t,[]))||(e.exports=r),i),bigDec:function(i){"use strict";var s,a,o,l=9e15,u=1e9,c="0123456789abcdef",h="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",p="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",f={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-l,maxE:l,crypto:!1},m=!0,d="[DecimalError] ",g=d+"Invalid argument: ",v=d+"Precision limit exceeded",y=d+"crypto unavailable",w=Math.floor,b=Math.pow,x=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,M=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,S=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,_=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,E=1e7,T=h.length-1,A=p.length-1,L={name:"[object Decimal]"};function C(e){var t,n,r,i=e.length-1,s="",a=e[0];if(i>0){for(s+=a,t=1;t<i;t++)(n=7-(r=e[t]+"").length)&&(s+=F(n)),s+=r;(n=7-(r=(a=e[t])+"").length)&&(s+=F(n))}else if(0===a)return"0";for(;a%10==0;)a/=10;return s+a}function R(e,t,n){if(e!==~~e||e<t||e>n)throw Error(g+e)}function N(e,t,n,r){var i,s,a,o;for(s=e[0];s>=10;s/=10)--t;return--t<0?(t+=7,i=0):(i=Math.ceil((t+1)/7),t%=7),s=b(10,7-t),o=e[i]%s|0,null==r?t<3?(0==t?o=o/100|0:1==t&&(o=o/10|0),a=n<4&&99999==o||n>3&&49999==o||5e4==o||0==o):a=(n<4&&o+1==s||n>3&&o+1==s/2)&&(e[i+1]/s/100|0)==b(10,t-2)-1||(o==s/2||0==o)&&0==(e[i+1]/s/100|0):t<4?(0==t?o=o/1e3|0:1==t?o=o/100|0:2==t&&(o=o/10|0),a=(r||n<4)&&9999==o||!r&&n>3&&4999==o):a=((r||n<4)&&o+1==s||!r&&n>3&&o+1==s/2)&&(e[i+1]/s/1e3|0)==b(10,t-3)-1,a}function P(e,t,n){for(var r,i,s=[0],a=0,o=e.length;a<o;){for(i=s.length;i--;)s[i]*=t;for(s[0]+=c.indexOf(e.charAt(a++)),r=0;r<s.length;r++)s[r]>n-1&&(void 0===s[r+1]&&(s[r+1]=0),s[r+1]+=s[r]/n|0,s[r]%=n)}return s.reverse()}L.absoluteValue=L.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),O(e)},L.ceil=function(){return O(new this.constructor(this),this.e+1,2)},L.comparedTo=L.cmp=function(e){var t,n,r,i,s=this,a=s.d,o=(e=new s.constructor(e)).d,l=s.s,u=e.s;if(!a||!o)return l&&u?l!==u?l:a===o?0:!a^l<0?1:-1:NaN;if(!a[0]||!o[0])return a[0]?l:o[0]?-u:0;if(l!==u)return l;if(s.e!==e.e)return s.e>e.e^l<0?1:-1;for(t=0,n=(r=a.length)<(i=o.length)?r:i;t<n;++t)if(a[t]!==o[t])return a[t]>o[t]^l<0?1:-1;return r===i?0:r>i^l<0?1:-1},L.cosine=L.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r,i=t.d.length;i<32?r=(1/J(4,n=Math.ceil(i/3))).toString():(n=16,r="2.3283064365386962890625e-10"),e.precision+=n,t=Y(e,1,t.times(r),new e(1));for(var s=n;s--;){var a=t.times(t);t=a.times(a).minus(a).times(8).plus(1)}return e.precision-=n,t}(r,$(r,n)),r.precision=e,r.rounding=t,O(2==o||3==o?n.neg():n,e,t,!0)):new r(1):new r(NaN)},L.cubeRoot=L.cbrt=function(){var e,t,n,r,i,s,a,o,l,u,c=this,h=c.constructor;if(!c.isFinite()||c.isZero())return new h(c);for(m=!1,(s=c.s*b(c.s*c,1/3))&&Math.abs(s)!=1/0?r=new h(s.toString()):(n=C(c.d),(s=((e=c.e)-n.length+1)%3)&&(n+=1==s||-2==s?"0":"00"),s=b(n,1/3),e=w((e+1)/3)-(e%3==(e<0?-1:2)),(r=new h(n=s==1/0?"5e"+e:(n=s.toExponential()).slice(0,n.indexOf("e")+1)+e)).s=c.s),a=(e=h.precision)+3;;)if(u=(l=(o=r).times(o).times(o)).plus(c),r=I(u.plus(c).times(o),u.plus(l),a+2,1),C(o.d).slice(0,a)===(n=C(r.d)).slice(0,a)){if("9999"!=(n=n.slice(a-3,a+1))&&(i||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(O(r,e+1,1),t=!r.times(r).times(r).eq(c));break}if(!i&&(O(o,e+1,0),o.times(o).times(o).eq(c))){r=o;break}a+=4,i=1}return m=!0,O(r,e,h.rounding,t)},L.decimalPlaces=L.dp=function(){var e,t=this.d,n=NaN;if(t){if(n=7*((e=t.length-1)-w(this.e/7)),e=t[e])for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n},L.dividedBy=L.div=function(e){return I(this,new this.constructor(e))},L.dividedToIntegerBy=L.divToInt=function(e){var t=this.constructor;return O(I(this,new t(e),0,1,1),t.precision,t.rounding)},L.equals=L.eq=function(e){return 0===this.cmp(e)},L.floor=function(){return O(new this.constructor(this),this.e+1,3)},L.greaterThan=L.gt=function(e){return this.cmp(e)>0},L.greaterThanOrEqualTo=L.gte=function(e){var t=this.cmp(e);return 1==t||0===t},L.hyperbolicCosine=L.cosh=function(){var e,t,n,r,i,s=this,a=s.constructor,o=new a(1);if(!s.isFinite())return new a(s.s?1/0:NaN);if(s.isZero())return o;n=a.precision,r=a.rounding,a.precision=n+Math.max(s.e,s.sd())+4,a.rounding=1,(i=s.d.length)<32?t=(1/J(4,e=Math.ceil(i/3))).toString():(e=16,t="2.3283064365386962890625e-10"),s=Y(a,1,s.times(t),new a(1),!0);for(var l,u=e,c=new a(8);u--;)l=s.times(s),s=o.minus(l.times(c.minus(l.times(c))));return O(s,a.precision=n,a.rounding=r,!0)},L.hyperbolicSine=L.sinh=function(){var e,t,n,r,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(t=s.precision,n=s.rounding,s.precision=t+Math.max(i.e,i.sd())+4,s.rounding=1,(r=i.d.length)<3)i=Y(s,2,i,i,!0);else{e=(e=1.4*Math.sqrt(r))>16?16:0|e,i=Y(s,2,i=i.times(1/J(5,e)),i,!0);for(var a,o=new s(5),l=new s(16),u=new s(20);e--;)a=i.times(i),i=i.times(o.plus(a.times(l.times(a).plus(u))))}return s.precision=t,s.rounding=n,O(i,t,n,!0)},L.hyperbolicTangent=L.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,I(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)},L.inverseCosine=L.acos=function(){var e,t=this,n=t.constructor,r=t.abs().cmp(1),i=n.precision,s=n.rounding;return-1!==r?0===r?t.isNeg()?z(n,i,s):new n(0):new n(NaN):t.isZero()?z(n,i+4,s).times(.5):(n.precision=i+6,n.rounding=1,t=t.asin(),e=z(n,i+4,s).times(.5),n.precision=i,n.rounding=s,e.minus(t))},L.inverseHyperbolicCosine=L.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,m=!1,n=n.times(n).minus(1).sqrt().plus(n),m=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)},L.inverseHyperbolicSine=L.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,m=!1,n=n.times(n).plus(1).sqrt().plus(n),m=!0,r.precision=e,r.rounding=t,n.ln())},L.inverseHyperbolicTangent=L.atanh=function(){var e,t,n,r,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=s.precision,t=s.rounding,r=i.sd(),Math.max(r,e)<2*-i.e-1?O(new s(i),e,t,!0):(s.precision=n=r-i.e,i=I(i.plus(1),new s(1).minus(i),n+e,1),s.precision=e+4,s.rounding=1,i=i.ln(),s.precision=e,s.rounding=t,i.times(.5))):new s(NaN)},L.inverseSine=L.asin=function(){var e,t,n,r,i=this,s=i.constructor;return i.isZero()?new s(i):(t=i.abs().cmp(1),n=s.precision,r=s.rounding,-1!==t?0===t?((e=z(s,n+4,r).times(.5)).s=i.s,e):new s(NaN):(s.precision=n+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=n,s.rounding=r,i.times(2)))},L.inverseTangent=L.atan=function(){var e,t,n,r,i,s,a,o,l,u=this,c=u.constructor,h=c.precision,p=c.rounding;if(u.isFinite()){if(u.isZero())return new c(u);if(u.abs().eq(1)&&h+4<=A)return(a=z(c,h+4,p).times(.25)).s=u.s,a}else{if(!u.s)return new c(NaN);if(h+4<=A)return(a=z(c,h+4,p).times(.5)).s=u.s,a}for(c.precision=o=h+10,c.rounding=1,e=n=Math.min(28,o/7+2|0);e;--e)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(m=!1,t=Math.ceil(o/7),r=1,l=u.times(u),a=new c(u),i=u;-1!==e;)if(i=i.times(l),s=a.minus(i.div(r+=2)),i=i.times(l),void 0!==(a=s.plus(i.div(r+=2))).d[t])for(e=t;a.d[e]===s.d[e]&&e--;);return n&&(a=a.times(2<<n-1)),m=!0,O(a,c.precision=h,c.rounding=p,!0)},L.isFinite=function(){return!!this.d},L.isInteger=L.isInt=function(){return!!this.d&&w(this.e/7)>this.d.length-2},L.isNaN=function(){return!this.s},L.isNegative=L.isNeg=function(){return this.s<0},L.isPositive=L.isPos=function(){return this.s>0},L.isZero=function(){return!!this.d&&0===this.d[0]},L.lessThan=L.lt=function(e){return this.cmp(e)<0},L.lessThanOrEqualTo=L.lte=function(e){return this.cmp(e)<1},L.logarithm=L.log=function(e){var t,n,r,i,s,a,o,l,u=this.constructor,c=u.precision,h=u.rounding;if(null==e)e=new u(10),t=!0;else{if(n=(e=new u(e)).d,e.s<0||!n||!n[0]||e.eq(1))return new u(NaN);t=e.eq(10)}if(n=this.d,this.s<0||!n||!n[0]||this.eq(1))return new u(n&&!n[0]?-1/0:1!=this.s?NaN:n?0:1/0);if(t)if(n.length>1)s=!0;else{for(i=n[0];i%10==0;)i/=10;s=1!==i}if(m=!1,a=W(this,o=c+5),r=t?U(u,o+10):W(e,o),N((l=I(a,r,o,1)).d,i=c,h))do{if(a=W(this,o+=10),r=t?U(u,o+10):W(e,o),l=I(a,r,o,1),!s){+C(l.d).slice(i+1,i+15)+1==1e14&&(l=O(l,c+1,0));break}}while(N(l.d,i+=10,h));return m=!0,O(l,c,h)},L.minus=L.sub=function(e){var t,n,r,i,s,a,o,l,u,c,h,p,f=this,d=f.constructor;if(e=new d(e),!f.d||!e.d)return f.s&&e.s?f.d?e.s=-e.s:e=new d(e.d||f.s!==e.s?f:NaN):e=new d(NaN),e;if(f.s!=e.s)return e.s=-e.s,f.plus(e);if(u=f.d,p=e.d,o=d.precision,l=d.rounding,!u[0]||!p[0]){if(p[0])e.s=-e.s;else{if(!u[0])return new d(3===l?-0:0);e=new d(f)}return m?O(e,o,l):e}if(n=w(e.e/7),c=w(f.e/7),u=u.slice(),s=c-n){for((h=s<0)?(t=u,s=-s,a=p.length):(t=p,n=c,a=u.length),s>(r=Math.max(Math.ceil(o/7),a)+2)&&(s=r,t.length=1),t.reverse(),r=s;r--;)t.push(0);t.reverse()}else{for((h=(r=u.length)<(a=p.length))&&(a=r),r=0;r<a;r++)if(u[r]!=p[r]){h=u[r]<p[r];break}s=0}for(h&&(t=u,u=p,p=t,e.s=-e.s),a=u.length,r=p.length-a;r>0;--r)u[a++]=0;for(r=p.length;r>s;){if(u[--r]<p[r]){for(i=r;i&&0===u[--i];)u[i]=E-1;--u[i],u[r]+=E}u[r]-=p[r]}for(;0===u[--a];)u.pop();for(;0===u[0];u.shift())--n;return u[0]?(e.d=u,e.e=D(u,n),m?O(e,o,l):e):new d(3===l?-0:0)},L.modulo=L.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?O(new r(n),r.precision,r.rounding):(m=!1,9==r.modulo?(t=I(n,e.abs(),0,3,1)).s*=e.s:t=I(n,e,0,r.modulo,1),t=t.times(e),m=!0,n.minus(t))},L.naturalExponential=L.exp=function(){return V(this)},L.naturalLogarithm=L.ln=function(){return W(this)},L.negated=L.neg=function(){var e=new this.constructor(this);return e.s=-e.s,O(e)},L.plus=L.add=function(e){var t,n,r,i,s,a,o,l,u,c,h=this,p=h.constructor;if(e=new p(e),!h.d||!e.d)return h.s&&e.s?h.d||(e=new p(e.d||h.s===e.s?h:NaN)):e=new p(NaN),e;if(h.s!=e.s)return e.s=-e.s,h.minus(e);if(u=h.d,c=e.d,o=p.precision,l=p.rounding,!u[0]||!c[0])return c[0]||(e=new p(h)),m?O(e,o,l):e;if(s=w(h.e/7),r=w(e.e/7),u=u.slice(),i=s-r){for(i<0?(n=u,i=-i,a=c.length):(n=c,r=s,a=u.length),i>(a=(s=Math.ceil(o/7))>a?s+1:a+1)&&(i=a,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for((a=u.length)-(i=c.length)<0&&(i=a,n=c,c=u,u=n),t=0;i;)t=(u[--i]=u[i]+c[i]+t)/E|0,u[i]%=E;for(t&&(u.unshift(t),++r),a=u.length;0==u[--a];)u.pop();return e.d=u,e.e=D(u,r),m?O(e,o,l):e},L.precision=L.sd=function(e){var t,n=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(g+e);return n.d?(t=B(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t},L.round=function(){var e=this,t=e.constructor;return O(new t(e),e.e+1,t.rounding)},L.sine=L.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r=t.d.length;if(r<3)return Y(e,2,t,t);n=(n=1.4*Math.sqrt(r))>16?16:0|n,t=Y(e,2,t=t.times(1/J(5,n)),t);for(var i,s=new e(5),a=new e(16),o=new e(20);n--;)i=t.times(t),t=t.times(s.plus(i.times(a.times(i).minus(o))));return t}(r,$(r,n)),r.precision=e,r.rounding=t,O(o>2?n.neg():n,e,t,!0)):new r(NaN)},L.squareRoot=L.sqrt=function(){var e,t,n,r,i,s,a=this,o=a.d,l=a.e,u=a.s,c=a.constructor;if(1!==u||!o||!o[0])return new c(!u||u<0&&(!o||o[0])?NaN:o?a:1/0);for(m=!1,0==(u=Math.sqrt(+a))||u==1/0?(((t=C(o)).length+l)%2==0&&(t+="0"),u=Math.sqrt(t),l=w((l+1)/2)-(l<0||l%2),r=new c(t=u==1/0?"5e"+l:(t=u.toExponential()).slice(0,t.indexOf("e")+1)+l)):r=new c(u.toString()),n=(l=c.precision)+3;;)if(r=(s=r).plus(I(a,s,n+2,1)).times(.5),C(s.d).slice(0,n)===(t=C(r.d)).slice(0,n)){if("9999"!=(t=t.slice(n-3,n+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(O(r,l+1,1),e=!r.times(r).eq(a));break}if(!i&&(O(s,l+1,0),s.times(s).eq(a))){r=s;break}n+=4,i=1}return m=!0,O(r,l,c.rounding,e)},L.tangent=L.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,(n=n.sin()).s=1,n=I(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,O(2==o||4==o?n.neg():n,e,t,!0)):new r(NaN)},L.times=L.mul=function(e){var t,n,r,i,s,a,o,l,u,c=this,h=c.constructor,p=c.d,f=(e=new h(e)).d;if(e.s*=c.s,!(p&&p[0]&&f&&f[0]))return new h(!e.s||p&&!p[0]&&!f||f&&!f[0]&&!p?NaN:p&&f?0*e.s:e.s/0);for(n=w(c.e/7)+w(e.e/7),(l=p.length)<(u=f.length)&&(s=p,p=f,f=s,a=l,l=u,u=a),s=[],r=a=l+u;r--;)s.push(0);for(r=u;--r>=0;){for(t=0,i=l+r;i>r;)o=s[i]+f[r]*p[i-r-1]+t,s[i--]=o%E|0,t=o/E|0;s[i]=(s[i]+t)%E|0}for(;!s[--a];)s.pop();return t?++n:s.shift(),e.d=s,e.e=D(s,n),m?O(e,h.precision,h.rounding):e},L.toBinary=function(e,t){return Q(this,2,e,t)},L.toDecimalPlaces=L.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(R(e,0,u),void 0===t?t=r.rounding:R(t,0,8),O(n,e+n.e+1,t))},L.toExponential=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=k(r,!0):(R(e,0,u),void 0===t?t=i.rounding:R(t,0,8),n=k(r=O(new i(r),e+1,t),!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n},L.toFixed=function(e,t){var n,r,i=this,s=i.constructor;return void 0===e?n=k(i):(R(e,0,u),void 0===t?t=s.rounding:R(t,0,8),n=k(r=O(new s(i),e+i.e+1,t),!1,e+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n},L.toFraction=function(e){var t,n,r,i,s,a,o,l,u,c,h,p,f=this,d=f.d,v=f.constructor;if(!d)return new v(f);if(u=n=new v(1),r=l=new v(0),a=(s=(t=new v(r)).e=B(d)-f.e-1)%7,t.d[0]=b(10,a<0?7+a:a),null==e)e=s>0?t:u;else{if(!(o=new v(e)).isInt()||o.lt(u))throw Error(g+o);e=o.gt(t)?s>0?t:u:o}for(m=!1,o=new v(C(d)),c=v.precision,v.precision=s=7*d.length*2;h=I(o,t,0,1,1),1!=(i=n.plus(h.times(r))).cmp(e);)n=r,r=i,i=u,u=l.plus(h.times(i)),l=i,i=t,t=o.minus(h.times(i)),o=i;return i=I(e.minus(n),r,0,1,1),l=l.plus(i.times(u)),n=n.plus(i.times(r)),l.s=u.s=f.s,p=I(u,r,s,1).minus(f).abs().cmp(I(l,n,s,1).minus(f).abs())<1?[u,r]:[l,n],v.precision=c,m=!0,p},L.toHexadecimal=L.toHex=function(e,t){return Q(this,16,e,t)},L.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),null==e){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),void 0===t?t=r.rounding:R(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(m=!1,n=I(n,e,0,t,1).times(e),m=!0,O(n)):(e.s=n.s,n=e),n},L.toNumber=function(){return+this},L.toOctal=function(e,t){return Q(this,8,e,t)},L.toPower=L.pow=function(e){var t,n,r,i,s,a,o=this,l=o.constructor,u=+(e=new l(e));if(!(o.d&&e.d&&o.d[0]&&e.d[0]))return new l(b(+o,u));if((o=new l(o)).eq(1))return o;if(r=l.precision,s=l.rounding,e.eq(1))return O(o,r,s);if((t=w(e.e/7))>=e.d.length-1&&(n=u<0?-u:u)<=9007199254740991)return i=q(l,o,n,r),e.s<0?new l(1).div(i):O(i,r,s);if((a=o.s)<0){if(t<e.d.length-1)return new l(NaN);if(0==(1&e.d[t])&&(a=1),0==o.e&&1==o.d[0]&&1==o.d.length)return o.s=a,o}return(t=0!=(n=b(+o,u))&&isFinite(n)?new l(n+"").e:w(u*(Math.log("0."+C(o.d))/Math.LN10+o.e+1)))>l.maxE+1||t<l.minE-1?new l(t>0?a/0:0):(m=!1,l.rounding=o.s=1,n=Math.min(12,(t+"").length),(i=V(e.times(W(o,r+n)),r)).d&&N((i=O(i,r+5,1)).d,r,s)&&(t=r+10,+C((i=O(V(e.times(W(o,t+n)),t),t+5,1)).d).slice(r+1,r+15)+1==1e14&&(i=O(i,r+1,0))),i.s=a,m=!0,l.rounding=s,O(i,r,s))},L.toPrecision=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=k(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(R(e,1,u),void 0===t?t=i.rounding:R(t,0,8),n=k(r=O(new i(r),e,t),e<=r.e||r.e<=i.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n},L.toSignificantDigits=L.toSD=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(R(e,1,u),void 0===t?t=n.rounding:R(t,0,8)),O(new n(this),e,t)},L.toString=function(){var e=this,t=e.constructor,n=k(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n},L.truncated=L.trunc=function(){return O(new this.constructor(this),this.e+1,1)},L.valueOf=L.toJSON=function(){var e=this,t=e.constructor,n=k(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};var I=function(){function e(e,t,n){var r,i=0,s=e.length;for(e=e.slice();s--;)r=e[s]*t+i,e[s]=r%n|0,i=r/n|0;return i&&e.unshift(i),e}function t(e,t,n,r){var i,s;if(n!=r)s=n>r?1:-1;else for(i=s=0;i<n;i++)if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}return s}function n(e,t,n,r){for(var i=0;n--;)e[n]-=i,i=e[n]<t[n]?1:0,e[n]=i*r+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,i,s,o,l,u){var c,h,p,f,m,d,g,v,y,b,x,M,S,_,T,A,L,C,R,N,P=r.constructor,I=r.s==i.s?1:-1,k=r.d,D=i.d;if(!(k&&k[0]&&D&&D[0]))return new P(r.s&&i.s&&(k?!D||k[0]!=D[0]:D)?k&&0==k[0]||!D?0*I:I/0:NaN);for(u?(m=1,h=r.e-i.e):(u=E,m=7,h=w(r.e/m)-w(i.e/m)),R=D.length,L=k.length,b=(y=new P(I)).d=[],p=0;D[p]==(k[p]||0);p++);if(D[p]>(k[p]||0)&&h--,null==s?(_=s=P.precision,o=P.rounding):_=l?s+(r.e-i.e)+1:s,_<0)b.push(1),d=!0;else{if(_=_/m+2|0,p=0,1==R){for(f=0,D=D[0],_++;(p<L||f)&&_--;p++)T=f*u+(k[p]||0),b[p]=T/D|0,f=T%D|0;d=f||p<L}else{for((f=u/(D[0]+1)|0)>1&&(D=e(D,f,u),k=e(k,f,u),R=D.length,L=k.length),A=R,M=(x=k.slice(0,R)).length;M<R;)x[M++]=0;(N=D.slice()).unshift(0),C=D[0],D[1]>=u/2&&++C;do{f=0,(c=t(D,x,R,M))<0?(S=x[0],R!=M&&(S=S*u+(x[1]||0)),(f=S/C|0)>1?(f>=u&&(f=u-1),1==(c=t(g=e(D,f,u),x,v=g.length,M=x.length))&&(f--,n(g,R<v?N:D,v,u))):(0==f&&(c=f=1),g=D.slice()),(v=g.length)<M&&g.unshift(0),n(x,g,M,u),-1==c&&(c=t(D,x,R,M=x.length))<1&&(f++,n(x,R<M?N:D,M,u)),M=x.length):0===c&&(f++,x=[0]),b[p++]=f,c&&x[0]?x[M++]=k[A]||0:(x=[k[A]],M=1)}while((A++<L||void 0!==x[0])&&_--);d=void 0!==x[0]}b[0]||b.shift()}if(1==m)y.e=h,a=d;else{for(p=1,f=b[0];f>=10;f/=10)p++;y.e=p+h*m-1,O(y,l?s+y.e+1:s,o,d)}return y}}();function O(e,t,n,r){var i,s,a,o,l,u,c,h,p,f=e.constructor;e:if(null!=t){if(!(h=e.d))return e;for(i=1,o=h[0];o>=10;o/=10)i++;if((s=t-i)<0)s+=7,a=t,l=(c=h[p=0])/b(10,i-a-1)%10|0;else if((p=Math.ceil((s+1)/7))>=(o=h.length)){if(!r)break e;for(;o++<=p;)h.push(0);c=l=0,i=1,a=(s%=7)-7+1}else{for(c=o=h[p],i=1;o>=10;o/=10)i++;l=(a=(s%=7)-7+i)<0?0:c/b(10,i-a-1)%10|0}if(r=r||t<0||void 0!==h[p+1]||(a<0?c:c%b(10,i-a-1)),u=n<4?(l||r)&&(0==n||n==(e.s<0?3:2)):l>5||5==l&&(4==n||r||6==n&&(s>0?a>0?c/b(10,i-a):0:h[p-1])%10&1||n==(e.s<0?8:7)),t<1||!h[0])return h.length=0,u?(t-=e.e+1,h[0]=b(10,(7-t%7)%7),e.e=-t||0):h[0]=e.e=0,e;if(0==s?(h.length=p,o=1,p--):(h.length=p+1,o=b(10,7-s),h[p]=a>0?(c/b(10,i-a)%b(10,a)|0)*o:0),u)for(;;){if(0==p){for(s=1,a=h[0];a>=10;a/=10)s++;for(a=h[0]+=o,o=1;a>=10;a/=10)o++;s!=o&&(e.e++,h[0]==E&&(h[0]=1));break}if(h[p]+=o,h[p]!=E)break;h[p--]=0,o=1}for(s=h.length;0===h[--s];)h.pop()}return m&&(e.e>f.maxE?(e.d=null,e.e=NaN):e.e<f.minE&&(e.e=0,e.d=[0])),e}function k(e,t,n){if(!e.isFinite())return j(e);var r,i=e.e,s=C(e.d),a=s.length;return t?(n&&(r=n-a)>0?s=s.charAt(0)+"."+s.slice(1)+F(r):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(e.e<0?"e":"e+")+e.e):i<0?(s="0."+F(-i-1)+s,n&&(r=n-a)>0&&(s+=F(r))):i>=a?(s+=F(i+1-a),n&&(r=n-i-1)>0&&(s=s+"."+F(r))):((r=i+1)<a&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(s+="."),s+=F(r))),s}function D(e,t){var n=e[0];for(t*=7;n>=10;n/=10)t++;return t}function U(e,t,n){if(t>T)throw m=!0,n&&(e.precision=n),Error(v);return O(new e(h),t,1,!0)}function z(e,t,n){if(t>A)throw Error(v);return O(new e(p),t,n,!0)}function B(e){var t=e.length-1,n=7*t+1;if(t=e[t]){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function F(e){for(var t="";e--;)t+="0";return t}function q(e,t,n,r){var i,s=new e(1),a=Math.ceil(r/7+4);for(m=!1;;){if(n%2&&K((s=s.times(t)).d,a)&&(i=!0),0===(n=w(n/2))){n=s.d.length-1,i&&0===s.d[n]&&++s.d[n];break}K((t=t.times(t)).d,a)}return m=!0,s}function H(e){return 1&e.d[e.d.length-1]}function G(e,t,n){for(var r,i=new e(t[0]),s=0;++s<t.length;){if(!(r=new e(t[s])).s){i=r;break}i[n](r)&&(i=r)}return i}function V(e,t){var n,r,i,s,a,o,l,u=0,c=0,h=0,p=e.constructor,f=p.rounding,d=p.precision;if(!e.d||!e.d[0]||e.e>17)return new p(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(m=!1,l=d):l=t,o=new p(.03125);e.e>-2;)e=e.times(o),h+=5;for(l+=r=Math.log(b(2,h))/Math.LN10*2+5|0,n=s=a=new p(1),p.precision=l;;){if(s=O(s.times(e),l,1),n=n.times(++c),C((o=a.plus(I(s,n,l,1))).d).slice(0,l)===C(a.d).slice(0,l)){for(i=h;i--;)a=O(a.times(a),l,1);if(null!=t)return p.precision=d,a;if(!(u<3&&N(a.d,l-r,f,u)))return O(a,p.precision=d,f,m=!0);p.precision=l+=10,n=s=o=new p(1),c=0,u++}a=o}}function W(e,t){var n,r,i,s,a,o,l,u,c,h,p,f=1,d=e,g=d.d,v=d.constructor,y=v.rounding,w=v.precision;if(d.s<0||!g||!g[0]||!d.e&&1==g[0]&&1==g.length)return new v(g&&!g[0]?-1/0:1!=d.s?NaN:g?0:d);if(null==t?(m=!1,c=w):c=t,v.precision=c+=10,r=(n=C(g)).charAt(0),!(Math.abs(s=d.e)<15e14))return u=U(v,c+2,w).times(s+""),d=W(new v(r+"."+n.slice(1)),c-10).plus(u),v.precision=w,null==t?O(d,w,y,m=!0):d;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=C((d=d.times(e)).d)).charAt(0),f++;for(s=d.e,r>1?(d=new v("0."+n),s++):d=new v(r+"."+n.slice(1)),h=d,l=a=d=I(d.minus(1),d.plus(1),c,1),p=O(d.times(d),c,1),i=3;;){if(a=O(a.times(p),c,1),C((u=l.plus(I(a,new v(i),c,1))).d).slice(0,c)===C(l.d).slice(0,c)){if(l=l.times(2),0!==s&&(l=l.plus(U(v,c+2,w).times(s+""))),l=I(l,new v(f),c,1),null!=t)return v.precision=w,l;if(!N(l.d,c-10,y,o))return O(l,v.precision=w,y,m=!0);v.precision=c+=10,u=a=d=I(h.minus(1),h.plus(1),c,1),p=O(d.times(d),c,1),i=o=1}l=u,i+=2}}function j(e){return String(e.s*e.s/0)}function X(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);r++);for(i=t.length;48===t.charCodeAt(i-1);--i);if(t=t.slice(r,i)){if(i-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%7,n<0&&(r+=7),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=7;r<i;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=i;for(;r--;)t+="0";e.d.push(+t),m&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function Z(e,t){var n,r,i,a,o,l,u,c,h;if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(M.test(t))n=16,t=t.toLowerCase();else if(x.test(t))n=2;else{if(!S.test(t))throw Error(g+t);n=8}for((a=t.search(/p/i))>0?(u=+t.slice(a+1),t=t.substring(2,a)):t=t.slice(2),o=(a=t.indexOf("."))>=0,r=e.constructor,o&&(a=(l=(t=t.replace(".","")).length)-a,i=q(r,new r(n),a,2*a)),a=h=(c=P(t,n,E)).length-1;0===c[a];--a)c.pop();return a<0?new r(0*e.s):(e.e=D(c,h),e.d=c,m=!1,o&&(e=I(e,i,4*l)),u&&(e=e.times(Math.abs(u)<54?b(2,u):s.pow(2,u))),m=!0,e)}function Y(e,t,n,r,i){var s,a,o,l,u=e.precision,c=Math.ceil(u/7);for(m=!1,l=n.times(n),o=new e(r);;){if(a=I(o.times(l),new e(t++*t++),u,1),o=i?r.plus(a):r.minus(a),r=I(a.times(l),new e(t++*t++),u,1),void 0!==(a=o.plus(r)).d[c]){for(s=c;a.d[s]===o.d[s]&&s--;);if(-1==s)break}s=o,o=r,r=a,a=s}return m=!0,a.d.length=c+1,a}function J(e,t){for(var n=e;--t;)n*=e;return n}function $(e,t){var n,r=t.s<0,i=z(e,e.precision,1),s=i.times(.5);if((t=t.abs()).lte(s))return o=r?4:1,t;if((n=t.divToInt(i)).isZero())o=r?3:2;else{if((t=t.minus(n.times(i))).lte(s))return o=H(n)?r?2:3:r?4:1,t;o=H(n)?r?1:4:r?3:2}return t.minus(i).abs()}function Q(e,t,n,r){var i,s,o,l,h,p,f,m,d,g=e.constructor,v=void 0!==n;if(v?(R(n,1,u),void 0===r?r=g.rounding:R(r,0,8)):(n=g.precision,r=g.rounding),e.isFinite()){for(v?(i=2,16==t?n=4*n-3:8==t&&(n=3*n-2)):i=t,(o=(f=k(e)).indexOf("."))>=0&&(f=f.replace(".",""),(d=new g(1)).e=f.length-o,d.d=P(k(d),10,i),d.e=d.d.length),s=h=(m=P(f,10,i)).length;0==m[--h];)m.pop();if(m[0]){if(o<0?s--:((e=new g(e)).d=m,e.e=s,m=(e=I(e,d,n,r,0,i)).d,s=e.e,p=a),o=m[n],l=i/2,p=p||void 0!==m[n+1],p=r<4?(void 0!==o||p)&&(0===r||r===(e.s<0?3:2)):o>l||o===l&&(4===r||p||6===r&&1&m[n-1]||r===(e.s<0?8:7)),m.length=n,p)for(;++m[--n]>i-1;)m[n]=0,n||(++s,m.unshift(1));for(h=m.length;!m[h-1];--h);for(o=0,f="";o<h;o++)f+=c.charAt(m[o]);if(v){if(h>1)if(16==t||8==t){for(o=16==t?4:3,--h;h%o;h++)f+="0";for(h=(m=P(f,i,t)).length;!m[h-1];--h);for(o=1,f="1.";o<h;o++)f+=c.charAt(m[o])}else f=f.charAt(0)+"."+f.slice(1);f=f+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)f="0"+f;f="0."+f}else if(++s>h)for(s-=h;s--;)f+="0";else s<h&&(f=f.slice(0,s)+"."+f.slice(s))}else f=v?"0p+0":"0";f=(16==t?"0x":2==t?"0b":8==t?"0o":"")+f}else f=j(e);return e.s<0?"-"+f:f}function K(e,t){if(e.length>t)return e.length=t,!0}function ee(e){return new this(e).abs()}function te(e){return new this(e).acos()}function ne(e){return new this(e).acosh()}function re(e,t){return new this(e).plus(t)}function ie(e){return new this(e).asin()}function se(e){return new this(e).asinh()}function ae(e){return new this(e).atan()}function oe(e){return new this(e).atanh()}function le(e,t){e=new this(e),t=new this(t);var n,r=this.precision,i=this.rounding,s=r+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(n=t.s<0?z(this,r,i):new this(0)).s=e.s:!e.d||t.isZero()?(n=z(this,s,1).times(.5)).s=e.s:t.s<0?(this.precision=s,this.rounding=1,n=this.atan(I(e,t,s,1)),t=z(this,s,1),this.precision=r,this.rounding=i,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(I(e,t,s,1)):(n=z(this,s,1).times(t.s>0?.25:.75)).s=e.s:n=new this(NaN),n}function ue(e){return new this(e).cbrt()}function ce(e){return O(e=new this(e),e.e+1,2)}function he(e){if(!e||"object"!=typeof e)throw Error(d+"Object expected");var t,n,r,i=!0===e.defaults,s=["precision",1,u,"rounding",0,8,"toExpNeg",-l,0,"toExpPos",0,l,"maxE",0,l,"minE",-l,0,"modulo",0,9];for(t=0;t<s.length;t+=3)if(n=s[t],i&&(this[n]=f[n]),void 0!==(r=e[n])){if(!(w(r)===r&&r>=s[t+1]&&r<=s[t+2]))throw Error(g+n+": "+r);this[n]=r}if(n="crypto",i&&(this[n]=f[n]),void 0!==(r=e[n])){if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error(g+n+": "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(y);this[n]=!0}else this[n]=!1}return this}function pe(e){return new this(e).cos()}function fe(e){return new this(e).cosh()}function me(e,t){return new this(e).div(t)}function de(e){return new this(e).exp()}function ge(e){return O(e=new this(e),e.e+1,3)}function ve(){var e,t,n=new this(0);for(m=!1,e=0;e<arguments.length;)if((t=new this(arguments[e++])).d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return m=!0,new this(1/0);n=t}return m=!0,n.sqrt()}function ye(e){return e instanceof s||e&&"[object Decimal]"===e.name||!1}function we(e){return new this(e).ln()}function be(e,t){return new this(e).log(t)}function xe(e){return new this(e).log(2)}function Me(e){return new this(e).log(10)}function Se(){return G(this,arguments,"lt")}function _e(){return G(this,arguments,"gt")}function Ee(e,t){return new this(e).mod(t)}function Te(e,t){return new this(e).mul(t)}function Ae(e,t){return new this(e).pow(t)}function Le(e){var t,n,r,i,s=0,a=new this(1),o=[];if(void 0===e?e=this.precision:R(e,1,u),r=Math.ceil(e/7),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));s<r;)(i=t[s])>=429e7?t[s]=crypto.getRandomValues(new Uint32Array(1))[0]:o[s++]=i%1e7;else{if(!crypto.randomBytes)throw Error(y);for(t=crypto.randomBytes(r*=4);s<r;)(i=t[s]+(t[s+1]<<8)+(t[s+2]<<16)+((127&t[s+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,s):(o.push(i%1e7),s+=4);s=r/4}else for(;s<r;)o[s++]=1e7*Math.random()|0;for(e%=7,(r=o[--s])&&e&&(i=b(10,7-e),o[s]=(r/i|0)*i);0===o[s];s--)o.pop();if(s<0)n=0,o=[0];else{for(n=-1;0===o[0];n-=7)o.shift();for(r=1,i=o[0];i>=10;i/=10)r++;r<7&&(n-=7-r)}return a.e=n,a.d=o,a}function Ce(e){return O(e=new this(e),e.e+1,this.rounding)}function Re(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function Ne(e){return new this(e).sin()}function Pe(e){return new this(e).sinh()}function Ie(e){return new this(e).sqrt()}function Oe(e,t){return new this(e).sub(t)}function ke(e){return new this(e).tan()}function De(e){return new this(e).tanh()}function Ue(e){return O(e=new this(e),e.e+1,1)}return(s=function e(t){var n,r,i;function s(e){var t,n,r,i=this;if(!(i instanceof s))return new s(e);if(i.constructor=s,e instanceof s)return i.s=e.s,void(m?!e.d||e.e>s.maxE?(i.e=NaN,i.d=null):e.e<s.minE?(i.e=0,i.d=[0]):(i.e=e.e,i.d=e.d.slice()):(i.e=e.e,i.d=e.d?e.d.slice():e.d));if("number"==(r=typeof e)){if(0===e)return i.s=1/e<0?-1:1,i.e=0,void(i.d=[0]);if(e<0?(e=-e,i.s=-1):i.s=1,e===~~e&&e<1e7){for(t=0,n=e;n>=10;n/=10)t++;return void(m?t>s.maxE?(i.e=NaN,i.d=null):t<s.minE?(i.e=0,i.d=[0]):(i.e=t,i.d=[e]):(i.e=t,i.d=[e]))}return 0*e!=0?(e||(i.s=NaN),i.e=NaN,void(i.d=null)):X(i,e.toString())}if("string"!==r)throw Error(g+e);return 45===(n=e.charCodeAt(0))?(e=e.slice(1),i.s=-1):(43===n&&(e=e.slice(1)),i.s=1),_.test(e)?X(i,e):Z(i,e)}if(s.prototype=L,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=he,s.clone=e,s.isDecimal=ye,s.abs=ee,s.acos=te,s.acosh=ne,s.add=re,s.asin=ie,s.asinh=se,s.atan=ae,s.atanh=oe,s.atan2=le,s.cbrt=ue,s.ceil=ce,s.cos=pe,s.cosh=fe,s.div=me,s.exp=de,s.floor=ge,s.hypot=ve,s.ln=we,s.log=be,s.log10=Me,s.log2=xe,s.max=Se,s.min=_e,s.mod=Ee,s.mul=Te,s.pow=Ae,s.random=Le,s.round=Ce,s.sign=Re,s.sin=Ne,s.sinh=Pe,s.sqrt=Ie,s.sub=Oe,s.tan=ke,s.tanh=De,s.trunc=Ue,void 0===t&&(t={}),t&&!0!==t.defaults)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<i.length;)t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);return s.config(t),s}(f)).default=s.Decimal=s,h=new s(h),p=new s(p),void 0!==(r=function(){return s}.call(t,n,t,e))&&(e.exports=r),s}()});e.exports=s},412:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ACESFilmicToneMapping:()=>ne,AddEquation:()=>E,AddOperation:()=>$,AdditiveAnimationBlendMode:()=>jt,AdditiveBlending:()=>x,AlphaFormat:()=>De,AlwaysDepth:()=>H,AlwaysStencilFunc:()=>_n,AmbientLight:()=>np,AmbientLightProbe:()=>wp,AnimationClip:()=>Ah,AnimationLoader:()=>kh,AnimationMixer:()=>Jp,AnimationObjectGroup:()=>Zp,AnimationUtils:()=>mh,ArcCurve:()=>Yu,ArrayCamera:()=>wl,ArrowHelper:()=>qf,Audio:()=>Rp,AudioAnalyser:()=>Dp,AudioContext:()=>gp,AudioListener:()=>Cp,AudioLoader:()=>vp,AxesHelper:()=>Hf,AxisHelper:()=>vm,BackSide:()=>d,BasicDepthPacking:()=>sn,BasicShadowMap:()=>c,BinaryTextureLoader:()=>Mm,Bone:()=>iu,BooleanKeyframeTrack:()=>bh,BoundingBoxHelper:()=>ym,Box2:()=>of,Box3:()=>dr,Box3Helper:()=>Df,BoxBufferGeometry:()=>Ms,BoxGeometry:()=>Ms,BoxHelper:()=>kf,BufferAttribute:()=>zi,BufferGeometry:()=>ns,BufferGeometryLoader:()=>up,ByteType:()=>Ee,Cache:()=>Ch,Camera:()=>As,CameraHelper:()=>Pf,CanvasRenderer:()=>_m,CanvasTexture:()=>ku,CatmullRomCurve3:()=>tc,CineonToneMapping:()=>te,CircleBufferGeometry:()=>Uu,CircleGeometry:()=>Uu,ClampToEdgeWrapping:()=>pe,Clock:()=>Sp,Color:()=>Oi,ColorKeyframeTrack:()=>xh,CompressedTexture:()=>Ou,CompressedTextureLoader:()=>Dh,ConeBufferGeometry:()=>Bu,ConeGeometry:()=>Bu,CubeCamera:()=>Rs,CubeReflectionMapping:()=>se,CubeRefractionMapping:()=>ae,CubeTexture:()=>Ns,CubeTextureLoader:()=>zh,CubeUVReflectionMapping:()=>ue,CubeUVRefractionMapping:()=>ce,CubicBezierCurve:()=>sc,CubicBezierCurve3:()=>ac,CubicInterpolant:()=>gh,CullFaceBack:()=>o,CullFaceFront:()=>l,CullFaceFrontBack:()=>u,CullFaceNone:()=>a,Curve:()=>Xu,CurvePath:()=>fc,CustomBlending:()=>_,CustomToneMapping:()=>re,CylinderBufferGeometry:()=>zu,CylinderGeometry:()=>zu,Cylindrical:()=>sf,DataTexture:()=>su,DataTexture2DArray:()=>Ea,DataTexture3D:()=>Na,DataTextureLoader:()=>Bh,DataUtils:()=>jf,DecrementStencilOp:()=>fn,DecrementWrapStencilOp:()=>dn,DefaultLoadingManager:()=>Nh,DepthFormat:()=>He,DepthStencilFormat:()=>Ge,DepthTexture:()=>Du,DirectionalLight:()=>tp,DirectionalLightHelper:()=>Cf,DiscreteInterpolant:()=>yh,DodecahedronBufferGeometry:()=>qu,DodecahedronGeometry:()=>qu,DoubleSide:()=>g,DstAlphaFactor:()=>D,DstColorFactor:()=>z,DynamicBufferAttribute:()=>om,DynamicCopyUsage:()=>Pn,DynamicDrawUsage:()=>Tn,DynamicReadUsage:()=>Cn,EdgesGeometry:()=>ju,EdgesHelper:()=>wm,EllipseCurve:()=>Zu,EqualDepth:()=>W,EqualStencilFunc:()=>wn,EquirectangularReflectionMapping:()=>oe,EquirectangularRefractionMapping:()=>le,Euler:()=>Kr,EventDispatcher:()=>Dn,ExtrudeBufferGeometry:()=>Gc,ExtrudeGeometry:()=>Gc,FaceColors:()=>Jf,FileLoader:()=>Oh,FlatShading:()=>v,Float16BufferAttribute:()=>ji,Float32Attribute:()=>dm,Float32BufferAttribute:()=>Xi,Float64Attribute:()=>gm,Float64BufferAttribute:()=>Zi,FloatType:()=>Re,Fog:()=>Ll,FogExp2:()=>Al,Font:()=>Nm,FontLoader:()=>Rm,FrontSide:()=>m,Frustum:()=>Bs,GLBufferAttribute:()=>Kp,GLSL1:()=>On,GLSL3:()=>kn,GammaEncoding:()=>Qt,GreaterDepth:()=>X,GreaterEqualDepth:()=>j,GreaterEqualStencilFunc:()=>Sn,GreaterStencilFunc:()=>xn,GridHelper:()=>_f,Group:()=>bl,HalfFloatType:()=>Ne,HemisphereLight:()=>Hh,HemisphereLightHelper:()=>Sf,HemisphereLightProbe:()=>yp,IcosahedronBufferGeometry:()=>Wc,IcosahedronGeometry:()=>Wc,ImageBitmapLoader:()=>mp,ImageLoader:()=>Uh,ImageUtils:()=>rr,ImmediateRenderObject:()=>hf,IncrementStencilOp:()=>pn,IncrementWrapStencilOp:()=>mn,InstancedBufferAttribute:()=>uu,InstancedBufferGeometry:()=>lp,InstancedInterleavedBuffer:()=>Qp,InstancedMesh:()=>mu,Int16Attribute:()=>hm,Int16BufferAttribute:()=>Hi,Int32Attribute:()=>fm,Int32BufferAttribute:()=>Vi,Int8Attribute:()=>lm,Int8BufferAttribute:()=>Bi,IntType:()=>Le,InterleavedBuffer:()=>Rl,InterleavedBufferAttribute:()=>Pl,Interpolant:()=>dh,InterpolateDiscrete:()=>Bt,InterpolateLinear:()=>Ft,InterpolateSmooth:()=>qt,InvertStencilOp:()=>gn,JSONLoader:()=>Em,KeepStencilOp:()=>cn,KeyframeTrack:()=>wh,LOD:()=>$l,LatheBufferGeometry:()=>jc,LatheGeometry:()=>jc,Layers:()=>ei,LensFlare:()=>Am,LessDepth:()=>G,LessEqualDepth:()=>V,LessEqualStencilFunc:()=>bn,LessStencilFunc:()=>yn,Light:()=>qh,LightProbe:()=>sp,Line:()=>xu,Line3:()=>cf,LineBasicMaterial:()=>du,LineCurve:()=>oc,LineCurve3:()=>lc,LineDashedMaterial:()=>ph,LineLoop:()=>Eu,LinePieces:()=>Zf,LineSegments:()=>_u,LineStrip:()=>Xf,LinearEncoding:()=>Jt,LinearFilter:()=>we,LinearInterpolant:()=>vh,LinearMipMapLinearFilter:()=>Se,LinearMipMapNearestFilter:()=>xe,LinearMipmapLinearFilter:()=>Me,LinearMipmapNearestFilter:()=>be,LinearToneMapping:()=>K,Loader:()=>Ph,LoaderUtils:()=>op,LoadingManager:()=>Rh,LogLuvEncoding:()=>en,LoopOnce:()=>Dt,LoopPingPong:()=>zt,LoopRepeat:()=>Ut,LuminanceAlphaFormat:()=>Fe,LuminanceFormat:()=>Be,MOUSE:()=>i,Material:()=>Ai,MaterialLoader:()=>ap,Math:()=>Yn,MathUtils:()=>Yn,Matrix3:()=>$n,Matrix4:()=>Gr,MaxEquation:()=>C,Mesh:()=>bs,MeshBasicMaterial:()=>ki,MeshDepthMaterial:()=>fl,MeshDistanceMaterial:()=>ml,MeshFaceMaterial:()=>Qf,MeshLambertMaterial:()=>ch,MeshMatcapMaterial:()=>hh,MeshNormalMaterial:()=>uh,MeshPhongMaterial:()=>oh,MeshPhysicalMaterial:()=>ah,MeshStandardMaterial:()=>sh,MeshToonMaterial:()=>lh,MinEquation:()=>L,MirroredRepeatWrapping:()=>fe,MixOperation:()=>J,MultiMaterial:()=>Kf,MultiplyBlending:()=>S,MultiplyOperation:()=>Y,NearestFilter:()=>me,NearestMipMapLinearFilter:()=>ye,NearestMipMapNearestFilter:()=>ge,NearestMipmapLinearFilter:()=>ve,NearestMipmapNearestFilter:()=>de,NeverDepth:()=>q,NeverStencilFunc:()=>vn,NoBlending:()=>w,NoColors:()=>Yf,NoToneMapping:()=>Q,NormalAnimationBlendMode:()=>Wt,NormalBlending:()=>b,NotEqualDepth:()=>Z,NotEqualStencilFunc:()=>Mn,NumberKeyframeTrack:()=>Mh,Object3D:()=>mi,ObjectLoader:()=>cp,ObjectSpaceNormalMap:()=>ln,OctahedronBufferGeometry:()=>Xc,OctahedronGeometry:()=>Xc,OneFactor:()=>N,OneMinusDstAlphaFactor:()=>U,OneMinusDstColorFactor:()=>B,OneMinusSrcAlphaFactor:()=>k,OneMinusSrcColorFactor:()=>I,OrthographicCamera:()=>Qs,PCFShadowMap:()=>h,PCFSoftShadowMap:()=>p,PMREMGenerator:()=>fa,ParametricGeometry:()=>Lm,Particle:()=>tm,ParticleBasicMaterial:()=>im,ParticleSystem:()=>nm,ParticleSystemMaterial:()=>sm,Path:()=>mc,PerspectiveCamera:()=>Ls,Plane:()=>Ds,PlaneBufferGeometry:()=>Hs,PlaneGeometry:()=>Hs,PlaneHelper:()=>Uf,PointCloud:()=>em,PointCloudMaterial:()=>rm,PointLight:()=>Kh,PointLightHelper:()=>wf,Points:()=>Nu,PointsMaterial:()=>Tu,PolarGridHelper:()=>Ef,PolyhedronBufferGeometry:()=>Fu,PolyhedronGeometry:()=>Fu,PositionalAudio:()=>kp,PropertyBinding:()=>Xp,PropertyMixer:()=>Up,QuadraticBezierCurve:()=>uc,QuadraticBezierCurve3:()=>cc,Quaternion:()=>hr,QuaternionKeyframeTrack:()=>_h,QuaternionLinearInterpolant:()=>Sh,REVISION:()=>r,RGBADepthPacking:()=>an,RGBAFormat:()=>ze,RGBAIntegerFormat:()=>Ye,RGBA_ASTC_10x10_Format:()=>yt,RGBA_ASTC_10x5_Format:()=>dt,RGBA_ASTC_10x6_Format:()=>gt,RGBA_ASTC_10x8_Format:()=>vt,RGBA_ASTC_12x10_Format:()=>wt,RGBA_ASTC_12x12_Format:()=>bt,RGBA_ASTC_4x4_Format:()=>ot,RGBA_ASTC_5x4_Format:()=>lt,RGBA_ASTC_5x5_Format:()=>ut,RGBA_ASTC_6x5_Format:()=>ct,RGBA_ASTC_6x6_Format:()=>ht,RGBA_ASTC_8x5_Format:()=>pt,RGBA_ASTC_8x6_Format:()=>ft,RGBA_ASTC_8x8_Format:()=>mt,RGBA_BPTC_Format:()=>xt,RGBA_ETC2_EAC_Format:()=>at,RGBA_PVRTC_2BPPV1_Format:()=>rt,RGBA_PVRTC_4BPPV1_Format:()=>nt,RGBA_S3TC_DXT1_Format:()=>$e,RGBA_S3TC_DXT3_Format:()=>Qe,RGBA_S3TC_DXT5_Format:()=>Ke,RGBDEncoding:()=>rn,RGBEEncoding:()=>Kt,RGBEFormat:()=>qe,RGBFormat:()=>Ue,RGBIntegerFormat:()=>Ze,RGBM16Encoding:()=>nn,RGBM7Encoding:()=>tn,RGB_ETC1_Format:()=>it,RGB_ETC2_Format:()=>st,RGB_PVRTC_2BPPV1_Format:()=>tt,RGB_PVRTC_4BPPV1_Format:()=>et,RGB_S3TC_DXT1_Format:()=>Je,RGFormat:()=>je,RGIntegerFormat:()=>Xe,RawShaderMaterial:()=>Ks,Ray:()=>Hr,Raycaster:()=>ef,RectAreaLight:()=>rp,RedFormat:()=>Ve,RedIntegerFormat:()=>We,ReinhardToneMapping:()=>ee,RepeatWrapping:()=>he,ReplaceStencilOp:()=>hn,ReverseSubtractEquation:()=>A,RingBufferGeometry:()=>Zc,RingGeometry:()=>Zc,SRGB8_ALPHA8_ASTC_10x10_Format:()=>It,SRGB8_ALPHA8_ASTC_10x5_Format:()=>Rt,SRGB8_ALPHA8_ASTC_10x6_Format:()=>Nt,SRGB8_ALPHA8_ASTC_10x8_Format:()=>Pt,SRGB8_ALPHA8_ASTC_12x10_Format:()=>Ot,SRGB8_ALPHA8_ASTC_12x12_Format:()=>kt,SRGB8_ALPHA8_ASTC_4x4_Format:()=>Mt,SRGB8_ALPHA8_ASTC_5x4_Format:()=>St,SRGB8_ALPHA8_ASTC_5x5_Format:()=>_t,SRGB8_ALPHA8_ASTC_6x5_Format:()=>Et,SRGB8_ALPHA8_ASTC_6x6_Format:()=>Tt,SRGB8_ALPHA8_ASTC_8x5_Format:()=>At,SRGB8_ALPHA8_ASTC_8x6_Format:()=>Lt,SRGB8_ALPHA8_ASTC_8x8_Format:()=>Ct,Scene:()=>Cl,SceneUtils:()=>Tm,ShaderChunk:()=>Gs,ShaderLib:()=>Ws,ShaderMaterial:()=>Ts,ShadowMaterial:()=>ih,Shape:()=>dc,ShapeBufferGeometry:()=>Yc,ShapeGeometry:()=>Yc,ShapePath:()=>Gf,ShapeUtils:()=>Fc,ShortType:()=>Te,Skeleton:()=>lu,SkeletonHelper:()=>vf,SkinnedMesh:()=>ru,SmoothShading:()=>y,Sphere:()=>Or,SphereBufferGeometry:()=>Jc,SphereGeometry:()=>Jc,Spherical:()=>rf,SphericalHarmonics3:()=>ip,SplineCurve:()=>hc,SpotLight:()=>Zh,SpotLightHelper:()=>ff,Sprite:()=>Xl,SpriteMaterial:()=>Il,SrcAlphaFactor:()=>O,SrcAlphaSaturateFactor:()=>F,SrcColorFactor:()=>P,StaticCopyUsage:()=>Nn,StaticDrawUsage:()=>En,StaticReadUsage:()=>Ln,StereoCamera:()=>Mp,StreamCopyUsage:()=>In,StreamDrawUsage:()=>An,StreamReadUsage:()=>Rn,StringKeyframeTrack:()=>Eh,SubtractEquation:()=>T,SubtractiveBlending:()=>M,TOUCH:()=>s,TangentSpaceNormalMap:()=>on,TetrahedronBufferGeometry:()=>$c,TetrahedronGeometry:()=>$c,TextGeometry:()=>Cm,Texture:()=>sr,TextureLoader:()=>Fh,TorusBufferGeometry:()=>Qc,TorusGeometry:()=>Qc,TorusKnotBufferGeometry:()=>Kc,TorusKnotGeometry:()=>Kc,Triangle:()=>Ei,TriangleFanDrawMode:()=>Yt,TriangleStripDrawMode:()=>Zt,TrianglesDrawMode:()=>Xt,TubeBufferGeometry:()=>eh,TubeGeometry:()=>eh,UVMapping:()=>ie,Uint16Attribute:()=>pm,Uint16BufferAttribute:()=>Gi,Uint32Attribute:()=>mm,Uint32BufferAttribute:()=>Wi,Uint8Attribute:()=>um,Uint8BufferAttribute:()=>Fi,Uint8ClampedAttribute:()=>cm,Uint8ClampedBufferAttribute:()=>qi,Uniform:()=>$p,UniformsLib:()=>Vs,UniformsUtils:()=>Es,UnsignedByteType:()=>_e,UnsignedInt248Type:()=>ke,UnsignedIntType:()=>Ce,UnsignedShort4444Type:()=>Pe,UnsignedShort5551Type:()=>Ie,UnsignedShort565Type:()=>Oe,UnsignedShortType:()=>Ae,VSMShadowMap:()=>f,Vector2:()=>Jn,Vector3:()=>pr,Vector4:()=>or,VectorKeyframeTrack:()=>Th,Vertex:()=>am,VertexColors:()=>$f,VideoTexture:()=>Iu,WebGL1Renderer:()=>Tl,WebGLCubeRenderTarget:()=>Ps,WebGLMultipleRenderTargets:()=>ur,WebGLMultisampleRenderTarget:()=>cr,WebGLRenderTarget:()=>lr,WebGLRenderTargetCube:()=>Sm,WebGLRenderer:()=>El,WebGLUtils:()=>yl,WireframeGeometry:()=>th,WireframeHelper:()=>bm,WrapAroundEnding:()=>Vt,XHRLoader:()=>xm,ZeroCurvatureEnding:()=>Ht,ZeroFactor:()=>R,ZeroSlopeEnding:()=>Gt,ZeroStencilOp:()=>un,sRGBEncoding:()=>$t});const r="133",i={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},s={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},a=0,o=1,l=2,u=3,c=0,h=1,p=2,f=3,m=0,d=1,g=2,v=1,y=2,w=0,b=1,x=2,M=3,S=4,_=5,E=100,T=101,A=102,L=103,C=104,R=200,N=201,P=202,I=203,O=204,k=205,D=206,U=207,z=208,B=209,F=210,q=0,H=1,G=2,V=3,W=4,j=5,X=6,Z=7,Y=0,J=1,$=2,Q=0,K=1,ee=2,te=3,ne=4,re=5,ie=300,se=301,ae=302,oe=303,le=304,ue=306,ce=307,he=1e3,pe=1001,fe=1002,me=1003,de=1004,ge=1004,ve=1005,ye=1005,we=1006,be=1007,xe=1007,Me=1008,Se=1008,_e=1009,Ee=1010,Te=1011,Ae=1012,Le=1013,Ce=1014,Re=1015,Ne=1016,Pe=1017,Ie=1018,Oe=1019,ke=1020,De=1021,Ue=1022,ze=1023,Be=1024,Fe=1025,qe=ze,He=1026,Ge=1027,Ve=1028,We=1029,je=1030,Xe=1031,Ze=1032,Ye=1033,Je=33776,$e=33777,Qe=33778,Ke=33779,et=35840,tt=35841,nt=35842,rt=35843,it=36196,st=37492,at=37496,ot=37808,lt=37809,ut=37810,ct=37811,ht=37812,pt=37813,ft=37814,mt=37815,dt=37816,gt=37817,vt=37818,yt=37819,wt=37820,bt=37821,xt=36492,Mt=37840,St=37841,_t=37842,Et=37843,Tt=37844,At=37845,Lt=37846,Ct=37847,Rt=37848,Nt=37849,Pt=37850,It=37851,Ot=37852,kt=37853,Dt=2200,Ut=2201,zt=2202,Bt=2300,Ft=2301,qt=2302,Ht=2400,Gt=2401,Vt=2402,Wt=2500,jt=2501,Xt=0,Zt=1,Yt=2,Jt=3e3,$t=3001,Qt=3007,Kt=3002,en=3003,tn=3004,nn=3005,rn=3006,sn=3200,an=3201,on=0,ln=1,un=0,cn=7680,hn=7681,pn=7682,fn=7683,mn=34055,dn=34056,gn=5386,vn=512,yn=513,wn=514,bn=515,xn=516,Mn=517,Sn=518,_n=519,En=35044,Tn=35048,An=35040,Ln=35045,Cn=35049,Rn=35041,Nn=35046,Pn=35050,In=35042,On="100",kn="300 es";class Dn{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}let Un=1234567;const zn=Math.PI/180,Bn=180/Math.PI,Fn=[];for(let e=0;e<256;e++)Fn[e]=(e<16?"0":"")+e.toString(16);const qn="undefined"!=typeof crypto&&"randomUUID"in crypto;function Hn(){if(qn)return crypto.randomUUID().toUpperCase();const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Fn[255&e]+Fn[e>>8&255]+Fn[e>>16&255]+Fn[e>>24&255]+"-"+Fn[255&t]+Fn[t>>8&255]+"-"+Fn[t>>16&15|64]+Fn[t>>24&255]+"-"+Fn[63&n|128]+Fn[n>>8&255]+"-"+Fn[n>>16&255]+Fn[n>>24&255]+Fn[255&r]+Fn[r>>8&255]+Fn[r>>16&255]+Fn[r>>24&255]).toUpperCase()}function Gn(e,t,n){return Math.max(t,Math.min(n,e))}function Vn(e,t){return(e%t+t)%t}function Wn(e,t,n){return(1-n)*e+n*t}function jn(e){return 0==(e&e-1)&&0!==e}function Xn(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function Zn(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}var Yn=Object.freeze({__proto__:null,DEG2RAD:zn,RAD2DEG:Bn,generateUUID:Hn,clamp:Gn,euclideanModulo:Vn,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:Wn,damp:function(e,t,n,r){return Wn(e,t,1-Math.exp(-n*r))},pingpong:function(e,t=1){return t-Math.abs(Vn(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){return void 0!==e&&(Un=e%2147483647),Un=16807*Un%2147483647,(Un-1)/2147483646},degToRad:function(e){return e*zn},radToDeg:function(e){return e*Bn},isPowerOfTwo:jn,ceilPowerOfTwo:Xn,floorPowerOfTwo:Zn,setQuaternionFromProperEuler:function(e,t,n,r,i){const s=Math.cos,a=Math.sin,o=s(n/2),l=a(n/2),u=s((t+r)/2),c=a((t+r)/2),h=s((t-r)/2),p=a((t-r)/2),f=s((r-t)/2),m=a((r-t)/2);switch(i){case"XYX":e.set(o*c,l*h,l*p,o*u);break;case"YZY":e.set(l*p,o*c,l*h,o*u);break;case"ZXZ":e.set(l*h,l*p,o*c,o*u);break;case"XZX":e.set(o*c,l*m,l*f,o*u);break;case"YXY":e.set(l*f,o*c,l*m,o*u);break;case"ZYZ":e.set(l*m,l*f,o*c,o*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}});class Jn{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,s=this.y-e.y;return this.x=i*n-s*r+e.x,this.y=i*r+s*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}Jn.prototype.isVector2=!0;class $n{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,i,s,a,o,l){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=i,u[5]=o,u[6]=n,u[7]=s,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,s=n[0],a=n[3],o=n[6],l=n[1],u=n[4],c=n[7],h=n[2],p=n[5],f=n[8],m=r[0],d=r[3],g=r[6],v=r[1],y=r[4],w=r[7],b=r[2],x=r[5],M=r[8];return i[0]=s*m+a*v+o*b,i[3]=s*d+a*y+o*x,i[6]=s*g+a*w+o*M,i[1]=l*m+u*v+c*b,i[4]=l*d+u*y+c*x,i[7]=l*g+u*w+c*M,i[2]=h*m+p*v+f*b,i[5]=h*d+p*y+f*x,i[8]=h*g+p*w+f*M,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],o=e[6],l=e[7],u=e[8];return t*s*u-t*a*l-n*i*u+n*a*o+r*i*l-r*s*o}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],o=e[6],l=e[7],u=e[8],c=u*s-a*l,h=a*o-u*i,p=l*i-s*o,f=t*c+n*h+r*p;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);const m=1/f;return e[0]=c*m,e[1]=(r*l-u*n)*m,e[2]=(a*n-r*s)*m,e[3]=h*m,e[4]=(u*t-r*o)*m,e[5]=(r*i-a*t)*m,e[6]=p*m,e[7]=(n*o-l*t)*m,e[8]=(s*t-n*i)*m,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,s,a){const o=Math.cos(i),l=Math.sin(i);return this.set(n*o,n*l,-n*(o*s+l*a)+s+e,-r*l,r*o,-r*(-l*s+o*a)+a+t,0,0,1),this}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],s=r[3],a=r[6],o=r[1],l=r[4],u=r[7];return r[0]=t*i+n*o,r[3]=t*s+n*l,r[6]=t*a+n*u,r[1]=-n*i+t*o,r[4]=-n*s+t*l,r[7]=-n*a+t*u,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}function Qn(e){if(0===e.length)return-1/0;let t=e[0];for(let n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}$n.prototype.isMatrix3=!0;const Kn={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function er(e,t){return new Kn[e](t)}function tr(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}let nr;class rr{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===nr&&(nr=tr("canvas")),nr.width=e.width,nr.height=e.height;const n=nr.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=nr}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}}let ir=0;class sr extends Dn{constructor(e=sr.DEFAULT_IMAGE,t=sr.DEFAULT_MAPPING,n=pe,r=pe,i=we,s=Me,a=ze,o=_e,l=1,u=Jt){super(),Object.defineProperty(this,"id",{value:ir++}),this.uuid=Hn(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=s,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=o,this.offset=new Jn(0,0),this.repeat=new Jn(1,1),this.center=new Jn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new $n,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const r=this.image;if(void 0===r.uuid&&(r.uuid=Hn()),!t&&void 0===e.images[r.uuid]){let t;if(Array.isArray(r)){t=[];for(let e=0,n=r.length;e<n;e++)r[e].isDataTexture?t.push(ar(r[e].image)):t.push(ar(r[e]))}else t=ar(r);e.images[r.uuid]={uuid:r.uuid,url:t}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==ie)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case he:e.x=e.x-Math.floor(e.x);break;case pe:e.x=e.x<0?0:1;break;case fe:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case he:e.y=e.y-Math.floor(e.y);break;case pe:e.y=e.y<0?0:1;break;case fe:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&this.version++}}function ar(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?rr.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}sr.DEFAULT_IMAGE=void 0,sr.DEFAULT_MAPPING=ie,sr.prototype.isTexture=!0;class or{constructor(e=0,t=0,n=0,r=1){this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r+s[12]*i,this.y=s[1]*t+s[5]*n+s[9]*r+s[13]*i,this.z=s[2]*t+s[6]*n+s[10]*r+s[14]*i,this.w=s[3]*t+s[7]*n+s[11]*r+s[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const s=.01,a=.1,o=e.elements,l=o[0],u=o[4],c=o[8],h=o[1],p=o[5],f=o[9],m=o[2],d=o[6],g=o[10];if(Math.abs(u-h)<s&&Math.abs(c-m)<s&&Math.abs(f-d)<s){if(Math.abs(u+h)<a&&Math.abs(c+m)<a&&Math.abs(f+d)<a&&Math.abs(l+p+g-3)<a)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,o=(p+1)/2,v=(g+1)/2,y=(u+h)/4,w=(c+m)/4,b=(f+d)/4;return e>o&&e>v?e<s?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=y/n,i=w/n):o>v?o<s?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(o),n=y/r,i=b/r):v<s?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(v),n=w/i,r=b/i),this.set(n,r,i,t),this}let v=Math.sqrt((d-f)*(d-f)+(c-m)*(c-m)+(h-u)*(h-u));return Math.abs(v)<.001&&(v=1),this.x=(d-f)/v,this.y=(c-m)/v,this.z=(h-u)/v,this.w=Math.acos((l+p+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}or.prototype.isVector4=!0;class lr extends Dn{constructor(e,t,n={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new or(0,0,e,t),this.scissorTest=!1,this.viewport=new or(0,0,e,t),this.texture=new sr(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:e,height:t,depth:1},this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:we,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,n=1){this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image={...this.texture.image},this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}lr.prototype.isWebGLRenderTarget=!0;class ur extends lr{constructor(e,t,n){super(e,t);const r=this.texture;this.texture=[];for(let e=0;e<n;e++)this.texture[e]=r.clone()}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,i=this.texture.length;r<i;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone();return this}}ur.prototype.isWebGLMultipleRenderTargets=!0;class cr extends lr{constructor(e,t,n){super(e,t,n),this.samples=4}copy(e){return super.copy.call(this,e),this.samples=e.samples,this}}cr.prototype.isWebGLMultisampleRenderTarget=!0;class hr{constructor(e=0,t=0,n=0,r=1){this._x=e,this._y=t,this._z=n,this._w=r}static slerp(e,t,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(e,t,r)}static slerpFlat(e,t,n,r,i,s,a){let o=n[r+0],l=n[r+1],u=n[r+2],c=n[r+3];const h=i[s+0],p=i[s+1],f=i[s+2],m=i[s+3];if(0===a)return e[t+0]=o,e[t+1]=l,e[t+2]=u,void(e[t+3]=c);if(1===a)return e[t+0]=h,e[t+1]=p,e[t+2]=f,void(e[t+3]=m);if(c!==m||o!==h||l!==p||u!==f){let e=1-a;const t=o*h+l*p+u*f+c*m,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),s=Math.atan2(i,t*n);e=Math.sin(e*s)/i,a=Math.sin(a*s)/i}const i=a*n;if(o=o*e+h*i,l=l*e+p*i,u=u*e+f*i,c=c*e+m*i,e===1-a){const e=1/Math.sqrt(o*o+l*l+u*u+c*c);o*=e,l*=e,u*=e,c*=e}}e[t]=o,e[t+1]=l,e[t+2]=u,e[t+3]=c}static multiplyQuaternionsFlat(e,t,n,r,i,s){const a=n[r],o=n[r+1],l=n[r+2],u=n[r+3],c=i[s],h=i[s+1],p=i[s+2],f=i[s+3];return e[t]=a*f+u*c+o*p-l*h,e[t+1]=o*f+u*h+l*c-a*p,e[t+2]=l*f+u*p+a*h-o*c,e[t+3]=u*f-a*c-o*h-l*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=e._x,r=e._y,i=e._z,s=e._order,a=Math.cos,o=Math.sin,l=a(n/2),u=a(r/2),c=a(i/2),h=o(n/2),p=o(r/2),f=o(i/2);switch(s){case"XYZ":this._x=h*u*c+l*p*f,this._y=l*p*c-h*u*f,this._z=l*u*f+h*p*c,this._w=l*u*c-h*p*f;break;case"YXZ":this._x=h*u*c+l*p*f,this._y=l*p*c-h*u*f,this._z=l*u*f-h*p*c,this._w=l*u*c+h*p*f;break;case"ZXY":this._x=h*u*c-l*p*f,this._y=l*p*c+h*u*f,this._z=l*u*f+h*p*c,this._w=l*u*c-h*p*f;break;case"ZYX":this._x=h*u*c-l*p*f,this._y=l*p*c+h*u*f,this._z=l*u*f-h*p*c,this._w=l*u*c+h*p*f;break;case"YZX":this._x=h*u*c+l*p*f,this._y=l*p*c+h*u*f,this._z=l*u*f-h*p*c,this._w=l*u*c-h*p*f;break;case"XZY":this._x=h*u*c-l*p*f,this._y=l*p*c-h*u*f,this._z=l*u*f+h*p*c,this._w=l*u*c+h*p*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],s=t[1],a=t[5],o=t[9],l=t[2],u=t[6],c=t[10],h=n+a+c;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(u-o)*e,this._y=(i-l)*e,this._z=(s-r)*e}else if(n>a&&n>c){const e=2*Math.sqrt(1+n-a-c);this._w=(u-o)/e,this._x=.25*e,this._y=(r+s)/e,this._z=(i+l)/e}else if(a>c){const e=2*Math.sqrt(1+a-n-c);this._w=(i-l)/e,this._x=(r+s)/e,this._y=.25*e,this._z=(o+u)/e}else{const e=2*Math.sqrt(1+c-n-a);this._w=(s-r)/e,this._x=(i+l)/e,this._y=(o+u)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Gn(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,s=e._w,a=t._x,o=t._y,l=t._z,u=t._w;return this._x=n*u+s*a+r*l-i*o,this._y=r*u+s*o+i*a-n*l,this._z=i*u+s*l+n*o-r*a,this._w=s*u-n*a-r*o-i*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,i=this._z,s=this._w;let a=s*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=n,this._y=r,this._z=i,this;const o=1-a*a;if(o<=Number.EPSILON){const e=1-t;return this._w=e*s+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(o),u=Math.atan2(l,a),c=Math.sin((1-t)*u)/l,h=Math.sin(t*u)/l;return this._w=s*c+this._w*h,this._x=n*c+this._x*h,this._y=r*c+this._y*h,this._z=i*c+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,n){this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}hr.prototype.isQuaternion=!0;class pr{constructor(e=0,t=0,n=0){this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(mr.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(mr.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,s=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*s,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*s,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*s,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,s=e.y,a=e.z,o=e.w,l=o*t+s*r-a*n,u=o*n+a*t-i*r,c=o*r+i*n-s*t,h=-i*t-s*n-a*r;return this.x=l*o+h*-i+u*-a-c*-s,this.y=u*o+h*-s+c*-i-l*-a,this.z=c*o+h*-a+l*-s-u*-i,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,s=t.x,a=t.y,o=t.z;return this.x=r*o-i*a,this.y=i*s-n*o,this.z=n*a-r*s,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return fr.copy(this).projectOnVector(e),this.sub(fr)}reflect(e){return this.sub(fr.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Gn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}pr.prototype.isVector3=!0;const fr=new pr,mr=new hr;class dr{constructor(e=new pr(1/0,1/0,1/0),t=new pr(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,r=1/0,i=-1/0,s=-1/0,a=-1/0;for(let o=0,l=e.length;o<l;o+=3){const l=e[o],u=e[o+1],c=e[o+2];l<t&&(t=l),u<n&&(n=u),c<r&&(r=c),l>i&&(i=l),u>s&&(s=u),c>a&&(a=c)}return this.min.set(t,n,r),this.max.set(i,s,a),this}setFromBufferAttribute(e){let t=1/0,n=1/0,r=1/0,i=-1/0,s=-1/0,a=-1/0;for(let o=0,l=e.count;o<l;o++){const l=e.getX(o),u=e.getY(o),c=e.getZ(o);l<t&&(t=l),u<n&&(n=u),c<r&&(r=c),l>i&&(i=l),u>s&&(s=u),c>a&&(a=c)}return this.min.set(t,n,r),this.max.set(i,s,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=vr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),yr.copy(t.boundingBox),yr.applyMatrix4(e.matrixWorld),this.union(yr));const n=e.children;for(let e=0,t=n.length;e<t;e++)this.expandByObject(n[e]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,vr),vr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Er),Tr.subVectors(this.max,Er),wr.subVectors(e.a,Er),br.subVectors(e.b,Er),xr.subVectors(e.c,Er),Mr.subVectors(br,wr),Sr.subVectors(xr,br),_r.subVectors(wr,xr);let t=[0,-Mr.z,Mr.y,0,-Sr.z,Sr.y,0,-_r.z,_r.y,Mr.z,0,-Mr.x,Sr.z,0,-Sr.x,_r.z,0,-_r.x,-Mr.y,Mr.x,0,-Sr.y,Sr.x,0,-_r.y,_r.x,0];return!!Cr(t,wr,br,xr,Tr)&&(t=[1,0,0,0,1,0,0,0,1],!!Cr(t,wr,br,xr,Tr)&&(Ar.crossVectors(Mr,Sr),t=[Ar.x,Ar.y,Ar.z],Cr(t,wr,br,xr,Tr)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return vr.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(vr).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(gr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),gr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),gr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),gr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),gr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),gr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),gr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),gr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(gr)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}dr.prototype.isBox3=!0;const gr=[new pr,new pr,new pr,new pr,new pr,new pr,new pr,new pr],vr=new pr,yr=new dr,wr=new pr,br=new pr,xr=new pr,Mr=new pr,Sr=new pr,_r=new pr,Er=new pr,Tr=new pr,Ar=new pr,Lr=new pr;function Cr(e,t,n,r,i){for(let s=0,a=e.length-3;s<=a;s+=3){Lr.fromArray(e,s);const a=i.x*Math.abs(Lr.x)+i.y*Math.abs(Lr.y)+i.z*Math.abs(Lr.z),o=t.dot(Lr),l=n.dot(Lr),u=r.dot(Lr);if(Math.max(-Math.max(o,l,u),Math.min(o,l,u))>a)return!1}return!0}const Rr=new dr,Nr=new pr,Pr=new pr,Ir=new pr;class Or{constructor(e=new pr,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):Rr.setFromPoints(e).getCenter(n);let r=0;for(let t=0,i=e.length;t<i;t++)r=Math.max(r,n.distanceToSquared(e[t]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){Ir.subVectors(e,this.center);const t=Ir.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.add(Ir.multiplyScalar(n/e)),this.radius+=n}return this}union(e){return Pr.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(Nr.copy(e.center).add(Pr)),this.expandByPoint(Nr.copy(e.center).sub(Pr)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const kr=new pr,Dr=new pr,Ur=new pr,zr=new pr,Br=new pr,Fr=new pr,qr=new pr;class Hr{constructor(e=new pr,t=new pr(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,kr)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=kr.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(kr.copy(this.direction).multiplyScalar(t).add(this.origin),kr.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){Dr.copy(e).add(t).multiplyScalar(.5),Ur.copy(t).sub(e).normalize(),zr.copy(this.origin).sub(Dr);const i=.5*e.distanceTo(t),s=-this.direction.dot(Ur),a=zr.dot(this.direction),o=-zr.dot(Ur),l=zr.lengthSq(),u=Math.abs(1-s*s);let c,h,p,f;if(u>0)if(c=s*o-a,h=s*a-o,f=i*u,c>=0)if(h>=-f)if(h<=f){const e=1/u;c*=e,h*=e,p=c*(c+s*h+2*a)+h*(s*c+h+2*o)+l}else h=i,c=Math.max(0,-(s*h+a)),p=-c*c+h*(h+2*o)+l;else h=-i,c=Math.max(0,-(s*h+a)),p=-c*c+h*(h+2*o)+l;else h<=-f?(c=Math.max(0,-(-s*i+a)),h=c>0?-i:Math.min(Math.max(-i,-o),i),p=-c*c+h*(h+2*o)+l):h<=f?(c=0,h=Math.min(Math.max(-i,-o),i),p=h*(h+2*o)+l):(c=Math.max(0,-(s*i+a)),h=c>0?i:Math.min(Math.max(-i,-o),i),p=-c*c+h*(h+2*o)+l);else h=s>0?-i:i,c=Math.max(0,-(s*h+a)),p=-c*c+h*(h+2*o)+l;return n&&n.copy(this.direction).multiplyScalar(c).add(this.origin),r&&r.copy(Ur).multiplyScalar(h).add(Dr),p}intersectSphere(e,t){kr.subVectors(e.center,this.origin);const n=kr.dot(this.direction),r=kr.dot(kr)-n*n,i=e.radius*e.radius;if(r>i)return null;const s=Math.sqrt(i-r),a=n-s,o=n+s;return a<0&&o<0?null:a<0?this.at(o,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,s,a,o;const l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),u>=0?(i=(e.min.y-h.y)*u,s=(e.max.y-h.y)*u):(i=(e.max.y-h.y)*u,s=(e.min.y-h.y)*u),n>s||i>r?null:((i>n||n!=n)&&(n=i),(s<r||r!=r)&&(r=s),c>=0?(a=(e.min.z-h.z)*c,o=(e.max.z-h.z)*c):(a=(e.max.z-h.z)*c,o=(e.min.z-h.z)*c),n>o||a>r?null:((a>n||n!=n)&&(n=a),(o<r||r!=r)&&(r=o),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,kr)}intersectTriangle(e,t,n,r,i){Br.subVectors(t,e),Fr.subVectors(n,e),qr.crossVectors(Br,Fr);let s,a=this.direction.dot(qr);if(a>0){if(r)return null;s=1}else{if(!(a<0))return null;s=-1,a=-a}zr.subVectors(this.origin,e);const o=s*this.direction.dot(Fr.crossVectors(zr,Fr));if(o<0)return null;const l=s*this.direction.dot(Br.cross(zr));if(l<0)return null;if(o+l>a)return null;const u=-s*zr.dot(qr);return u<0?null:this.at(u/a,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Gr{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,i,s,a,o,l,u,c,h,p,f,m,d){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=s,g[9]=a,g[13]=o,g[2]=l,g[6]=u,g[10]=c,g[14]=h,g[3]=p,g[7]=f,g[11]=m,g[15]=d,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Gr).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/Vr.setFromMatrixColumn(e,0).length(),i=1/Vr.setFromMatrixColumn(e,1).length(),s=1/Vr.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*s,t[9]=n[9]*s,t[10]=n[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,n=e.x,r=e.y,i=e.z,s=Math.cos(n),a=Math.sin(n),o=Math.cos(r),l=Math.sin(r),u=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){const e=s*u,n=s*c,r=a*u,i=a*c;t[0]=o*u,t[4]=-o*c,t[8]=l,t[1]=n+r*l,t[5]=e-i*l,t[9]=-a*o,t[2]=i-e*l,t[6]=r+n*l,t[10]=s*o}else if("YXZ"===e.order){const e=o*u,n=o*c,r=l*u,i=l*c;t[0]=e+i*a,t[4]=r*a-n,t[8]=s*l,t[1]=s*c,t[5]=s*u,t[9]=-a,t[2]=n*a-r,t[6]=i+e*a,t[10]=s*o}else if("ZXY"===e.order){const e=o*u,n=o*c,r=l*u,i=l*c;t[0]=e-i*a,t[4]=-s*c,t[8]=r+n*a,t[1]=n+r*a,t[5]=s*u,t[9]=i-e*a,t[2]=-s*l,t[6]=a,t[10]=s*o}else if("ZYX"===e.order){const e=s*u,n=s*c,r=a*u,i=a*c;t[0]=o*u,t[4]=r*l-n,t[8]=e*l+i,t[1]=o*c,t[5]=i*l+e,t[9]=n*l-r,t[2]=-l,t[6]=a*o,t[10]=s*o}else if("YZX"===e.order){const e=s*o,n=s*l,r=a*o,i=a*l;t[0]=o*u,t[4]=i-e*c,t[8]=r*c+n,t[1]=c,t[5]=s*u,t[9]=-a*u,t[2]=-l*u,t[6]=n*c+r,t[10]=e-i*c}else if("XZY"===e.order){const e=s*o,n=s*l,r=a*o,i=a*l;t[0]=o*u,t[4]=-c,t[8]=l*u,t[1]=e*c+i,t[5]=s*u,t[9]=n*c-r,t[2]=r*c-n,t[6]=a*u,t[10]=i*c+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(jr,e,Xr)}lookAt(e,t,n){const r=this.elements;return Jr.subVectors(e,t),0===Jr.lengthSq()&&(Jr.z=1),Jr.normalize(),Zr.crossVectors(n,Jr),0===Zr.lengthSq()&&(1===Math.abs(n.z)?Jr.x+=1e-4:Jr.z+=1e-4,Jr.normalize(),Zr.crossVectors(n,Jr)),Zr.normalize(),Yr.crossVectors(Jr,Zr),r[0]=Zr.x,r[4]=Yr.x,r[8]=Jr.x,r[1]=Zr.y,r[5]=Yr.y,r[9]=Jr.y,r[2]=Zr.z,r[6]=Yr.z,r[10]=Jr.z,this}multiply(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,s=n[0],a=n[4],o=n[8],l=n[12],u=n[1],c=n[5],h=n[9],p=n[13],f=n[2],m=n[6],d=n[10],g=n[14],v=n[3],y=n[7],w=n[11],b=n[15],x=r[0],M=r[4],S=r[8],_=r[12],E=r[1],T=r[5],A=r[9],L=r[13],C=r[2],R=r[6],N=r[10],P=r[14],I=r[3],O=r[7],k=r[11],D=r[15];return i[0]=s*x+a*E+o*C+l*I,i[4]=s*M+a*T+o*R+l*O,i[8]=s*S+a*A+o*N+l*k,i[12]=s*_+a*L+o*P+l*D,i[1]=u*x+c*E+h*C+p*I,i[5]=u*M+c*T+h*R+p*O,i[9]=u*S+c*A+h*N+p*k,i[13]=u*_+c*L+h*P+p*D,i[2]=f*x+m*E+d*C+g*I,i[6]=f*M+m*T+d*R+g*O,i[10]=f*S+m*A+d*N+g*k,i[14]=f*_+m*L+d*P+g*D,i[3]=v*x+y*E+w*C+b*I,i[7]=v*M+y*T+w*R+b*O,i[11]=v*S+y*A+w*N+b*k,i[15]=v*_+y*L+w*P+b*D,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],s=e[1],a=e[5],o=e[9],l=e[13],u=e[2],c=e[6],h=e[10],p=e[14];return e[3]*(+i*o*c-r*l*c-i*a*h+n*l*h+r*a*p-n*o*p)+e[7]*(+t*o*p-t*l*h+i*s*h-r*s*p+r*l*u-i*o*u)+e[11]*(+t*l*c-t*a*p-i*s*c+n*s*p+i*a*u-n*l*u)+e[15]*(-r*a*u-t*o*c+t*a*h+r*s*c-n*s*h+n*o*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],o=e[6],l=e[7],u=e[8],c=e[9],h=e[10],p=e[11],f=e[12],m=e[13],d=e[14],g=e[15],v=c*d*l-m*h*l+m*o*p-a*d*p-c*o*g+a*h*g,y=f*h*l-u*d*l-f*o*p+s*d*p+u*o*g-s*h*g,w=u*m*l-f*c*l+f*a*p-s*m*p-u*a*g+s*c*g,b=f*c*o-u*m*o-f*a*h+s*m*h+u*a*d-s*c*d,x=t*v+n*y+r*w+i*b;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const M=1/x;return e[0]=v*M,e[1]=(m*h*i-c*d*i-m*r*p+n*d*p+c*r*g-n*h*g)*M,e[2]=(a*d*i-m*o*i+m*r*l-n*d*l-a*r*g+n*o*g)*M,e[3]=(c*o*i-a*h*i-c*r*l+n*h*l+a*r*p-n*o*p)*M,e[4]=y*M,e[5]=(u*d*i-f*h*i+f*r*p-t*d*p-u*r*g+t*h*g)*M,e[6]=(f*o*i-s*d*i-f*r*l+t*d*l+s*r*g-t*o*g)*M,e[7]=(s*h*i-u*o*i+u*r*l-t*h*l-s*r*p+t*o*p)*M,e[8]=w*M,e[9]=(f*c*i-u*m*i-f*n*p+t*m*p+u*n*g-t*c*g)*M,e[10]=(s*m*i-f*a*i+f*n*l-t*m*l-s*n*g+t*a*g)*M,e[11]=(u*a*i-s*c*i-u*n*l+t*c*l+s*n*p-t*a*p)*M,e[12]=b*M,e[13]=(u*m*r-f*c*r+f*n*h-t*m*h-u*n*d+t*c*d)*M,e[14]=(f*a*r-s*m*r-f*n*o+t*m*o+s*n*d-t*a*d)*M,e[15]=(s*c*r-u*a*r+u*n*o-t*c*o-s*n*h+t*a*h)*M,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,s=e.x,a=e.y,o=e.z,l=i*s,u=i*a;return this.set(l*s+n,l*a-r*o,l*o+r*a,0,l*a+r*o,u*a+n,u*o-r*s,0,l*o-r*a,u*o+r*s,i*o*o+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,s){return this.set(1,n,i,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,s=t._y,a=t._z,o=t._w,l=i+i,u=s+s,c=a+a,h=i*l,p=i*u,f=i*c,m=s*u,d=s*c,g=a*c,v=o*l,y=o*u,w=o*c,b=n.x,x=n.y,M=n.z;return r[0]=(1-(m+g))*b,r[1]=(p+w)*b,r[2]=(f-y)*b,r[3]=0,r[4]=(p-w)*x,r[5]=(1-(h+g))*x,r[6]=(d+v)*x,r[7]=0,r[8]=(f+y)*M,r[9]=(d-v)*M,r[10]=(1-(h+m))*M,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=Vr.set(r[0],r[1],r[2]).length();const s=Vr.set(r[4],r[5],r[6]).length(),a=Vr.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],Wr.copy(this);const o=1/i,l=1/s,u=1/a;return Wr.elements[0]*=o,Wr.elements[1]*=o,Wr.elements[2]*=o,Wr.elements[4]*=l,Wr.elements[5]*=l,Wr.elements[6]*=l,Wr.elements[8]*=u,Wr.elements[9]*=u,Wr.elements[10]*=u,t.setFromRotationMatrix(Wr),n.x=i,n.y=s,n.z=a,this}makePerspective(e,t,n,r,i,s){void 0===s&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,o=2*i/(t-e),l=2*i/(n-r),u=(t+e)/(t-e),c=(n+r)/(n-r),h=-(s+i)/(s-i),p=-2*s*i/(s-i);return a[0]=o,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=l,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=p,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,r,i,s){const a=this.elements,o=1/(t-e),l=1/(n-r),u=1/(s-i),c=(t+e)*o,h=(n+r)*l,p=(s+i)*u;return a[0]=2*o,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-p,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}Gr.prototype.isMatrix4=!0;const Vr=new pr,Wr=new Gr,jr=new pr(0,0,0),Xr=new pr(1,1,1),Zr=new pr,Yr=new pr,Jr=new pr,$r=new Gr,Qr=new hr;class Kr{constructor(e=0,t=0,n=0,r=Kr.DefaultOrder){this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,i=r[0],s=r[4],a=r[8],o=r[1],l=r[5],u=r[9],c=r[2],h=r[6],p=r[10];switch(t){case"XYZ":this._y=Math.asin(Gn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-s,i)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Gn(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,p),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(Gn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-c,p),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(o,i));break;case"ZYX":this._y=Math.asin(-Gn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(h,p),this._z=Math.atan2(o,i)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(Gn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(a,p));break;case"XZY":this._z=Math.asin(-Gn(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return $r.makeRotationFromQuaternion(e),this.setFromRotationMatrix($r,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Qr.setFromEuler(this),this.setFromQuaternion(Qr,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new pr(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Kr.prototype.isEuler=!0,Kr.DefaultOrder="XYZ",Kr.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class ei{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}}let ti=0;const ni=new pr,ri=new hr,ii=new Gr,si=new pr,ai=new pr,oi=new pr,li=new hr,ui=new pr(1,0,0),ci=new pr(0,1,0),hi=new pr(0,0,1),pi={type:"added"},fi={type:"removed"};class mi extends Dn{constructor(){super(),Object.defineProperty(this,"id",{value:ti++}),this.uuid=Hn(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=mi.DefaultUp.clone();const e=new pr,t=new Kr,n=new hr,r=new pr(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Gr},normalMatrix:{value:new $n}}),this.matrix=new Gr,this.matrixWorld=new Gr,this.matrixAutoUpdate=mi.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new ei,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return ri.setFromAxisAngle(e,t),this.quaternion.multiply(ri),this}rotateOnWorldAxis(e,t){return ri.setFromAxisAngle(e,t),this.quaternion.premultiply(ri),this}rotateX(e){return this.rotateOnAxis(ui,e)}rotateY(e){return this.rotateOnAxis(ci,e)}rotateZ(e){return this.rotateOnAxis(hi,e)}translateOnAxis(e,t){return ni.copy(e).applyQuaternion(this.quaternion),this.position.add(ni.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(ui,e)}translateY(e){return this.translateOnAxis(ci,e)}translateZ(e){return this.translateOnAxis(hi,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(ii.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?si.copy(e):si.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),ai.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ii.lookAt(ai,si,this.up):ii.lookAt(si,ai,this.up),this.quaternion.setFromRotationMatrix(ii),r&&(ii.extractRotation(r.matrixWorld),ri.setFromRotationMatrix(ii),this.quaternion.premultiply(ri.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(pi)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(fi)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(fi)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),ii.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),ii.multiply(e.parent.matrixWorld)),e.applyMatrix4(ii),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ai,e,oi),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ai,li,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++)e[t].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){const t=s(e.geometries),r=s(e.materials),i=s(e.textures),a=s(e.images),o=s(e.shapes),l=s(e.skeletons),u=s(e.animations);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),a.length>0&&(n.images=a),o.length>0&&(n.shapes=o),l.length>0&&(n.skeletons=l),u.length>0&&(n.animations=u)}return n.object=r,n;function s(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){const n=e.children[t];this.add(n.clone())}return this}}mi.DefaultUp=new pr(0,1,0),mi.DefaultMatrixAutoUpdate=!0,mi.prototype.isObject3D=!0;const di=new pr,gi=new pr,vi=new pr,yi=new pr,wi=new pr,bi=new pr,xi=new pr,Mi=new pr,Si=new pr,_i=new pr;class Ei{constructor(e=new pr,t=new pr,n=new pr){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),di.subVectors(e,t),r.cross(di);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){di.subVectors(r,t),gi.subVectors(n,t),vi.subVectors(e,t);const s=di.dot(di),a=di.dot(gi),o=di.dot(vi),l=gi.dot(gi),u=gi.dot(vi),c=s*l-a*a;if(0===c)return i.set(-2,-1,-1);const h=1/c,p=(l*o-a*u)*h,f=(s*u-a*o)*h;return i.set(1-p-f,f,p)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,yi),yi.x>=0&&yi.y>=0&&yi.x+yi.y<=1}static getUV(e,t,n,r,i,s,a,o){return this.getBarycoord(e,t,n,r,yi),o.set(0,0),o.addScaledVector(i,yi.x),o.addScaledVector(s,yi.y),o.addScaledVector(a,yi.z),o}static isFrontFacing(e,t,n,r){return di.subVectors(n,t),gi.subVectors(e,t),di.cross(gi).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return di.subVectors(this.c,this.b),gi.subVectors(this.a,this.b),.5*di.cross(gi).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ei.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ei.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,i){return Ei.getUV(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return Ei.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ei.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,i=this.c;let s,a;wi.subVectors(r,n),bi.subVectors(i,n),Mi.subVectors(e,n);const o=wi.dot(Mi),l=bi.dot(Mi);if(o<=0&&l<=0)return t.copy(n);Si.subVectors(e,r);const u=wi.dot(Si),c=bi.dot(Si);if(u>=0&&c<=u)return t.copy(r);const h=o*c-u*l;if(h<=0&&o>=0&&u<=0)return s=o/(o-u),t.copy(n).addScaledVector(wi,s);_i.subVectors(e,i);const p=wi.dot(_i),f=bi.dot(_i);if(f>=0&&p<=f)return t.copy(i);const m=p*l-o*f;if(m<=0&&l>=0&&f<=0)return a=l/(l-f),t.copy(n).addScaledVector(bi,a);const d=u*f-p*c;if(d<=0&&c-u>=0&&p-f>=0)return xi.subVectors(i,r),a=(c-u)/(c-u+(p-f)),t.copy(r).addScaledVector(xi,a);const g=1/(d+m+h);return s=m*g,a=h*g,t.copy(n).addScaledVector(wi,s).addScaledVector(bi,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Ti=0;class Ai extends Dn{constructor(){super(),Object.defineProperty(this,"id",{value:Ti++}),this.uuid=Hn(),this.name="",this.type="Material",this.fog=!0,this.blending=b,this.side=m,this.vertexColors=!1,this.opacity=1,this.format=ze,this.transparent=!1,this.blendSrc=O,this.blendDst=k,this.blendEquation=E,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=V,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=_n,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=cn,this.stencilZFail=cn,this.stencilZPass=cn,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===v;continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenTint&&this.sheenTint.isColor&&(n.sheenTint=this.sheenTint.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularTint&&this.specularTint.isColor&&(n.specularTint=this.specularTint.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularTintMap&&this.specularTintMap.isTexture&&(n.specularTintMap=this.specularTintMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationTint&&(n.attenuationTint=this.attenuationTint.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==b&&(n.blending=this.blending),this.side!==m&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.format!==ze&&(n.format=this.format),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){const t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.format=e.format,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}Ai.prototype.isMaterial=!0;const Li={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ci={h:0,s:0,l:0},Ri={h:0,s:0,l:0};function Ni(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function Pi(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Ii(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}class Oi{constructor(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}setRGB(e,t,n){return this.r=e,this.g=t,this.b=n,this}setHSL(e,t,n){if(e=Vn(e,1),t=Gn(t,0,1),n=Gn(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=Ni(i,r,e+1/3),this.g=Ni(i,r,e),this.b=Ni(i,r,e-1/3)}return this}setStyle(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let e;const r=n[1],i=n[2];switch(r){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,t(e[4]),this;if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,t(e[4]),this;break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i)){const n=parseFloat(e[1])/360,r=parseInt(e[2],10)/100,i=parseInt(e[3],10)/100;return t(e[4]),this.setHSL(n,r,i)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){const e=n[1],t=e.length;if(3===t)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,this;if(6===t)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=Li[e.toLowerCase()];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,t=2){return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}copyLinearToGamma(e,t=2){const n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=Pi(e.r),this.g=Pi(e.g),this.b=Pi(e.b),this}copyLinearToSRGB(e){return this.r=Ii(e.r),this.g=Ii(e.g),this.b=Ii(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){const t=this.r,n=this.g,r=this.b,i=Math.max(t,n,r),s=Math.min(t,n,r);let a,o;const l=(s+i)/2;if(s===i)a=0,o=0;else{const e=i-s;switch(o=l<=.5?e/(i+s):e/(2-i-s),i){case t:a=(n-r)/e+(n<r?6:0);break;case n:a=(r-t)/e+2;break;case r:a=(t-n)/e+4}a/=6}return e.h=a,e.s=o,e.l=l,e}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(e,t,n){return this.getHSL(Ci),Ci.h+=e,Ci.s+=t,Ci.l+=n,this.setHSL(Ci.h,Ci.s,Ci.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Ci),e.getHSL(Ri);const n=Wn(Ci.h,Ri.h,t),r=Wn(Ci.s,Ri.s,t),i=Wn(Ci.l,Ri.l,t);return this.setHSL(n,r,i),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}Oi.NAMES=Li,Oi.prototype.isColor=!0,Oi.prototype.r=1,Oi.prototype.g=1,Oi.prototype.b=1;class ki extends Ai{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new Oi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Y,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}ki.prototype.isMeshBasicMaterial=!0;const Di=new pr,Ui=new Jn;class zi{constructor(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=En,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),i=new Oi),t[n++]=i.r,t[n++]=i.g,t[n++]=i.b}return this}copyVector2sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),i=new Jn),t[n++]=i.x,t[n++]=i.y}return this}copyVector3sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),i=new pr),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z}return this}copyVector4sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),i=new or),t[n++]=i.x,t[n++]=i.y,t[n++]=i.z,t[n++]=i.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)Ui.fromBufferAttribute(this,t),Ui.applyMatrix3(e),this.setXY(t,Ui.x,Ui.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)Di.fromBufferAttribute(this,t),Di.applyMatrix3(e),this.setXYZ(t,Di.x,Di.y,Di.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Di.x=this.getX(t),Di.y=this.getY(t),Di.z=this.getZ(t),Di.applyMatrix4(e),this.setXYZ(t,Di.x,Di.y,Di.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Di.x=this.getX(t),Di.y=this.getY(t),Di.z=this.getZ(t),Di.applyNormalMatrix(e),this.setXYZ(t,Di.x,Di.y,Di.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Di.x=this.getX(t),Di.y=this.getY(t),Di.z=this.getZ(t),Di.transformDirection(e),this.setXYZ(t,Di.x,Di.y,Di.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==En&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}zi.prototype.isBufferAttribute=!0;class Bi extends zi{constructor(e,t,n){super(new Int8Array(e),t,n)}}class Fi extends zi{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class qi extends zi{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class Hi extends zi{constructor(e,t,n){super(new Int16Array(e),t,n)}}class Gi extends zi{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Vi extends zi{constructor(e,t,n){super(new Int32Array(e),t,n)}}class Wi extends zi{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class ji extends zi{constructor(e,t,n){super(new Uint16Array(e),t,n)}}ji.prototype.isFloat16BufferAttribute=!0;class Xi extends zi{constructor(e,t,n){super(new Float32Array(e),t,n)}}class Zi extends zi{constructor(e,t,n){super(new Float64Array(e),t,n)}}let Yi=0;const Ji=new Gr,$i=new mi,Qi=new pr,Ki=new dr,es=new dr,ts=new pr;class ns extends Dn{constructor(){super(),Object.defineProperty(this,"id",{value:Yi++}),this.uuid=Hn(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Qn(e)>65535?Wi:Gi)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new $n).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ji.makeRotationFromQuaternion(e),this.applyMatrix4(Ji),this}rotateX(e){return Ji.makeRotationX(e),this.applyMatrix4(Ji),this}rotateY(e){return Ji.makeRotationY(e),this.applyMatrix4(Ji),this}rotateZ(e){return Ji.makeRotationZ(e),this.applyMatrix4(Ji),this}translate(e,t,n){return Ji.makeTranslation(e,t,n),this.applyMatrix4(Ji),this}scale(e,t,n){return Ji.makeScale(e,t,n),this.applyMatrix4(Ji),this}lookAt(e){return $i.lookAt(e),$i.updateMatrix(),this.applyMatrix4($i.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Qi).negate(),this.translate(Qi.x,Qi.y,Qi.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Xi(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new dr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new pr(-1/0,-1/0,-1/0),new pr(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];Ki.setFromBufferAttribute(n),this.morphTargetsRelative?(ts.addVectors(this.boundingBox.min,Ki.min),this.boundingBox.expandByPoint(ts),ts.addVectors(this.boundingBox.max,Ki.max),this.boundingBox.expandByPoint(ts)):(this.boundingBox.expandByPoint(Ki.min),this.boundingBox.expandByPoint(Ki.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Or);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new pr,1/0);if(e){const n=this.boundingSphere.center;if(Ki.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];es.setFromBufferAttribute(n),this.morphTargetsRelative?(ts.addVectors(Ki.min,es.min),Ki.expandByPoint(ts),ts.addVectors(Ki.max,es.max),Ki.expandByPoint(ts)):(Ki.expandByPoint(es.min),Ki.expandByPoint(es.max))}Ki.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)ts.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(ts));if(t)for(let i=0,s=t.length;i<s;i++){const s=t[i],a=this.morphTargetsRelative;for(let t=0,i=s.count;t<i;t++)ts.fromBufferAttribute(s,t),a&&(Qi.fromBufferAttribute(e,t),ts.add(Qi)),r=Math.max(r,n.distanceToSquared(ts))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,r=t.position.array,i=t.normal.array,s=t.uv.array,a=r.length/3;void 0===t.tangent&&this.setAttribute("tangent",new zi(new Float32Array(4*a),4));const o=t.tangent.array,l=[],u=[];for(let e=0;e<a;e++)l[e]=new pr,u[e]=new pr;const c=new pr,h=new pr,p=new pr,f=new Jn,m=new Jn,d=new Jn,g=new pr,v=new pr;function y(e,t,n){c.fromArray(r,3*e),h.fromArray(r,3*t),p.fromArray(r,3*n),f.fromArray(s,2*e),m.fromArray(s,2*t),d.fromArray(s,2*n),h.sub(c),p.sub(c),m.sub(f),d.sub(f);const i=1/(m.x*d.y-d.x*m.y);isFinite(i)&&(g.copy(h).multiplyScalar(d.y).addScaledVector(p,-m.y).multiplyScalar(i),v.copy(p).multiplyScalar(m.x).addScaledVector(h,-d.x).multiplyScalar(i),l[e].add(g),l[t].add(g),l[n].add(g),u[e].add(v),u[t].add(v),u[n].add(v))}let w=this.groups;0===w.length&&(w=[{start:0,count:n.length}]);for(let e=0,t=w.length;e<t;++e){const t=w[e],r=t.start;for(let e=r,i=r+t.count;e<i;e+=3)y(n[e+0],n[e+1],n[e+2])}const b=new pr,x=new pr,M=new pr,S=new pr;function _(e){M.fromArray(i,3*e),S.copy(M);const t=l[e];b.copy(t),b.sub(M.multiplyScalar(M.dot(t))).normalize(),x.crossVectors(S,t);const n=x.dot(u[e])<0?-1:1;o[4*e]=b.x,o[4*e+1]=b.y,o[4*e+2]=b.z,o[4*e+3]=n}for(let e=0,t=w.length;e<t;++e){const t=w[e],r=t.start;for(let e=r,i=r+t.count;e<i;e+=3)_(n[e+0]),_(n[e+1]),_(n[e+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new zi(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new pr,i=new pr,s=new pr,a=new pr,o=new pr,l=new pr,u=new pr,c=new pr;if(e)for(let h=0,p=e.count;h<p;h+=3){const p=e.getX(h+0),f=e.getX(h+1),m=e.getX(h+2);r.fromBufferAttribute(t,p),i.fromBufferAttribute(t,f),s.fromBufferAttribute(t,m),u.subVectors(s,i),c.subVectors(r,i),u.cross(c),a.fromBufferAttribute(n,p),o.fromBufferAttribute(n,f),l.fromBufferAttribute(n,m),a.add(u),o.add(u),l.add(u),n.setXYZ(p,a.x,a.y,a.z),n.setXYZ(f,o.x,o.y,o.z),n.setXYZ(m,l.x,l.y,l.z)}else for(let e=0,a=t.count;e<a;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),s.fromBufferAttribute(t,e+2),u.subVectors(s,i),c.subVectors(r,i),u.cross(c),n.setXYZ(e+0,u.x,u.y,u.z),n.setXYZ(e+1,u.x,u.y,u.z),n.setXYZ(e+2,u.x,u.y,u.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const r in n){if(void 0===e.attributes[r])continue;const i=n[r].array,s=e.attributes[r],a=s.array,o=s.itemSize*t,l=Math.min(a.length,i.length-o);for(let e=0,t=o;e<l;e++,t++)i[t]=a[e]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)ts.fromBufferAttribute(e,t),ts.normalize(),e.setXYZ(t,ts.x,ts.y,ts.z)}toNonIndexed(){function e(e,t){const n=e.array,r=e.itemSize,i=e.normalized,s=new n.constructor(t.length*r);let a=0,o=0;for(let i=0,l=t.length;i<l;i++){a=e.isInterleavedBufferAttribute?t[i]*e.data.stride+e.offset:t[i]*r;for(let e=0;e<r;e++)s[o++]=n[a++]}return new zi(s,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new ns,n=this.index.array,r=this.attributes;for(const i in r){const s=e(r[i],n);t.setAttribute(i,s)}const i=this.morphAttributes;for(const r in i){const s=[],a=i[r];for(let t=0,r=a.length;t<r;t++){const r=e(a[t],n);s.push(r)}t.morphAttributes[r]=s}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let e=0,n=s.length;e<n;e++){const n=s[e];t.addGroup(n.start,n.count,n.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const t in n){const r=n[t];e.data.attributes[t]=r.toJSON(e.data)}const r={};let i=!1;for(const t in this.morphAttributes){const n=this.morphAttributes[t],s=[];for(let t=0,r=n.length;t<r;t++){const r=n[t];s.push(r.toJSON(e.data))}s.length>0&&(r[t]=s,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const e in r){const n=r[e];this.setAttribute(e,n.clone(t))}const i=e.morphAttributes;for(const e in i){const n=[],r=i[e];for(let e=0,i=r.length;e<i;e++)n.push(r[e].clone(t));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let e=0,t=s.length;e<t;e++){const t=s[e];this.addGroup(t.start,t.count,t.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const o=e.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}ns.prototype.isBufferGeometry=!0;const rs=new Gr,is=new Hr,ss=new Or,as=new pr,os=new pr,ls=new pr,us=new pr,cs=new pr,hs=new pr,ps=new pr,fs=new pr,ms=new pr,ds=new Jn,gs=new Jn,vs=new Jn,ys=new pr,ws=new pr;class bs extends mi{constructor(e=new ns,t=new ki){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),ss.copy(n.boundingSphere),ss.applyMatrix4(i),!1===e.ray.intersectsSphere(ss))return;if(rs.copy(i).invert(),is.copy(e.ray).applyMatrix4(rs),null!==n.boundingBox&&!1===is.intersectsBox(n.boundingBox))return;let s;if(n.isBufferGeometry){const i=n.index,a=n.attributes.position,o=n.morphAttributes.position,l=n.morphTargetsRelative,u=n.attributes.uv,c=n.attributes.uv2,h=n.groups,p=n.drawRange;if(null!==i)if(Array.isArray(r))for(let n=0,f=h.length;n<f;n++){const f=h[n],m=r[f.materialIndex];for(let n=Math.max(f.start,p.start),r=Math.min(i.count,Math.min(f.start+f.count,p.start+p.count));n<r;n+=3){const r=i.getX(n),h=i.getX(n+1),p=i.getX(n+2);s=xs(this,m,e,is,a,o,l,u,c,r,h,p),s&&(s.faceIndex=Math.floor(n/3),s.face.materialIndex=f.materialIndex,t.push(s))}}else for(let n=Math.max(0,p.start),h=Math.min(i.count,p.start+p.count);n<h;n+=3){const h=i.getX(n),p=i.getX(n+1),f=i.getX(n+2);s=xs(this,r,e,is,a,o,l,u,c,h,p,f),s&&(s.faceIndex=Math.floor(n/3),t.push(s))}else if(void 0!==a)if(Array.isArray(r))for(let n=0,i=h.length;n<i;n++){const i=h[n],f=r[i.materialIndex];for(let n=Math.max(i.start,p.start),r=Math.min(a.count,Math.min(i.start+i.count,p.start+p.count));n<r;n+=3)s=xs(this,f,e,is,a,o,l,u,c,n,n+1,n+2),s&&(s.faceIndex=Math.floor(n/3),s.face.materialIndex=i.materialIndex,t.push(s))}else for(let n=Math.max(0,p.start),i=Math.min(a.count,p.start+p.count);n<i;n+=3)s=xs(this,r,e,is,a,o,l,u,c,n,n+1,n+2),s&&(s.faceIndex=Math.floor(n/3),t.push(s))}else n.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function xs(e,t,n,r,i,s,a,o,l,u,c,h){as.fromBufferAttribute(i,u),os.fromBufferAttribute(i,c),ls.fromBufferAttribute(i,h);const p=e.morphTargetInfluences;if(s&&p){ps.set(0,0,0),fs.set(0,0,0),ms.set(0,0,0);for(let e=0,t=s.length;e<t;e++){const t=p[e],n=s[e];0!==t&&(us.fromBufferAttribute(n,u),cs.fromBufferAttribute(n,c),hs.fromBufferAttribute(n,h),a?(ps.addScaledVector(us,t),fs.addScaledVector(cs,t),ms.addScaledVector(hs,t)):(ps.addScaledVector(us.sub(as),t),fs.addScaledVector(cs.sub(os),t),ms.addScaledVector(hs.sub(ls),t)))}as.add(ps),os.add(fs),ls.add(ms)}e.isSkinnedMesh&&(e.boneTransform(u,as),e.boneTransform(c,os),e.boneTransform(h,ls));const f=function(e,t,n,r,i,s,a,o){let l;if(l=t.side===d?r.intersectTriangle(a,s,i,!0,o):r.intersectTriangle(i,s,a,t.side!==g,o),null===l)return null;ws.copy(o),ws.applyMatrix4(e.matrixWorld);const u=n.ray.origin.distanceTo(ws);return u<n.near||u>n.far?null:{distance:u,point:ws.clone(),object:e}}(e,t,n,r,as,os,ls,ys);if(f){o&&(ds.fromBufferAttribute(o,u),gs.fromBufferAttribute(o,c),vs.fromBufferAttribute(o,h),f.uv=Ei.getUV(ys,as,os,ls,ds,gs,vs,new Jn)),l&&(ds.fromBufferAttribute(l,u),gs.fromBufferAttribute(l,c),vs.fromBufferAttribute(l,h),f.uv2=Ei.getUV(ys,as,os,ls,ds,gs,vs,new Jn));const e={a:u,b:c,c:h,normal:new pr,materialIndex:0};Ei.getNormal(as,os,ls,e.normal),f.face=e}return f}bs.prototype.isMesh=!0;class Ms extends ns{constructor(e=1,t=1,n=1,r=1,i=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:s};const a=this;r=Math.floor(r),i=Math.floor(i),s=Math.floor(s);const o=[],l=[],u=[],c=[];let h=0,p=0;function f(e,t,n,r,i,s,f,m,d,g,v){const y=s/d,w=f/g,b=s/2,x=f/2,M=m/2,S=d+1,_=g+1;let E=0,T=0;const A=new pr;for(let s=0;s<_;s++){const a=s*w-x;for(let o=0;o<S;o++){const h=o*y-b;A[e]=h*r,A[t]=a*i,A[n]=M,l.push(A.x,A.y,A.z),A[e]=0,A[t]=0,A[n]=m>0?1:-1,u.push(A.x,A.y,A.z),c.push(o/d),c.push(1-s/g),E+=1}}for(let e=0;e<g;e++)for(let t=0;t<d;t++){const n=h+t+S*e,r=h+t+S*(e+1),i=h+(t+1)+S*(e+1),s=h+(t+1)+S*e;o.push(n,r,s),o.push(r,i,s),T+=6}a.addGroup(p,T,v),p+=T,h+=E}f("z","y","x",-1,-1,n,t,e,s,i,0),f("z","y","x",1,-1,n,t,-e,s,i,1),f("x","z","y",1,1,e,n,t,r,s,2),f("x","z","y",1,-1,e,n,-t,r,s,3),f("x","y","z",1,-1,e,t,n,r,i,4),f("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(o),this.setAttribute("position",new Xi(l,3)),this.setAttribute("normal",new Xi(u,3)),this.setAttribute("uv",new Xi(c,2))}static fromJSON(e){return new Ms(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Ss(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function _s(e){const t={};for(let n=0;n<e.length;n++){const r=Ss(e[n]);for(const e in r)t[e]=r[e]}return t}const Es={clone:Ss,merge:_s};class Ts extends Ai{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ss(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const n in this.uniforms){const r=this.uniforms[n].value;r&&r.isTexture?t.uniforms[n]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[n]={type:"m4",value:r.toArray()}:t.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}Ts.prototype.isShaderMaterial=!0;class As extends mi{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new Gr,this.projectionMatrix=new Gr,this.projectionMatrixInverse=new Gr}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}As.prototype.isCamera=!0;class Ls extends As{constructor(e=50,t=1,n=.1,r=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Bn*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*zn*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Bn*Math.atan(Math.tan(.5*zn*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,i,s){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*zn*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const s=this.view;if(null!==this.view&&this.view.enabled){const e=s.fullWidth,a=s.fullHeight;i+=s.offsetX*r/e,t-=s.offsetY*n/a,r*=s.width/e,n*=s.height/a}const a=this.filmOffset;0!==a&&(i+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}Ls.prototype.isPerspectiveCamera=!0;const Cs=90;class Rs extends mi{constructor(e,t,n){if(super(),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const r=new Ls(Cs,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new pr(1,0,0)),this.add(r);const i=new Ls(Cs,1,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new pr(-1,0,0)),this.add(i);const s=new Ls(Cs,1,e,t);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(new pr(0,1,0)),this.add(s);const a=new Ls(Cs,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new pr(0,-1,0)),this.add(a);const o=new Ls(Cs,1,e,t);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new pr(0,0,1)),this.add(o);const l=new Ls(Cs,1,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new pr(0,0,-1)),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,i,s,a,o,l]=this.children,u=e.xr.enabled,c=e.getRenderTarget();e.xr.enabled=!1;const h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,s),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,o),n.texture.generateMipmaps=h,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(c),e.xr.enabled=u}}class Ns extends sr{constructor(e,t,n,r,i,s,a,o,l,u){super(e=void 0!==e?e:[],t=void 0!==t?t:se,n,r,i,s,a,o,l,u),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}Ns.prototype.isCubeTexture=!0;class Ps extends lr{constructor(e,t,n){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=n),super(e,e,t),t=t||{},this.texture=new Ns(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:we,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=ze,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",s=new Ms(5,5,5),a=new Ts({name:"CubemapFromEquirect",uniforms:Ss(n),vertexShader:r,fragmentShader:i,side:d,blending:w});a.uniforms.tEquirect.value=t;const o=new bs(s,a),l=t.minFilter;return t.minFilter===Me&&(t.minFilter=we),new Rs(1,10,this).update(e,o),t.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,r){const i=e.getRenderTarget();for(let i=0;i<6;i++)e.setRenderTarget(this,i),e.clear(t,n,r);e.setRenderTarget(i)}}Ps.prototype.isWebGLCubeRenderTarget=!0;const Is=new pr,Os=new pr,ks=new $n;class Ds{constructor(e=new pr(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=Is.subVectors(n,t).cross(Os.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const n=e.delta(Is),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(n).multiplyScalar(i).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||ks.getNormalMatrix(e),r=this.coplanarPoint(Is).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}Ds.prototype.isPlane=!0;const Us=new Or,zs=new pr;class Bs{constructor(e=new Ds,t=new Ds,n=new Ds,r=new Ds,i=new Ds,s=new Ds){this.planes=[e,t,n,r,i,s]}set(e,t,n,r,i,s){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(s),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,r=n[0],i=n[1],s=n[2],a=n[3],o=n[4],l=n[5],u=n[6],c=n[7],h=n[8],p=n[9],f=n[10],m=n[11],d=n[12],g=n[13],v=n[14],y=n[15];return t[0].setComponents(a-r,c-o,m-h,y-d).normalize(),t[1].setComponents(a+r,c+o,m+h,y+d).normalize(),t[2].setComponents(a+i,c+l,m+p,y+g).normalize(),t[3].setComponents(a-i,c-l,m-p,y-g).normalize(),t[4].setComponents(a-s,c-u,m-f,y-v).normalize(),t[5].setComponents(a+s,c+u,m+f,y+v).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Us.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Us)}intersectsSprite(e){return Us.center.set(0,0,0),Us.radius=.7071067811865476,Us.applyMatrix4(e.matrixWorld),this.intersectsSphere(Us)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let e=0;e<6;e++)if(t[e].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(zs.x=r.normal.x>0?e.max.x:e.min.x,zs.y=r.normal.y>0?e.max.y:e.min.y,zs.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(zs)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Fs(){let e=null,t=!1,n=null,r=null;function i(t,s){n(t,s),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function qs(e,t){const n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){const e=r.get(t);return void((!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const s=r.get(t);void 0===s?r.set(t,function(t,r){const i=t.array,s=t.usage,a=e.createBuffer();e.bindBuffer(r,a),e.bufferData(r,i,s),t.onUploadCallback();let o=5126;return i instanceof Float32Array?o=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?t.isFloat16BufferAttribute?n?o=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):o=5123:i instanceof Int16Array?o=5122:i instanceof Uint32Array?o=5125:i instanceof Int32Array?o=5124:i instanceof Int8Array?o=5120:(i instanceof Uint8Array||i instanceof Uint8ClampedArray)&&(o=5121),{buffer:a,type:o,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,i)):s.version<t.version&&(function(t,r,i){const s=r.array,a=r.updateRange;e.bindBuffer(i,t),-1===a.count?e.bufferSubData(i,0,s):(n?e.bufferSubData(i,a.offset*s.BYTES_PER_ELEMENT,s,a.offset,a.count):e.bufferSubData(i,a.offset*s.BYTES_PER_ELEMENT,s.subarray(a.offset,a.offset+a.count)),a.count=-1)}(s.buffer,t,i),s.version=t.version)}}}class Hs extends ns{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,s=t/2,a=Math.floor(n),o=Math.floor(r),l=a+1,u=o+1,c=e/a,h=t/o,p=[],f=[],m=[],d=[];for(let e=0;e<u;e++){const t=e*h-s;for(let n=0;n<l;n++){const r=n*c-i;f.push(r,-t,0),m.push(0,0,1),d.push(n/a),d.push(1-e/o)}}for(let e=0;e<o;e++)for(let t=0;t<a;t++){const n=t+l*e,r=t+l*(e+1),i=t+1+l*(e+1),s=t+1+l*e;p.push(n,r,s),p.push(r,i,s)}this.setIndex(p),this.setAttribute("position",new Xi(f,3)),this.setAttribute("normal",new Xi(m,3)),this.setAttribute("uv",new Xi(d,2))}static fromJSON(e){return new Hs(e.width,e.height,e.widthSegments,e.heightSegments)}}const Gs={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenTint, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenTint * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularTintFactor = specularTint;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARTINTMAP\n\t\t\tspecularTintFactor *= specularTintMapTexelToLinear( texture2D( specularTintMap, vUv ) ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularTintFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularTintFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenTint = sheenTint;\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenTint;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenTint, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\n\t\t\tfloat texelIndex = float( vertexIndex * stride + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV ).xyz;\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\t#ifndef USE_MORPHNORMALS\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\n\t\t\t#else\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\n\t\t\t#endif\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationTint, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationTint;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( float roughness, float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularTint;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARTINTMAP\n\t\tuniform sampler2D specularTintMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenTint;\n\tuniform float sheenRoughness;\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - clearcoat * Fcc ) + clearcoatSpecular * clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Vs={common:{diffuse:{value:new Oi(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new $n},uv2Transform:{value:new $n},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Jn(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Oi(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Oi(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new $n}},sprite:{diffuse:{value:new Oi(16777215)},opacity:{value:1},center:{value:new Jn(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new $n}}},Ws={basic:{uniforms:_s([Vs.common,Vs.specularmap,Vs.envmap,Vs.aomap,Vs.lightmap,Vs.fog]),vertexShader:Gs.meshbasic_vert,fragmentShader:Gs.meshbasic_frag},lambert:{uniforms:_s([Vs.common,Vs.specularmap,Vs.envmap,Vs.aomap,Vs.lightmap,Vs.emissivemap,Vs.fog,Vs.lights,{emissive:{value:new Oi(0)}}]),vertexShader:Gs.meshlambert_vert,fragmentShader:Gs.meshlambert_frag},phong:{uniforms:_s([Vs.common,Vs.specularmap,Vs.envmap,Vs.aomap,Vs.lightmap,Vs.emissivemap,Vs.bumpmap,Vs.normalmap,Vs.displacementmap,Vs.fog,Vs.lights,{emissive:{value:new Oi(0)},specular:{value:new Oi(1118481)},shininess:{value:30}}]),vertexShader:Gs.meshphong_vert,fragmentShader:Gs.meshphong_frag},standard:{uniforms:_s([Vs.common,Vs.envmap,Vs.aomap,Vs.lightmap,Vs.emissivemap,Vs.bumpmap,Vs.normalmap,Vs.displacementmap,Vs.roughnessmap,Vs.metalnessmap,Vs.fog,Vs.lights,{emissive:{value:new Oi(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Gs.meshphysical_vert,fragmentShader:Gs.meshphysical_frag},toon:{uniforms:_s([Vs.common,Vs.aomap,Vs.lightmap,Vs.emissivemap,Vs.bumpmap,Vs.normalmap,Vs.displacementmap,Vs.gradientmap,Vs.fog,Vs.lights,{emissive:{value:new Oi(0)}}]),vertexShader:Gs.meshtoon_vert,fragmentShader:Gs.meshtoon_frag},matcap:{uniforms:_s([Vs.common,Vs.bumpmap,Vs.normalmap,Vs.displacementmap,Vs.fog,{matcap:{value:null}}]),vertexShader:Gs.meshmatcap_vert,fragmentShader:Gs.meshmatcap_frag},points:{uniforms:_s([Vs.points,Vs.fog]),vertexShader:Gs.points_vert,fragmentShader:Gs.points_frag},dashed:{uniforms:_s([Vs.common,Vs.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Gs.linedashed_vert,fragmentShader:Gs.linedashed_frag},depth:{uniforms:_s([Vs.common,Vs.displacementmap]),vertexShader:Gs.depth_vert,fragmentShader:Gs.depth_frag},normal:{uniforms:_s([Vs.common,Vs.bumpmap,Vs.normalmap,Vs.displacementmap,{opacity:{value:1}}]),vertexShader:Gs.meshnormal_vert,fragmentShader:Gs.meshnormal_frag},sprite:{uniforms:_s([Vs.sprite,Vs.fog]),vertexShader:Gs.sprite_vert,fragmentShader:Gs.sprite_frag},background:{uniforms:{uvTransform:{value:new $n},t2D:{value:null}},vertexShader:Gs.background_vert,fragmentShader:Gs.background_frag},cube:{uniforms:_s([Vs.envmap,{opacity:{value:1}}]),vertexShader:Gs.cube_vert,fragmentShader:Gs.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Gs.equirect_vert,fragmentShader:Gs.equirect_frag},distanceRGBA:{uniforms:_s([Vs.common,Vs.displacementmap,{referencePosition:{value:new pr},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Gs.distanceRGBA_vert,fragmentShader:Gs.distanceRGBA_frag},shadow:{uniforms:_s([Vs.lights,Vs.fog,{color:{value:new Oi(0)},opacity:{value:1}}]),vertexShader:Gs.shadow_vert,fragmentShader:Gs.shadow_frag}};function js(e,t,n,r,i){const s=new Oi(0);let a,o,l=0,u=null,c=0,h=null;function p(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,i)}return{getClearColor:function(){return s},setClearColor:function(e,t=1){s.set(e),l=t,p(s,l)},getClearAlpha:function(){return l},setClearAlpha:function(e){l=e,p(s,l)},render:function(n,i){let f=!1,g=!0===i.isScene?i.background:null;g&&g.isTexture&&(g=t.get(g));const v=e.xr,y=v.getSession&&v.getSession();y&&"additive"===y.environmentBlendMode&&(g=null),null===g?p(s,l):g&&g.isColor&&(p(g,1),f=!0),(e.autoClear||f)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),g&&(g.isCubeTexture||g.mapping===ue)?(void 0===o&&(o=new bs(new Ms(1,1,1),new Ts({name:"BackgroundCubeMaterial",uniforms:Ss(Ws.cube.uniforms),vertexShader:Ws.cube.vertexShader,fragmentShader:Ws.cube.fragmentShader,side:d,depthTest:!1,depthWrite:!1,fog:!1})),o.geometry.deleteAttribute("normal"),o.geometry.deleteAttribute("uv"),o.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(o.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(o)),o.material.uniforms.envMap.value=g,o.material.uniforms.flipEnvMap.value=g.isCubeTexture&&!1===g.isRenderTargetTexture?-1:1,u===g&&c===g.version&&h===e.toneMapping||(o.material.needsUpdate=!0,u=g,c=g.version,h=e.toneMapping),n.unshift(o,o.geometry,o.material,0,0,null)):g&&g.isTexture&&(void 0===a&&(a=new bs(new Hs(2,2),new Ts({name:"BackgroundMaterial",uniforms:Ss(Ws.background.uniforms),vertexShader:Ws.background.vertexShader,fragmentShader:Ws.background.fragmentShader,side:m,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(a)),a.material.uniforms.t2D.value=g,!0===g.matrixAutoUpdate&&g.updateMatrix(),a.material.uniforms.uvTransform.value.copy(g.matrix),u===g&&c===g.version&&h===e.toneMapping||(a.material.needsUpdate=!0,u=g,c=g.version,h=e.toneMapping),n.unshift(a,a.geometry,a.material,0,0,null))}}}function Xs(e,t,n,r){const i=e.getParameter(34921),s=r.isWebGL2?null:t.get("OES_vertex_array_object"),a=r.isWebGL2||null!==s,o={},l=p(null);let u=l;function c(t){return r.isWebGL2?e.bindVertexArray(t):s.bindVertexArrayOES(t)}function h(t){return r.isWebGL2?e.deleteVertexArray(t):s.deleteVertexArrayOES(t)}function p(e){const t=[],n=[],r=[];for(let e=0;e<i;e++)t[e]=0,n[e]=0,r[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function f(){const e=u.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function m(e){d(e,0)}function d(n,i){const s=u.newAttributes,a=u.enabledAttributes,o=u.attributeDivisors;s[n]=1,0===a[n]&&(e.enableVertexAttribArray(n),a[n]=1),o[n]!==i&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),o[n]=i)}function g(){const t=u.newAttributes,n=u.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function v(t,n,i,s,a,o){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,s,a,o):e.vertexAttribIPointer(t,n,i,a,o)}function y(){w(),u!==l&&(u=l,c(u.object))}function w(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(i,l,h,y,w){let b=!1;if(a){const t=function(t,n,i){const a=!0===i.wireframe;let l=o[t.id];void 0===l&&(l={},o[t.id]=l);let u=l[n.id];void 0===u&&(u={},l[n.id]=u);let c=u[a];return void 0===c&&(c=p(r.isWebGL2?e.createVertexArray():s.createVertexArrayOES()),u[a]=c),c}(y,h,l);u!==t&&(u=t,c(u.object)),b=function(e,t){const n=u.attributes,r=e.attributes;let i=0;for(const e in r){const t=n[e],s=r[e];if(void 0===t)return!0;if(t.attribute!==s)return!0;if(t.data!==s.data)return!0;i++}return u.attributesNum!==i||u.index!==t}(y,w),b&&function(e,t){const n={},r=e.attributes;let i=0;for(const e in r){const t=r[e],s={};s.attribute=t,t.data&&(s.data=t.data),n[e]=s,i++}u.attributes=n,u.attributesNum=i,u.index=t}(y,w)}else{const e=!0===l.wireframe;u.geometry===y.id&&u.program===h.id&&u.wireframe===e||(u.geometry=y.id,u.program=h.id,u.wireframe=e,b=!0)}!0===i.isInstancedMesh&&(b=!0),null!==w&&n.update(w,34963),b&&(function(i,s,a,o){if(!1===r.isWebGL2&&(i.isInstancedMesh||o.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;f();const l=o.attributes,u=a.getAttributes(),c=s.defaultAttributeValues;for(const t in u){const r=u[t];if(r.location>=0){let s=l[t];if(void 0===s&&("instanceMatrix"===t&&i.instanceMatrix&&(s=i.instanceMatrix),"instanceColor"===t&&i.instanceColor&&(s=i.instanceColor)),void 0!==s){const t=s.normalized,a=s.itemSize,l=n.get(s);if(void 0===l)continue;const u=l.buffer,c=l.type,h=l.bytesPerElement;if(s.isInterleavedBufferAttribute){const n=s.data,l=n.stride,p=s.offset;if(n&&n.isInstancedInterleavedBuffer){for(let e=0;e<r.locationSize;e++)d(r.location+e,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<r.locationSize;e++)m(r.location+e);e.bindBuffer(34962,u);for(let e=0;e<r.locationSize;e++)v(r.location+e,a/r.locationSize,c,t,l*h,(p+a/r.locationSize*e)*h)}else{if(s.isInstancedBufferAttribute){for(let e=0;e<r.locationSize;e++)d(r.location+e,s.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let e=0;e<r.locationSize;e++)m(r.location+e);e.bindBuffer(34962,u);for(let e=0;e<r.locationSize;e++)v(r.location+e,a/r.locationSize,c,t,a*h,a/r.locationSize*e*h)}}else if(void 0!==c){const n=c[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(r.location,n);break;case 3:e.vertexAttrib3fv(r.location,n);break;case 4:e.vertexAttrib4fv(r.location,n);break;default:e.vertexAttrib1fv(r.location,n)}}}}g()}(i,l,h,y),null!==w&&e.bindBuffer(34963,n.get(w).buffer))},reset:y,resetDefaultState:w,dispose:function(){y();for(const e in o){const t=o[e];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete o[e]}},releaseStatesOfGeometry:function(e){if(void 0===o[e.id])return;const t=o[e.id];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete o[e.id]},releaseStatesOfProgram:function(e){for(const t in o){const n=o[t];if(void 0===n[e.id])continue;const r=n[e.id];for(const e in r)h(r[e].object),delete r[e];delete n[e.id]}},initAttributes:f,enableAttribute:m,disableUnusedAttributes:g}}function Zs(e,t,n,r){const i=r.isWebGL2;let s;this.setMode=function(e){s=e},this.render=function(t,r){e.drawArrays(s,t,r),n.update(r,s,1)},this.renderInstances=function(r,a,o){if(0===o)return;let l,u;if(i)l=e,u="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),u="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[u](s,r,a,o),n.update(a,s,o)}}function Ys(e,t,n){let r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const s="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext;let a=void 0!==n.precision?n.precision:"highp";const o=i(a);o!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",o,"instead."),a=o);const l=s||t.has("WEBGL_draw_buffers"),u=!0===n.logarithmicDepthBuffer,c=e.getParameter(34930),h=e.getParameter(35660),p=e.getParameter(3379),f=e.getParameter(34076),m=e.getParameter(34921),d=e.getParameter(36347),g=e.getParameter(36348),v=e.getParameter(36349),y=h>0,w=s||t.has("OES_texture_float");return{isWebGL2:s,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:u,maxTextures:c,maxVertexTextures:h,maxTextureSize:p,maxCubemapSize:f,maxAttributes:m,maxVertexUniforms:d,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:w,floatVertexTextures:y&&w,maxSamples:s?e.getParameter(36183):0}}function Js(e){const t=this;let n=null,r=0,i=!1,s=!1;const a=new Ds,o=new $n,l={value:null,needsUpdate:!1};function u(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function c(e,n,r,i){const s=null!==e?e.length:0;let u=null;if(0!==s){if(u=l.value,!0!==i||null===u){const t=r+4*s,i=n.matrixWorldInverse;o.getNormalMatrix(i),(null===u||u.length<t)&&(u=new Float32Array(t));for(let t=0,n=r;t!==s;++t,n+=4)a.copy(e[t]).applyMatrix4(i,o),a.normal.toArray(u,n),u[n+3]=a.constant}l.value=u,l.needsUpdate=!0}return t.numPlanes=s,t.numIntersection=0,u}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,s){const a=0!==e.length||t||0!==r||i;return i=t,n=c(e,s,0),r=e.length,a},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1,u()},this.setState=function(t,a,o){const h=t.clippingPlanes,p=t.clipIntersection,f=t.clipShadows,m=e.get(t);if(!i||null===h||0===h.length||s&&!f)s?c(null):u();else{const e=s?0:r,t=4*e;let i=m.clippingState||null;l.value=i,i=c(h,a,t,o);for(let e=0;e!==t;++e)i[e]=n[e];m.clippingState=i,this.numIntersection=p?this.numPlanes:0,this.numPlanes+=e}}}function $s(e){let t=new WeakMap;function n(e,t){return t===oe?e.mapping=se:t===le&&(e.mapping=ae),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){const s=i.mapping;if(s===oe||s===le){if(t.has(i))return n(t.get(i).texture,i.mapping);{const s=i.image;if(s&&s.height>0){const a=e.getRenderTarget(),o=new Ps(s.height/2);return o.fromEquirectangularTexture(e,i),t.set(i,o),e.setRenderTarget(a),i.addEventListener("dispose",r),n(o.texture,i.mapping)}return null}}}return i},dispose:function(){t=new WeakMap}}}Ws.physical={uniforms:_s([Ws.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Jn(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenTint:{value:new Oi(0)},sheenRoughness:{value:0},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Jn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationTint:{value:new Oi(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularTint:{value:new Oi(1,1,1)},specularTintMap:{value:null}}]),vertexShader:Gs.meshphysical_vert,fragmentShader:Gs.meshphysical_frag};class Qs extends As{constructor(e=-1,t=1,n=1,r=-1,i=.1,s=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,s=n+e,a=r+t,o=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,s=i+e*this.view.width,a-=t*this.view.offsetY,o=a-t*this.view.height}this.projectionMatrix.makeOrthographic(i,s,a,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}Qs.prototype.isOrthographicCamera=!0;class Ks extends Ts{constructor(e){super(e),this.type="RawShaderMaterial"}}Ks.prototype.isRawShaderMaterial=!0;const ea=Math.pow(2,8),ta=[.125,.215,.35,.446,.526,.582],na=5+ta.length,ra={[Jt]:0,[$t]:1,[Kt]:2,[tn]:3,[nn]:4,[rn]:5,[Qt]:6},ia=new Qs,{_lodPlanes:sa,_sizeLods:aa,_sigmas:oa}=da(),la=new Oi;let ua=null;const ca=(1+Math.sqrt(5))/2,ha=1/ca,pa=[new pr(1,1,1),new pr(-1,1,1),new pr(1,1,-1),new pr(-1,1,-1),new pr(0,ca,ha),new pr(0,ca,-ha),new pr(ha,0,ca),new pr(-ha,0,ca),new pr(ca,ha,0),new pr(-ca,ha,0)];class fa{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=function(e){const t=new Float32Array(20),n=new pr(0,1,0);return new Ks({name:"SphericalGaussianBlur",defines:{n:20},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:ra[Jt]},outputEncoding:{value:ra[Jt]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:w,depthTest:!1,depthWrite:!1})}(),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){ua=this._renderer.getRenderTarget();const i=this._allocateTargets();return this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=wa(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=ya(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let e=0;e<sa.length;e++)sa[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(ua),e.scissorTest=!1,va(e,0,0,e.width,e.height)}_fromTexture(e){ua=this._renderer.getRenderTarget();const t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(e){const t={magFilter:me,minFilter:me,generateMipmaps:!1,type:_e,format:qe,encoding:ma(e)?e.encoding:Kt,depthBuffer:!1},n=ga(t);return n.depthBuffer=!e,this._pingPongRenderTarget=ga(t),n}_compileMaterial(e){const t=new bs(sa[0],e);this._renderer.compile(t,ia)}_sceneToCubeUV(e,t,n,r){const i=new Ls(90,1,t,n),s=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,u=o.outputEncoding,c=o.toneMapping;o.getClearColor(la),o.toneMapping=Q,o.outputEncoding=Jt,o.autoClear=!1;const h=new ki({name:"PMREM.Background",side:d,depthWrite:!1,depthTest:!1}),p=new bs(new Ms,h);let f=!1;const m=e.background;m?m.isColor&&(h.color.copy(m),e.background=null,f=!0):(h.color.copy(la),f=!0);for(let t=0;t<6;t++){const n=t%3;0==n?(i.up.set(0,s[t],0),i.lookAt(a[t],0,0)):1==n?(i.up.set(0,0,s[t]),i.lookAt(0,a[t],0)):(i.up.set(0,s[t],0),i.lookAt(0,0,a[t])),va(r,n*ea,t>2?ea:0,ea,ea),o.setRenderTarget(r),f&&o.render(p,i),o.render(e,i)}p.geometry.dispose(),p.material.dispose(),o.toneMapping=c,o.outputEncoding=u,o.autoClear=l,e.background=m}_setEncoding(e,t){!0===this._renderer.capabilities.isWebGL2&&t.format===ze&&t.type===_e&&t.encoding===$t?e.value=ra[Jt]:e.value=ra[t.encoding]}_textureToCubeUV(e,t){const n=this._renderer;e.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=wa()):null==this._equirectShader&&(this._equirectShader=ya());const r=e.isCubeTexture?this._cubemapShader:this._equirectShader,i=new bs(sa[0],r),s=r.uniforms;s.envMap.value=e,e.isCubeTexture||s.texelSize.value.set(1/e.image.width,1/e.image.height),this._setEncoding(s.inputEncoding,e),this._setEncoding(s.outputEncoding,t.texture),va(t,0,0,3*ea,2*ea),n.setRenderTarget(t),n.render(i,ia)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let t=1;t<na;t++){const n=Math.sqrt(oa[t]*oa[t]-oa[t-1]*oa[t-1]),r=pa[(t-1)%pa.length];this._blur(e,t-1,t,n,r)}t.autoClear=n}_blur(e,t,n,r,i){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,n,r,"latitudinal",i),this._halfBlur(s,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,s,a){const o=this._renderer,l=this._blurMaterial;"latitudinal"!==s&&"longitudinal"!==s&&console.error("blur direction must be either latitudinal or longitudinal!");const u=new bs(sa[r],l),c=l.uniforms,h=aa[n]-1,p=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,f=i/p,m=isFinite(i)?1+Math.floor(3*f):20;m>20&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${m} samples when the maximum is set to 20`);const d=[];let g=0;for(let e=0;e<20;++e){const t=e/f,n=Math.exp(-t*t/2);d.push(n),0==e?g+=n:e<m&&(g+=2*n)}for(let e=0;e<d.length;e++)d[e]=d[e]/g;c.envMap.value=e.texture,c.samples.value=m,c.weights.value=d,c.latitudinal.value="latitudinal"===s,a&&(c.poleAxis.value=a),c.dTheta.value=p,c.mipInt.value=8-n,this._setEncoding(c.inputEncoding,e.texture),this._setEncoding(c.outputEncoding,e.texture);const v=aa[r];va(t,3*Math.max(0,ea-2*v),(0===r?0:2*ea)+2*v*(r>4?r-8+4:0),3*v,2*v),o.setRenderTarget(t),o.render(u,ia)}}function ma(e){return void 0!==e&&e.type===_e&&(e.encoding===Jt||e.encoding===$t||e.encoding===Qt)}function da(){const e=[],t=[],n=[];let r=8;for(let i=0;i<na;i++){const s=Math.pow(2,r);t.push(s);let a=1/s;i>4?a=ta[i-8+4-1]:0==i&&(a=0),n.push(a);const o=1/(s-1),l=-o/2,u=1+o/2,c=[l,l,u,l,u,u,l,l,u,u,l,u],h=6,p=6,f=3,m=2,d=1,g=new Float32Array(f*p*h),v=new Float32Array(m*p*h),y=new Float32Array(d*p*h);for(let e=0;e<h;e++){const t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];g.set(r,f*p*e),v.set(c,m*p*e);const i=[e,e,e,e,e,e];y.set(i,d*p*e)}const w=new ns;w.setAttribute("position",new zi(g,f)),w.setAttribute("uv",new zi(v,m)),w.setAttribute("faceIndex",new zi(y,d)),e.push(w),r>4&&r--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}}function ga(e){const t=new lr(3*ea,3*ea,e);return t.texture.mapping=ue,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function va(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function ya(){const e=new Jn(1,1);return new Ks({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:e},inputEncoding:{value:ra[Jt]},outputEncoding:{value:ra[Jt]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:w,depthTest:!1,depthWrite:!1})}function wa(){return new Ks({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:ra[Jt]},outputEncoding:{value:ra[Jt]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:w,depthTest:!1,depthWrite:!1})}function ba(e){let t=new WeakMap,n=null;function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){const s=i.mapping,a=s===oe||s===le,o=s===se||s===ae;if(a||o){if(t.has(i))return t.get(i).texture;{const s=i.image;if(a&&s&&s.height>0||o&&s&&function(e){let t=0;for(let n=0;n<6;n++)void 0!==e[n]&&t++;return 6===t}(s)){const s=e.getRenderTarget();null===n&&(n=new fa(e));const o=a?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,o),e.setRenderTarget(s),i.addEventListener("dispose",r),o.texture}return null}}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function xa(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function Ma(e,t,n,r){const i={},s=new WeakMap;function a(e){const o=e.target;null!==o.index&&t.remove(o.index);for(const e in o.attributes)t.remove(o.attributes[e]);o.removeEventListener("dispose",a),delete i[o.id];const l=s.get(o);l&&(t.remove(l),s.delete(o)),r.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,n.memory.geometries--}function o(e){const n=[],r=e.index,i=e.attributes.position;let a=0;if(null!==r){const e=r.array;a=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],i=e[t+1],s=e[t+2];n.push(r,i,i,s,s,r)}}else{const e=i.array;a=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}const o=new(Qn(n)>65535?Wi:Gi)(n,1);o.version=a;const l=s.get(e);l&&t.remove(l),s.set(e,o)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",a),i[t.id]=!0,n.memory.geometries++),t},update:function(e){const n=e.attributes;for(const e in n)t.update(n[e],34962);const r=e.morphAttributes;for(const e in r){const n=r[e];for(let e=0,r=n.length;e<r;e++)t.update(n[e],34962)}},getWireframeAttribute:function(e){const t=s.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&o(e)}else o(e);return s.get(e)}}}function Sa(e,t,n,r){const i=r.isWebGL2;let s,a,o;this.setMode=function(e){s=e},this.setIndex=function(e){a=e.type,o=e.bytesPerElement},this.render=function(t,r){e.drawElements(s,r,a,t*o),n.update(r,s,1)},this.renderInstances=function(r,l,u){if(0===u)return;let c,h;if(i)c=e,h="drawElementsInstanced";else if(c=t.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===c)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[h](s,l,a,r*o,u),n.update(l,s,u)}}function _a(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}class Ea extends sr{constructor(e=null,t=1,n=1,r=1){super(null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=me,this.minFilter=me,this.wrapR=pe,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}function Ta(e,t){return e[0]-t[0]}function Aa(e,t){return Math.abs(t[1])-Math.abs(e[1])}function La(e,t){let n=1;const r=t.isInterleavedBufferAttribute?t.data.array:t.array;r instanceof Int8Array?n=127:r instanceof Int16Array?n=32767:r instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),e.divideScalar(n)}function Ca(e,t,n){const r={},i=new Float32Array(8),s=new WeakMap,a=new pr,o=[];for(let e=0;e<8;e++)o[e]=[e,0];return{update:function(l,u,c,h){const p=l.morphTargetInfluences;if(!0===t.isWebGL2){const r=u.morphAttributes.position.length;let i=s.get(u);if(void 0===i||i.count!==r){void 0!==i&&i.texture.dispose();const e=void 0!==u.morphAttributes.normal,n=u.morphAttributes.position,o=u.morphAttributes.normal||[],l=!0===e?2:1;let c=u.attributes.position.count*l,h=1;c>t.maxTextureSize&&(h=Math.ceil(c/t.maxTextureSize),c=t.maxTextureSize);const p=new Float32Array(c*h*4*r),f=new Ea(p,c,h,r);f.format=ze,f.type=Re;const m=4*l;for(let t=0;t<r;t++){const r=n[t],i=o[t],s=c*h*4*t;for(let t=0;t<r.count;t++){a.fromBufferAttribute(r,t),!0===r.normalized&&La(a,r);const n=t*m;p[s+n+0]=a.x,p[s+n+1]=a.y,p[s+n+2]=a.z,p[s+n+3]=0,!0===e&&(a.fromBufferAttribute(i,t),!0===i.normalized&&La(a,i),p[s+n+4]=a.x,p[s+n+5]=a.y,p[s+n+6]=a.z,p[s+n+7]=0)}}i={count:r,texture:f,size:new Jn(c,h)},s.set(u,i)}let o=0;for(let e=0;e<p.length;e++)o+=p[e];const l=u.morphTargetsRelative?1:1-o;h.getUniforms().setValue(e,"morphTargetBaseInfluence",l),h.getUniforms().setValue(e,"morphTargetInfluences",p),h.getUniforms().setValue(e,"morphTargetsTexture",i.texture,n),h.getUniforms().setValue(e,"morphTargetsTextureSize",i.size)}else{const t=void 0===p?0:p.length;let n=r[u.id];if(void 0===n||n.length!==t){n=[];for(let e=0;e<t;e++)n[e]=[e,0];r[u.id]=n}for(let e=0;e<t;e++){const t=n[e];t[0]=e,t[1]=p[e]}n.sort(Aa);for(let e=0;e<8;e++)e<t&&n[e][1]?(o[e][0]=n[e][0],o[e][1]=n[e][1]):(o[e][0]=Number.MAX_SAFE_INTEGER,o[e][1]=0);o.sort(Ta);const s=u.morphAttributes.position,a=u.morphAttributes.normal;let l=0;for(let e=0;e<8;e++){const t=o[e],n=t[0],r=t[1];n!==Number.MAX_SAFE_INTEGER&&r?(s&&u.getAttribute("morphTarget"+e)!==s[n]&&u.setAttribute("morphTarget"+e,s[n]),a&&u.getAttribute("morphNormal"+e)!==a[n]&&u.setAttribute("morphNormal"+e,a[n]),i[e]=r,l+=r):(s&&!0===u.hasAttribute("morphTarget"+e)&&u.deleteAttribute("morphTarget"+e),a&&!0===u.hasAttribute("morphNormal"+e)&&u.deleteAttribute("morphNormal"+e),i[e]=0)}const c=u.morphTargetsRelative?1:1-l;h.getUniforms().setValue(e,"morphTargetBaseInfluence",c),h.getUniforms().setValue(e,"morphTargetInfluences",i)}}}}function Ra(e,t,n,r){let i=new WeakMap;function s(e){const t=e.target;t.removeEventListener("dispose",s),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){const a=r.render.frame,o=e.geometry,l=t.get(e,o);return i.get(l)!==a&&(t.update(l),i.set(l,a)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",s)&&e.addEventListener("dispose",s),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),l},dispose:function(){i=new WeakMap}}}Ea.prototype.isDataTexture2DArray=!0;class Na extends sr{constructor(e=null,t=1,n=1,r=1){super(null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=me,this.minFilter=me,this.wrapR=pe,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}Na.prototype.isDataTexture3D=!0;const Pa=new sr,Ia=new Ea,Oa=new Na,ka=new Ns,Da=[],Ua=[],za=new Float32Array(16),Ba=new Float32Array(9),Fa=new Float32Array(4);function qa(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let s=Da[i];if(void 0===s&&(s=new Float32Array(i),Da[i]=s),0!==t){r.toArray(s,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(s,i)}return s}function Ha(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Ga(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function Va(e,t){let n=Ua[t];void 0===n&&(n=new Int32Array(t),Ua[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function Wa(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function ja(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Ha(n,t))return;e.uniform2fv(this.addr,t),Ga(n,t)}}function Xa(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Ha(n,t))return;e.uniform3fv(this.addr,t),Ga(n,t)}}function Za(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Ha(n,t))return;e.uniform4fv(this.addr,t),Ga(n,t)}}function Ya(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Ha(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Ga(n,t)}else{if(Ha(n,r))return;Fa.set(r),e.uniformMatrix2fv(this.addr,!1,Fa),Ga(n,r)}}function Ja(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Ha(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Ga(n,t)}else{if(Ha(n,r))return;Ba.set(r),e.uniformMatrix3fv(this.addr,!1,Ba),Ga(n,r)}}function $a(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Ha(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Ga(n,t)}else{if(Ha(n,r))return;za.set(r),e.uniformMatrix4fv(this.addr,!1,za),Ga(n,r)}}function Qa(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Ka(e,t){const n=this.cache;Ha(n,t)||(e.uniform2iv(this.addr,t),Ga(n,t))}function eo(e,t){const n=this.cache;Ha(n,t)||(e.uniform3iv(this.addr,t),Ga(n,t))}function to(e,t){const n=this.cache;Ha(n,t)||(e.uniform4iv(this.addr,t),Ga(n,t))}function no(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function ro(e,t){const n=this.cache;Ha(n,t)||(e.uniform2uiv(this.addr,t),Ga(n,t))}function io(e,t){const n=this.cache;Ha(n,t)||(e.uniform3uiv(this.addr,t),Ga(n,t))}function so(e,t){const n=this.cache;Ha(n,t)||(e.uniform4uiv(this.addr,t),Ga(n,t))}function ao(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(t||Pa,i)}function oo(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||Oa,i)}function lo(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(t||ka,i)}function uo(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||Ia,i)}function co(e,t){e.uniform1fv(this.addr,t)}function ho(e,t){const n=qa(t,this.size,2);e.uniform2fv(this.addr,n)}function po(e,t){const n=qa(t,this.size,3);e.uniform3fv(this.addr,n)}function fo(e,t){const n=qa(t,this.size,4);e.uniform4fv(this.addr,n)}function mo(e,t){const n=qa(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function go(e,t){const n=qa(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function vo(e,t){const n=qa(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function yo(e,t){e.uniform1iv(this.addr,t)}function wo(e,t){e.uniform2iv(this.addr,t)}function bo(e,t){e.uniform3iv(this.addr,t)}function xo(e,t){e.uniform4iv(this.addr,t)}function Mo(e,t){e.uniform1uiv(this.addr,t)}function So(e,t){e.uniform2uiv(this.addr,t)}function _o(e,t){e.uniform3uiv(this.addr,t)}function Eo(e,t){e.uniform4uiv(this.addr,t)}function To(e,t,n){const r=t.length,i=Va(n,r);e.uniform1iv(this.addr,i);for(let e=0;e!==r;++e)n.safeSetTexture2D(t[e]||Pa,i[e])}function Ao(e,t,n){const r=t.length,i=Va(n,r);e.uniform1iv(this.addr,i);for(let e=0;e!==r;++e)n.safeSetTextureCube(t[e]||ka,i[e])}function Lo(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return Wa;case 35664:return ja;case 35665:return Xa;case 35666:return Za;case 35674:return Ya;case 35675:return Ja;case 35676:return $a;case 5124:case 35670:return Qa;case 35667:case 35671:return Ka;case 35668:case 35672:return eo;case 35669:case 35673:return to;case 5125:return no;case 36294:return ro;case 36295:return io;case 36296:return so;case 35678:case 36198:case 36298:case 36306:case 35682:return ao;case 35679:case 36299:case 36307:return oo;case 35680:case 36300:case 36308:case 36293:return lo;case 36289:case 36303:case 36311:case 36292:return uo}}(t.type)}function Co(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return co;case 35664:return ho;case 35665:return po;case 35666:return fo;case 35674:return mo;case 35675:return go;case 35676:return vo;case 5124:case 35670:return yo;case 35667:case 35671:return wo;case 35668:case 35672:return bo;case 35669:case 35673:return xo;case 5125:return Mo;case 36294:return So;case 36295:return _o;case 36296:return Eo;case 35678:case 36198:case 36298:case 36306:case 35682:return To;case 35680:case 36300:case 36308:case 36293:return Ao}}(t.type)}function Ro(e){this.id=e,this.seq=[],this.map={}}Co.prototype.updateCache=function(e){const t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),Ga(t,e)},Ro.prototype.setValue=function(e,t,n){const r=this.seq;for(let i=0,s=r.length;i!==s;++i){const s=r[i];s.setValue(e,t[s.id],n)}};const No=/(\w+)(\])?(\[|\.)?/g;function Po(e,t){e.seq.push(t),e.map[t.id]=t}function Io(e,t,n){const r=e.name,i=r.length;for(No.lastIndex=0;;){const s=No.exec(r),a=No.lastIndex;let o=s[1];const l="]"===s[2],u=s[3];if(l&&(o|=0),void 0===u||"["===u&&a+2===i){Po(n,void 0===u?new Lo(o,e,t):new Co(o,e,t));break}{let e=n.map[o];void 0===e&&(e=new Ro(o),Po(n,e)),n=e}}}function Oo(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);Io(n,e.getUniformLocation(t,n.name),this)}}function ko(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}Oo.prototype.setValue=function(e,t,n,r){const i=this.map[t];void 0!==i&&i.setValue(e,n,r)},Oo.prototype.setOptional=function(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)},Oo.upload=function(e,t,n,r){for(let i=0,s=t.length;i!==s;++i){const s=t[i],a=n[s.id];!1!==a.needsUpdate&&s.setValue(e,a.value,r)}},Oo.seqWithValue=function(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const i=e[r];i.id in t&&n.push(i)}return n};let Do=0;function Uo(e){switch(e){case Jt:return["Linear","( value )"];case $t:return["sRGB","( value )"];case Kt:return["RGBE","( value )"];case tn:return["RGBM","( value, 7.0 )"];case nn:return["RGBM","( value, 16.0 )"];case rn:return["RGBD","( value, 256.0 )"];case Qt:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case en:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function zo(e,t,n){const r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();return r&&""===i?"":n.toUpperCase()+"\n\n"+i+"\n\n"+function(e){const t=e.split("\n");for(let e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join("\n")}(e.getShaderSource(t))}function Bo(e,t){const n=Uo(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Fo(e,t){const n=Uo(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function qo(e,t){let n;switch(t){case K:n="Linear";break;case ee:n="Reinhard";break;case te:n="OptimizedCineon";break;case ne:n="ACESFilmic";break;case re:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Ho(e){return""!==e}function Go(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Vo(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const Wo=/^[ \t]*#include +<([\w\d./]+)>/gm;function jo(e){return e.replace(Wo,Xo)}function Xo(e,t){const n=Gs[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return jo(n)}const Zo=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Yo=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Jo(e){return e.replace(Yo,Qo).replace(Zo,$o)}function $o(e,t,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Qo(0,t,n,r)}function Qo(e,t,n,r){let i="";for(let e=parseInt(t);e<parseInt(n);e++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return i}function Ko(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function el(e,t,n,r){const i=e.getContext(),s=n.defines;let a=n.vertexShader,o=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===h?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===p?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===f&&(t="SHADOWMAP_TYPE_VSM"),t}(n),u=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case se:case ae:t="ENVMAP_TYPE_CUBE";break;case ue:case ce:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),c=function(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case ae:case ce:t="ENVMAP_MODE_REFRACTION"}return t}(n),m=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case Y:t="ENVMAP_BLENDING_MULTIPLY";break;case J:t="ENVMAP_BLENDING_MIX";break;case $:t="ENVMAP_BLENDING_ADD"}return t}(n),d=e.gammaFactor>0?e.gammaFactor:1,g=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ho).join("\n")}(n),v=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(s),y=i.createProgram();let w,b,x=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(w=[v].filter(Ho).join("\n"),w.length>0&&(w+="\n"),b=[g,v].filter(Ho).join("\n"),b.length>0&&(b+="\n")):(w=[Ko(n),"#define SHADER_NAME "+n.shaderName,v,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+d,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularTintMap?"#define USE_SPECULARTINTMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Ho).join("\n"),b=[g,Ko(n),"#define SHADER_NAME "+n.shaderName,v,"#define GAMMA_FACTOR "+d,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+c:"",n.envMap?"#define "+m:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularTintMap?"#define USE_SPECULARTINTMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Q?"#define TONE_MAPPING":"",n.toneMapping!==Q?Gs.tonemapping_pars_fragment:"",n.toneMapping!==Q?qo("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.format===Ue?"#define OPAQUE":"",Gs.encodings_pars_fragment,n.map?Bo("mapTexelToLinear",n.mapEncoding):"",n.matcap?Bo("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?Bo("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?Bo("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.specularTintMap?Bo("specularTintMapTexelToLinear",n.specularTintMapEncoding):"",n.lightMap?Bo("lightMapTexelToLinear",n.lightMapEncoding):"",Fo("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Ho).join("\n")),a=jo(a),a=Go(a,n),a=Vo(a,n),o=jo(o),o=Go(o,n),o=Vo(o,n),a=Jo(a),o=Jo(o),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(x="#version 300 es\n",w=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+w,b=["#define varying in",n.glslVersion===kn?"":"out highp vec4 pc_fragColor;",n.glslVersion===kn?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+b);const M=x+b+o,S=ko(i,35633,x+w+a),_=ko(i,35632,M);if(i.attachShader(y,S),i.attachShader(y,_),void 0!==n.index0AttributeName?i.bindAttribLocation(y,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y),e.debug.checkShaderErrors){const e=i.getProgramInfoLog(y).trim(),t=i.getShaderInfoLog(S).trim(),n=i.getShaderInfoLog(_).trim();let r=!0,s=!0;if(!1===i.getProgramParameter(y,35714)){r=!1;const t=zo(i,S,"vertex"),n=zo(i,_,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(y,35715)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+n)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):""!==t&&""!==n||(s=!1);s&&(this.diagnostics={runnable:r,programLog:e,vertexShader:{log:t,prefix:w},fragmentShader:{log:n,prefix:b}})}let E,T;return i.deleteShader(S),i.deleteShader(_),this.getUniforms=function(){return void 0===E&&(E=new Oo(i,y)),E},this.getAttributes=function(){return void 0===T&&(T=function(e,t){const n={},r=e.getProgramParameter(t,35721);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i),s=r.name;let a=1;35674===r.type&&(a=2),35675===r.type&&(a=3),35676===r.type&&(a=4),n[s]={type:r.type,location:e.getAttribLocation(t,s),locationSize:a}}return n}(i,y)),T},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(y),this.program=void 0},this.name=n.shaderName,this.id=Do++,this.cacheKey=t,this.usedTimes=1,this.program=y,this.vertexShader=S,this.fragmentShader=_,this}function tl(e,t,n,r,i,s,a){const o=[],l=i.isWebGL2,u=i.logarithmicDepthBuffer,c=i.floatVertexTextures,h=i.maxVertexUniforms,p=i.vertexTextures;let f=i.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},v=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","specularIntensityMap","specularTintMap","specularTintMapEncoding","roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","morphTargetsCount","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","sheen","transmission","transmissionMap","thicknessMap"];function y(e){let t;return e&&e.isTexture?t=e.encoding:e&&e.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=Jt,l&&e&&e.isTexture&&e.format===ze&&e.type===_e&&e.encoding===$t&&(t=Jt),t}return{getParameters:function(s,o,v,w,b){const x=w.fog,M=s.isMeshStandardMaterial?w.environment:null,S=(s.isMeshStandardMaterial?n:t).get(s.envMap||M),_=m[s.type],E=b.isSkinnedMesh?function(e){const t=e.skeleton.bones;if(c)return 1024;{const e=h,n=Math.floor((e-20)/4),r=Math.min(n,t.length);return r<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+r+"."),0):r}}(b):0;let T,A;if(null!==s.precision&&(f=i.getMaxPrecision(s.precision),f!==s.precision&&console.warn("THREE.WebGLProgram.getParameters:",s.precision,"not supported, using",f,"instead.")),_){const e=Ws[_];T=e.vertexShader,A=e.fragmentShader}else T=s.vertexShader,A=s.fragmentShader;const L=e.getRenderTarget(),C=s.alphaTest>0,R=s.clearcoat>0;return{isWebGL2:l,shaderID:_,shaderName:s.type,vertexShader:T,fragmentShader:A,defines:s.defines,isRawShaderMaterial:!0===s.isRawShaderMaterial,glslVersion:s.glslVersion,precision:f,instancing:!0===b.isInstancedMesh,instancingColor:!0===b.isInstancedMesh&&null!==b.instanceColor,supportsVertexTextures:p,outputEncoding:null!==L?y(L.texture):e.outputEncoding,map:!!s.map,mapEncoding:y(s.map),matcap:!!s.matcap,matcapEncoding:y(s.matcap),envMap:!!S,envMapMode:S&&S.mapping,envMapEncoding:y(S),envMapCubeUV:!!S&&(S.mapping===ue||S.mapping===ce),lightMap:!!s.lightMap,lightMapEncoding:y(s.lightMap),aoMap:!!s.aoMap,emissiveMap:!!s.emissiveMap,emissiveMapEncoding:y(s.emissiveMap),bumpMap:!!s.bumpMap,normalMap:!!s.normalMap,objectSpaceNormalMap:s.normalMapType===ln,tangentSpaceNormalMap:s.normalMapType===on,clearcoat:R,clearcoatMap:R&&!!s.clearcoatMap,clearcoatRoughnessMap:R&&!!s.clearcoatRoughnessMap,clearcoatNormalMap:R&&!!s.clearcoatNormalMap,displacementMap:!!s.displacementMap,roughnessMap:!!s.roughnessMap,metalnessMap:!!s.metalnessMap,specularMap:!!s.specularMap,specularIntensityMap:!!s.specularIntensityMap,specularTintMap:!!s.specularTintMap,specularTintMapEncoding:y(s.specularTintMap),alphaMap:!!s.alphaMap,alphaTest:C,gradientMap:!!s.gradientMap,sheen:s.sheen>0,transmission:s.transmission>0,transmissionMap:!!s.transmissionMap,thicknessMap:!!s.thicknessMap,combine:s.combine,vertexTangents:!!s.normalMap&&!!b.geometry&&!!b.geometry.attributes.tangent,vertexColors:s.vertexColors,vertexAlphas:!0===s.vertexColors&&!!b.geometry&&!!b.geometry.attributes.color&&4===b.geometry.attributes.color.itemSize,vertexUvs:!!(s.map||s.bumpMap||s.normalMap||s.specularMap||s.alphaMap||s.emissiveMap||s.roughnessMap||s.metalnessMap||s.clearcoatMap||s.clearcoatRoughnessMap||s.clearcoatNormalMap||s.displacementMap||s.transmissionMap||s.thicknessMap||s.specularIntensityMap||s.specularTintMap),uvsVertexOnly:!(s.map||s.bumpMap||s.normalMap||s.specularMap||s.alphaMap||s.emissiveMap||s.roughnessMap||s.metalnessMap||s.clearcoatNormalMap||s.transmission>0||s.transmissionMap||s.thicknessMap||s.specularIntensityMap||s.specularTintMap||!s.displacementMap),fog:!!x,useFog:s.fog,fogExp2:x&&x.isFogExp2,flatShading:!!s.flatShading,sizeAttenuation:s.sizeAttenuation,logarithmicDepthBuffer:u,skinning:!0===b.isSkinnedMesh&&E>0,maxBones:E,useVertexTexture:c,morphTargets:!!b.geometry&&!!b.geometry.morphAttributes.position,morphNormals:!!b.geometry&&!!b.geometry.morphAttributes.normal,morphTargetsCount:b.geometry&&b.geometry.morphAttributes.position?b.geometry.morphAttributes.position.length:0,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,format:s.format,dithering:s.dithering,shadowMapEnabled:e.shadowMap.enabled&&v.length>0,shadowMapType:e.shadowMap.type,toneMapping:s.toneMapped?e.toneMapping:Q,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:s.premultipliedAlpha,doubleSided:s.side===g,flipSided:s.side===d,depthPacking:void 0!==s.depthPacking&&s.depthPacking,index0AttributeName:s.index0AttributeName,extensionDerivatives:s.extensions&&s.extensions.derivatives,extensionFragDepth:s.extensions&&s.extensions.fragDepth,extensionDrawBuffers:s.extensions&&s.extensions.drawBuffers,extensionShaderTextureLOD:s.extensions&&s.extensions.shaderTextureLOD,rendererExtensionFragDepth:l||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:l||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:l||r.has("EXT_shader_texture_lod"),customProgramCacheKey:s.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);if(!1===t.isRawShaderMaterial){for(let e=0;e<v.length;e++)n.push(t[v[e]]);n.push(e.outputEncoding),n.push(e.gammaFactor)}return n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=m[e.type];let n;if(t){const e=Ws[t];n=Es.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let r;for(let e=0,t=o.length;e<t;e++){const t=o[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new el(e,n,t,s),o.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){const t=o.indexOf(e);o[t]=o[o.length-1],o.pop(),e.destroy()}},programs:o}}function nl(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function rl(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function il(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function sl(e){const t=[];let n=0;const r=[],i=[],s=[],a={id:-1};function o(r,i,s,o,l,u){let c=t[n];const h=e.get(s);return void 0===c?(c={id:r.id,object:r,geometry:i,material:s,program:h.program||a,groupOrder:o,renderOrder:r.renderOrder,z:l,group:u},t[n]=c):(c.id=r.id,c.object=r,c.geometry=i,c.material=s,c.program=h.program||a,c.groupOrder=o,c.renderOrder=r.renderOrder,c.z=l,c.group=u),n++,c}return{opaque:r,transmissive:i,transparent:s,init:function(){n=0,r.length=0,i.length=0,s.length=0},push:function(e,t,n,a,l,u){const c=o(e,t,n,a,l,u);n.transmission>0?i.push(c):!0===n.transparent?s.push(c):r.push(c)},unshift:function(e,t,n,a,l,u){const c=o(e,t,n,a,l,u);n.transmission>0?i.unshift(c):!0===n.transparent?s.unshift(c):r.unshift(c)},finish:function(){for(let e=n,r=t.length;e<r;e++){const n=t[e];if(null===n.id)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.program=null,n.group=null}},sort:function(e,t){r.length>1&&r.sort(e||rl),i.length>1&&i.sort(t||il),s.length>1&&s.sort(t||il)}}}function al(e){let t=new WeakMap;return{get:function(n,r){let i;return!1===t.has(n)?(i=new sl(e),t.set(n,[i])):r>=t.get(n).length?(i=new sl(e),t.get(n).push(i)):i=t.get(n)[r],i},dispose:function(){t=new WeakMap}}}function ol(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new pr,color:new Oi};break;case"SpotLight":n={position:new pr,direction:new pr,color:new Oi,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new pr,color:new Oi,distance:0,decay:0};break;case"HemisphereLight":n={direction:new pr,skyColor:new Oi,groundColor:new Oi};break;case"RectAreaLight":n={color:new Oi,position:new pr,halfWidth:new pr,halfHeight:new pr}}return e[t.id]=n,n}}}let ll=0;function ul(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function cl(e,t){const n=new ol,r=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Jn};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Jn,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let e=0;e<9;e++)i.probe.push(new pr);const s=new pr,a=new Gr,o=new Gr;return{setup:function(s,a){let o=0,l=0,u=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let c=0,h=0,p=0,f=0,m=0,d=0,g=0,v=0;s.sort(ul);const y=!0!==a?Math.PI:1;for(let e=0,t=s.length;e<t;e++){const t=s[e],a=t.color,w=t.intensity,b=t.distance,x=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)o+=a.r*w*y,l+=a.g*w*y,u+=a.b*w*y;else if(t.isLightProbe)for(let e=0;e<9;e++)i.probe[e].addScaledVector(t.sh.coefficients[e],w);else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*y),t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.directionalShadow[c]=n,i.directionalShadowMap[c]=x,i.directionalShadowMatrix[c]=t.shadow.matrix,d++}i.directional[c]=e,c++}else if(t.isSpotLight){const e=n.get(t);if(e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(a).multiplyScalar(w*y),e.distance=b,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.spotShadow[p]=n,i.spotShadowMap[p]=x,i.spotShadowMatrix[p]=t.shadow.matrix,v++}i.spot[p]=e,p++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(a).multiplyScalar(w),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),i.rectArea[f]=e,f++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*y),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,i.pointShadow[h]=n,i.pointShadowMap[h]=x,i.pointShadowMatrix[h]=t.shadow.matrix,g++}i.point[h]=e,h++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(w*y),e.groundColor.copy(t.groundColor).multiplyScalar(w*y),i.hemi[m]=e,m++}}f>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=Vs.LTC_FLOAT_1,i.rectAreaLTC2=Vs.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=Vs.LTC_HALF_1,i.rectAreaLTC2=Vs.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=o,i.ambient[1]=l,i.ambient[2]=u;const w=i.hash;w.directionalLength===c&&w.pointLength===h&&w.spotLength===p&&w.rectAreaLength===f&&w.hemiLength===m&&w.numDirectionalShadows===d&&w.numPointShadows===g&&w.numSpotShadows===v||(i.directional.length=c,i.spot.length=p,i.rectArea.length=f,i.point.length=h,i.hemi.length=m,i.directionalShadow.length=d,i.directionalShadowMap.length=d,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=v,i.spotShadowMap.length=v,i.directionalShadowMatrix.length=d,i.pointShadowMatrix.length=g,i.spotShadowMatrix.length=v,w.directionalLength=c,w.pointLength=h,w.spotLength=p,w.rectAreaLength=f,w.hemiLength=m,w.numDirectionalShadows=d,w.numPointShadows=g,w.numSpotShadows=v,i.version=ll++)},setupView:function(e,t){let n=0,r=0,l=0,u=0,c=0;const h=t.matrixWorldInverse;for(let t=0,p=e.length;t<p;t++){const p=e[t];if(p.isDirectionalLight){const e=i.directional[n];e.direction.setFromMatrixPosition(p.matrixWorld),s.setFromMatrixPosition(p.target.matrixWorld),e.direction.sub(s),e.direction.transformDirection(h),n++}else if(p.isSpotLight){const e=i.spot[l];e.position.setFromMatrixPosition(p.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(p.matrixWorld),s.setFromMatrixPosition(p.target.matrixWorld),e.direction.sub(s),e.direction.transformDirection(h),l++}else if(p.isRectAreaLight){const e=i.rectArea[u];e.position.setFromMatrixPosition(p.matrixWorld),e.position.applyMatrix4(h),o.identity(),a.copy(p.matrixWorld),a.premultiply(h),o.extractRotation(a),e.halfWidth.set(.5*p.width,0,0),e.halfHeight.set(0,.5*p.height,0),e.halfWidth.applyMatrix4(o),e.halfHeight.applyMatrix4(o),u++}else if(p.isPointLight){const e=i.point[r];e.position.setFromMatrixPosition(p.matrixWorld),e.position.applyMatrix4(h),r++}else if(p.isHemisphereLight){const e=i.hemi[c];e.direction.setFromMatrixPosition(p.matrixWorld),e.direction.transformDirection(h),e.direction.normalize(),c++}}},state:i}}function hl(e,t){const n=new cl(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function pl(e,t){let n=new WeakMap;return{get:function(r,i=0){let s;return!1===n.has(r)?(s=new hl(e,t),n.set(r,[s])):i>=n.get(r).length?(s=new hl(e,t),n.get(r).push(s)):s=n.get(r)[i],s},dispose:function(){n=new WeakMap}}}class fl extends Ai{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=sn,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}fl.prototype.isMeshDepthMaterial=!0;class ml extends Ai{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new pr,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function dl(e,t,n){let r=new Bs;const i=new Jn,s=new Jn,a=new or,o=new fl({depthPacking:an}),l=new ml,u={},c=n.maxTextureSize,p={0:d,1:m,2:g},v=new Ts({uniforms:{shadow_pass:{value:null},resolution:{value:new Jn},radius:{value:4},samples:{value:8}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\nuniform float samples;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),y=v.clone();y.defines.HORIZONTAL_PASS=1;const b=new ns;b.setAttribute("position",new zi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new bs(b,v),M=this;function S(n,r){const i=t.update(x);v.uniforms.shadow_pass.value=n.map.texture,v.uniforms.resolution.value=n.mapSize,v.uniforms.radius.value=n.radius,v.uniforms.samples.value=n.blurSamples,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,v,x,null),y.uniforms.shadow_pass.value=n.mapPass.texture,y.uniforms.resolution.value=n.mapSize,y.uniforms.radius.value=n.radius,y.uniforms.samples.value=n.blurSamples,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,y,x,null)}function _(t,n,r,i,s,a,c){let h=null;const m=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(h=void 0!==m?m:!0===i.isPointLight?l:o,e.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length||r.displacementMap&&0!==r.displacementScale||r.alphaMap&&r.alphaTest>0){const e=h.uuid,t=r.uuid;let n=u[e];void 0===n&&(n={},u[e]=n);let i=n[t];void 0===i&&(i=h.clone(),n[t]=i),h=i}return h.visible=r.visible,h.wireframe=r.wireframe,h.side=c===f?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:p[r.side],h.alphaMap=r.alphaMap,h.alphaTest=r.alphaTest,h.clipShadows=r.clipShadows,h.clippingPlanes=r.clippingPlanes,h.clipIntersection=r.clipIntersection,h.displacementMap=r.displacementMap,h.displacementScale=r.displacementScale,h.displacementBias=r.displacementBias,h.wireframeLinewidth=r.wireframeLinewidth,h.linewidth=r.linewidth,!0===i.isPointLight&&!0===h.isMeshDistanceMaterial&&(h.referencePosition.setFromMatrixPosition(i.matrixWorld),h.nearDistance=s,h.farDistance=a),h}function E(n,i,s,a,o){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&o===f)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,n.matrixWorld);const r=t.update(n),i=n.material;if(Array.isArray(i)){const t=r.groups;for(let l=0,u=t.length;l<u;l++){const u=t[l],c=i[u.materialIndex];if(c&&c.visible){const t=_(n,0,c,a,s.near,s.far,o);e.renderBufferDirect(s,null,r,t,n,u)}}}else if(i.visible){const t=_(n,0,i,a,s.near,s.far,o);e.renderBufferDirect(s,null,r,t,n,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)E(l[e],i,s,a,o)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=h,this.render=function(t,n,o){if(!1===M.enabled)return;if(!1===M.autoUpdate&&!1===M.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),u=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),p=e.state;p.setBlending(w),p.buffers.color.setClear(1,1,1,1),p.buffers.depth.setTest(!0),p.setScissorTest(!1);for(let l=0,u=t.length;l<u;l++){const u=t[l],h=u.shadow;if(void 0===h){console.warn("THREE.WebGLShadowMap:",u,"has no shadow.");continue}if(!1===h.autoUpdate&&!1===h.needsUpdate)continue;i.copy(h.mapSize);const m=h.getFrameExtents();if(i.multiply(m),s.copy(h.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(s.x=Math.floor(c/m.x),i.x=s.x*m.x,h.mapSize.x=s.x),i.y>c&&(s.y=Math.floor(c/m.y),i.y=s.y*m.y,h.mapSize.y=s.y)),null===h.map&&!h.isPointLightShadow&&this.type===f){const e={minFilter:we,magFilter:we,format:ze};h.map=new lr(i.x,i.y,e),h.map.texture.name=u.name+".shadowMap",h.mapPass=new lr(i.x,i.y,e),h.camera.updateProjectionMatrix()}if(null===h.map){const e={minFilter:me,magFilter:me,format:ze};h.map=new lr(i.x,i.y,e),h.map.texture.name=u.name+".shadowMap",h.camera.updateProjectionMatrix()}e.setRenderTarget(h.map),e.clear();const d=h.getViewportCount();for(let e=0;e<d;e++){const t=h.getViewport(e);a.set(s.x*t.x,s.y*t.y,s.x*t.z,s.y*t.w),p.viewport(a),h.updateMatrices(u,e),r=h.getFrustum(),E(n,o,h.camera,u,this.type)}h.isPointLightShadow||this.type!==f||S(h,o),h.needsUpdate=!1}M.needsUpdate=!1,e.setRenderTarget(l,u,h)}}function gl(e,t,n){const r=n.isWebGL2,i=new function(){let t=!1;const n=new or;let r=null;const i=new or(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,s,a,o){!0===o&&(t*=a,r*=a,s*=a),n.set(t,r,s,a),!1===i.equals(n)&&(e.clearColor(t,r,s,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},s=new function(){let t=!1,n=null,r=null,i=null;return{setTest:function(e){e?ye(2929):we(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case q:e.depthFunc(512);break;case H:e.depthFunc(519);break;case G:e.depthFunc(513);break;case V:e.depthFunc(515);break;case W:e.depthFunc(514);break;case j:e.depthFunc(518);break;case X:e.depthFunc(516);break;case Z:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},u=new function(){let t=!1,n=null,r=null,i=null,s=null,a=null,o=null,l=null,u=null;return{setTest:function(e){t||(e?ye(2960):we(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&s===a||(e.stencilFunc(t,n,a),r=t,i=n,s=a)},setOp:function(t,n,r){a===t&&o===n&&l===r||(e.stencilOp(t,n,r),a=t,o=n,l=r)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,n=null,r=null,i=null,s=null,a=null,o=null,l=null,u=null}}};let c={},h=null,p={},f=null,m=!1,v=null,y=null,Y=null,J=null,$=null,Q=null,K=null,ee=!1,te=null,ne=null,re=null,ie=null,se=null;const ae=e.getParameter(35661);let oe=!1,le=0;const ue=e.getParameter(7938);-1!==ue.indexOf("WebGL")?(le=parseFloat(/^WebGL (\d)/.exec(ue)[1]),oe=le>=1):-1!==ue.indexOf("OpenGL ES")&&(le=parseFloat(/^OpenGL ES (\d)/.exec(ue)[1]),oe=le>=2);let ce=null,he={};const pe=e.getParameter(3088),fe=e.getParameter(2978),me=(new or).fromArray(pe),de=(new or).fromArray(fe);function ge(t,n,r){const i=new Uint8Array(4),s=e.createTexture();e.bindTexture(t,s),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let t=0;t<r;t++)e.texImage2D(n+t,0,6408,1,1,0,6408,5121,i);return s}const ve={};function ye(t){!0!==c[t]&&(e.enable(t),c[t]=!0)}function we(t){!1!==c[t]&&(e.disable(t),c[t]=!1)}ve[3553]=ge(3553,3553,1),ve[34067]=ge(34067,34069,6),i.setClear(0,0,0,1),s.setClear(1),u.setClear(0),ye(2929),s.setFunc(V),Se(!1),_e(o),ye(2884),Me(w);const be={[E]:32774,[T]:32778,[A]:32779};if(r)be[L]=32775,be[C]=32776;else{const e=t.get("EXT_blend_minmax");null!==e&&(be[L]=e.MIN_EXT,be[C]=e.MAX_EXT)}const xe={[R]:0,[N]:1,[P]:768,[O]:770,[F]:776,[z]:774,[D]:772,[I]:769,[k]:771,[B]:775,[U]:773};function Me(t,n,r,i,s,a,o,l){if(t!==w){if(!1===m&&(ye(3042),m=!0),t===_)s=s||n,a=a||r,o=o||i,n===y&&s===$||(e.blendEquationSeparate(be[n],be[s]),y=n,$=s),r===Y&&i===J&&a===Q&&o===K||(e.blendFuncSeparate(xe[r],xe[i],xe[a],xe[o]),Y=r,J=i,Q=a,K=o),v=t,ee=null;else if(t!==v||l!==ee){if(y===E&&$===E||(e.blendEquation(32774),y=E,$=E),l)switch(t){case b:e.blendFuncSeparate(1,771,1,771);break;case x:e.blendFunc(1,1);break;case M:e.blendFuncSeparate(0,0,769,771);break;case S:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case b:e.blendFuncSeparate(770,771,1,771);break;case x:e.blendFunc(770,1);break;case M:e.blendFunc(0,769);break;case S:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}Y=null,J=null,Q=null,K=null,v=t,ee=l}}else!0===m&&(we(3042),m=!1)}function Se(t){te!==t&&(t?e.frontFace(2304):e.frontFace(2305),te=t)}function _e(t){t!==a?(ye(2884),t!==ne&&(t===o?e.cullFace(1029):t===l?e.cullFace(1028):e.cullFace(1032))):we(2884),ne=t}function Ee(t,n,r){t?(ye(32823),ie===n&&se===r||(e.polygonOffset(n,r),ie=n,se=r)):we(32823)}function Te(t){void 0===t&&(t=33984+ae-1),ce!==t&&(e.activeTexture(t),ce=t)}return{buffers:{color:i,depth:s,stencil:u},enable:ye,disable:we,bindFramebuffer:function(t,n){return null===n&&null!==h&&(n=h),p[t]!==n&&(e.bindFramebuffer(t,n),p[t]=n,r&&(36009===t&&(p[36160]=n),36160===t&&(p[36009]=n)),!0)},bindXRFramebuffer:function(t){t!==h&&(e.bindFramebuffer(36160,t),h=t)},useProgram:function(t){return f!==t&&(e.useProgram(t),f=t,!0)},setBlending:Me,setMaterial:function(e,t){e.side===g?we(2884):ye(2884);let n=e.side===d;t&&(n=!n),Se(n),e.blending===b&&!1===e.transparent?Me(w):Me(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),s.setFunc(e.depthFunc),s.setTest(e.depthTest),s.setMask(e.depthWrite),i.setMask(e.colorWrite);const r=e.stencilWrite;u.setTest(r),r&&(u.setMask(e.stencilWriteMask),u.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),u.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),Ee(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?ye(32926):we(32926)},setFlipSided:Se,setCullFace:_e,setLineWidth:function(t){t!==re&&(oe&&e.lineWidth(t),re=t)},setPolygonOffset:Ee,setScissorTest:function(e){e?ye(3089):we(3089)},activeTexture:Te,bindTexture:function(t,n){null===ce&&Te();let r=he[ce];void 0===r&&(r={type:void 0,texture:void 0},he[ce]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||ve[t]),r.type=t,r.texture=n)},unbindTexture:function(){const t=he[ce];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===me.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),me.copy(t))},viewport:function(t){!1===de.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),de.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===r&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),c={},ce=null,he={},h=null,p={},f=null,m=!1,v=null,y=null,Y=null,J=null,$=null,Q=null,K=null,ee=!1,te=null,ne=null,re=null,ie=null,se=null,me.set(0,0,e.canvas.width,e.canvas.height),de.set(0,0,e.canvas.width,e.canvas.height),i.reset(),s.reset(),u.reset()}}}function vl(e,t,n,r,i,s,a){const o=i.isWebGL2,l=i.maxTextures,u=i.maxCubemapSize,c=i.maxTextureSize,h=i.maxSamples,p=new WeakMap;let f,m=!1;try{m="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function d(e,t){return m?new OffscreenCanvas(e,t):tr("canvas")}function g(e,t,n,r){let i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const r=t?Zn:Math.floor,s=r(i*e.width),a=r(i*e.height);void 0===f&&(f=d(s,a));const o=n?d(s,a):f;return o.width=s,o.height=a,o.getContext("2d").drawImage(e,0,0,s,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+s+"x"+a+")."),o}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function v(e){return jn(e.width)&&jn(e.height)}function y(e,t){return e.generateMipmaps&&t&&e.minFilter!==me&&e.minFilter!==we}function w(t,n,i,s,a=1){e.generateMipmap(t),r.get(n).__maxMipLevel=Math.log2(Math.max(i,s,a))}function b(n,r,i,s){if(!1===o)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let a=r;return 6403===r&&(5126===i&&(a=33326),5131===i&&(a=33325),5121===i&&(a=33321)),6407===r&&(5126===i&&(a=34837),5131===i&&(a=34843),5121===i&&(a=32849)),6408===r&&(5126===i&&(a=34836),5131===i&&(a=34842),5121===i&&(a=s===$t?35907:32856)),33325!==a&&33326!==a&&34842!==a&&34836!==a||t.get("EXT_color_buffer_float"),a}function x(e){return e===me||e===de||e===ve?9728:9729}function M(t){const n=t.target;n.removeEventListener("dispose",M),function(t){const n=r.get(t);void 0!==n.__webglInit&&(e.deleteTexture(n.__webglTexture),r.remove(t))}(n),n.isVideoTexture&&p.delete(n),a.memory.textures--}function S(t){const n=t.target;n.removeEventListener("dispose",S),function(t){const n=t.texture,i=r.get(t),s=r.get(n);if(t){if(void 0!==s.__webglTexture&&(e.deleteTexture(s.__webglTexture),a.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++)e.deleteFramebuffer(i.__webglFramebuffer[t]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[t]);else e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer&&e.deleteRenderbuffer(i.__webglColorRenderbuffer),i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer);if(t.isWebGLMultipleRenderTargets)for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);i.__webglTexture&&(e.deleteTexture(i.__webglTexture),a.memory.textures--),r.remove(n[t])}r.remove(n),r.remove(t)}}(n)}let _=0;function E(e,t){const i=r.get(e);if(e.isVideoTexture&&function(e){const t=a.render.frame;p.get(e)!==t&&(p.set(e,t),e.update())}(e),e.version>0&&i.__version!==e.version){const n=e.image;if(void 0===n)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==n.complete)return void N(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,i.__webglTexture)}function T(t,i){const a=r.get(t);t.version>0&&a.__version!==t.version?function(t,r,i){if(6!==r.image.length)return;R(t,r),n.activeTexture(33984+i),n.bindTexture(34067,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);const a=r&&(r.isCompressedTexture||r.image[0].isCompressedTexture),l=r.image[0]&&r.image[0].isDataTexture,c=[];for(let e=0;e<6;e++)c[e]=a||l?l?r.image[e].image:r.image[e]:g(r.image[e],!1,!0,u);const h=c[0],p=v(h)||o,f=s.convert(r.format),m=s.convert(r.type),d=b(r.internalFormat,f,m,r.encoding);let x;if(C(34067,r,p),a){for(let e=0;e<6;e++){x=c[e].mipmaps;for(let t=0;t<x.length;t++){const i=x[t];r.format!==ze&&r.format!==Ue?null!==f?n.compressedTexImage2D(34069+e,t,d,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+e,t,d,i.width,i.height,0,f,m,i.data)}}t.__maxMipLevel=x.length-1}else{x=r.mipmaps;for(let e=0;e<6;e++)if(l){n.texImage2D(34069+e,0,d,c[e].width,c[e].height,0,f,m,c[e].data);for(let t=0;t<x.length;t++){const r=x[t].image[e].image;n.texImage2D(34069+e,t+1,d,r.width,r.height,0,f,m,r.data)}}else{n.texImage2D(34069+e,0,d,f,m,c[e]);for(let t=0;t<x.length;t++){const r=x[t];n.texImage2D(34069+e,t+1,d,f,m,r.image[e])}}t.__maxMipLevel=x.length}y(r,p)&&w(34067,r,h.width,h.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}(a,t,i):(n.activeTexture(33984+i),n.bindTexture(34067,a.__webglTexture))}const A={[he]:10497,[pe]:33071,[fe]:33648},L={[me]:9728,[de]:9984,[ve]:9986,[we]:9729,[be]:9985,[Me]:9987};function C(n,s,a){if(a?(e.texParameteri(n,10242,A[s.wrapS]),e.texParameteri(n,10243,A[s.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,A[s.wrapR]),e.texParameteri(n,10240,L[s.magFilter]),e.texParameteri(n,10241,L[s.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),s.wrapS===pe&&s.wrapT===pe||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,x(s.magFilter)),e.texParameteri(n,10241,x(s.minFilter)),s.minFilter!==me&&s.minFilter!==we&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const a=t.get("EXT_texture_filter_anisotropic");if(s.type===Re&&!1===t.has("OES_texture_float_linear"))return;if(!1===o&&s.type===Ne&&!1===t.has("OES_texture_half_float_linear"))return;(s.anisotropy>1||r.get(s).__currentAnisotropy)&&(e.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,i.getMaxAnisotropy())),r.get(s).__currentAnisotropy=s.anisotropy)}}function R(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",M),t.__webglTexture=e.createTexture(),a.memory.textures++)}function N(t,r,i){let a=3553;r.isDataTexture2DArray&&(a=35866),r.isDataTexture3D&&(a=32879),R(t,r),n.activeTexture(33984+i),n.bindTexture(a,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);const l=function(e){return!o&&(e.wrapS!==pe||e.wrapT!==pe||e.minFilter!==me&&e.minFilter!==we)}(r)&&!1===v(r.image),u=g(r.image,l,!1,c),h=v(u)||o,p=s.convert(r.format);let f,m=s.convert(r.type),d=b(r.internalFormat,p,m,r.encoding);C(a,r,h);const x=r.mipmaps;if(r.isDepthTexture)d=6402,o?d=r.type===Re?36012:r.type===Ce?33190:r.type===ke?35056:33189:r.type===Re&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===He&&6402===d&&r.type!==Ae&&r.type!==Ce&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=Ae,m=s.convert(r.type)),r.format===Ge&&6402===d&&(d=34041,r.type!==ke&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=ke,m=s.convert(r.type))),n.texImage2D(3553,0,d,u.width,u.height,0,p,m,null);else if(r.isDataTexture)if(x.length>0&&h){for(let e=0,t=x.length;e<t;e++)f=x[e],n.texImage2D(3553,e,d,f.width,f.height,0,p,m,f.data);r.generateMipmaps=!1,t.__maxMipLevel=x.length-1}else n.texImage2D(3553,0,d,u.width,u.height,0,p,m,u.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(let e=0,t=x.length;e<t;e++)f=x[e],r.format!==ze&&r.format!==Ue?null!==p?n.compressedTexImage2D(3553,e,d,f.width,f.height,0,f.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,e,d,f.width,f.height,0,p,m,f.data);t.__maxMipLevel=x.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,d,u.width,u.height,u.depth,0,p,m,u.data),t.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,d,u.width,u.height,u.depth,0,p,m,u.data),t.__maxMipLevel=0;else if(x.length>0&&h){for(let e=0,t=x.length;e<t;e++)f=x[e],n.texImage2D(3553,e,d,p,m,f);r.generateMipmaps=!1,t.__maxMipLevel=x.length-1}else n.texImage2D(3553,0,d,p,m,u),t.__maxMipLevel=0;y(r,h)&&w(a,r,u.width,u.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function P(t,i,a,o,l){const u=s.convert(a.format),c=s.convert(a.type),h=b(a.internalFormat,u,c,a.encoding);32879===l||35866===l?n.texImage3D(l,0,h,i.width,i.height,i.depth,0,u,c,null):n.texImage2D(l,0,h,i.width,i.height,0,u,c,null),n.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,o,l,r.get(a).__webglTexture,0),n.bindFramebuffer(36160,null)}function I(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){let i=33189;if(r){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===Re?i=36012:t.type===Ce&&(i=33190));const r=O(n);e.renderbufferStorageMultisample(36161,r,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){if(r){const t=O(n);e.renderbufferStorageMultisample(36161,t,35056,n.width,n.height)}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture[0]:n.texture,i=s.convert(t.format),a=s.convert(t.type),o=b(t.internalFormat,i,a,t.encoding);if(r){const t=O(n);e.renderbufferStorageMultisample(36161,t,o,n.width,n.height)}else e.renderbufferStorage(36161,o,n.width,n.height)}e.bindRenderbuffer(36161,null)}function O(e){return o&&e.isWebGLMultisampleRenderTarget?Math.min(h,e.samples):0}let k=!1,D=!1;this.allocateTextureUnit=function(){const e=_;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),_+=1,e},this.resetTextureUnits=function(){_=0},this.setTexture2D=E,this.setTexture2DArray=function(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?N(i,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(e,t){const i=r.get(e);e.version>0&&i.__version!==e.version?N(i,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=T,this.setupRenderTarget=function(t){const l=t.texture,u=r.get(t),c=r.get(l);t.addEventListener("dispose",S),!0!==t.isWebGLMultipleRenderTargets&&(c.__webglTexture=e.createTexture(),c.__version=l.version,a.memory.textures++);const h=!0===t.isWebGLCubeRenderTarget,p=!0===t.isWebGLMultipleRenderTargets,f=!0===t.isWebGLMultisampleRenderTarget,m=l.isDataTexture3D||l.isDataTexture2DArray,d=v(t)||o;if(!o||l.format!==Ue||l.type!==Re&&l.type!==Ne||(l.format=ze,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),h){u.__webglFramebuffer=[];for(let t=0;t<6;t++)u.__webglFramebuffer[t]=e.createFramebuffer()}else if(u.__webglFramebuffer=e.createFramebuffer(),p)if(i.drawBuffers){const n=t.texture;for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);void 0===i.__webglTexture&&(i.__webglTexture=e.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(f)if(o){u.__webglMultisampledFramebuffer=e.createFramebuffer(),u.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,u.__webglColorRenderbuffer);const r=s.convert(l.format),i=s.convert(l.type),a=b(l.internalFormat,r,i,l.encoding),o=O(t);e.renderbufferStorageMultisample(36161,o,a,t.width,t.height),n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,u.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(u.__webglDepthRenderbuffer=e.createRenderbuffer(),I(u.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(h){n.bindTexture(34067,c.__webglTexture),C(34067,l,d);for(let e=0;e<6;e++)P(u.__webglFramebuffer[e],t,l,36064,34069+e);y(l,d)&&w(34067,l,t.width,t.height),n.unbindTexture()}else if(p){const e=t.texture;for(let i=0,s=e.length;i<s;i++){const s=e[i],a=r.get(s);n.bindTexture(3553,a.__webglTexture),C(3553,s,d),P(u.__webglFramebuffer,t,s,36064+i,3553),y(s,d)&&w(3553,s,t.width,t.height)}n.unbindTexture()}else{let e=3553;m&&(o?e=l.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),n.bindTexture(e,c.__webglTexture),C(e,l,d),P(u.__webglFramebuffer,t,l,36064,e),y(l,d)&&w(e,l,t.width,t.height,t.depth),n.unbindTexture()}t.depthBuffer&&function(t){const i=r.get(t),s=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(s)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),E(i.depthTexture,0);const s=r.get(i.depthTexture).__webglTexture;if(i.depthTexture.format===He)e.framebufferTexture2D(36160,36096,3553,s,0);else{if(i.depthTexture.format!==Ge)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,s,0)}}(i.__webglFramebuffer,t)}else if(s){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(36160,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=e.createRenderbuffer(),I(i.__webglDepthbuffer[r],t,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),I(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}(t)},this.updateRenderTargetMipmap=function(e){const t=v(e)||o,i=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let s=0,a=i.length;s<a;s++){const a=i[s];if(y(a,t)){const t=e.isWebGLCubeRenderTarget?34067:3553,i=r.get(a).__webglTexture;n.bindTexture(t,i),w(t,a,e.width,e.height),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(o){const i=t.width,s=t.height;let a=16384;t.depthBuffer&&(a|=256),t.stencilBuffer&&(a|=1024);const o=r.get(t);n.bindFramebuffer(36008,o.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,o.__webglFramebuffer),e.blitFramebuffer(0,0,i,s,0,0,i,s,a,9728),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,o.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===k&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),k=!0),e=e.texture),E(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===D&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),D=!0),e=e.texture),T(e,t)}}function yl(e,t,n){const r=n.isWebGL2;return{convert:function(e){let n;if(e===_e)return 5121;if(e===Pe)return 32819;if(e===Ie)return 32820;if(e===Oe)return 33635;if(e===Ee)return 5120;if(e===Te)return 5122;if(e===Ae)return 5123;if(e===Le)return 5124;if(e===Ce)return 5125;if(e===Re)return 5126;if(e===Ne)return r?5131:(n=t.get("OES_texture_half_float"),null!==n?n.HALF_FLOAT_OES:null);if(e===De)return 6406;if(e===Ue)return 6407;if(e===ze)return 6408;if(e===Be)return 6409;if(e===Fe)return 6410;if(e===He)return 6402;if(e===Ge)return 34041;if(e===Ve)return 6403;if(e===We)return 36244;if(e===je)return 33319;if(e===Xe)return 33320;if(e===Ze)return 36248;if(e===Ye)return 36249;if(e===Je||e===$e||e===Qe||e===Ke){if(n=t.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(e===Je)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===$e)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===Qe)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===Ke)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===et||e===tt||e===nt||e===rt){if(n=t.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(e===et)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===tt)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===nt)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===rt)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===it)return n=t.get("WEBGL_compressed_texture_etc1"),null!==n?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((e===st||e===at)&&(n=t.get("WEBGL_compressed_texture_etc"),null!==n)){if(e===st)return n.COMPRESSED_RGB8_ETC2;if(e===at)return n.COMPRESSED_RGBA8_ETC2_EAC}return e===ot||e===lt||e===ut||e===ct||e===ht||e===pt||e===ft||e===mt||e===dt||e===gt||e===vt||e===yt||e===wt||e===bt||e===Mt||e===St||e===_t||e===Et||e===Tt||e===At||e===Lt||e===Ct||e===Rt||e===Nt||e===Pt||e===It||e===Ot||e===kt?(n=t.get("WEBGL_compressed_texture_astc"),null!==n?e:null):e===xt?(n=t.get("EXT_texture_compression_bptc"),null!==n?e:null):e===ke?r?34042:(n=t.get("WEBGL_depth_texture"),null!==n?n.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}ml.prototype.isMeshDistanceMaterial=!0;class wl extends Ls{constructor(e=[]){super(),this.cameras=e}}wl.prototype.isArrayCamera=!0;class bl extends mi{constructor(){super(),this.type="Group"}}bl.prototype.isGroup=!0;const xl={type:"move"};class Ml{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new bl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new bl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new pr,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new pr),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new bl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new pr,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new pr),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,s=null;const a=this._targetRay,o=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==a&&(r=t.getPose(e.targetRaySpace,n),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(xl))),l&&e.hand){s=!0;for(const r of e.hand.values()){const e=t.getJointPose(r,n);if(void 0===l.joints[r.jointName]){const e=new bl;e.matrixAutoUpdate=!1,e.visible=!1,l.joints[r.jointName]=e,l.add(e)}const i=l.joints[r.jointName];null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.jointRadius=e.radius),i.visible=null!==e}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],a=r.position.distanceTo(i.position),o=.02,u=.005;l.inputState.pinching&&a>o+u?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&a<=o-u&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==o&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1));return null!==a&&(a.visible=null!==r),null!==o&&(o.visible=null!==i),null!==l&&(l.visible=null!==s),this}}class Sl extends Dn{constructor(e,t){super();const n=this,r=e.state;let i=null,s=1,a=null,o="local-floor",l=null,u=null,c=null,h=null,p=null,f=!1,m=null,d=null,g=null,v=null,y=null,w=null;const b=[],x=new Map,M=new Ls;M.layers.enable(1),M.viewport=new or;const S=new Ls;S.layers.enable(2),S.viewport=new or;const _=[M,S],E=new wl;E.layers.enable(1),E.layers.enable(2);let T=null,A=null;function L(e){const t=x.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function C(){x.forEach((function(e,t){e.disconnect(t)})),x.clear(),T=null,A=null,r.bindXRFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),c&&t.deleteFramebuffer(c),m&&t.deleteFramebuffer(m),d&&t.deleteRenderbuffer(d),g&&t.deleteRenderbuffer(g),c=null,m=null,d=null,g=null,p=null,h=null,u=null,i=null,k.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function R(e){const t=i.inputSources;for(let e=0;e<b.length;e++)x.set(t[e],b[e]);for(let t=0;t<e.removed.length;t++){const n=e.removed[t],r=x.get(n);r&&(r.dispatchEvent({type:"disconnected",data:n}),x.delete(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t],r=x.get(n);r&&r.dispatchEvent({type:"connected",data:n})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=b[e];return void 0===t&&(t=new Ml,b[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=b[e];return void 0===t&&(t=new Ml,b[e]=t),t.getGripSpace()},this.getHand=function(e){let t=b[e];return void 0===t&&(t=new Ml,b[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){s=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){o=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a},this.getBaseLayer=function(){return null!==h?h:p},this.getBinding=function(){return u},this.getFrame=function(){return v},this.getSession=function(){return i},this.setSession=async function(e){if(i=e,null!==i){i.addEventListener("select",L),i.addEventListener("selectstart",L),i.addEventListener("selectend",L),i.addEventListener("squeeze",L),i.addEventListener("squeezestart",L),i.addEventListener("squeezeend",L),i.addEventListener("end",C),i.addEventListener("inputsourceschange",R);const e=t.getContextAttributes();if(!0!==e.xrCompatible&&await t.makeXRCompatible(),void 0===i.renderState.layers){const n={antialias:e.antialias,alpha:e.alpha,depth:e.depth,stencil:e.stencil,framebufferScaleFactor:s};p=new XRWebGLLayer(i,t,n),i.updateRenderState({baseLayer:p})}else if(t instanceof WebGLRenderingContext){const n={antialias:!0,alpha:e.alpha,depth:e.depth,stencil:e.stencil,framebufferScaleFactor:s};p=new XRWebGLLayer(i,t,n),i.updateRenderState({layers:[p]})}else{f=e.antialias;let n=null;e.depth&&(w=256,e.stencil&&(w|=1024),y=e.stencil?33306:36096,n=e.stencil?35056:33190);const a={colorFormat:e.alpha?32856:32849,depthFormat:n,scaleFactor:s};u=new XRWebGLBinding(i,t),h=u.createProjectionLayer(a),c=t.createFramebuffer(),i.updateRenderState({layers:[h]}),f&&(m=t.createFramebuffer(),d=t.createRenderbuffer(),t.bindRenderbuffer(36161,d),t.renderbufferStorageMultisample(36161,4,32856,h.textureWidth,h.textureHeight),r.bindFramebuffer(36160,m),t.framebufferRenderbuffer(36160,36064,36161,d),t.bindRenderbuffer(36161,null),null!==n&&(g=t.createRenderbuffer(),t.bindRenderbuffer(36161,g),t.renderbufferStorageMultisample(36161,4,n,h.textureWidth,h.textureHeight),t.framebufferRenderbuffer(36160,y,36161,g),t.bindRenderbuffer(36161,null)),r.bindFramebuffer(36160,null))}a=await i.requestReferenceSpace(o),k.setContext(i),k.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const N=new pr,P=new pr;function I(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===i)return;E.near=S.near=M.near=e.near,E.far=S.far=M.far=e.far,T===E.near&&A===E.far||(i.updateRenderState({depthNear:E.near,depthFar:E.far}),T=E.near,A=E.far);const t=e.parent,n=E.cameras;I(E,t);for(let e=0;e<n.length;e++)I(n[e],t);E.matrixWorld.decompose(E.position,E.quaternion,E.scale),e.position.copy(E.position),e.quaternion.copy(E.quaternion),e.scale.copy(E.scale),e.matrix.copy(E.matrix),e.matrixWorld.copy(E.matrixWorld);const r=e.children;for(let e=0,t=r.length;e<t;e++)r[e].updateMatrixWorld(!0);2===n.length?function(e,t,n){N.setFromMatrixPosition(t.matrixWorld),P.setFromMatrixPosition(n.matrixWorld);const r=N.distanceTo(P),i=t.projectionMatrix.elements,s=n.projectionMatrix.elements,a=i[14]/(i[10]-1),o=i[14]/(i[10]+1),l=(i[9]+1)/i[5],u=(i[9]-1)/i[5],c=(i[8]-1)/i[0],h=(s[8]+1)/s[0],p=a*c,f=a*h,m=r/(-c+h),d=m*-c;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(d),e.translateZ(m),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=a+m,v=o+m,y=p-d,w=f+(r-d),b=l*o/v*g,x=u*o/v*g;e.projectionMatrix.makePerspective(y,w,b,x,g,v)}(E,M,S):E.projectionMatrix.copy(M.projectionMatrix)},this.getCamera=function(){return E},this.getFoveation=function(){return null!==h?h.fixedFoveation:null!==p?p.fixedFoveation:void 0},this.setFoveation=function(e){null!==h&&(h.fixedFoveation=e),null!==p&&void 0!==p.fixedFoveation&&(p.fixedFoveation=e)};let O=null;const k=new Fs;k.setAnimationLoop((function(e,n){if(l=n.getViewerPose(a),v=n,null!==l){const e=l.views;null!==p&&r.bindXRFramebuffer(p.framebuffer);let n=!1;e.length!==E.cameras.length&&(E.cameras.length=0,n=!0);for(let i=0;i<e.length;i++){const s=e[i];let a=null;if(null!==p)a=p.getViewport(s);else{const e=u.getViewSubImage(h,s);r.bindXRFramebuffer(c),void 0!==e.depthStencilTexture&&t.framebufferTexture2D(36160,y,3553,e.depthStencilTexture,0),t.framebufferTexture2D(36160,36064,3553,e.colorTexture,0),a=e.viewport}const o=_[i];o.matrix.fromArray(s.transform.matrix),o.projectionMatrix.fromArray(s.projectionMatrix),o.viewport.set(a.x,a.y,a.width,a.height),0===i&&E.matrix.copy(o.matrix),!0===n&&E.cameras.push(o)}f&&(r.bindXRFramebuffer(m),null!==w&&t.clear(w))}const s=i.inputSources;for(let e=0;e<b.length;e++){const t=b[e],r=s[e];t.update(r,n,a)}if(O&&O(e,n),f){const e=h.textureWidth,n=h.textureHeight;r.bindFramebuffer(36008,m),r.bindFramebuffer(36009,c),t.invalidateFramebuffer(36008,[y]),t.invalidateFramebuffer(36009,[y]),t.blitFramebuffer(0,0,e,n,0,0,e,n,16384,9728),t.invalidateFramebuffer(36008,[36064]),r.bindFramebuffer(36008,null),r.bindFramebuffer(36009,null),r.bindFramebuffer(36160,m)}v=null})),this.setAnimationLoop=function(e){O=e},this.dispose=function(){}}}function _l(e){function t(t,n){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map),n.alphaMap&&(t.alphaMap.value=n.alphaMap),n.specularMap&&(t.specularMap.value=n.specularMap),n.alphaTest>0&&(t.alphaTest.value=n.alphaTest);const r=e.get(n).envMap;if(r){t.envMap.value=r,t.flipEnvMap.value=r.isCubeTexture&&!1===r.isRenderTargetTexture?-1:1,t.reflectivity.value=n.reflectivity,t.ior.value=n.ior,t.refractionRatio.value=n.refractionRatio;const i=e.get(r).__maxMipLevel;void 0!==i&&(t.maxMipLevel.value=i)}let i,s;n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity),n.map?i=n.map:n.specularMap?i=n.specularMap:n.displacementMap?i=n.displacementMap:n.normalMap?i=n.normalMap:n.bumpMap?i=n.bumpMap:n.roughnessMap?i=n.roughnessMap:n.metalnessMap?i=n.metalnessMap:n.alphaMap?i=n.alphaMap:n.emissiveMap?i=n.emissiveMap:n.clearcoatMap?i=n.clearcoatMap:n.clearcoatNormalMap?i=n.clearcoatNormalMap:n.clearcoatRoughnessMap?i=n.clearcoatRoughnessMap:n.specularIntensityMap?i=n.specularIntensityMap:n.specularTintMap?i=n.specularTintMap:n.transmissionMap?i=n.transmissionMap:n.thicknessMap&&(i=n.thicknessMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix)),n.aoMap?s=n.aoMap:n.lightMap&&(s=n.lightMap),void 0!==s&&(s.isWebGLRenderTarget&&(s=s.texture),!0===s.matrixAutoUpdate&&s.updateMatrix(),t.uv2Transform.value.copy(s.matrix))}function n(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(t.emissiveMap.value=n.emissiveMap),n.bumpMap&&(t.bumpMap.value=n.bumpMap,t.bumpScale.value=n.bumpScale,n.side===d&&(t.bumpScale.value*=-1)),n.normalMap&&(t.normalMap.value=n.normalMap,t.normalScale.value.copy(n.normalScale),n.side===d&&t.normalScale.value.negate()),n.displacementMap&&(t.displacementMap.value=n.displacementMap,t.displacementScale.value=n.displacementScale,t.displacementBias.value=n.displacementBias),e.get(n).envMap&&(t.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,r,i,s,a){r.isMeshBasicMaterial?t(e,r):r.isMeshLambertMaterial?(t(e,r),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,r)):r.isMeshToonMaterial?(t(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===d&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===d&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshPhongMaterial?(t(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===d&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===d&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshStandardMaterial?(t(e,r),r.isMeshPhysicalMaterial?function(e,t,r){n(e,t),e.ior.value=t.ior,t.sheen>0&&(e.sheenTint.value.copy(t.sheenTint).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness),t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===d&&e.clearcoatNormalScale.value.negate())),t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationTint.value.copy(t.attenuationTint)),e.specularIntensity.value=t.specularIntensity,e.specularTint.value.copy(t.specularTint),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap),t.specularTintMap&&(e.specularTintMap.value=t.specularTintMap)}(e,r,a):n(e,r)):r.isMeshMatcapMaterial?(t(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===d&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===d&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDepthMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDistanceMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?(t(e,r),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===d&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===d&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){let i;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?i=t.map:t.alphaMap&&(i=t.alphaMap),void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,r,i,s):r.isSpriteMaterial?function(e,t){let n;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?n=t.map:t.alphaMap&&(n=t.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function El(e={}){const t=void 0!==e.canvas?e.canvas:function(){const e=tr("canvas");return e.style.display="block",e}(),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,s=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,o=void 0===e.premultipliedAlpha||e.premultipliedAlpha,l=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,u=void 0!==e.powerPreference?e.powerPreference:"default",c=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let h=null,p=null;const f=[],v=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Jt,this.physicallyCorrectLights=!1,this.toneMapping=Q,this.toneMappingExposure=1;const y=this;let w=!1,b=0,x=0,M=null,S=-1,_=null;const E=new or,T=new or;let A=null,L=t.width,C=t.height,R=1,N=null,P=null;const I=new or(0,0,L,C),O=new or(0,0,L,C);let k=!1;const D=[],U=new Bs;let z=!1,B=!1,F=null;const q=new Gr,H=new pr,G={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function V(){return null===M?R:1}let W,j,X,Z,Y,J,$,K,ee,te,ne,re,ie,se,ae,oe,le,ue,ce,he,fe,de,ge,ve=n;function ye(e,n){for(let r=0;r<e.length;r++){const i=e[r],s=t.getContext(i,n);if(null!==s)return s}return null}try{const e={alpha:r,depth:i,stencil:s,antialias:a,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:c};if(t.addEventListener("webglcontextlost",xe,!1),t.addEventListener("webglcontextrestored",Se,!1),null===ve){const t=["webgl2","webgl","experimental-webgl"];if(!0===y.isWebGL1Renderer&&t.shift(),ve=ye(t,e),null===ve)throw ye(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ve.getShaderPrecisionFormat&&(ve.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function we(){W=new xa(ve),j=new Ys(ve,W,e),W.init(j),de=new yl(ve,W,j),X=new gl(ve,W,j),D[0]=1029,Z=new _a(ve),Y=new nl,J=new vl(ve,W,X,Y,j,de,Z),$=new $s(y),K=new ba(y),ee=new qs(ve,j),ge=new Xs(ve,W,ee,j),te=new Ma(ve,ee,Z,ge),ne=new Ra(ve,te,ee,Z),ce=new Ca(ve,j,J),oe=new Js(Y),re=new tl(y,$,K,W,j,ge,oe),ie=new _l(Y),se=new al(Y),ae=new pl(W,j),ue=new js(y,$,X,ne,o),le=new dl(y,ne,j),he=new Zs(ve,W,Z,j),fe=new Sa(ve,W,Z,j),Z.programs=re.programs,y.capabilities=j,y.extensions=W,y.properties=Y,y.renderLists=se,y.shadowMap=le,y.state=X,y.info=Z}we();const be=new Sl(y,ve);function xe(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function Se(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const e=Z.autoReset,t=le.enabled,n=le.autoUpdate,r=le.needsUpdate,i=le.type;we(),Z.autoReset=e,le.enabled=t,le.autoUpdate=n,le.needsUpdate=r,le.type=i}function Ee(e){const t=e.target;t.removeEventListener("dispose",Ee),function(e){(function(e){const t=Y.get(e).programs;void 0!==t&&t.forEach((function(e){re.releaseProgram(e)}))})(e),Y.remove(e)}(t)}this.xr=be,this.getContext=function(){return ve},this.getContextAttributes=function(){return ve.getContextAttributes()},this.forceContextLoss=function(){const e=W.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=W.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return R},this.setPixelRatio=function(e){void 0!==e&&(R=e,this.setSize(L,C,!1))},this.getSize=function(e){return e.set(L,C)},this.setSize=function(e,n,r){be.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(L=e,C=n,t.width=Math.floor(e*R),t.height=Math.floor(n*R),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(L*R,C*R).floor()},this.setDrawingBufferSize=function(e,n,r){L=e,C=n,R=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(E)},this.getViewport=function(e){return e.copy(I)},this.setViewport=function(e,t,n,r){e.isVector4?I.set(e.x,e.y,e.z,e.w):I.set(e,t,n,r),X.viewport(E.copy(I).multiplyScalar(R).floor())},this.getScissor=function(e){return e.copy(O)},this.setScissor=function(e,t,n,r){e.isVector4?O.set(e.x,e.y,e.z,e.w):O.set(e,t,n,r),X.scissor(T.copy(O).multiplyScalar(R).floor())},this.getScissorTest=function(){return k},this.setScissorTest=function(e){X.setScissorTest(k=e)},this.setOpaqueSort=function(e){N=e},this.setTransparentSort=function(e){P=e},this.getClearColor=function(e){return e.copy(ue.getClearColor())},this.setClearColor=function(){ue.setClearColor.apply(ue,arguments)},this.getClearAlpha=function(){return ue.getClearAlpha()},this.setClearAlpha=function(){ue.setClearAlpha.apply(ue,arguments)},this.clear=function(e,t,n){let r=0;(void 0===e||e)&&(r|=16384),(void 0===t||t)&&(r|=256),(void 0===n||n)&&(r|=1024),ve.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",xe,!1),t.removeEventListener("webglcontextrestored",Se,!1),se.dispose(),ae.dispose(),Y.dispose(),$.dispose(),K.dispose(),ne.dispose(),ge.dispose(),be.dispose(),be.removeEventListener("sessionstart",Ae),be.removeEventListener("sessionend",Le),F&&(F.dispose(),F=null),Ce.stop()},this.renderBufferImmediate=function(e,t){ge.initAttributes();const n=Y.get(e);e.hasPositions&&!n.position&&(n.position=ve.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=ve.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=ve.createBuffer()),e.hasColors&&!n.color&&(n.color=ve.createBuffer());const r=t.getAttributes();e.hasPositions&&(ve.bindBuffer(34962,n.position),ve.bufferData(34962,e.positionArray,35048),ge.enableAttribute(r.position.location),ve.vertexAttribPointer(r.position.location,3,5126,!1,0,0)),e.hasNormals&&(ve.bindBuffer(34962,n.normal),ve.bufferData(34962,e.normalArray,35048),ge.enableAttribute(r.normal.location),ve.vertexAttribPointer(r.normal.location,3,5126,!1,0,0)),e.hasUvs&&(ve.bindBuffer(34962,n.uv),ve.bufferData(34962,e.uvArray,35048),ge.enableAttribute(r.uv.location),ve.vertexAttribPointer(r.uv.location,2,5126,!1,0,0)),e.hasColors&&(ve.bindBuffer(34962,n.color),ve.bufferData(34962,e.colorArray,35048),ge.enableAttribute(r.color.location),ve.vertexAttribPointer(r.color.location,3,5126,!1,0,0)),ge.disableUnusedAttributes(),ve.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,i,s){null===t&&(t=G);const a=i.isMesh&&i.matrixWorld.determinant()<0,o=Be(e,t,n,r,i);X.setMaterial(r,a);let l=n.index;const u=n.attributes.position;if(null===l){if(void 0===u||0===u.count)return}else if(0===l.count)return;let c,h=1;!0===r.wireframe&&(l=te.getWireframeAttribute(n),h=2),ge.setup(i,r,o,n,l);let p=he;null!==l&&(c=ee.get(l),p=fe,p.setIndex(c));const f=null!==l?l.count:u.count,m=n.drawRange.start*h,d=n.drawRange.count*h,g=null!==s?s.start*h:0,v=null!==s?s.count*h:1/0,y=Math.max(m,g),w=Math.min(f,m+d,g+v)-1,b=Math.max(0,w-y+1);if(0!==b){if(i.isMesh)!0===r.wireframe?(X.setLineWidth(r.wireframeLinewidth*V()),p.setMode(1)):p.setMode(4);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),X.setLineWidth(e*V()),i.isLineSegments?p.setMode(1):i.isLineLoop?p.setMode(2):p.setMode(3)}else i.isPoints?p.setMode(0):i.isSprite&&p.setMode(4);if(i.isInstancedMesh)p.renderInstances(y,b,i.count);else if(n.isInstancedBufferGeometry){const e=Math.min(n.instanceCount,n._maxInstanceCount);p.renderInstances(y,b,e)}else p.render(y,b)}},this.compile=function(e,t){p=ae.get(e),p.init(),v.push(p),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(p.pushLight(e),e.castShadow&&p.pushShadow(e))})),p.setupLights(y.physicallyCorrectLights),e.traverse((function(t){const n=t.material;if(n)if(Array.isArray(n))for(let r=0;r<n.length;r++)De(n[r],e,t);else De(n,e,t)})),v.pop(),p=null};let Te=null;function Ae(){Ce.stop()}function Le(){Ce.start()}const Ce=new Fs;function Pe(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)p.pushLight(e),e.castShadow&&p.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||U.intersectsSprite(e)){r&&H.setFromMatrixPosition(e.matrixWorld).applyMatrix4(q);const t=ne.update(e),i=e.material;i.visible&&h.push(e,t,i,n,H.z,null)}}else if(e.isImmediateRenderObject)r&&H.setFromMatrixPosition(e.matrixWorld).applyMatrix4(q),h.push(e,null,e.material,n,H.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==Z.render.frame&&(e.skeleton.update(),e.skeleton.frame=Z.render.frame),!e.frustumCulled||U.intersectsObject(e))){r&&H.setFromMatrixPosition(e.matrixWorld).applyMatrix4(q);const t=ne.update(e),i=e.material;if(Array.isArray(i)){const r=t.groups;for(let s=0,a=r.length;s<a;s++){const a=r[s],o=i[a.materialIndex];o&&o.visible&&h.push(e,t,o,n,H.z,a)}}else i.visible&&h.push(e,t,i,n,H.z,null)}const i=e.children;for(let e=0,s=i.length;e<s;e++)Pe(i[e],t,n,r)}function Ie(e,t,n,r){const i=e.opaque,s=e.transmissive,o=e.transparent;p.setupLightsView(n),s.length>0&&function(e,t,n){if(null===F){const e=!0===a&&!0===j.isWebGL2;F=new(e?cr:lr)(1024,1024,{generateMipmaps:!0,type:null!==de.convert(Ne)?Ne:_e,minFilter:Me,magFilter:me,wrapS:pe,wrapT:pe})}const r=y.getRenderTarget();y.setRenderTarget(F),y.clear();const i=y.toneMapping;y.toneMapping=Q,Oe(e,t,n),y.toneMapping=i,J.updateMultisampleRenderTarget(F),J.updateRenderTargetMipmap(F),y.setRenderTarget(r)}(i,t,n),r&&X.viewport(E.copy(r)),i.length>0&&Oe(i,t,n),s.length>0&&Oe(s,t,n),o.length>0&&Oe(o,t,n)}function Oe(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,s=e.length;i<s;i++){const s=e[i],a=s.object,o=s.geometry,l=null===r?s.material:r,u=s.group;a.layers.test(n.layers)&&ke(a,t,n,o,l,u)}}function ke(e,t,n,r,i,s){if(e.onBeforeRender(y,t,n,r,i,s),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(y,t,n,r,e,s),e.isImmediateRenderObject){const s=Be(n,t,r,i,e);X.setMaterial(i),ge.reset(),function(e,t){e.render((function(e){y.renderBufferImmediate(e,t)}))}(e,s)}else!0===i.transparent&&i.side===g?(i.side=d,i.needsUpdate=!0,y.renderBufferDirect(n,t,r,i,e,s),i.side=m,i.needsUpdate=!0,y.renderBufferDirect(n,t,r,i,e,s),i.side=g):y.renderBufferDirect(n,t,r,i,e,s);e.onAfterRender(y,t,n,r,i,s)}function De(e,t,n){!0!==t.isScene&&(t=G);const r=Y.get(e),i=p.state.lights,s=p.state.shadowsArray,a=i.state.version,o=re.getParameters(e,i.state,s,t,n),l=re.getProgramCacheKey(o);let u=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?K:$).get(e.envMap||r.environment),void 0===u&&(e.addEventListener("dispose",Ee),u=new Map,r.programs=u);let c=u.get(l);if(void 0!==c){if(r.currentProgram===c&&r.lightsStateVersion===a)return Ue(e,o),c}else o.uniforms=re.getUniforms(e),e.onBuild(o,y),e.onBeforeCompile(o,y),c=re.acquireProgram(o,l),u.set(l,c),r.uniforms=o.uniforms;const h=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=oe.uniform),Ue(e,o),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=a,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotShadowMatrix.value=i.state.spotShadowMatrix,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);const f=c.getUniforms(),m=Oo.seqWithValue(f.seq,h);return r.currentProgram=c,r.uniformsList=m,c}function Ue(e,t){const n=Y.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents}function Be(e,t,n,r,i){!0!==t.isScene&&(t=G),J.resetTextureUnits();const s=t.fog,a=r.isMeshStandardMaterial?t.environment:null,o=null===M?y.outputEncoding:M.texture.encoding,l=(r.isMeshStandardMaterial?K:$).get(r.envMap||a),u=!0===r.vertexColors&&!!n&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!r.normalMap&&!!n&&!!n.attributes.tangent,h=!!n&&!!n.morphAttributes.position,f=!!n&&!!n.morphAttributes.normal,m=n&&n.morphAttributes.position?n.morphAttributes.position.length:0,d=Y.get(r),g=p.state.lights;if(!0===z&&(!0===B||e!==_)){const t=e===_&&r.id===S;oe.setState(r,e,t)}let v=!1;r.version===d.__version?d.needsLights&&d.lightsStateVersion!==g.state.version||d.outputEncoding!==o||i.isInstancedMesh&&!1===d.instancing?v=!0:i.isInstancedMesh||!0!==d.instancing?i.isSkinnedMesh&&!1===d.skinning?v=!0:i.isSkinnedMesh||!0!==d.skinning?d.envMap!==l||r.fog&&d.fog!==s?v=!0:void 0===d.numClippingPlanes||d.numClippingPlanes===oe.numPlanes&&d.numIntersection===oe.numIntersection?(d.vertexAlphas!==u||d.vertexTangents!==c||d.morphTargets!==h||d.morphNormals!==f||!0===j.isWebGL2&&d.morphTargetsCount!==m)&&(v=!0):v=!0:v=!0:v=!0:(v=!0,d.__version=r.version);let w=d.currentProgram;!0===v&&(w=De(r,t,i));let b=!1,x=!1,E=!1;const T=w.getUniforms(),A=d.uniforms;if(X.useProgram(w.program)&&(b=!0,x=!0,E=!0),r.id!==S&&(S=r.id,x=!0),b||_!==e){if(T.setValue(ve,"projectionMatrix",e.projectionMatrix),j.logarithmicDepthBuffer&&T.setValue(ve,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),_!==e&&(_=e,x=!0,E=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){const t=T.map.cameraPosition;void 0!==t&&t.setValue(ve,H.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&T.setValue(ve,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&T.setValue(ve,"viewMatrix",e.matrixWorldInverse)}if(i.isSkinnedMesh){T.setOptional(ve,i,"bindMatrix"),T.setOptional(ve,i,"bindMatrixInverse");const e=i.skeleton;e&&(j.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),T.setValue(ve,"boneTexture",e.boneTexture,J),T.setValue(ve,"boneTextureSize",e.boneTextureSize)):T.setOptional(ve,e,"boneMatrices"))}var L,N;return!n||void 0===n.morphAttributes.position&&void 0===n.morphAttributes.normal||ce.update(i,n,r,w),(x||d.receiveShadow!==i.receiveShadow)&&(d.receiveShadow=i.receiveShadow,T.setValue(ve,"receiveShadow",i.receiveShadow)),x&&(T.setValue(ve,"toneMappingExposure",y.toneMappingExposure),d.needsLights&&(N=E,(L=A).ambientLightColor.needsUpdate=N,L.lightProbe.needsUpdate=N,L.directionalLights.needsUpdate=N,L.directionalLightShadows.needsUpdate=N,L.pointLights.needsUpdate=N,L.pointLightShadows.needsUpdate=N,L.spotLights.needsUpdate=N,L.spotLightShadows.needsUpdate=N,L.rectAreaLights.needsUpdate=N,L.hemisphereLights.needsUpdate=N),s&&r.fog&&ie.refreshFogUniforms(A,s),ie.refreshMaterialUniforms(A,r,R,C,F),Oo.upload(ve,d.uniformsList,A,J)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(Oo.upload(ve,d.uniformsList,A,J),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&T.setValue(ve,"center",i.center),T.setValue(ve,"modelViewMatrix",i.modelViewMatrix),T.setValue(ve,"normalMatrix",i.normalMatrix),T.setValue(ve,"modelMatrix",i.matrixWorld),w}Ce.setAnimationLoop((function(e){Te&&Te(e)})),"undefined"!=typeof window&&Ce.setContext(window),this.setAnimationLoop=function(e){Te=e,be.setAnimationLoop(e),null===e?Ce.stop():Ce.start()},be.addEventListener("sessionstart",Ae),be.addEventListener("sessionend",Le),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===w)return;!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===be.enabled&&!0===be.isPresenting&&(!0===be.cameraAutoUpdate&&be.updateCamera(t),t=be.getCamera()),!0===e.isScene&&e.onBeforeRender(y,e,t,M),p=ae.get(e,v.length),p.init(),v.push(p),q.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),U.setFromProjectionMatrix(q),B=this.localClippingEnabled,z=oe.init(this.clippingPlanes,B,t),h=se.get(e,f.length),h.init(),f.push(h),Pe(e,t,0,y.sortObjects),h.finish(),!0===y.sortObjects&&h.sort(N,P),!0===z&&oe.beginShadows();const n=p.state.shadowsArray;if(le.render(n,e,t),!0===z&&oe.endShadows(),!0===this.info.autoReset&&this.info.reset(),ue.render(h,e),p.setupLights(y.physicallyCorrectLights),t.isArrayCamera){const n=t.cameras;for(let t=0,r=n.length;t<r;t++){const r=n[t];Ie(h,e,r,r.viewport)}}else Ie(h,e,t);null!==M&&(J.updateMultisampleRenderTarget(M),J.updateRenderTargetMipmap(M)),!0===e.isScene&&e.onAfterRender(y,e,t),X.buffers.depth.setTest(!0),X.buffers.depth.setMask(!0),X.buffers.color.setMask(!0),X.setPolygonOffset(!1),ge.resetDefaultState(),S=-1,_=null,v.pop(),p=v.length>0?v[v.length-1]:null,f.pop(),h=f.length>0?f[f.length-1]:null},this.getActiveCubeFace=function(){return b},this.getActiveMipmapLevel=function(){return x},this.getRenderTarget=function(){return M},this.setRenderTarget=function(e,t=0,n=0){M=e,b=t,x=n,e&&void 0===Y.get(e).__webglFramebuffer&&J.setupRenderTarget(e);let r=null,i=!1,s=!1;if(e){const n=e.texture;(n.isDataTexture3D||n.isDataTexture2DArray)&&(s=!0);const a=Y.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=a[t],i=!0):r=e.isWebGLMultisampleRenderTarget?Y.get(e).__webglMultisampledFramebuffer:a,E.copy(e.viewport),T.copy(e.scissor),A=e.scissorTest}else E.copy(I).multiplyScalar(R).floor(),T.copy(O).multiplyScalar(R).floor(),A=k;if(X.bindFramebuffer(36160,r)&&j.drawBuffers){let t=!1;if(e)if(e.isWebGLMultipleRenderTargets){const n=e.texture;if(D.length!==n.length||36064!==D[0]){for(let e=0,t=n.length;e<t;e++)D[e]=36064+e;D.length=n.length,t=!0}}else 1===D.length&&36064===D[0]||(D[0]=36064,D.length=1,t=!0);else 1===D.length&&1029===D[0]||(D[0]=1029,D.length=1,t=!0);t&&(j.isWebGL2?ve.drawBuffers(D):W.get("WEBGL_draw_buffers").drawBuffersWEBGL(D))}if(X.viewport(E),X.scissor(T),X.setScissorTest(A),i){const r=Y.get(e.texture);ve.framebufferTexture2D(36160,36064,34069+t,r.__webglTexture,n)}else if(s){const r=Y.get(e.texture),i=t||0;ve.framebufferTextureLayer(36160,36064,r.__webglTexture,n||0,i)}S=-1},this.readRenderTargetPixels=function(e,t,n,r,i,s,a){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let o=Y.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(o=o[a]),o){X.bindFramebuffer(36160,o);try{const a=e.texture,o=a.format,l=a.type;if(o!==ze&&de.convert(o)!==ve.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const u=l===Ne&&(W.has("EXT_color_buffer_half_float")||j.isWebGL2&&W.has("EXT_color_buffer_float"));if(!(l===_e||de.convert(l)===ve.getParameter(35738)||l===Re&&(j.isWebGL2||W.has("OES_texture_float")||W.has("WEBGL_color_buffer_float"))||u))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===ve.checkFramebufferStatus(36160)?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&ve.readPixels(t,n,r,i,de.convert(o),de.convert(l),s):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const e=null!==M?Y.get(M).__webglFramebuffer:null;X.bindFramebuffer(36160,e)}}},this.copyFramebufferToTexture=function(e,t,n=0){const r=Math.pow(2,-n),i=Math.floor(t.image.width*r),s=Math.floor(t.image.height*r);let a=de.convert(t.format);j.isWebGL2&&(6407===a&&(a=32849),6408===a&&(a=32856)),J.setTexture2D(t,0),ve.copyTexImage2D(3553,n,a,e.x,e.y,i,s,0),X.unbindTexture()},this.copyTextureToTexture=function(e,t,n,r=0){const i=t.image.width,s=t.image.height,a=de.convert(n.format),o=de.convert(n.type);J.setTexture2D(n,0),ve.pixelStorei(37440,n.flipY),ve.pixelStorei(37441,n.premultiplyAlpha),ve.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?ve.texSubImage2D(3553,r,e.x,e.y,i,s,a,o,t.image.data):t.isCompressedTexture?ve.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,a,t.mipmaps[0].data):ve.texSubImage2D(3553,r,e.x,e.y,a,o,t.image),0===r&&n.generateMipmaps&&ve.generateMipmap(3553),X.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r,i=0){if(y.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const s=e.max.x-e.min.x+1,a=e.max.y-e.min.y+1,o=e.max.z-e.min.z+1,l=de.convert(r.format),u=de.convert(r.type);let c;if(r.isDataTexture3D)J.setTexture3D(r,0),c=32879;else{if(!r.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");J.setTexture2DArray(r,0),c=35866}ve.pixelStorei(37440,r.flipY),ve.pixelStorei(37441,r.premultiplyAlpha),ve.pixelStorei(3317,r.unpackAlignment);const h=ve.getParameter(3314),p=ve.getParameter(32878),f=ve.getParameter(3316),m=ve.getParameter(3315),d=ve.getParameter(32877),g=n.isCompressedTexture?n.mipmaps[0]:n.image;ve.pixelStorei(3314,g.width),ve.pixelStorei(32878,g.height),ve.pixelStorei(3316,e.min.x),ve.pixelStorei(3315,e.min.y),ve.pixelStorei(32877,e.min.z),n.isDataTexture||n.isDataTexture3D?ve.texSubImage3D(c,i,t.x,t.y,t.z,s,a,o,l,u,g.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ve.compressedTexSubImage3D(c,i,t.x,t.y,t.z,s,a,o,l,g.data)):ve.texSubImage3D(c,i,t.x,t.y,t.z,s,a,o,l,u,g),ve.pixelStorei(3314,h),ve.pixelStorei(32878,p),ve.pixelStorei(3316,f),ve.pixelStorei(3315,m),ve.pixelStorei(32877,d),0===i&&r.generateMipmaps&&ve.generateMipmap(c),X.unbindTexture()},this.initTexture=function(e){J.setTexture2D(e,0),X.unbindTexture()},this.resetState=function(){b=0,x=0,M=null,X.reset(),ge.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class Tl extends El{}Tl.prototype.isWebGL1Renderer=!0;class Al{constructor(e,t=25e-5){this.name="",this.color=new Oi(e),this.density=t}clone(){return new Al(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}Al.prototype.isFogExp2=!0;class Ll{constructor(e,t=1,n=1e3){this.name="",this.color=new Oi(e),this.near=t,this.far=n}clone(){return new Ll(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}Ll.prototype.isFog=!0;class Cl extends mi{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}Cl.prototype.isScene=!0;class Rl{constructor(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=En,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Hn()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Hn()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Hn()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}Rl.prototype.isInterleavedBuffer=!0;const Nl=new pr;class Pl{constructor(e,t,n,r=!1){this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Nl.x=this.getX(t),Nl.y=this.getY(t),Nl.z=this.getZ(t),Nl.applyMatrix4(e),this.setXYZ(t,Nl.x,Nl.y,Nl.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Nl.x=this.getX(t),Nl.y=this.getY(t),Nl.z=this.getZ(t),Nl.applyNormalMatrix(e),this.setXYZ(t,Nl.x,Nl.y,Nl.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Nl.x=this.getX(t),Nl.y=this.getY(t),Nl.z=this.getZ(t),Nl.transformDirection(e),this.setXYZ(t,Nl.x,Nl.y,Nl.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new zi(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Pl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Pl.prototype.isInterleavedBufferAttribute=!0;class Il extends Ai{constructor(e){super(),this.type="SpriteMaterial",this.color=new Oi(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}let Ol;Il.prototype.isSpriteMaterial=!0;const kl=new pr,Dl=new pr,Ul=new pr,zl=new Jn,Bl=new Jn,Fl=new Gr,ql=new pr,Hl=new pr,Gl=new pr,Vl=new Jn,Wl=new Jn,jl=new Jn;class Xl extends mi{constructor(e){if(super(),this.type="Sprite",void 0===Ol){Ol=new ns;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new Rl(e,5);Ol.setIndex([0,1,2,0,2,3]),Ol.setAttribute("position",new Pl(t,3,0,!1)),Ol.setAttribute("uv",new Pl(t,2,3,!1))}this.geometry=Ol,this.material=void 0!==e?e:new Il,this.center=new Jn(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Dl.setFromMatrixScale(this.matrixWorld),Fl.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Ul.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Dl.multiplyScalar(-Ul.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const s=this.center;Zl(ql.set(-.5,-.5,0),Ul,s,Dl,r,i),Zl(Hl.set(.5,-.5,0),Ul,s,Dl,r,i),Zl(Gl.set(.5,.5,0),Ul,s,Dl,r,i),Vl.set(0,0),Wl.set(1,0),jl.set(1,1);let a=e.ray.intersectTriangle(ql,Hl,Gl,!1,kl);if(null===a&&(Zl(Hl.set(-.5,.5,0),Ul,s,Dl,r,i),Wl.set(0,1),a=e.ray.intersectTriangle(ql,Gl,Hl,!1,kl),null===a))return;const o=e.ray.origin.distanceTo(kl);o<e.near||o>e.far||t.push({distance:o,point:kl.clone(),uv:Ei.getUV(kl,ql,Hl,Gl,Vl,Wl,jl,new Jn),face:null,object:this})}copy(e){return super.copy(e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function Zl(e,t,n,r,i,s){zl.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(Bl.x=s*zl.x-i*zl.y,Bl.y=i*zl.x+s*zl.y):Bl.copy(zl),e.copy(t),e.x+=Bl.x,e.y+=Bl.y,e.applyMatrix4(Fl)}Xl.prototype.isSprite=!0;const Yl=new pr,Jl=new pr;class $l extends mi{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let e=0,n=t.length;e<n;e++){const n=t[e];this.addLevel(n.object.clone(),n.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0){t=Math.abs(t);const n=this.levels;let r;for(r=0;r<n.length&&!(t<n[r].distance);r++);return n.splice(r,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){Yl.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(Yl);this.getObjectForDistance(n).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Yl.setFromMatrixPosition(e.matrixWorld),Jl.setFromMatrixPosition(this.matrixWorld);const n=Yl.distanceTo(Jl)/e.zoom;let r,i;for(t[0].object.visible=!0,r=1,i=t.length;r<i&&n>=t[r].distance;r++)t[r-1].object.visible=!1,t[r].object.visible=!0;for(this._currentLevel=r-1;r<i;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let e=0,r=n.length;e<r;e++){const r=n[e];t.object.levels.push({object:r.object.uuid,distance:r.distance})}return t}}const Ql=new pr,Kl=new or,eu=new or,tu=new pr,nu=new Gr;class ru extends bs{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Gr,this.bindMatrixInverse=new Gr}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new or,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const n=this.skeleton,r=this.geometry;Kl.fromBufferAttribute(r.attributes.skinIndex,e),eu.fromBufferAttribute(r.attributes.skinWeight,e),Ql.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let e=0;e<4;e++){const r=eu.getComponent(e);if(0!==r){const i=Kl.getComponent(e);nu.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),t.addScaledVector(tu.copy(Ql).applyMatrix4(nu),r)}}return t.applyMatrix4(this.bindMatrixInverse)}}ru.prototype.isSkinnedMesh=!0;class iu extends mi{constructor(){super(),this.type="Bone"}}iu.prototype.isBone=!0;class su extends sr{constructor(e=null,t=1,n=1,r,i,s,a,o,l=me,u=me,c,h){super(null,s,a,o,l,u,r,i,c,h),this.image={data:e,width:t,height:n},this.magFilter=l,this.minFilter=u,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}su.prototype.isDataTexture=!0;const au=new Gr,ou=new Gr;class lu{constructor(e=[],t=[]){this.uuid=Hn(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new Gr)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new Gr;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let r=0,i=e.length;r<i;r++){const i=e[r]?e[r].matrixWorld:ou;au.multiplyMatrices(i,t[r]),au.toArray(n,16*r)}null!==r&&(r.needsUpdate=!0)}clone(){return new lu(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=Xn(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new su(t,e,e,ze,Re);return this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const r=e.bones[n];let i=t[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new iu),this.bones.push(i),this.boneInverses.push((new Gr).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,i=t.length;r<i;r++){const i=t[r];e.bones.push(i.uuid);const s=n[r];e.boneInverses.push(s.toArray())}return e}}class uu extends zi{constructor(e,t,n,r=1){"number"==typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,n),this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}uu.prototype.isInstancedBufferAttribute=!0;const cu=new Gr,hu=new Gr,pu=[],fu=new bs;class mu extends bs{constructor(e,t,n){super(e,t),this.instanceMatrix=new uu(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const n=this.matrixWorld,r=this.count;if(fu.geometry=this.geometry,fu.material=this.material,void 0!==fu.material)for(let i=0;i<r;i++){this.getMatrixAt(i,cu),hu.multiplyMatrices(n,cu),fu.matrixWorld=hu,fu.raycast(e,pu);for(let e=0,n=pu.length;e<n;e++){const n=pu[e];n.instanceId=i,n.object=this,t.push(n)}pu.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new uu(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}mu.prototype.isInstancedMesh=!0;class du extends Ai{constructor(e){super(),this.type="LineBasicMaterial",this.color=new Oi(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}du.prototype.isLineBasicMaterial=!0;const gu=new pr,vu=new pr,yu=new Gr,wu=new Hr,bu=new Or;class xu extends mi{constructor(e=new ns,t=new du){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)gu.fromBufferAttribute(t,e-1),vu.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=gu.distanceTo(vu);e.setAttribute("lineDistance",new Xi(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),bu.copy(n.boundingSphere),bu.applyMatrix4(r),bu.radius+=i,!1===e.ray.intersectsSphere(bu))return;yu.copy(r).invert(),wu.copy(e.ray).applyMatrix4(yu);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,l=new pr,u=new pr,c=new pr,h=new pr,p=this.isLineSegments?2:1;if(n.isBufferGeometry){const r=n.index,i=n.attributes.position;if(null!==r)for(let n=Math.max(0,s.start),a=Math.min(r.count,s.start+s.count)-1;n<a;n+=p){const s=r.getX(n),a=r.getX(n+1);if(l.fromBufferAttribute(i,s),u.fromBufferAttribute(i,a),wu.distanceSqToSegment(l,u,h,c)>o)continue;h.applyMatrix4(this.matrixWorld);const p=e.ray.origin.distanceTo(h);p<e.near||p>e.far||t.push({distance:p,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}else for(let n=Math.max(0,s.start),r=Math.min(i.count,s.start+s.count)-1;n<r;n+=p){if(l.fromBufferAttribute(i,n),u.fromBufferAttribute(i,n+1),wu.distanceSqToSegment(l,u,h,c)>o)continue;h.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(h);r<e.near||r>e.far||t.push({distance:r,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}xu.prototype.isLine=!0;const Mu=new pr,Su=new pr;class _u extends xu{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)Mu.fromBufferAttribute(t,e),Su.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+Mu.distanceTo(Su);e.setAttribute("lineDistance",new Xi(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}_u.prototype.isLineSegments=!0;class Eu extends xu{constructor(e,t){super(e,t),this.type="LineLoop"}}Eu.prototype.isLineLoop=!0;class Tu extends Ai{constructor(e){super(),this.type="PointsMaterial",this.color=new Oi(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}Tu.prototype.isPointsMaterial=!0;const Au=new Gr,Lu=new Hr,Cu=new Or,Ru=new pr;class Nu extends mi{constructor(e=new ns,t=new Tu){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Cu.copy(n.boundingSphere),Cu.applyMatrix4(r),Cu.radius+=i,!1===e.ray.intersectsSphere(Cu))return;Au.copy(r).invert(),Lu.copy(e.ray).applyMatrix4(Au);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a;if(n.isBufferGeometry){const i=n.index,a=n.attributes.position;if(null!==i)for(let n=Math.max(0,s.start),l=Math.min(i.count,s.start+s.count);n<l;n++){const s=i.getX(n);Ru.fromBufferAttribute(a,s),Pu(Ru,s,o,r,e,t,this)}else for(let n=Math.max(0,s.start),i=Math.min(a.count,s.start+s.count);n<i;n++)Ru.fromBufferAttribute(a,n),Pu(Ru,n,o,r,e,t,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}function Pu(e,t,n,r,i,s,a){const o=Lu.distanceSqToPoint(e);if(o<n){const n=new pr;Lu.closestPointToPoint(e,n),n.applyMatrix4(r);const l=i.ray.origin.distanceTo(n);if(l<i.near||l>i.far)return;s.push({distance:l,distanceToRay:Math.sqrt(o),point:n,index:t,face:null,object:a})}}Nu.prototype.isPoints=!0;class Iu extends sr{constructor(e,t,n,r,i,s,a,o,l){super(e,t,n,r,i,s,a,o,l),this.format=void 0!==a?a:Ue,this.minFilter=void 0!==s?s:we,this.magFilter=void 0!==i?i:we,this.generateMipmaps=!1;const u=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){u.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1=="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}Iu.prototype.isVideoTexture=!0;class Ou extends sr{constructor(e,t,n,r,i,s,a,o,l,u,c,h){super(null,s,a,o,l,u,r,i,c,h),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}Ou.prototype.isCompressedTexture=!0;class ku extends sr{constructor(e,t,n,r,i,s,a,o,l){super(e,t,n,r,i,s,a,o,l),this.needsUpdate=!0}}ku.prototype.isCanvasTexture=!0;class Du extends sr{constructor(e,t,n,r,i,s,a,o,l,u){if((u=void 0!==u?u:He)!==He&&u!==Ge)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===He&&(n=Ae),void 0===n&&u===Ge&&(n=ke),super(null,r,i,s,a,o,u,n,l),this.image={width:e,height:t},this.magFilter=void 0!==a?a:me,this.minFilter=void 0!==o?o:me,this.flipY=!1,this.generateMipmaps=!1}}Du.prototype.isDepthTexture=!0;class Uu extends ns{constructor(e=1,t=8,n=0,r=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const i=[],s=[],a=[],o=[],l=new pr,u=new Jn;s.push(0,0,0),a.push(0,0,1),o.push(.5,.5);for(let i=0,c=3;i<=t;i++,c+=3){const h=n+i/t*r;l.x=e*Math.cos(h),l.y=e*Math.sin(h),s.push(l.x,l.y,l.z),a.push(0,0,1),u.x=(s[c]/e+1)/2,u.y=(s[c+1]/e+1)/2,o.push(u.x,u.y)}for(let e=1;e<=t;e++)i.push(e,e+1,0);this.setIndex(i),this.setAttribute("position",new Xi(s,3)),this.setAttribute("normal",new Xi(a,3)),this.setAttribute("uv",new Xi(o,2))}static fromJSON(e){return new Uu(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class zu extends ns{constructor(e=1,t=1,n=1,r=8,i=1,s=!1,a=0,o=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:a,thetaLength:o};const l=this;r=Math.floor(r),i=Math.floor(i);const u=[],c=[],h=[],p=[];let f=0;const m=[],d=n/2;let g=0;function v(n){const i=f,s=new Jn,m=new pr;let v=0;const y=!0===n?e:t,w=!0===n?1:-1;for(let e=1;e<=r;e++)c.push(0,d*w,0),h.push(0,w,0),p.push(.5,.5),f++;const b=f;for(let e=0;e<=r;e++){const t=e/r*o+a,n=Math.cos(t),i=Math.sin(t);m.x=y*i,m.y=d*w,m.z=y*n,c.push(m.x,m.y,m.z),h.push(0,w,0),s.x=.5*n+.5,s.y=.5*i*w+.5,p.push(s.x,s.y),f++}for(let e=0;e<r;e++){const t=i+e,r=b+e;!0===n?u.push(r,r+1,t):u.push(r+1,r,t),v+=3}l.addGroup(g,v,!0===n?1:2),g+=v}!function(){const s=new pr,v=new pr;let y=0;const w=(t-e)/n;for(let l=0;l<=i;l++){const u=[],g=l/i,y=g*(t-e)+e;for(let e=0;e<=r;e++){const t=e/r,i=t*o+a,l=Math.sin(i),m=Math.cos(i);v.x=y*l,v.y=-g*n+d,v.z=y*m,c.push(v.x,v.y,v.z),s.set(l,w,m).normalize(),h.push(s.x,s.y,s.z),p.push(t,1-g),u.push(f++)}m.push(u)}for(let e=0;e<r;e++)for(let t=0;t<i;t++){const n=m[t][e],r=m[t+1][e],i=m[t+1][e+1],s=m[t][e+1];u.push(n,r,s),u.push(r,i,s),y+=6}l.addGroup(g,y,0),g+=y}(),!1===s&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(u),this.setAttribute("position",new Xi(c,3)),this.setAttribute("normal",new Xi(h,3)),this.setAttribute("uv",new Xi(p,2))}static fromJSON(e){return new zu(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Bu extends zu{constructor(e=1,t=1,n=8,r=1,i=!1,s=0,a=2*Math.PI){super(0,e,t,n,r,i,s,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:s,thetaLength:a}}static fromJSON(e){return new Bu(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Fu extends ns{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const i=[],s=[];function a(e,t,n,r){const i=r+1,s=[];for(let r=0;r<=i;r++){s[r]=[];const a=e.clone().lerp(n,r/i),o=t.clone().lerp(n,r/i),l=i-r;for(let e=0;e<=l;e++)s[r][e]=0===e&&r===i?a:a.clone().lerp(o,e/l)}for(let e=0;e<i;e++)for(let t=0;t<2*(i-e)-1;t++){const n=Math.floor(t/2);t%2==0?(o(s[e][n+1]),o(s[e+1][n]),o(s[e][n])):(o(s[e][n+1]),o(s[e+1][n+1]),o(s[e+1][n]))}}function o(e){i.push(e.x,e.y,e.z)}function l(t,n){const r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function u(e,t,n,r){r<0&&1===e.x&&(s[t]=e.x-1),0===n.x&&0===n.z&&(s[t]=r/2/Math.PI+.5)}function c(e){return Math.atan2(e.z,-e.x)}!function(e){const n=new pr,r=new pr,i=new pr;for(let s=0;s<t.length;s+=3)l(t[s+0],n),l(t[s+1],r),l(t[s+2],i),a(n,r,i,e)}(r),function(e){const t=new pr;for(let n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){const e=new pr;for(let n=0;n<i.length;n+=3){e.x=i[n+0],e.y=i[n+1],e.z=i[n+2];const r=c(e)/2/Math.PI+.5,a=(t=e,Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5);s.push(r,1-a)}var t;(function(){const e=new pr,t=new pr,n=new pr,r=new pr,a=new Jn,o=new Jn,l=new Jn;for(let h=0,p=0;h<i.length;h+=9,p+=6){e.set(i[h+0],i[h+1],i[h+2]),t.set(i[h+3],i[h+4],i[h+5]),n.set(i[h+6],i[h+7],i[h+8]),a.set(s[p+0],s[p+1]),o.set(s[p+2],s[p+3]),l.set(s[p+4],s[p+5]),r.copy(e).add(t).add(n).divideScalar(3);const f=c(r);u(a,p+0,e,f),u(o,p+2,t,f),u(l,p+4,n,f)}})(),function(){for(let e=0;e<s.length;e+=6){const t=s[e+0],n=s[e+2],r=s[e+4],i=Math.max(t,n,r),a=Math.min(t,n,r);i>.9&&a<.1&&(t<.2&&(s[e+0]+=1),n<.2&&(s[e+2]+=1),r<.2&&(s[e+4]+=1))}}()}(),this.setAttribute("position",new Xi(i,3)),this.setAttribute("normal",new Xi(i.slice(),3)),this.setAttribute("uv",new Xi(s,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}static fromJSON(e){return new Fu(e.vertices,e.indices,e.radius,e.details)}}class qu extends Fu{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new qu(e.radius,e.detail)}}const Hu=new pr,Gu=new pr,Vu=new pr,Wu=new Ei;class ju extends ns{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const n=4,r=Math.pow(10,n),i=Math.cos(zn*t),s=e.getIndex(),a=e.getAttribute("position"),o=s?s.count:a.count,l=[0,0,0],u=["a","b","c"],c=new Array(3),h={},p=[];for(let e=0;e<o;e+=3){s?(l[0]=s.getX(e),l[1]=s.getX(e+1),l[2]=s.getX(e+2)):(l[0]=e,l[1]=e+1,l[2]=e+2);const{a:t,b:n,c:o}=Wu;if(t.fromBufferAttribute(a,l[0]),n.fromBufferAttribute(a,l[1]),o.fromBufferAttribute(a,l[2]),Wu.getNormal(Vu),c[0]=`${Math.round(t.x*r)},${Math.round(t.y*r)},${Math.round(t.z*r)}`,c[1]=`${Math.round(n.x*r)},${Math.round(n.y*r)},${Math.round(n.z*r)}`,c[2]=`${Math.round(o.x*r)},${Math.round(o.y*r)},${Math.round(o.z*r)}`,c[0]!==c[1]&&c[1]!==c[2]&&c[2]!==c[0])for(let e=0;e<3;e++){const t=(e+1)%3,n=c[e],r=c[t],s=Wu[u[e]],a=Wu[u[t]],o=`${n}_${r}`,f=`${r}_${n}`;f in h&&h[f]?(Vu.dot(h[f].normal)<=i&&(p.push(s.x,s.y,s.z),p.push(a.x,a.y,a.z)),h[f]=null):o in h||(h[o]={index0:l[e],index1:l[t],normal:Vu.clone()})}}for(const e in h)if(h[e]){const{index0:t,index1:n}=h[e];Hu.fromBufferAttribute(a,t),Gu.fromBufferAttribute(a,n),p.push(Hu.x,Hu.y,Hu.z),p.push(Gu.x,Gu.y,Gu.z)}this.setAttribute("position",new Xi(p,3))}}}class Xu{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),i=0;t.push(0);for(let s=1;s<=e;s++)n=this.getPoint(s/e),i+=n.distanceTo(r),t.push(i),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const i=n.length;let s;s=t||e*n[i-1];let a,o=0,l=i-1;for(;o<=l;)if(r=Math.floor(o+(l-o)/2),a=n[r]-s,a<0)o=r+1;else{if(!(a>0)){l=r;break}l=r-1}if(r=l,n[r]===s)return r/(i-1);const u=n[r];return(r+(s-u)/(n[r+1]-u))/(i-1)}getTangent(e,t){const n=1e-4;let r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);const s=this.getPoint(r),a=this.getPoint(i),o=t||(s.isVector2?new Jn:new pr);return o.copy(a).sub(s).normalize(),o}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new pr,r=[],i=[],s=[],a=new pr,o=new Gr;for(let t=0;t<=e;t++){const n=t/e;r[t]=this.getTangentAt(n,new pr)}i[0]=new pr,s[0]=new pr;let l=Number.MAX_VALUE;const u=Math.abs(r[0].x),c=Math.abs(r[0].y),h=Math.abs(r[0].z);u<=l&&(l=u,n.set(1,0,0)),c<=l&&(l=c,n.set(0,1,0)),h<=l&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],a),s[0].crossVectors(r[0],i[0]);for(let t=1;t<=e;t++){if(i[t]=i[t-1].clone(),s[t]=s[t-1].clone(),a.crossVectors(r[t-1],r[t]),a.length()>Number.EPSILON){a.normalize();const e=Math.acos(Gn(r[t-1].dot(r[t]),-1,1));i[t].applyMatrix4(o.makeRotationAxis(a,e))}s[t].crossVectors(r[t],i[t])}if(!0===t){let t=Math.acos(Gn(i[0].dot(i[e]),-1,1));t/=e,r[0].dot(a.crossVectors(i[0],i[e]))>0&&(t=-t);for(let n=1;n<=e;n++)i[n].applyMatrix4(o.makeRotationAxis(r[n],t*n)),s[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:s}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Zu extends Xu{constructor(e=0,t=0,n=1,r=1,i=0,s=2*Math.PI,a=!1,o=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=s,this.aClockwise=a,this.aRotation=o}getPoint(e,t){const n=t||new Jn,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const s=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=s?0:r),!0!==this.aClockwise||s||(i===r?i=-r:i-=r);const a=this.aStartAngle+e*i;let o=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=o-this.aX,r=l-this.aY;o=n*e-r*t+this.aX,l=n*t+r*e+this.aY}return n.set(o,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}Zu.prototype.isEllipseCurve=!0;class Yu extends Zu{constructor(e,t,n,r,i,s){super(e,t,n,n,r,i,s),this.type="ArcCurve"}}function Ju(){let e=0,t=0,n=0,r=0;function i(i,s,a,o){e=i,t=a,n=-3*i+3*s-2*a-o,r=2*i-2*s+a+o}return{initCatmullRom:function(e,t,n,r,s){i(t,n,s*(n-e),s*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,s,a,o){let l=(t-e)/s-(n-e)/(s+a)+(n-t)/a,u=(n-t)/a-(r-t)/(a+o)+(r-n)/o;l*=a,u*=a,i(t,n,l,u)},calc:function(i){const s=i*i;return e+t*i+n*s+r*(s*i)}}}Yu.prototype.isArcCurve=!0;const $u=new pr,Qu=new Ju,Ku=new Ju,ec=new Ju;class tc extends Xu{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new pr){const n=t,r=this.points,i=r.length,s=(i-(this.closed?0:1))*e;let a,o,l=Math.floor(s),u=s-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/i)+1)*i:0===u&&l===i-1&&(l=i-2,u=1),this.closed||l>0?a=r[(l-1)%i]:($u.subVectors(r[0],r[1]).add(r[0]),a=$u);const c=r[l%i],h=r[(l+1)%i];if(this.closed||l+2<i?o=r[(l+2)%i]:($u.subVectors(r[i-1],r[i-2]).add(r[i-1]),o=$u),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(a.distanceToSquared(c),e),n=Math.pow(c.distanceToSquared(h),e),r=Math.pow(h.distanceToSquared(o),e);n<1e-4&&(n=1),t<1e-4&&(t=n),r<1e-4&&(r=n),Qu.initNonuniformCatmullRom(a.x,c.x,h.x,o.x,t,n,r),Ku.initNonuniformCatmullRom(a.y,c.y,h.y,o.y,t,n,r),ec.initNonuniformCatmullRom(a.z,c.z,h.z,o.z,t,n,r)}else"catmullrom"===this.curveType&&(Qu.initCatmullRom(a.x,c.x,h.x,o.x,this.tension),Ku.initCatmullRom(a.y,c.y,h.y,o.y,this.tension),ec.initCatmullRom(a.z,c.z,h.z,o.z,this.tension));return n.set(Qu.calc(u),Ku.calc(u),ec.calc(u)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new pr).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function nc(e,t,n,r,i){const s=.5*(r-t),a=.5*(i-n),o=e*e;return(2*n-2*r+s+a)*(e*o)+(-3*n+3*r-2*s-a)*o+s*e+n}function rc(e,t,n,r){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function ic(e,t,n,r,i){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}tc.prototype.isCatmullRomCurve3=!0;class sc extends Xu{constructor(e=new Jn,t=new Jn,n=new Jn,r=new Jn){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new Jn){const n=t,r=this.v0,i=this.v1,s=this.v2,a=this.v3;return n.set(ic(e,r.x,i.x,s.x,a.x),ic(e,r.y,i.y,s.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}sc.prototype.isCubicBezierCurve=!0;class ac extends Xu{constructor(e=new pr,t=new pr,n=new pr,r=new pr){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new pr){const n=t,r=this.v0,i=this.v1,s=this.v2,a=this.v3;return n.set(ic(e,r.x,i.x,s.x,a.x),ic(e,r.y,i.y,s.y,a.y),ic(e,r.z,i.z,s.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}ac.prototype.isCubicBezierCurve3=!0;class oc extends Xu{constructor(e=new Jn,t=new Jn){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Jn){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const n=t||new Jn;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}oc.prototype.isLineCurve=!0;class lc extends Xu{constructor(e=new pr,t=new pr){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new pr){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class uc extends Xu{constructor(e=new Jn,t=new Jn,n=new Jn){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Jn){const n=t,r=this.v0,i=this.v1,s=this.v2;return n.set(rc(e,r.x,i.x,s.x),rc(e,r.y,i.y,s.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}uc.prototype.isQuadraticBezierCurve=!0;class cc extends Xu{constructor(e=new pr,t=new pr,n=new pr){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new pr){const n=t,r=this.v0,i=this.v1,s=this.v2;return n.set(rc(e,r.x,i.x,s.x),rc(e,r.y,i.y,s.y),rc(e,r.z,i.z,s.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}cc.prototype.isQuadraticBezierCurve3=!0;class hc extends Xu{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new Jn){const n=t,r=this.points,i=(r.length-1)*e,s=Math.floor(i),a=i-s,o=r[0===s?s:s-1],l=r[s],u=r[s>r.length-2?r.length-1:s+1],c=r[s>r.length-3?r.length-1:s+2];return n.set(nc(a,o.x,l.x,u.x,c.x),nc(a,o.y,l.y,u.y,c.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Jn).fromArray(n))}return this}}hc.prototype.isSplineCurve=!0;var pc=Object.freeze({__proto__:null,ArcCurve:Yu,CatmullRomCurve3:tc,CubicBezierCurve:sc,CubicBezierCurve3:ac,EllipseCurve:Zu,LineCurve:oc,LineCurve3:lc,QuadraticBezierCurve:uc,QuadraticBezierCurve3:cc,SplineCurve:hc});class fc extends Xu{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new oc(t,e))}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let i=0;for(;i<r.length;){if(r[i]>=n){const e=r[i]-n,s=this.curves[i],a=s.getLength(),o=0===a?0:1-e/a;return s.getPointAt(o,t)}i++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const s=i[r],a=s&&s.isEllipseCurve?2*e:s&&(s.isLineCurve||s.isLineCurve3)?1:s&&s.isSplineCurve?e*s.points.length:e,o=s.getPoints(a);for(let e=0;e<o.length;e++){const r=o[e];n&&n.equals(r)||(t.push(r),n=r)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new pc[n.type]).fromJSON(n))}return this}}class mc extends fc{constructor(e){super(),this.type="Path",this.currentPoint=new Jn,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new oc(this.currentPoint.clone(),new Jn(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const i=new uc(this.currentPoint.clone(),new Jn(e,t),new Jn(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,i,s){const a=new sc(this.currentPoint.clone(),new Jn(e,t),new Jn(n,r),new Jn(i,s));return this.curves.push(a),this.currentPoint.set(i,s),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new hc(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,i,s){const a=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+a,t+o,n,r,i,s),this}absarc(e,t,n,r,i,s){return this.absellipse(e,t,n,n,r,i,s),this}ellipse(e,t,n,r,i,s,a,o){const l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,t+u,n,r,i,s,a,o),this}absellipse(e,t,n,r,i,s,a,o){const l=new Zu(e,t,n,r,i,s,a,o);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class dc extends mc{constructor(e){super(e),this.uuid=Hn(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new mc).fromJSON(n))}return this}}function gc(e,t,n,r,i){let s,a;if(i===function(e,t,n,r){let i=0;for(let s=t,a=n-r;s<n;s+=r)i+=(e[a]-e[s])*(e[s+1]+e[a+1]),a=s;return i}(e,t,n,r)>0)for(s=t;s<n;s+=r)a=Uc(s,e[s],e[s+1],a);else for(s=n-r;s>=t;s-=r)a=Uc(s,e[s],e[s+1],a);return a&&Nc(a,a.next)&&(zc(a),a=a.next),a}function vc(e,t){if(!e)return e;t||(t=e);let n,r=e;do{if(n=!1,r.steiner||!Nc(r,r.next)&&0!==Rc(r.prev,r,r.next))r=r.next;else{if(zc(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function yc(e,t,n,r,i,s,a){if(!e)return;!a&&s&&function(e,t,n,r){let i=e;do{null===i.z&&(i.z=Tc(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){let t,n,r,i,s,a,o,l,u=1;do{for(n=e,e=null,s=null,a=0;n;){for(a++,r=n,o=0,t=0;t<u&&(o++,r=r.nextZ,r);t++);for(l=u;o>0||l>0&&r;)0!==o&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,o--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:e=i,i.prevZ=s,s=i;n=r}s.nextZ=null,u*=2}while(a>1)}(i)}(e,r,i,s);let o,l,u=e;for(;e.prev!==e.next;)if(o=e.prev,l=e.next,s?bc(e,r,i,s):wc(e))t.push(o.i/n),t.push(e.i/n),t.push(l.i/n),zc(e),e=l.next,u=l.next;else if((e=l)===u){a?1===a?yc(e=xc(vc(e),t,n),t,n,r,i,s,2):2===a&&Mc(e,t,n,r,i,s):yc(vc(e),t,n,r,i,s,1);break}}function wc(e){const t=e.prev,n=e,r=e.next;if(Rc(t,n,r)>=0)return!1;let i=e.next.next;for(;i!==e.prev;){if(Lc(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Rc(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function bc(e,t,n,r){const i=e.prev,s=e,a=e.next;if(Rc(i,s,a)>=0)return!1;const o=i.x<s.x?i.x<a.x?i.x:a.x:s.x<a.x?s.x:a.x,l=i.y<s.y?i.y<a.y?i.y:a.y:s.y<a.y?s.y:a.y,u=i.x>s.x?i.x>a.x?i.x:a.x:s.x>a.x?s.x:a.x,c=i.y>s.y?i.y>a.y?i.y:a.y:s.y>a.y?s.y:a.y,h=Tc(o,l,t,n,r),p=Tc(u,c,t,n,r);let f=e.prevZ,m=e.nextZ;for(;f&&f.z>=h&&m&&m.z<=p;){if(f!==e.prev&&f!==e.next&&Lc(i.x,i.y,s.x,s.y,a.x,a.y,f.x,f.y)&&Rc(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,m!==e.prev&&m!==e.next&&Lc(i.x,i.y,s.x,s.y,a.x,a.y,m.x,m.y)&&Rc(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;f&&f.z>=h;){if(f!==e.prev&&f!==e.next&&Lc(i.x,i.y,s.x,s.y,a.x,a.y,f.x,f.y)&&Rc(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;m&&m.z<=p;){if(m!==e.prev&&m!==e.next&&Lc(i.x,i.y,s.x,s.y,a.x,a.y,m.x,m.y)&&Rc(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function xc(e,t,n){let r=e;do{const i=r.prev,s=r.next.next;!Nc(i,s)&&Pc(i,r,r.next,s)&&kc(i,s)&&kc(s,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(s.i/n),zc(r),zc(r.next),r=e=s),r=r.next}while(r!==e);return vc(r)}function Mc(e,t,n,r,i,s){let a=e;do{let e=a.next.next;for(;e!==a.prev;){if(a.i!==e.i&&Cc(a,e)){let o=Dc(a,e);return a=vc(a,a.next),o=vc(o,o.next),yc(a,t,n,r,i,s),void yc(o,t,n,r,i,s)}e=e.next}a=a.next}while(a!==e)}function Sc(e,t){return e.x-t.x}function _c(e,t){if(t=function(e,t){let n=t;const r=e.x,i=e.y;let s,a=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const e=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=r&&e>a){if(a=e,e===r){if(i===n.y)return n;if(i===n.next.y)return n.next}s=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!s)return null;if(r===a)return s;const o=s,l=s.x,u=s.y;let c,h=1/0;n=s;do{r>=n.x&&n.x>=l&&r!==n.x&&Lc(i<u?r:a,i,l,u,i<u?a:r,i,n.x,n.y)&&(c=Math.abs(i-n.y)/(r-n.x),kc(n,e)&&(c<h||c===h&&(n.x>s.x||n.x===s.x&&Ec(s,n)))&&(s=n,h=c)),n=n.next}while(n!==o);return s}(e,t)){const n=Dc(t,e);vc(t,t.next),vc(n,n.next)}}function Ec(e,t){return Rc(e.prev,e,t.prev)<0&&Rc(t.next,e,e.next)<0}function Tc(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Ac(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Lc(e,t,n,r,i,s,a,o){return(i-a)*(t-o)-(e-a)*(s-o)>=0&&(e-a)*(r-o)-(n-a)*(t-o)>=0&&(n-a)*(s-o)-(i-a)*(r-o)>=0}function Cc(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Pc(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(kc(e,t)&&kc(t,e)&&function(e,t){let n=e,r=!1;const i=(e.x+t.x)/2,s=(e.y+t.y)/2;do{n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(Rc(e.prev,e,t.prev)||Rc(e,t.prev,t))||Nc(e,t)&&Rc(e.prev,e,e.next)>0&&Rc(t.prev,t,t.next)>0)}function Rc(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Nc(e,t){return e.x===t.x&&e.y===t.y}function Pc(e,t,n,r){const i=Oc(Rc(e,t,n)),s=Oc(Rc(e,t,r)),a=Oc(Rc(n,r,e)),o=Oc(Rc(n,r,t));return i!==s&&a!==o||!(0!==i||!Ic(e,n,t))||!(0!==s||!Ic(e,r,t))||!(0!==a||!Ic(n,e,r))||!(0!==o||!Ic(n,t,r))}function Ic(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Oc(e){return e>0?1:e<0?-1:0}function kc(e,t){return Rc(e.prev,e,e.next)<0?Rc(e,t,e.next)>=0&&Rc(e,e.prev,t)>=0:Rc(e,t,e.prev)<0||Rc(e,e.next,t)<0}function Dc(e,t){const n=new Bc(e.i,e.x,e.y),r=new Bc(t.i,t.x,t.y),i=e.next,s=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function Uc(e,t,n,r){const i=new Bc(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function zc(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Bc(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Fc{static area(e){const t=e.length;let n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}static isClockWise(e){return Fc.area(e)<0}static triangulateShape(e,t){const n=[],r=[],i=[];qc(e),Hc(n,e);let s=e.length;t.forEach(qc);for(let e=0;e<t.length;e++)r.push(s),s+=t[e].length,Hc(n,t[e]);const a=function(e,t,n=2){const r=t&&t.length,i=r?t[0]*n:e.length;let s=gc(e,0,i,n,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,u,c,h,p,f;if(r&&(s=function(e,t,n,r){const i=[];let s,a,o,l,u;for(s=0,a=t.length;s<a;s++)o=t[s]*r,l=s<a-1?t[s+1]*r:e.length,u=gc(e,o,l,r,!1),u===u.next&&(u.steiner=!0),i.push(Ac(u));for(i.sort(Sc),s=0;s<i.length;s++)_c(i[s],n),n=vc(n,n.next);return n}(e,t,s,n)),e.length>80*n){o=u=e[0],l=c=e[1];for(let t=n;t<i;t+=n)h=e[t],p=e[t+1],h<o&&(o=h),p<l&&(l=p),h>u&&(u=h),p>c&&(c=p);f=Math.max(u-o,c-l),f=0!==f?1/f:0}return yc(s,a,n,o,l,f),a}(n,r);for(let e=0;e<a.length;e+=3)i.push(a.slice(e,e+3));return i}}function qc(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Hc(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class Gc extends ns{constructor(e=new dc([new Jn(.5,.5),new Jn(-.5,.5),new Jn(-.5,-.5),new Jn(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],i=[];for(let t=0,n=e.length;t<n;t++)s(e[t]);function s(e){const s=[],a=void 0!==t.curveSegments?t.curveSegments:12,o=void 0!==t.steps?t.steps:1;let l=void 0!==t.depth?t.depth:1,u=void 0===t.bevelEnabled||t.bevelEnabled,c=void 0!==t.bevelThickness?t.bevelThickness:.2,h=void 0!==t.bevelSize?t.bevelSize:c-.1,p=void 0!==t.bevelOffset?t.bevelOffset:0,f=void 0!==t.bevelSegments?t.bevelSegments:3;const m=t.extrudePath,d=void 0!==t.UVGenerator?t.UVGenerator:Vc;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=t.amount);let g,v,y,w,b,x=!1;m&&(g=m.getSpacedPoints(o),x=!0,u=!1,v=m.computeFrenetFrames(o,!1),y=new pr,w=new pr,b=new pr),u||(f=0,c=0,h=0,p=0);const M=e.extractPoints(a);let S=M.shape;const _=M.holes;if(!Fc.isClockWise(S)){S=S.reverse();for(let e=0,t=_.length;e<t;e++){const t=_[e];Fc.isClockWise(t)&&(_[e]=t.reverse())}}const E=Fc.triangulateShape(S,_),T=S;for(let e=0,t=_.length;e<t;e++){const t=_[e];S=S.concat(t)}function A(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}const L=S.length,C=E.length;function R(e,t,n){let r,i,s;const a=e.x-t.x,o=e.y-t.y,l=n.x-e.x,u=n.y-e.y,c=a*a+o*o,h=a*u-o*l;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(c),p=Math.sqrt(l*l+u*u),f=t.x-o/h,m=t.y+a/h,d=((n.x-u/p-f)*u-(n.y+l/p-m)*l)/(a*u-o*l);r=f+a*d-e.x,i=m+o*d-e.y;const g=r*r+i*i;if(g<=2)return new Jn(r,i);s=Math.sqrt(g/2)}else{let e=!1;a>Number.EPSILON?l>Number.EPSILON&&(e=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(o)===Math.sign(u)&&(e=!0),e?(r=-o,i=a,s=Math.sqrt(c)):(r=a,i=o,s=Math.sqrt(c/2))}return new Jn(r/s,i/s)}const N=[];for(let e=0,t=T.length,n=t-1,r=e+1;e<t;e++,n++,r++)n===t&&(n=0),r===t&&(r=0),N[e]=R(T[e],T[n],T[r]);const P=[];let I,O=N.concat();for(let e=0,t=_.length;e<t;e++){const t=_[e];I=[];for(let e=0,n=t.length,r=n-1,i=e+1;e<n;e++,r++,i++)r===n&&(r=0),i===n&&(i=0),I[e]=R(t[e],t[r],t[i]);P.push(I),O=O.concat(I)}for(let e=0;e<f;e++){const t=e/f,n=c*Math.cos(t*Math.PI/2),r=h*Math.sin(t*Math.PI/2)+p;for(let e=0,t=T.length;e<t;e++){const t=A(T[e],N[e],r);U(t.x,t.y,-n)}for(let e=0,t=_.length;e<t;e++){const t=_[e];I=P[e];for(let e=0,i=t.length;e<i;e++){const i=A(t[e],I[e],r);U(i.x,i.y,-n)}}}const k=h+p;for(let e=0;e<L;e++){const t=u?A(S[e],O[e],k):S[e];x?(w.copy(v.normals[0]).multiplyScalar(t.x),y.copy(v.binormals[0]).multiplyScalar(t.y),b.copy(g[0]).add(w).add(y),U(b.x,b.y,b.z)):U(t.x,t.y,0)}for(let e=1;e<=o;e++)for(let t=0;t<L;t++){const n=u?A(S[t],O[t],k):S[t];x?(w.copy(v.normals[e]).multiplyScalar(n.x),y.copy(v.binormals[e]).multiplyScalar(n.y),b.copy(g[e]).add(w).add(y),U(b.x,b.y,b.z)):U(n.x,n.y,l/o*e)}for(let e=f-1;e>=0;e--){const t=e/f,n=c*Math.cos(t*Math.PI/2),r=h*Math.sin(t*Math.PI/2)+p;for(let e=0,t=T.length;e<t;e++){const t=A(T[e],N[e],r);U(t.x,t.y,l+n)}for(let e=0,t=_.length;e<t;e++){const t=_[e];I=P[e];for(let e=0,i=t.length;e<i;e++){const i=A(t[e],I[e],r);x?U(i.x,i.y+g[o-1].y,g[o-1].x+n):U(i.x,i.y,l+n)}}}function D(e,t){let n=e.length;for(;--n>=0;){const r=n;let i=n-1;i<0&&(i=e.length-1);for(let e=0,n=o+2*f;e<n;e++){const n=L*e,s=L*(e+1);B(t+r+n,t+i+n,t+i+s,t+r+s)}}}function U(e,t,n){s.push(e),s.push(t),s.push(n)}function z(e,t,i){F(e),F(t),F(i);const s=r.length/3,a=d.generateTopUV(n,r,s-3,s-2,s-1);q(a[0]),q(a[1]),q(a[2])}function B(e,t,i,s){F(e),F(t),F(s),F(t),F(i),F(s);const a=r.length/3,o=d.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);q(o[0]),q(o[1]),q(o[3]),q(o[1]),q(o[2]),q(o[3])}function F(e){r.push(s[3*e+0]),r.push(s[3*e+1]),r.push(s[3*e+2])}function q(e){i.push(e.x),i.push(e.y)}!function(){const e=r.length/3;if(u){let e=0,t=L*e;for(let e=0;e<C;e++){const n=E[e];z(n[2]+t,n[1]+t,n[0]+t)}e=o+2*f,t=L*e;for(let e=0;e<C;e++){const n=E[e];z(n[0]+t,n[1]+t,n[2]+t)}}else{for(let e=0;e<C;e++){const t=E[e];z(t[2],t[1],t[0])}for(let e=0;e<C;e++){const t=E[e];z(t[0]+L*o,t[1]+L*o,t[2]+L*o)}}n.addGroup(e,r.length/3-e,0)}(),function(){const e=r.length/3;let t=0;D(T,t),t+=T.length;for(let e=0,n=_.length;e<n;e++){const n=_[e];D(n,t),t+=n.length}n.addGroup(e,r.length/3-e,1)}()}this.setAttribute("position",new Xi(r,3)),this.setAttribute("uv",new Xi(i,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let t=0,r=e.length;t<r;t++){const r=e[t];n.shapes.push(r.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let r=0,i=e.shapes.length;r<i;r++){const i=t[e.shapes[r]];n.push(i)}const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new pc[r.type]).fromJSON(r)),new Gc(n,e.options)}}const Vc={generateTopUV:function(e,t,n,r,i){const s=t[3*n],a=t[3*n+1],o=t[3*r],l=t[3*r+1],u=t[3*i],c=t[3*i+1];return[new Jn(s,a),new Jn(o,l),new Jn(u,c)]},generateSideWallUV:function(e,t,n,r,i,s){const a=t[3*n],o=t[3*n+1],l=t[3*n+2],u=t[3*r],c=t[3*r+1],h=t[3*r+2],p=t[3*i],f=t[3*i+1],m=t[3*i+2],d=t[3*s],g=t[3*s+1],v=t[3*s+2];return Math.abs(o-c)<Math.abs(a-u)?[new Jn(a,1-l),new Jn(u,1-h),new Jn(p,1-m),new Jn(d,1-v)]:[new Jn(o,1-l),new Jn(c,1-h),new Jn(f,1-m),new Jn(g,1-v)]}};class Wc extends Fu{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Wc(e.radius,e.detail)}}class jc extends ns{constructor(e=[new Jn(0,.5),new Jn(.5,0),new Jn(0,-.5)],t=12,n=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=Gn(r,0,2*Math.PI);const i=[],s=[],a=[],o=1/t,l=new pr,u=new Jn;for(let i=0;i<=t;i++){const c=n+i*o*r,h=Math.sin(c),p=Math.cos(c);for(let n=0;n<=e.length-1;n++)l.x=e[n].x*h,l.y=e[n].y,l.z=e[n].x*p,s.push(l.x,l.y,l.z),u.x=i/t,u.y=n/(e.length-1),a.push(u.x,u.y)}for(let n=0;n<t;n++)for(let t=0;t<e.length-1;t++){const r=t+n*e.length,s=r,a=r+e.length,o=r+e.length+1,l=r+1;i.push(s,a,l),i.push(a,o,l)}if(this.setIndex(i),this.setAttribute("position",new Xi(s,3)),this.setAttribute("uv",new Xi(a,2)),this.computeVertexNormals(),r===2*Math.PI){const n=this.attributes.normal.array,r=new pr,i=new pr,s=new pr,a=t*e.length*3;for(let t=0,o=0;t<e.length;t++,o+=3)r.x=n[o+0],r.y=n[o+1],r.z=n[o+2],i.x=n[a+o+0],i.y=n[a+o+1],i.z=n[a+o+2],s.addVectors(r,i).normalize(),n[o+0]=n[a+o+0]=s.x,n[o+1]=n[a+o+1]=s.y,n[o+2]=n[a+o+2]=s.z}}static fromJSON(e){return new jc(e.points,e.segments,e.phiStart,e.phiLength)}}class Xc extends Fu{constructor(e=1,t=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Xc(e.radius,e.detail)}}class Zc extends ns{constructor(e=.5,t=1,n=8,r=1,i=0,s=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:s},n=Math.max(3,n);const a=[],o=[],l=[],u=[];let c=e;const h=(t-e)/(r=Math.max(1,r)),p=new pr,f=new Jn;for(let e=0;e<=r;e++){for(let e=0;e<=n;e++){const r=i+e/n*s;p.x=c*Math.cos(r),p.y=c*Math.sin(r),o.push(p.x,p.y,p.z),l.push(0,0,1),f.x=(p.x/t+1)/2,f.y=(p.y/t+1)/2,u.push(f.x,f.y)}c+=h}for(let e=0;e<r;e++){const t=e*(n+1);for(let e=0;e<n;e++){const r=e+t,i=r,s=r+n+1,o=r+n+2,l=r+1;a.push(i,s,l),a.push(s,o,l)}}this.setIndex(a),this.setAttribute("position",new Xi(o,3)),this.setAttribute("normal",new Xi(l,3)),this.setAttribute("uv",new Xi(u,2))}static fromJSON(e){return new Zc(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Yc extends ns{constructor(e=new dc([new Jn(0,.5),new Jn(-.5,-.5),new Jn(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],i=[],s=[];let a=0,o=0;if(!1===Array.isArray(e))l(e);else for(let t=0;t<e.length;t++)l(e[t]),this.addGroup(a,o,t),a+=o,o=0;function l(e){const a=r.length/3,l=e.extractPoints(t);let u=l.shape;const c=l.holes;!1===Fc.isClockWise(u)&&(u=u.reverse());for(let e=0,t=c.length;e<t;e++){const t=c[e];!0===Fc.isClockWise(t)&&(c[e]=t.reverse())}const h=Fc.triangulateShape(u,c);for(let e=0,t=c.length;e<t;e++){const t=c[e];u=u.concat(t)}for(let e=0,t=u.length;e<t;e++){const t=u[e];r.push(t.x,t.y,0),i.push(0,0,1),s.push(t.x,t.y)}for(let e=0,t=h.length;e<t;e++){const t=h[e],r=t[0]+a,i=t[1]+a,s=t[2]+a;n.push(r,i,s),o+=3}}this.setIndex(n),this.setAttribute("position",new Xi(r,3)),this.setAttribute("normal",new Xi(i,3)),this.setAttribute("uv",new Xi(s,2))}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){const r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let r=0,i=e.shapes.length;r<i;r++){const i=t[e.shapes[r]];n.push(i)}return new Yc(n,e.curveSegments)}}class Jc extends ns{constructor(e=1,t=32,n=16,r=0,i=2*Math.PI,s=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:s,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const o=Math.min(s+a,Math.PI);let l=0;const u=[],c=new pr,h=new pr,p=[],f=[],m=[],d=[];for(let p=0;p<=n;p++){const g=[],v=p/n;let y=0;0==p&&0==s?y=.5/t:p==n&&o==Math.PI&&(y=-.5/t);for(let n=0;n<=t;n++){const o=n/t;c.x=-e*Math.cos(r+o*i)*Math.sin(s+v*a),c.y=e*Math.cos(s+v*a),c.z=e*Math.sin(r+o*i)*Math.sin(s+v*a),f.push(c.x,c.y,c.z),h.copy(c).normalize(),m.push(h.x,h.y,h.z),d.push(o+y,1-v),g.push(l++)}u.push(g)}for(let e=0;e<n;e++)for(let r=0;r<t;r++){const t=u[e][r+1],i=u[e][r],a=u[e+1][r],l=u[e+1][r+1];(0!==e||s>0)&&p.push(t,i,l),(e!==n-1||o<Math.PI)&&p.push(i,a,l)}this.setIndex(p),this.setAttribute("position",new Xi(f,3)),this.setAttribute("normal",new Xi(m,3)),this.setAttribute("uv",new Xi(d,2))}static fromJSON(e){return new Jc(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class $c extends Fu{constructor(e=1,t=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new $c(e.radius,e.detail)}}class Qc extends ns{constructor(e=1,t=.4,n=8,r=6,i=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);const s=[],a=[],o=[],l=[],u=new pr,c=new pr,h=new pr;for(let s=0;s<=n;s++)for(let p=0;p<=r;p++){const f=p/r*i,m=s/n*Math.PI*2;c.x=(e+t*Math.cos(m))*Math.cos(f),c.y=(e+t*Math.cos(m))*Math.sin(f),c.z=t*Math.sin(m),a.push(c.x,c.y,c.z),u.x=e*Math.cos(f),u.y=e*Math.sin(f),h.subVectors(c,u).normalize(),o.push(h.x,h.y,h.z),l.push(p/r),l.push(s/n)}for(let e=1;e<=n;e++)for(let t=1;t<=r;t++){const n=(r+1)*e+t-1,i=(r+1)*(e-1)+t-1,a=(r+1)*(e-1)+t,o=(r+1)*e+t;s.push(n,i,o),s.push(i,a,o)}this.setIndex(s),this.setAttribute("position",new Xi(a,3)),this.setAttribute("normal",new Xi(o,3)),this.setAttribute("uv",new Xi(l,2))}static fromJSON(e){return new Qc(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Kc extends ns{constructor(e=1,t=.4,n=64,r=8,i=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:s},n=Math.floor(n),r=Math.floor(r);const a=[],o=[],l=[],u=[],c=new pr,h=new pr,p=new pr,f=new pr,m=new pr,d=new pr,g=new pr;for(let a=0;a<=n;++a){const y=a/n*i*Math.PI*2;v(y,i,s,e,p),v(y+.01,i,s,e,f),d.subVectors(f,p),g.addVectors(f,p),m.crossVectors(d,g),g.crossVectors(m,d),m.normalize(),g.normalize();for(let e=0;e<=r;++e){const i=e/r*Math.PI*2,s=-t*Math.cos(i),f=t*Math.sin(i);c.x=p.x+(s*g.x+f*m.x),c.y=p.y+(s*g.y+f*m.y),c.z=p.z+(s*g.z+f*m.z),o.push(c.x,c.y,c.z),h.subVectors(c,p).normalize(),l.push(h.x,h.y,h.z),u.push(a/n),u.push(e/r)}}for(let e=1;e<=n;e++)for(let t=1;t<=r;t++){const n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),s=(r+1)*e+t,o=(r+1)*(e-1)+t;a.push(n,i,o),a.push(i,s,o)}function v(e,t,n,r,i){const s=Math.cos(e),a=Math.sin(e),o=n/t*e,l=Math.cos(o);i.x=r*(2+l)*.5*s,i.y=r*(2+l)*a*.5,i.z=r*Math.sin(o)*.5}this.setIndex(a),this.setAttribute("position",new Xi(o,3)),this.setAttribute("normal",new Xi(l,3)),this.setAttribute("uv",new Xi(u,2))}static fromJSON(e){return new Kc(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class eh extends ns{constructor(e=new cc(new pr(-1,-1,0),new pr(-1,1,0),new pr(1,1,0)),t=64,n=1,r=8,i=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i};const s=e.computeFrenetFrames(t,i);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const a=new pr,o=new pr,l=new Jn;let u=new pr;const c=[],h=[],p=[],f=[];function m(i){u=e.getPointAt(i/t,u);const l=s.normals[i],p=s.binormals[i];for(let e=0;e<=r;e++){const t=e/r*Math.PI*2,i=Math.sin(t),s=-Math.cos(t);o.x=s*l.x+i*p.x,o.y=s*l.y+i*p.y,o.z=s*l.z+i*p.z,o.normalize(),h.push(o.x,o.y,o.z),a.x=u.x+n*o.x,a.y=u.y+n*o.y,a.z=u.z+n*o.z,c.push(a.x,a.y,a.z)}}!function(){for(let e=0;e<t;e++)m(e);m(!1===i?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=r;n++)l.x=e/t,l.y=n/r,p.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=r;t++){const n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),s=(r+1)*e+t,a=(r+1)*(e-1)+t;f.push(n,i,a),f.push(i,s,a)}}()}(),this.setIndex(f),this.setAttribute("position",new Xi(c,3)),this.setAttribute("normal",new Xi(h,3)),this.setAttribute("uv",new Xi(p,2))}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new eh((new pc[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class th extends ns{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],n=new Set,r=new pr,i=new pr;if(null!==e.index){const s=e.attributes.position,a=e.index;let o=e.groups;0===o.length&&(o=[{start:0,count:a.count,materialIndex:0}]);for(let e=0,l=o.length;e<l;++e){const l=o[e],u=l.start;for(let e=u,o=u+l.count;e<o;e+=3)for(let o=0;o<3;o++){const l=a.getX(e+o),u=a.getX(e+(o+1)%3);r.fromBufferAttribute(s,l),i.fromBufferAttribute(s,u),!0===nh(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}}else{const s=e.attributes.position;for(let e=0,a=s.count/3;e<a;e++)for(let a=0;a<3;a++){const o=3*e+a,l=3*e+(a+1)%3;r.fromBufferAttribute(s,o),i.fromBufferAttribute(s,l),!0===nh(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}this.setAttribute("position",new Xi(t,3))}}}function nh(e,t,n){const r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`,i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`;return!0!==n.has(r)&&!0!==n.has(i)&&(n.add(r,i),!0)}var rh=Object.freeze({__proto__:null,BoxGeometry:Ms,BoxBufferGeometry:Ms,CircleGeometry:Uu,CircleBufferGeometry:Uu,ConeGeometry:Bu,ConeBufferGeometry:Bu,CylinderGeometry:zu,CylinderBufferGeometry:zu,DodecahedronGeometry:qu,DodecahedronBufferGeometry:qu,EdgesGeometry:ju,ExtrudeGeometry:Gc,ExtrudeBufferGeometry:Gc,IcosahedronGeometry:Wc,IcosahedronBufferGeometry:Wc,LatheGeometry:jc,LatheBufferGeometry:jc,OctahedronGeometry:Xc,OctahedronBufferGeometry:Xc,PlaneGeometry:Hs,PlaneBufferGeometry:Hs,PolyhedronGeometry:Fu,PolyhedronBufferGeometry:Fu,RingGeometry:Zc,RingBufferGeometry:Zc,ShapeGeometry:Yc,ShapeBufferGeometry:Yc,SphereGeometry:Jc,SphereBufferGeometry:Jc,TetrahedronGeometry:$c,TetrahedronBufferGeometry:$c,TorusGeometry:Qc,TorusBufferGeometry:Qc,TorusKnotGeometry:Kc,TorusKnotBufferGeometry:Kc,TubeGeometry:eh,TubeBufferGeometry:eh,WireframeGeometry:th});class ih extends Ai{constructor(e){super(),this.type="ShadowMaterial",this.color=new Oi(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}ih.prototype.isShadowMaterial=!0;class sh extends Ai{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Oi(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Oi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=on,this.normalScale=new Jn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}sh.prototype.isMeshStandardMaterial=!0;class ah extends sh{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Jn(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Gn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.sheenTint=new Oi(0),this.sheenRoughness=1,this.transmissionMap=null,this.thickness=.01,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationTint=new Oi(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularTint=new Oi(1,1,1),this.specularTintMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenTint.copy(e.sheenTint),this.sheenRoughness=e.sheenRoughness,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationTint.copy(e.attenuationTint),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularTint.copy(e.specularTint),this.specularTintMap=e.specularTintMap,this}}ah.prototype.isMeshPhysicalMaterial=!0;class oh extends Ai{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new Oi(16777215),this.specular=new Oi(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Oi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=on,this.normalScale=new Jn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Y,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}oh.prototype.isMeshPhongMaterial=!0;class lh extends Ai{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Oi(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Oi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=on,this.normalScale=new Jn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}lh.prototype.isMeshToonMaterial=!0;class uh extends Ai{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=on,this.normalScale=new Jn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}uh.prototype.isMeshNormalMaterial=!0;class ch extends Ai{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new Oi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Oi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Y,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}ch.prototype.isMeshLambertMaterial=!0;class hh extends Ai{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Oi(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=on,this.normalScale=new Jn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}hh.prototype.isMeshMatcapMaterial=!0;class ph extends du{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}ph.prototype.isLineDashedMaterial=!0;var fh=Object.freeze({__proto__:null,ShadowMaterial:ih,SpriteMaterial:Il,RawShaderMaterial:Ks,ShaderMaterial:Ts,PointsMaterial:Tu,MeshPhysicalMaterial:ah,MeshStandardMaterial:sh,MeshPhongMaterial:oh,MeshToonMaterial:lh,MeshNormalMaterial:uh,MeshLambertMaterial:ch,MeshDepthMaterial:fl,MeshDistanceMaterial:ml,MeshBasicMaterial:ki,MeshMatcapMaterial:hh,LineDashedMaterial:ph,LineBasicMaterial:du,Material:Ai});const mh={arraySlice:function(e,t,n){return mh.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){const t=e.length,n=new Array(t);for(let e=0;e!==t;++e)n[e]=e;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){const r=e.length,i=new e.constructor(r);for(let s=0,a=0;a!==r;++s){const r=n[s]*t;for(let n=0;n!==t;++n)i[a++]=e[r+n]}return i},flattenJSON:function(e,t,n,r){let i=1,s=e[0];for(;void 0!==s&&void 0===s[r];)s=e[i++];if(void 0===s)return;let a=s[r];if(void 0!==a)if(Array.isArray(a))do{a=s[r],void 0!==a&&(t.push(s.time),n.push.apply(n,a)),s=e[i++]}while(void 0!==s);else if(void 0!==a.toArray)do{a=s[r],void 0!==a&&(t.push(s.time),a.toArray(n,n.length)),s=e[i++]}while(void 0!==s);else do{a=s[r],void 0!==a&&(t.push(s.time),n.push(a)),s=e[i++]}while(void 0!==s)},subclip:function(e,t,n,r,i=30){const s=e.clone();s.name=t;const a=[];for(let e=0;e<s.tracks.length;++e){const t=s.tracks[e],o=t.getValueSize(),l=[],u=[];for(let e=0;e<t.times.length;++e){const s=t.times[e]*i;if(!(s<n||s>=r)){l.push(t.times[e]);for(let n=0;n<o;++n)u.push(t.values[e*o+n])}}0!==l.length&&(t.times=mh.convertArray(l,t.times.constructor),t.values=mh.convertArray(u,t.values.constructor),a.push(t))}s.tracks=a;let o=1/0;for(let e=0;e<s.tracks.length;++e)o>s.tracks[e].times[0]&&(o=s.tracks[e].times[0]);for(let e=0;e<s.tracks.length;++e)s.tracks[e].shift(-1*o);return s.resetDuration(),s},makeClipAdditive:function(e,t=0,n=e,r=30){r<=0&&(r=30);const i=n.tracks.length,s=t/r;for(let t=0;t<i;++t){const r=n.tracks[t],i=r.ValueTypeName;if("bool"===i||"string"===i)continue;const a=e.tracks.find((function(e){return e.name===r.name&&e.ValueTypeName===i}));if(void 0===a)continue;let o=0;const l=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=l/3);let u=0;const c=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=c/3);const h=r.times.length-1;let p;if(s<=r.times[0]){const e=o,t=l-o;p=mh.arraySlice(r.values,e,t)}else if(s>=r.times[h]){const e=h*l+o,t=e+l-o;p=mh.arraySlice(r.values,e,t)}else{const e=r.createInterpolant(),t=o,n=l-o;e.evaluate(s),p=mh.arraySlice(e.resultBuffer,t,n)}"quaternion"===i&&(new hr).fromArray(p).normalize().conjugate().toArray(p);const f=a.times.length;for(let e=0;e<f;++e){const t=e*c+u;if("quaternion"===i)hr.multiplyQuaternionsFlat(a.values,t,p,0,a.values,t);else{const e=c-2*u;for(let n=0;n<e;++n)a.values[t+n]-=p[n]}}}return e.blendMode=jt,e}};class dh{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let s;n:{r:if(!(e<r)){for(let s=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===s)break;if(i=r,r=t[++n],e<r)break t}s=t.length;break n}if(e>=i)break e;{const a=t[1];e<a&&(n=2,i=a);for(let s=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===s)break;if(r=i,i=t[--n-1],e>=i)break t}s=n,n=0}}for(;n<s;){const r=n+s>>>1;e<t[r]?s=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let e=0;e!==r;++e)t[e]=n[i+e];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}dh.prototype.beforeStart_=dh.prototype.copySampleValue_,dh.prototype.afterEnd_=dh.prototype.copySampleValue_;class gh extends dh{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ht,endingEnd:Ht}}intervalChanged_(e,t,n){const r=this.parameterPositions;let i=e-2,s=e+1,a=r[i],o=r[s];if(void 0===a)switch(this.getSettings_().endingStart){case Gt:i=e,a=2*t-n;break;case Vt:i=r.length-2,a=t+r[i]-r[i+1];break;default:i=e,a=n}if(void 0===o)switch(this.getSettings_().endingEnd){case Gt:s=e,o=2*n-t;break;case Vt:s=1,o=n+r[1]-r[0];break;default:s=e-1,o=t}const l=.5*(n-t),u=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(o-n),this._offsetPrev=i*u,this._offsetNext=s*u}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,u=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,p=this._weightNext,f=(n-t)/(r-t),m=f*f,d=m*f,g=-h*d+2*h*m-h*f,v=(1+h)*d+(-1.5-2*h)*m+(-.5+h)*f+1,y=(-1-p)*d+(1.5+p)*m+.5*f,w=p*d-p*m;for(let e=0;e!==a;++e)i[e]=g*s[u+e]+v*s[l+e]+y*s[o+e]+w*s[c+e];return i}}class vh extends dh{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,u=(n-t)/(r-t),c=1-u;for(let e=0;e!==a;++e)i[e]=s[l+e]*c+s[o+e]*u;return i}}class yh extends dh{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class wh{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=mh.convertArray(t,this.TimeBufferType),this.values=mh.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:mh.convertArray(e.times,Array),values:mh.convertArray(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new yh(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new vh(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new gh(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Bt:t=this.InterpolantFactoryMethodDiscrete;break;case Ft:t=this.InterpolantFactoryMethodLinear;break;case qt:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Bt;case this.InterpolantFactoryMethodLinear:return Ft;case this.InterpolantFactoryMethodSmooth:return qt}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,s=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==s&&n[s]>t;)--s;if(++s,0!==i||s!==r){i>=s&&(s=Math.max(s,1),i=s-1);const e=this.getValueSize();this.times=mh.arraySlice(n,i,s),this.values=mh.arraySlice(this.values,i*e,s*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let t=0;t!==i;t++){const r=n[t];if("number"==typeof r&&isNaN(r)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,r),e=!1;break}if(null!==s&&s>r){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,r,s),e=!1;break}s=r}if(void 0!==r&&mh.isTypedArray(r))for(let t=0,n=r.length;t!==n;++t){const n=r[t];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,n),e=!1;break}}return e}optimize(){const e=mh.arraySlice(this.times),t=mh.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===qt,i=e.length-1;let s=1;for(let a=1;a<i;++a){let i=!1;const o=e[a];if(o!==e[a+1]&&(1!==a||o!==e[0]))if(r)i=!0;else{const e=a*n,r=e-n,s=e+n;for(let a=0;a!==n;++a){const n=t[e+a];if(n!==t[r+a]||n!==t[s+a]){i=!0;break}}}if(i){if(a!==s){e[s]=e[a];const r=a*n,i=s*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++s}}if(i>0){e[s]=e[i];for(let e=i*n,r=s*n,a=0;a!==n;++a)t[r+a]=t[e+a];++s}return s!==e.length?(this.times=mh.arraySlice(e,0,s),this.values=mh.arraySlice(t,0,s*n)):(this.times=e,this.values=t),this}clone(){const e=mh.arraySlice(this.times,0),t=mh.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}wh.prototype.TimeBufferType=Float32Array,wh.prototype.ValueBufferType=Float32Array,wh.prototype.DefaultInterpolation=Ft;class bh extends wh{}bh.prototype.ValueTypeName="bool",bh.prototype.ValueBufferType=Array,bh.prototype.DefaultInterpolation=Bt,bh.prototype.InterpolantFactoryMethodLinear=void 0,bh.prototype.InterpolantFactoryMethodSmooth=void 0;class xh extends wh{}xh.prototype.ValueTypeName="color";class Mh extends wh{}Mh.prototype.ValueTypeName="number";class Sh extends dh{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=(n-t)/(r-t);let l=e*a;for(let e=l+a;l!==e;l+=4)hr.slerpFlat(i,0,s,l-a,s,l,o);return i}}class _h extends wh{InterpolantFactoryMethodLinear(e){return new Sh(this.times,this.values,this.getValueSize(),e)}}_h.prototype.ValueTypeName="quaternion",_h.prototype.DefaultInterpolation=Ft,_h.prototype.InterpolantFactoryMethodSmooth=void 0;class Eh extends wh{}Eh.prototype.ValueTypeName="string",Eh.prototype.ValueBufferType=Array,Eh.prototype.DefaultInterpolation=Bt,Eh.prototype.InterpolantFactoryMethodLinear=void 0,Eh.prototype.InterpolantFactoryMethodSmooth=void 0;class Th extends wh{}Th.prototype.ValueTypeName="vector";class Ah{constructor(e,t=-1,n,r=Wt){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=Hn(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let e=0,i=n.length;e!==i;++e)t.push(Lh(n[e]).scale(r));const i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,r=n.length;e!==r;++e)t.push(wh.toJSON(n[e]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const i=t.length,s=[];for(let e=0;e<i;e++){let a=[],o=[];a.push((e+i-1)%i,e,(e+1)%i),o.push(0,1,0);const l=mh.getKeyframeOrder(a);a=mh.sortedArray(a,1,l),o=mh.sortedArray(o,1,l),r||0!==a[0]||(a.push(i),o.push(o[0])),s.push(new Mh(".morphTargetInfluences["+t[e].name+"]",a,o).scale(1/n))}return new this(e,-1,s)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let e=0;e<n.length;e++)if(n[e].name===t)return n[e];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let t=0,n=e.length;t<n;t++){const n=e[t],s=n.name.match(i);if(s&&s.length>1){const e=s[1];let t=r[e];t||(r[e]=t=[]),t.push(n)}}const s=[];for(const e in r)s.push(this.CreateFromMorphTargetSequence(e,r[e],t,n));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,r,i){if(0!==n.length){const s=[],a=[];mh.flattenJSON(n,s,a,r),0!==s.length&&i.push(new e(t,s,a))}},r=[],i=e.name||"default",s=e.fps||30,a=e.blendMode;let o=e.length||-1;const l=e.hierarchy||[];for(let e=0;e<l.length;e++){const i=l[e].keys;if(i&&0!==i.length)if(i[0].morphTargets){const e={};let t;for(t=0;t<i.length;t++)if(i[t].morphTargets)for(let n=0;n<i[t].morphTargets.length;n++)e[i[t].morphTargets[n]]=-1;for(const n in e){const e=[],s=[];for(let r=0;r!==i[t].morphTargets.length;++r){const r=i[t];e.push(r.time),s.push(r.morphTarget===n?1:0)}r.push(new Mh(".morphTargetInfluence["+n+"]",e,s))}o=e.length*(s||1)}else{const s=".bones["+t[e].name+"]";n(Th,s+".position",i,"pos",r),n(_h,s+".quaternion",i,"rot",r),n(Th,s+".scale",i,"scl",r)}}return 0===r.length?null:new this(i,o,r,a)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Lh(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Mh;case"vector":case"vector2":case"vector3":case"vector4":return Th;case"color":return xh;case"quaternion":return _h;case"bool":case"boolean":return bh;case"string":return Eh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];mh.flattenJSON(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const Ch={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class Rh{constructor(e,t,n){const r=this;let i,s=!1,a=0,o=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++,!1===s&&void 0!==r.onStart&&r.onStart(e,a,o),s=!0},this.itemEnd=function(e){a++,void 0!==r.onProgress&&r.onProgress(e,a,o),a===o&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return i?i(e):e},this.setURLModifier=function(e){return i=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}}const Nh=new Rh;class Ph{constructor(e){this.manager=void 0!==e?e:Nh,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Ih={};class Oh extends Ph{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,s=Ch.get(e);if(void 0!==s)return i.manager.itemStart(e),setTimeout((function(){t&&t(s),i.manager.itemEnd(e)}),0),s;if(void 0!==Ih[e])return void Ih[e].push({onLoad:t,onProgress:n,onError:r});const a=e.match(/^data:(.*?)(;base64)?,(.*)$/);let o;if(a){const n=a[1],s=!!a[2];let o=a[3];o=decodeURIComponent(o),s&&(o=atob(o));try{let r;const s=(this.responseType||"").toLowerCase();switch(s){case"arraybuffer":case"blob":const e=new Uint8Array(o.length);for(let t=0;t<o.length;t++)e[t]=o.charCodeAt(t);r="blob"===s?new Blob([e.buffer],{type:n}):e.buffer;break;case"document":const t=new DOMParser;r=t.parseFromString(o,n);break;case"json":r=JSON.parse(o);break;default:r=o}setTimeout((function(){t&&t(r),i.manager.itemEnd(e)}),0)}catch(t){setTimeout((function(){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}),0)}}else{Ih[e]=[],Ih[e].push({onLoad:t,onProgress:n,onError:r}),o=new XMLHttpRequest,o.open("GET",e,!0),o.addEventListener("load",(function(t){const n=this.response,r=Ih[e];if(delete Ih[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Ch.add(e,n);for(let e=0,t=r.length;e<t;e++){const t=r[e];t.onLoad&&t.onLoad(n)}i.manager.itemEnd(e)}else{for(let e=0,n=r.length;e<n;e++){const n=r[e];n.onError&&n.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}}),!1),o.addEventListener("progress",(function(t){const n=Ih[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onProgress&&r.onProgress(t)}}),!1),o.addEventListener("error",(function(t){const n=Ih[e];delete Ih[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),o.addEventListener("abort",(function(t){const n=Ih[e];delete Ih[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(o.responseType=this.responseType),void 0!==this.withCredentials&&(o.withCredentials=this.withCredentials),o.overrideMimeType&&o.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(const e in this.requestHeader)o.setRequestHeader(e,this.requestHeader[e]);o.send(null)}return i.manager.itemStart(e),o}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class kh extends Ph{constructor(e){super(e)}load(e,t,n,r){const i=this,s=new Oh(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=Ah.parse(e[n]);t.push(r)}return t}}class Dh extends Ph{constructor(e){super(e)}load(e,t,n,r){const i=this,s=[],a=new Ou,o=new Oh(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(i.withCredentials);let l=0;function u(u){o.load(e[u],(function(e){const n=i.parse(e,!0);s[u]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(a.minFilter=we),a.image=s,a.format=n.format,a.needsUpdate=!0,t&&t(a))}),n,r)}if(Array.isArray(e))for(let t=0,n=e.length;t<n;++t)u(t);else o.load(e,(function(e){const n=i.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){s[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)s[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),s[t].format=n.format,s[t].width=n.width,s[t].height=n.height}a.image=s}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=we),a.format=n.format,a.needsUpdate=!0,t&&t(a)}),n,r);return a}}class Uh extends Ph{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,s=Ch.get(e);if(void 0!==s)return i.manager.itemStart(e),setTimeout((function(){t&&t(s),i.manager.itemEnd(e)}),0),s;const a=tr("img");function o(){a.removeEventListener("load",o,!1),a.removeEventListener("error",l,!1),Ch.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){a.removeEventListener("load",o,!1),a.removeEventListener("error",l,!1),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}return a.addEventListener("load",o,!1),a.addEventListener("error",l,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a}}class zh extends Ph{constructor(e){super(e)}load(e,t,n,r){const i=new Ns,s=new Uh(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let a=0;function o(n){s.load(e[n],(function(e){i.images[n]=e,a++,6===a&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(let t=0;t<e.length;++t)o(t);return i}}class Bh extends Ph{constructor(e){super(e)}load(e,t,n,r){const i=this,s=new su,a=new Oh(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(i.withCredentials),a.load(e,(function(e){const n=i.parse(e);n&&(void 0!==n.image?s.image=n.image:void 0!==n.data&&(s.image.width=n.width,s.image.height=n.height,s.image.data=n.data),s.wrapS=void 0!==n.wrapS?n.wrapS:pe,s.wrapT=void 0!==n.wrapT?n.wrapT:pe,s.magFilter=void 0!==n.magFilter?n.magFilter:we,s.minFilter=void 0!==n.minFilter?n.minFilter:we,s.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(s.encoding=n.encoding),void 0!==n.flipY&&(s.flipY=n.flipY),void 0!==n.format&&(s.format=n.format),void 0!==n.type&&(s.type=n.type),void 0!==n.mipmaps&&(s.mipmaps=n.mipmaps,s.minFilter=Me),1===n.mipmapCount&&(s.minFilter=we),void 0!==n.generateMipmaps&&(s.generateMipmaps=n.generateMipmaps),s.needsUpdate=!0,t&&t(s,n))}),n,r),s}}class Fh extends Ph{constructor(e){super(e)}load(e,t,n,r){const i=new sr,s=new Uh(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,(function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}class qh extends mi{constructor(e,t=1){super(),this.type="Light",this.color=new Oi(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}qh.prototype.isLight=!0;class Hh extends qh{constructor(e,t,n){super(e,n),this.type="HemisphereLight",this.position.copy(mi.DefaultUp),this.updateMatrix(),this.groundColor=new Oi(t)}copy(e){return qh.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}Hh.prototype.isHemisphereLight=!0;const Gh=new Gr,Vh=new pr,Wh=new pr;class jh{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Jn(512,512),this.map=null,this.mapPass=null,this.matrix=new Gr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Bs,this._frameExtents=new Jn(1,1),this._viewportCount=1,this._viewports=[new or(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;Vh.setFromMatrixPosition(e.matrixWorld),t.position.copy(Vh),Wh.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Wh),t.updateMatrixWorld(),Gh.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Gh),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Xh extends jh{constructor(){super(new Ls(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,n=2*Bn*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}Xh.prototype.isSpotLightShadow=!0;class Zh extends qh{constructor(e,t,n=0,r=Math.PI/3,i=0,s=1){super(e,t),this.type="SpotLight",this.position.copy(mi.DefaultUp),this.updateMatrix(),this.target=new mi,this.distance=n,this.angle=r,this.penumbra=i,this.decay=s,this.shadow=new Xh}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}Zh.prototype.isSpotLight=!0;const Yh=new Gr,Jh=new pr,$h=new pr;class Qh extends jh{constructor(){super(new Ls(90,1,.5,500)),this._frameExtents=new Jn(4,2),this._viewportCount=6,this._viewports=[new or(2,1,1,1),new or(0,1,1,1),new or(3,1,1,1),new or(1,1,1,1),new or(3,0,1,1),new or(1,0,1,1)],this._cubeDirections=[new pr(1,0,0),new pr(-1,0,0),new pr(0,0,1),new pr(0,0,-1),new pr(0,1,0),new pr(0,-1,0)],this._cubeUps=[new pr(0,1,0),new pr(0,1,0),new pr(0,1,0),new pr(0,1,0),new pr(0,0,1),new pr(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),Jh.setFromMatrixPosition(e.matrixWorld),n.position.copy(Jh),$h.copy(n.position),$h.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt($h),n.updateMatrixWorld(),r.makeTranslation(-Jh.x,-Jh.y,-Jh.z),Yh.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Yh)}}Qh.prototype.isPointLightShadow=!0;class Kh extends qh{constructor(e,t,n=0,r=1){super(e,t),this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new Qh}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}Kh.prototype.isPointLight=!0;class ep extends jh{constructor(){super(new Qs(-5,5,5,-5,.5,500))}}ep.prototype.isDirectionalLightShadow=!0;class tp extends qh{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(mi.DefaultUp),this.updateMatrix(),this.target=new mi,this.shadow=new ep}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}tp.prototype.isDirectionalLight=!0;class np extends qh{constructor(e,t){super(e,t),this.type="AmbientLight"}}np.prototype.isAmbientLight=!0;class rp extends qh{constructor(e,t,n=10,r=10){super(e,t),this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}rp.prototype.isRectAreaLight=!0;class ip{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new pr)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,i=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*r),t.addScaledVector(s[2],.488603*i),t.addScaledVector(s[3],.488603*n),t.addScaledVector(s[4],n*r*1.092548),t.addScaledVector(s[5],r*i*1.092548),t.addScaledVector(s[6],.315392*(3*i*i-1)),t.addScaledVector(s[7],n*i*1.092548),t.addScaledVector(s[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,i=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],1.023328*r),t.addScaledVector(s[2],1.023328*i),t.addScaledVector(s[3],1.023328*n),t.addScaledVector(s[4],.858086*n*r),t.addScaledVector(s[5],.858086*r*i),t.addScaledVector(s[6],.743125*i*i-.247708),t.addScaledVector(s[7],.858086*n*i),t.addScaledVector(s[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}ip.prototype.isSphericalHarmonics3=!0;class sp extends qh{constructor(e=new ip,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}sp.prototype.isLightProbe=!0;class ap extends Ph{constructor(e){super(e),this.textures={}}load(e,t,n,r){const i=this,s=new Oh(i.manager);s.setPath(i.path),s.setRequestHeader(i.requestHeader),s.setWithCredentials(i.withCredentials),s.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}parse(e){const t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const r=new fh[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=e.sheen),void 0!==e.sheenTint&&(r.sheenTint=(new Oi).setHex(e.sheenTint)),void 0!==e.sheenRoughness&&(r.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.specularIntensity&&(r.specularIntensity=e.specularIntensity),void 0!==e.specularTint&&void 0!==r.specularTint&&r.specularTint.setHex(e.specularTint),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationTint&&void 0!==r.attenuationTint&&r.attenuationTint.setHex(e.attenuationTint),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.format&&(r.format=e.format),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"==typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const t in e.uniforms){const i=e.uniforms[t];switch(r.uniforms[t]={},i.type){case"t":r.uniforms[t].value=n(i.value);break;case"c":r.uniforms[t].value=(new Oi).setHex(i.value);break;case"v2":r.uniforms[t].value=(new Jn).fromArray(i.value);break;case"v3":r.uniforms[t].value=(new pr).fromArray(i.value);break;case"v4":r.uniforms[t].value=(new or).fromArray(i.value);break;case"m3":r.uniforms[t].value=(new $n).fromArray(i.value);break;case"m4":r.uniforms[t].value=(new Gr).fromArray(i.value);break;default:r.uniforms[t].value=i.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(const t in e.extensions)r.extensions[t]=e.extensions[t];if(void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),r.normalScale=(new Jn).fromArray(t)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(r.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularTintMap&&(r.specularTintMap=n(e.specularTintMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new Jn).fromArray(e.clearcoatNormalScale)),void 0!==e.transmissionMap&&(r.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=n(e.thicknessMap)),r}setTextures(e){return this.textures=e,this}}class op{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}}class lp extends ns{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}lp.prototype.isInstancedBufferGeometry=!0;class up extends Ph{constructor(e){super(e)}load(e,t,n,r){const i=this,s=new Oh(i.manager);s.setPath(i.path),s.setRequestHeader(i.requestHeader),s.setWithCredentials(i.withCredentials),s.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}parse(e){const t={},n={};function r(e,r){if(void 0!==t[r])return t[r];const i=e.interleavedBuffers[r],s=function(e,t){if(void 0!==n[t])return n[t];const r=e.arrayBuffers[t],i=new Uint32Array(r).buffer;return n[t]=i,i}(e,i.buffer),a=er(i.type,s),o=new Rl(a,i.stride);return o.uuid=i.uuid,t[r]=o,o}const i=e.isInstancedBufferGeometry?new lp:new ns,s=e.data.index;if(void 0!==s){const e=er(s.type,s.array);i.setIndex(new zi(e,1))}const a=e.data.attributes;for(const t in a){const n=a[t];let s;if(n.isInterleavedBufferAttribute){const t=r(e.data,n.data);s=new Pl(t,n.itemSize,n.offset,n.normalized)}else{const e=er(n.type,n.array);s=new(n.isInstancedBufferAttribute?uu:zi)(e,n.itemSize,n.normalized)}void 0!==n.name&&(s.name=n.name),void 0!==n.usage&&s.setUsage(n.usage),void 0!==n.updateRange&&(s.updateRange.offset=n.updateRange.offset,s.updateRange.count=n.updateRange.count),i.setAttribute(t,s)}const o=e.data.morphAttributes;if(o)for(const t in o){const n=o[t],s=[];for(let t=0,i=n.length;t<i;t++){const i=n[t];let a;if(i.isInterleavedBufferAttribute){const t=r(e.data,i.data);a=new Pl(t,i.itemSize,i.offset,i.normalized)}else{const e=er(i.type,i.array);a=new zi(e,i.itemSize,i.normalized)}void 0!==i.name&&(a.name=i.name),s.push(a)}i.morphAttributes[t]=s}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);const l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let e=0,t=l.length;e!==t;++e){const t=l[e];i.addGroup(t.start,t.count,t.materialIndex)}const u=e.data.boundingSphere;if(void 0!==u){const e=new pr;void 0!==u.center&&e.fromArray(u.center),i.boundingSphere=new Or(e,u.radius)}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}}class cp extends Ph{constructor(e){super(e)}load(e,t,n,r){const i=this,s=""===this.path?op.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const a=new Oh(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){let s=null;try{s=JSON.parse(n)}catch(t){return void 0!==r&&r(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}const a=s.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?i.parse(s,t):console.error("THREE.ObjectLoader: Can't load "+e)}),n,r)}async loadAsync(e,t){const n=""===this.path?op.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||n;const r=new Oh(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const i=await r.loadAsync(e,t),s=JSON.parse(i),a=s.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+e);return await this.parseAsync(s)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=this.parseImages(e.images,(function(){void 0!==t&&t(l)})),a=this.parseTextures(e.textures,s),o=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,i,o,a,n),u=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,u),void 0!==t){let e=!1;for(const t in s)if(s[t]instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),i=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,i),a=this.parseMaterials(e.materials,s),o=this.parseObject(e.object,r,a,s,t),l=this.parseSkeletons(e.skeletons,o);return this.bindSkeletons(o,l),o}parseShapes(e){const t={};if(void 0!==e)for(let n=0,r=e.length;n<r;n++){const r=(new dc).fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse((function(e){e.isBone&&(r[e.uuid]=e)})),void 0!==e)for(let t=0,i=e.length;t<i;t++){const i=(new lu).fromJSON(e[t],r);n[i.uuid]=i}return n}parseGeometries(e,t){const n={};if(void 0!==e){const r=new up;for(let i=0,s=e.length;i<s;i++){let s;const a=e[i];switch(a.type){case"BufferGeometry":case"InstancedBufferGeometry":s=r.parse(a);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:a.type in rh?s=rh[a.type].fromJSON(a,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${a.type}"`)}s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),!0===s.isBufferGeometry&&void 0!==a.userData&&(s.userData=a.userData),n[a.uuid]=s}}return n}parseMaterials(e,t){const n={},r={};if(void 0!==e){const i=new ap;i.setTextures(t);for(let t=0,s=e.length;t<s;t++){const s=e[t];if("MultiMaterial"===s.type){const e=[];for(let t=0;t<s.materials.length;t++){const r=s.materials[t];void 0===n[r.uuid]&&(n[r.uuid]=i.parse(r)),e.push(n[r.uuid])}r[s.uuid]=e}else void 0===n[s.uuid]&&(n[s.uuid]=i.parse(s)),r[s.uuid]=n[s.uuid]}}return r}parseAnimations(e){const t={};if(void 0!==e)for(let n=0;n<e.length;n++){const r=e[n],i=Ah.parse(r);t[i.uuid]=i}return t}parseImages(e,t){const n=this,r={};let i;function s(e){if("string"==typeof e){const t=e;return function(e){return n.manager.itemStart(e),i.load(e,(function(){n.manager.itemEnd(e)}),void 0,(function(){n.manager.itemError(e),n.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:n.resourcePath+t)}return e.data?{data:er(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const n=new Rh(t);i=new Uh(n),i.setCrossOrigin(this.crossOrigin);for(let t=0,n=e.length;t<n;t++){const n=e[t],i=n.url;if(Array.isArray(i)){r[n.uuid]=[];for(let e=0,t=i.length;e<t;e++){const t=s(i[e]);null!==t&&(t instanceof HTMLImageElement?r[n.uuid].push(t):r[n.uuid].push(new su(t.data,t.width,t.height)))}}else{const e=s(n.url);null!==e&&(r[n.uuid]=e)}}}return r}async parseImagesAsync(e){const t=this,n={};let r;async function i(e){if("string"==typeof e){const n=e,i=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:t.resourcePath+n;return await r.loadAsync(i)}return e.data?{data:er(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){r=new Uh(this.manager),r.setCrossOrigin(this.crossOrigin);for(let t=0,r=e.length;t<r;t++){const r=e[t],s=r.url;if(Array.isArray(s)){n[r.uuid]=[];for(let e=0,t=s.length;e<t;e++){const t=s[e],a=await i(t);null!==a&&(a instanceof HTMLImageElement?n[r.uuid].push(a):n[r.uuid].push(new su(a.data,a.width,a.height)))}}else{const e=await i(r.url);null!==e&&(n[r.uuid]=e)}}}return n}parseTextures(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const r={};if(void 0!==e)for(let i=0,s=e.length;i<s;i++){const s=e[i];let a;void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);const o=t[s.image];Array.isArray(o)?(a=new Ns(o),6===o.length&&(a.needsUpdate=!0)):(a=o&&o.data?new su(o.data,o.width,o.height):new sr(o),o&&(a.needsUpdate=!0)),a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.mapping&&(a.mapping=n(s.mapping,hp)),void 0!==s.offset&&a.offset.fromArray(s.offset),void 0!==s.repeat&&a.repeat.fromArray(s.repeat),void 0!==s.center&&a.center.fromArray(s.center),void 0!==s.rotation&&(a.rotation=s.rotation),void 0!==s.wrap&&(a.wrapS=n(s.wrap[0],pp),a.wrapT=n(s.wrap[1],pp)),void 0!==s.format&&(a.format=s.format),void 0!==s.type&&(a.type=s.type),void 0!==s.encoding&&(a.encoding=s.encoding),void 0!==s.minFilter&&(a.minFilter=n(s.minFilter,fp)),void 0!==s.magFilter&&(a.magFilter=n(s.magFilter,fp)),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),void 0!==s.flipY&&(a.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(a.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(a.unpackAlignment=s.unpackAlignment),r[s.uuid]=a}return r}parseObject(e,t,n,r,i){let s,a,o;function l(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function u(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let r=0,i=e.length;r<i;r++){const i=e[r];void 0===n[i]&&console.warn("THREE.ObjectLoader: Undefined material",i),t.push(n[i])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function c(e){return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),r[e]}switch(e.type){case"Scene":s=new Cl,void 0!==e.background&&(Number.isInteger(e.background)?s.background=new Oi(e.background):s.background=c(e.background)),void 0!==e.environment&&(s.environment=c(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?s.fog=new Ll(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(s.fog=new Al(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":s=new Ls(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(s.focus=e.focus),void 0!==e.zoom&&(s.zoom=e.zoom),void 0!==e.filmGauge&&(s.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(s.filmOffset=e.filmOffset),void 0!==e.view&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new Qs(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(s.zoom=e.zoom),void 0!==e.view&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new np(e.color,e.intensity);break;case"DirectionalLight":s=new tp(e.color,e.intensity);break;case"PointLight":s=new Kh(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new rp(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new Zh(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":s=new Hh(e.color,e.groundColor,e.intensity);break;case"LightProbe":s=(new sp).fromJSON(e);break;case"SkinnedMesh":a=l(e.geometry),o=u(e.material),s=new ru(a,o),void 0!==e.bindMode&&(s.bindMode=e.bindMode),void 0!==e.bindMatrix&&s.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(s.skeleton=e.skeleton);break;case"Mesh":a=l(e.geometry),o=u(e.material),s=new bs(a,o);break;case"InstancedMesh":a=l(e.geometry),o=u(e.material);const t=e.count,n=e.instanceMatrix,r=e.instanceColor;s=new mu(a,o,t),s.instanceMatrix=new uu(new Float32Array(n.array),16),void 0!==r&&(s.instanceColor=new uu(new Float32Array(r.array),r.itemSize));break;case"LOD":s=new $l;break;case"Line":s=new xu(l(e.geometry),u(e.material));break;case"LineLoop":s=new Eu(l(e.geometry),u(e.material));break;case"LineSegments":s=new _u(l(e.geometry),u(e.material));break;case"PointCloud":case"Points":s=new Nu(l(e.geometry),u(e.material));break;case"Sprite":s=new Xl(u(e.material));break;case"Group":s=new bl;break;case"Bone":s=new iu;break;default:s=new mi}if(s.uuid=e.uuid,void 0!==e.name&&(s.name=e.name),void 0!==e.matrix?(s.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(void 0!==e.position&&s.position.fromArray(e.position),void 0!==e.rotation&&s.rotation.fromArray(e.rotation),void 0!==e.quaternion&&s.quaternion.fromArray(e.quaternion),void 0!==e.scale&&s.scale.fromArray(e.scale)),void 0!==e.castShadow&&(s.castShadow=e.castShadow),void 0!==e.receiveShadow&&(s.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(s.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(s.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(s.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&s.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(s.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(s.visible=e.visible),void 0!==e.frustumCulled&&(s.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(s.renderOrder=e.renderOrder),void 0!==e.userData&&(s.userData=e.userData),void 0!==e.layers&&(s.layers.mask=e.layers),void 0!==e.children){const a=e.children;for(let e=0;e<a.length;e++)s.add(this.parseObject(a[e],t,n,r,i))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const n=t[e];s.animations.push(i[n])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(s.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const n=t[e],r=s.getObjectByProperty("uuid",n.object);void 0!==r&&s.addLevel(r,n.distance)}}return s}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}setTexturePath(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}const hp={UVMapping:ie,CubeReflectionMapping:se,CubeRefractionMapping:ae,EquirectangularReflectionMapping:oe,EquirectangularRefractionMapping:le,CubeUVReflectionMapping:ue,CubeUVRefractionMapping:ce},pp={RepeatWrapping:he,ClampToEdgeWrapping:pe,MirroredRepeatWrapping:fe},fp={NearestFilter:me,NearestMipmapNearestFilter:de,NearestMipmapLinearFilter:ve,LinearFilter:we,LinearMipmapNearestFilter:be,LinearMipmapLinearFilter:Me};class mp extends Ph{constructor(e){super(e),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,s=Ch.get(e);if(void 0!==s)return i.manager.itemStart(e),setTimeout((function(){t&&t(s),i.manager.itemEnd(e)}),0),s;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){Ch.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}let dp;mp.prototype.isImageBitmapLoader=!0;const gp={getContext:function(){return void 0===dp&&(dp=new(window.AudioContext||window.webkitAudioContext)),dp},setContext:function(e){dp=e}};class vp extends Ph{constructor(e){super(e)}load(e,t,n,r){const i=this,s=new Oh(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){try{const e=n.slice(0);gp.getContext().decodeAudioData(e,(function(e){t(e)}))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}}class yp extends sp{constructor(e,t,n=1){super(void 0,n);const r=(new Oi).set(e),i=(new Oi).set(t),s=new pr(r.r,r.g,r.b),a=new pr(i.r,i.g,i.b),o=Math.sqrt(Math.PI),l=o*Math.sqrt(.75);this.sh.coefficients[0].copy(s).add(a).multiplyScalar(o),this.sh.coefficients[1].copy(s).sub(a).multiplyScalar(l)}}yp.prototype.isHemisphereLightProbe=!0;class wp extends sp{constructor(e,t=1){super(void 0,t);const n=(new Oi).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}wp.prototype.isAmbientLightProbe=!0;const bp=new Gr,xp=new Gr;class Mp{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ls,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ls,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;const n=e.projectionMatrix.clone(),r=t.eyeSep/2,i=r*t.near/t.focus,s=t.near*Math.tan(zn*t.fov*.5)/t.zoom;let a,o;xp.elements[12]=-r,bp.elements[12]=r,a=-s*t.aspect+i,o=s*t.aspect+i,n.elements[0]=2*t.near/(o-a),n.elements[8]=(o+a)/(o-a),this.cameraL.projectionMatrix.copy(n),a=-s*t.aspect-i,o=s*t.aspect-i,n.elements[0]=2*t.near/(o-a),n.elements[8]=(o+a)/(o-a),this.cameraR.projectionMatrix.copy(n)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(xp),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(bp)}}class Sp{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=_p(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=_p();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function _p(){return("undefined"==typeof performance?Date:performance).now()}const Ep=new pr,Tp=new hr,Ap=new pr,Lp=new pr;class Cp extends mi{constructor(){super(),this.type="AudioListener",this.context=gp.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Sp}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Ep,Tp,Ap),Lp.set(0,0,-1).applyQuaternion(Tp),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Ep.x,e),t.positionY.linearRampToValueAtTime(Ep.y,e),t.positionZ.linearRampToValueAtTime(Ep.z,e),t.forwardX.linearRampToValueAtTime(Lp.x,e),t.forwardY.linearRampToValueAtTime(Lp.y,e),t.forwardZ.linearRampToValueAtTime(Lp.z,e),t.upX.linearRampToValueAtTime(n.x,e),t.upY.linearRampToValueAtTime(n.y,e),t.upZ.linearRampToValueAtTime(n.z,e)}else t.setPosition(Ep.x,Ep.y,Ep.z),t.setOrientation(Lp.x,Lp.y,Lp.z,n.x,n.y,n.z)}}class Rp extends mi{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Np=new pr,Pp=new hr,Ip=new pr,Op=new pr;class kp extends Rp{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(Np,Pp,Ip),Op.set(0,0,1).applyQuaternion(Pp);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Np.x,e),t.positionY.linearRampToValueAtTime(Np.y,e),t.positionZ.linearRampToValueAtTime(Np.z,e),t.orientationX.linearRampToValueAtTime(Op.x,e),t.orientationY.linearRampToValueAtTime(Op.y,e),t.orientationZ.linearRampToValueAtTime(Op.z,e)}else t.setPosition(Np.x,Np.y,Np.z),t.setOrientation(Op.x,Op.y,Op.z)}}class Dp{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class Up{constructor(e,t,n){let r,i,s;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,i=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,i=e*r+r;let s=this.cumulativeWeight;if(0===s){for(let e=0;e!==r;++e)n[i+e]=n[e];s=t}else{s+=t;const e=t/s;this._mixBufferRegion(n,i,0,e,r)}this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const e=t*this._origIndex;this._mixBufferRegion(n,r,e,1-i,t)}s>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let e=t,i=t+t;e!==i;++e)if(n[e]!==n[e+t]){a.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let e=n,i=r;e!==i;++e)t[e]=t[r+e%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,i){if(r>=.5)for(let r=0;r!==i;++r)e[t+r]=e[n+r]}_slerp(e,t,n,r){hr.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,i){const s=this._workIndex*i;hr.multiplyQuaternionsFlat(e,s,e,t,e,n),hr.slerpFlat(e,t,e,t,e,s,r)}_lerp(e,t,n,r,i){const s=1-r;for(let a=0;a!==i;++a){const i=t+a;e[i]=e[i]*s+e[n+a]*r}}_lerpAdditive(e,t,n,r,i){for(let s=0;s!==i;++s){const i=t+s;e[i]=e[i]+e[n+s]*r}}}const zp=new RegExp("[\\[\\]\\.:\\/]","g"),Bp="[^\\[\\]\\.:\\/]",Fp="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",qp=/((?:WC+[\/:])*)/.source.replace("WC",Bp),Hp=/(WCOD+)?/.source.replace("WCOD",Fp),Gp=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Bp),Vp=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Bp),Wp=new RegExp("^"+qp+Hp+Gp+Vp+"$"),jp=["material","materials","bones"];class Xp{constructor(e,t,n){this.path=t,this.parsedPath=n||Xp.parseTrackName(t),this.node=Xp.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Xp.Composite(e,t,n):new Xp(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(zp,"")}static parseTrackName(e){const t=Wp.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==jp.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const i=e[r];if(i.name===t||i.uuid===t)return i;const s=n(i.children);if(s)return s}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=Xp.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const s=e[r];if(void 0===s){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",e)}let a=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}o=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(o=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Xp.Composite=class{constructor(e,t,n){const r=n||Xp.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},Xp.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Xp.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Xp.prototype.GetterByBindingType=[Xp.prototype._getValue_direct,Xp.prototype._getValue_array,Xp.prototype._getValue_arrayElement,Xp.prototype._getValue_toArray],Xp.prototype.SetterByBindingTypeAndVersioning=[[Xp.prototype._setValue_direct,Xp.prototype._setValue_direct_setNeedsUpdate,Xp.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Xp.prototype._setValue_array,Xp.prototype._setValue_array_setNeedsUpdate,Xp.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Xp.prototype._setValue_arrayElement,Xp.prototype._setValue_arrayElement_setNeedsUpdate,Xp.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Xp.prototype._setValue_fromArray,Xp.prototype._setValue_fromArray_setNeedsUpdate,Xp.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Zp{constructor(){this.uuid=Hn(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,s=i.length;let a,o=e.length,l=this.nCachedObjects_;for(let u=0,c=arguments.length;u!==c;++u){const c=arguments[u],h=c.uuid;let p=t[h];if(void 0===p){p=o++,t[h]=p,e.push(c);for(let e=0,t=s;e!==t;++e)i[e].push(new Xp(c,n[e],r[e]))}else if(p<l){a=e[p];const o=--l,u=e[o];t[u.uuid]=p,e[p]=u,t[h]=o,e[o]=c;for(let e=0,t=s;e!==t;++e){const t=i[e],s=t[o];let a=t[p];t[p]=s,void 0===a&&(a=new Xp(c,n[e],r[e])),t[o]=a}}else e[p]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_;for(let s=0,a=arguments.length;s!==a;++s){const a=arguments[s],o=a.uuid,l=t[o];if(void 0!==l&&l>=i){const s=i++,u=e[s];t[u.uuid]=l,e[l]=u,t[o]=s,e[s]=a;for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[s],i=t[l];t[l]=r,t[s]=i}}}this.nCachedObjects_=i}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_,s=e.length;for(let a=0,o=arguments.length;a!==o;++a){const o=arguments[a].uuid,l=t[o];if(void 0!==l)if(delete t[o],l<i){const a=--i,o=e[a],u=--s,c=e[u];t[o.uuid]=l,e[l]=o,t[c.uuid]=a,e[a]=c,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[a],i=t[u];t[l]=r,t[a]=i,t.pop()}}else{const i=--s,a=e[i];i>0&&(t[a.uuid]=l),e[l]=a,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e];t[l]=t[i],t.pop()}}}this.nCachedObjects_=i}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const i=this._bindings;if(void 0!==r)return i[r];const s=this._paths,a=this._parsedPaths,o=this._objects,l=o.length,u=this.nCachedObjects_,c=new Array(l);r=i.length,n[e]=r,s.push(e),a.push(t),i.push(c);for(let n=u,r=o.length;n!==r;++n){const r=o[n];c[n]=new Xp(r,e,t)}return c}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const r=this._paths,i=this._parsedPaths,s=this._bindings,a=s.length-1,o=s[a];t[e[a]]=n,s[n]=o,s.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}Zp.prototype.isAnimationObjectGroup=!0;class Yp{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const i=t.tracks,s=i.length,a=new Array(s),o={endingStart:Ht,endingEnd:Ht};for(let e=0;e!==s;++e){const t=i[e].createInterpolant(null);a[e]=t,t.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Ut,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,r=e._clip.duration,i=r/n,s=n/r;e.warp(1,i,t),this.warp(s,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,i=r.time,s=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=i,o[1]=i+n,l[0]=e/s,l[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);const i=this._startTime;if(null!==i){const r=(e-i)*n;if(r<0||0===n)return;this._startTime=null,t=n*r}t*=this._updateTimeScale(e);const s=this._updateTime(t),a=this._updateWeight(e);if(a>0){const e=this._interpolants,t=this._propertyBindings;switch(this.blendMode){case jt:for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(s),t[n].accumulateAdditive(a);break;case Wt:default:for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(s),t[n].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,i=this._loopCount;const s=n===zt;if(0===e)return-1===i?r:s&&1==(1&i)?t-r:r;if(n===Dt){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,s)):this._setEndings(0===this.repetitions,!0,s)),r>=t||r<0){const n=Math.floor(r/t);r-=t*n,i+=Math.abs(n);const a=this.repetitions-i;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===a){const t=e<0;this._setEndings(t,!t,s)}else this._setEndings(!1,!1,s);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(s&&1==(1&i))return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=Gt,r.endingEnd=Gt):(r.endingStart=e?this.zeroSlopeAtStart?Gt:Ht:Vt,r.endingEnd=t?this.zeroSlopeAtEnd?Gt:Ht:Vt)}_scheduleFading(e,t,n){const r=this._mixer,i=r.time;let s=this._weightInterpolant;null===s&&(s=r._lendControlInterpolant(),this._weightInterpolant=s);const a=s.parameterPositions,o=s.sampleValues;return a[0]=i,o[0]=t,a[1]=i+e,o[1]=n,this}}class Jp extends Dn{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,s=e._propertyBindings,a=e._interpolants,o=n.uuid,l=this._bindingsByRootAndName;let u=l[o];void 0===u&&(u={},l[o]=u);for(let e=0;e!==i;++e){const i=r[e],l=i.name;let c=u[l];if(void 0!==c)s[e]=c;else{if(c=s[e],void 0!==c){null===c._cacheIndex&&(++c.referenceCount,this._addInactiveBinding(c,o,l));continue}const r=t&&t._propertyBindings[e].binding.parsedPath;c=new Up(Xp.create(n,l,r),i.ValueTypeName,i.getValueSize()),++c.referenceCount,this._addInactiveBinding(c,o,l),s[e]=c}a[e].resultBuffer=c.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,i=this._actionsByClip;let s=i[t];if(void 0===s)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=s;else{const t=s.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=r.length,r.push(e),s.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const i=e._clip.uuid,s=this._actionsByClip,a=s[i],o=a.knownActions,l=o[o.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,o[u]=l,o.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===o.length&&delete s[i],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.referenceCount&&this._removeInactiveBinding(n)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,i=this._bindings;let s=r[t];void 0===s&&(s={},r[t]=s),s[n]=e,e._cacheIndex=i.length,i.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,s=this._bindingsByRootAndName,a=s[r],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l,t[l]=o,t.pop(),delete a[i],0===Object.keys(a).length&&delete s[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new vh(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}clipAction(e,t,n){const r=t||this._root,i=r.uuid;let s="string"==typeof e?Ah.findByName(r,e):e;const a=null!==s?s.uuid:e,o=this._actionsByClip[a];let l=null;if(void 0===n&&(n=null!==s?s.blendMode:Wt),void 0!==o){const e=o.actionByRoot[i];if(void 0!==e&&e.blendMode===n)return e;l=o.knownActions[0],null===s&&(s=l._clip)}if(null===s)return null;const u=new Yp(this,s,t,n);return this._bindAction(u,l),this._addInactiveAction(u,a,i),u}existingAction(e,t){const n=t||this._root,r=n.uuid,i="string"==typeof e?Ah.findByName(n,e):e,s=i?i.uuid:e,a=this._actionsByClip[s];return void 0!==a&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),s=this._accuIndex^=1;for(let a=0;a!==n;++a)t[a]._update(r,e,i,s);const a=this._bindings,o=this._nActiveBindings;for(let e=0;e!==o;++e)a[e].apply(s);return this}setTime(e){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const e=i.knownActions;for(let n=0,r=e.length;n!==r;++n){const r=e[n];this._deactivateAction(r);const i=r._cacheIndex,s=t[t.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,s._cacheIndex=i,t[i]=s,t.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const e in n){const r=n[e].actionByRoot[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}const r=this._bindingsByRootAndName[t];if(void 0!==r)for(const e in r){const t=r[e];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}Jp.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class $p{constructor(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new $p(void 0===this.value.clone?this.value:this.value.clone())}}class Qp extends Rl{constructor(e,t,n=1){super(e,t),this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}Qp.prototype.isInstancedInterleavedBuffer=!0;class Kp{constructor(e,t,n,r,i){this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=i,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}Kp.prototype.isGLBufferAttribute=!0;class ef{constructor(e,t,n=0,r=1/0){this.ray=new Hr(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new ei,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return nf(e,this,n,t),n.sort(tf),n}intersectObjects(e,t=!0,n=[]){for(let r=0,i=e.length;r<i;r++)nf(e[r],this,n,t);return n.sort(tf),n}}function tf(e,t){return e.distance-t.distance}function nf(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r){const r=e.children;for(let e=0,i=r.length;e<i;e++)nf(r[e],t,n,!0)}}class rf{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Gn(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class sf{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return(new this.constructor).copy(this)}}const af=new Jn;class of{constructor(e=new Jn(1/0,1/0),t=new Jn(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=af.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return af.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}of.prototype.isBox2=!0;const lf=new pr,uf=new pr;class cf{constructor(e=new pr,t=new pr){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){lf.subVectors(e,this.start),uf.subVectors(this.end,this.start);const n=uf.dot(uf);let r=uf.dot(lf)/n;return t&&(r=Gn(r,0,1)),r}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}class hf extends mi{constructor(e){super(),this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}}hf.prototype.isImmediateRenderObject=!0;const pf=new pr;class ff extends mi{constructor(e,t){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const n=new ns,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let e=0,t=1,n=32;e<n;e++,t++){const i=e/n*Math.PI*2,s=t/n*Math.PI*2;r.push(Math.cos(i),Math.sin(i),1,Math.cos(s),Math.sin(s),1)}n.setAttribute("position",new Xi(r,3));const i=new du({fog:!1,toneMapped:!1});this.cone=new _u(n,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),pf.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(pf),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const mf=new pr,df=new Gr,gf=new Gr;class vf extends _u{constructor(e){const t=yf(e),n=new ns,r=[],i=[],s=new Oi(0,0,1),a=new Oi(0,1,0);for(let e=0;e<t.length;e++){const n=t[e];n.parent&&n.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(s.r,s.g,s.b),i.push(a.r,a.g,a.b))}n.setAttribute("position",new Xi(r,3)),n.setAttribute("color",new Xi(i,3)),super(n,new du({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");gf.copy(this.root.matrixWorld).invert();for(let e=0,n=0;e<t.length;e++){const i=t[e];i.parent&&i.parent.isBone&&(df.multiplyMatrices(gf,i.matrixWorld),mf.setFromMatrixPosition(df),r.setXYZ(n,mf.x,mf.y,mf.z),df.multiplyMatrices(gf,i.parent.matrixWorld),mf.setFromMatrixPosition(df),r.setXYZ(n+1,mf.x,mf.y,mf.z),n+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function yf(e){const t=[];e&&e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,yf(e.children[n]));return t}class wf extends bs{constructor(e,t,n){super(new Jc(t,4,2),new ki({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.light.updateMatrixWorld(),this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const bf=new pr,xf=new Oi,Mf=new Oi;class Sf extends mi{constructor(e,t,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const r=new Xc(t);r.rotateY(.5*Math.PI),this.material=new ki({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const i=r.getAttribute("position"),s=new Float32Array(3*i.count);r.setAttribute("color",new zi(s,3)),this.add(new bs(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");xf.copy(this.light.color),Mf.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){const r=e<n/2?xf:Mf;t.setXYZ(e,r.r,r.g,r.b)}t.needsUpdate=!0}e.lookAt(bf.setFromMatrixPosition(this.light.matrixWorld).negate())}}class _f extends _u{constructor(e=10,t=10,n=4473924,r=8947848){n=new Oi(n),r=new Oi(r);const i=t/2,s=e/t,a=e/2,o=[],l=[];for(let e=0,u=0,c=-a;e<=t;e++,c+=s){o.push(-a,0,c,a,0,c),o.push(c,0,-a,c,0,a);const t=e===i?n:r;t.toArray(l,u),u+=3,t.toArray(l,u),u+=3,t.toArray(l,u),u+=3,t.toArray(l,u),u+=3}const u=new ns;u.setAttribute("position",new Xi(o,3)),u.setAttribute("color",new Xi(l,3)),super(u,new du({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}class Ef extends _u{constructor(e=10,t=16,n=8,r=64,i=4473924,s=8947848){i=new Oi(i),s=new Oi(s);const a=[],o=[];for(let n=0;n<=t;n++){const r=n/t*(2*Math.PI),l=Math.sin(r)*e,u=Math.cos(r)*e;a.push(0,0,0),a.push(l,0,u);const c=1&n?i:s;o.push(c.r,c.g,c.b),o.push(c.r,c.g,c.b)}for(let t=0;t<=n;t++){const l=1&t?i:s,u=e-e/n*t;for(let e=0;e<r;e++){let t=e/r*(2*Math.PI),n=Math.sin(t)*u,i=Math.cos(t)*u;a.push(n,0,i),o.push(l.r,l.g,l.b),t=(e+1)/r*(2*Math.PI),n=Math.sin(t)*u,i=Math.cos(t)*u,a.push(n,0,i),o.push(l.r,l.g,l.b)}}const l=new ns;l.setAttribute("position",new Xi(a,3)),l.setAttribute("color",new Xi(o,3)),super(l,new du({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}}const Tf=new pr,Af=new pr,Lf=new pr;class Cf extends mi{constructor(e,t,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);let r=new ns;r.setAttribute("position",new Xi([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const i=new du({fog:!1,toneMapped:!1});this.lightPlane=new xu(r,i),this.add(this.lightPlane),r=new ns,r.setAttribute("position",new Xi([0,0,0,0,0,1],3)),this.targetLine=new xu(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){Tf.setFromMatrixPosition(this.light.matrixWorld),Af.setFromMatrixPosition(this.light.target.matrixWorld),Lf.subVectors(Af,Tf),this.lightPlane.lookAt(Af),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Af),this.targetLine.scale.z=Lf.length()}}const Rf=new pr,Nf=new As;class Pf extends _u{constructor(e){const t=new ns,n=new du({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],s={},a=new Oi(16755200),o=new Oi(16711680),l=new Oi(43775),u=new Oi(16777215),c=new Oi(3355443);function h(e,t,n){p(e,n),p(t,n)}function p(e,t){r.push(0,0,0),i.push(t.r,t.g,t.b),void 0===s[e]&&(s[e]=[]),s[e].push(r.length/3-1)}h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",o),h("p","n2",o),h("p","n3",o),h("p","n4",o),h("u1","u2",l),h("u2","u3",l),h("u3","u1",l),h("c","t",u),h("p","c",c),h("cn1","cn2",c),h("cn3","cn4",c),h("cf1","cf2",c),h("cf3","cf4",c),t.setAttribute("position",new Xi(r,3)),t.setAttribute("color",new Xi(i,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}update(){const e=this.geometry,t=this.pointMap;Nf.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),If("c",t,e,Nf,0,0,-1),If("t",t,e,Nf,0,0,1),If("n1",t,e,Nf,-1,-1,-1),If("n2",t,e,Nf,1,-1,-1),If("n3",t,e,Nf,-1,1,-1),If("n4",t,e,Nf,1,1,-1),If("f1",t,e,Nf,-1,-1,1),If("f2",t,e,Nf,1,-1,1),If("f3",t,e,Nf,-1,1,1),If("f4",t,e,Nf,1,1,1),If("u1",t,e,Nf,.7,1.1,-1),If("u2",t,e,Nf,-.7,1.1,-1),If("u3",t,e,Nf,0,2,-1),If("cf1",t,e,Nf,-1,0,1),If("cf2",t,e,Nf,1,0,1),If("cf3",t,e,Nf,0,-1,1),If("cf4",t,e,Nf,0,1,1),If("cn1",t,e,Nf,-1,0,-1),If("cn2",t,e,Nf,1,0,-1),If("cn3",t,e,Nf,0,-1,-1),If("cn4",t,e,Nf,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function If(e,t,n,r,i,s,a){Rf.set(i,s,a).unproject(r);const o=t[e];if(void 0!==o){const e=n.getAttribute("position");for(let t=0,n=o.length;t<n;t++)e.setXYZ(o[t],Rf.x,Rf.y,Rf.z)}}const Of=new dr;class kf extends _u{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new ns;i.setIndex(new zi(n,1)),i.setAttribute("position",new zi(r,3)),super(i,new du({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Of.setFromObject(this.object),Of.isEmpty())return;const t=Of.min,n=Of.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e){return _u.prototype.copy.call(this,e),this.object=e.object,this}}class Df extends _u{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new ns;r.setIndex(new zi(n,1)),r.setAttribute("position",new Xi([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new du({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}}class Uf extends xu{constructor(e,t=1,n=16776960){const r=n,i=new ns;i.setAttribute("position",new Xi([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),super(i,new du({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const s=new ns;s.setAttribute("position",new Xi([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),s.computeBoundingSphere(),this.add(new bs(s,new ki({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){let t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?d:m,this.lookAt(this.plane.normal),super.updateMatrixWorld(e)}}const zf=new pr;let Bf,Ff;class qf extends mi{constructor(e=new pr(0,0,1),t=new pr(0,0,0),n=1,r=16776960,i=.2*n,s=.2*i){super(),this.type="ArrowHelper",void 0===Bf&&(Bf=new ns,Bf.setAttribute("position",new Xi([0,0,0,0,1,0],3)),Ff=new zu(0,.5,1,5,1),Ff.translate(0,-.5,0)),this.position.copy(t),this.line=new xu(Bf,new du({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new bs(Ff,new ki({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{zf.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(zf,t)}}setLength(e,t=.2*e,n=.2*t){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}class Hf extends _u{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new ns;n.setAttribute("position",new Xi(t,3)),n.setAttribute("color",new Xi([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(n,new du({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){const r=new Oi,i=this.geometry.attributes.color.array;return r.set(e),r.toArray(i,0),r.toArray(i,3),r.set(t),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Gf{constructor(){this.type="ShapePath",this.color=new Oi,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new mc,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,i,s){return this.currentPath.bezierCurveTo(e,t,n,r,i,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function n(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n],i=new dc;i.curves=r.curves,t.push(i)}return t}function r(e,t){const n=t.length;let r=!1;for(let i=n-1,s=0;s<n;i=s++){let n=t[i],a=t[s],o=a.x-n.x,l=a.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=t[s],o=-o,a=t[i],l=-l),e.y<n.y||e.y>a.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=l*(e.x-n.x)-o*(e.y-n.y);if(0===t)return!0;if(t<0)continue;r=!r}}else{if(e.y!==n.y)continue;if(a.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=a.x)return!0}}return r}const i=Fc.isClockWise,s=this.subPaths;if(0===s.length)return[];if(!0===t)return n(s);let a,o,l;const u=[];if(1===s.length)return o=s[0],l=new dc,l.curves=o.curves,u.push(l),u;let c=!i(s[0].getPoints());c=e?!c:c;const h=[],p=[];let f,m,d=[],g=0;p[g]=void 0,d[g]=[];for(let t=0,n=s.length;t<n;t++)o=s[t],f=o.getPoints(),a=i(f),a=e?!a:a,a?(!c&&p[g]&&g++,p[g]={s:new dc,p:f},p[g].s.curves=o.curves,c&&g++,d[g]=[]):d[g].push({h:o,p:f[0]});if(!p[0])return n(s);if(p.length>1){let e=!1;const t=[];for(let e=0,t=p.length;e<t;e++)h[e]=[];for(let n=0,i=p.length;n<i;n++){const i=d[n];for(let s=0;s<i.length;s++){const a=i[s];let o=!0;for(let i=0;i<p.length;i++)r(a.p,p[i].p)&&(n!==i&&t.push({froms:n,tos:i,hole:s}),o?(o=!1,h[i].push(a)):e=!0);o&&h[n].push(a)}}t.length>0&&(e||(d=h))}for(let e=0,t=p.length;e<t;e++){l=p[e].s,u.push(l),m=d[e];for(let e=0,t=m.length;e<t;e++)l.holes.push(m[e].h)}return u}}const Vf=new Float32Array(1),Wf=new Int32Array(Vf.buffer);class jf{static toHalfFloat(e){e>65504&&(console.warn("THREE.DataUtils.toHalfFloat(): value exceeds 65504."),e=65504),Vf[0]=e;const t=Wf[0];let n=t>>16&32768,r=t>>12&2047;const i=t>>23&255;return i<103?n:i>142?(n|=31744,n|=(255==i?0:1)&&8388607&t,n):i<113?(r|=2048,n|=(r>>114-i)+(r>>113-i&1),n):(n|=i-112<<10|r>>1,n+=1&r,n)}}const Xf=0,Zf=1,Yf=0,Jf=1,$f=2;function Qf(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function Kf(e=[]){return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function em(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Nu(e,t)}function tm(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Xl(e)}function nm(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Nu(e,t)}function rm(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Tu(e)}function im(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Tu(e)}function sm(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Tu(e)}function am(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new pr(e,t,n)}function om(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new zi(e,t).setUsage(Tn)}function lm(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Bi(e,t)}function um(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Fi(e,t)}function cm(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new qi(e,t)}function hm(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Hi(e,t)}function pm(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Gi(e,t)}function fm(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Vi(e,t)}function mm(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Wi(e,t)}function dm(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Xi(e,t)}function gm(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Zi(e,t)}function vm(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new Hf(e)}function ym(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new kf(e,t)}function wm(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new _u(new ju(e.geometry),new du({color:void 0!==t?t:16777215}))}function bm(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new _u(new th(e.geometry),new du({color:void 0!==t?t:16777215}))}function xm(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Oh(e)}function Mm(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Bh(e)}function Sm(e,t,n){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new Ps(e,n)}function _m(){console.error("THREE.CanvasRenderer has been removed")}function Em(){console.error("THREE.JSONLoader has been removed.")}Xu.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Xu.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},mc.prototype.fromPoints=function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)},_f.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},vf.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Ph.prototype.extractUrlBase=function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),op.extractUrlBase(e)},Ph.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},of.prototype.center=function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},of.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},of.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},of.prototype.size=function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)},dr.prototype.center=function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},dr.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},dr.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},dr.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},dr.prototype.size=function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)},Or.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Bs.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},cf.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},$n.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},$n.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},$n.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},$n.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},$n.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},$n.prototype.getInverse=function(e){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},Gr.prototype.extractPosition=function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},Gr.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},Gr.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new pr).setFromMatrixColumn(this,3)},Gr.prototype.setRotationFromQuaternion=function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},Gr.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},Gr.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Gr.prototype.multiplyVector4=function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Gr.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},Gr.prototype.rotateAxis=function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},Gr.prototype.crossVector=function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Gr.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},Gr.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},Gr.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},Gr.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},Gr.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},Gr.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},Gr.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},Gr.prototype.makeFrustum=function(e,t,n,r,i,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,s)},Gr.prototype.getInverse=function(e){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},Ds.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},hr.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},hr.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},Hr.prototype.isIntersectionBox=function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},Hr.prototype.isIntersectionPlane=function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},Hr.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},Ei.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},Ei.prototype.barycoordFromPoint=function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},Ei.prototype.midpoint=function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},Ei.prototypenormal=function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},Ei.prototype.plane=function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)},Ei.barycoordFromPoint=function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Ei.getBarycoord(e,t,n,r,i)},Ei.normal=function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Ei.getNormal(e,t,n,r)},dc.prototype.extractAllPoints=function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},dc.prototype.extrude=function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Gc(this,e)},dc.prototype.makeGeometry=function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Yc(this,e)},Jn.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},Jn.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},Jn.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},pr.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},pr.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},pr.prototype.getPositionFromMatrix=function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},pr.prototype.getScaleFromMatrix=function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},pr.prototype.getColumnFromMatrix=function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},pr.prototype.applyProjection=function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},pr.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},pr.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},pr.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},or.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},or.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},mi.prototype.getChildByName=function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},mi.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},mi.prototype.translate=function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},mi.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},mi.prototype.applyMatrix=function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(mi.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),bs.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(bs.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),Xt},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),ru.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Ls.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(qh.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(zi.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Tn},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Tn)}}}),zi.prototype.setDynamic=function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?Tn:En),this},zi.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},zi.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},ns.prototype.addIndex=function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},ns.prototype.addAttribute=function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new zi(arguments[1],arguments[2])))},ns.prototype.addDrawCall=function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},ns.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},ns.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},ns.prototype.removeAttribute=function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},ns.prototype.applyMatrix=function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(ns.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Rl.prototype.setDynamic=function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?Tn:En),this},Rl.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Gc.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},Gc.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},Gc.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},Cl.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},$p.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(Ai.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Oi}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===v}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(Ts.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),El.prototype.clearTarget=function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},El.prototype.animate=function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},El.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},El.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},El.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},El.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},El.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},El.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},El.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},El.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},El.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},El.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},El.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},El.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},El.prototype.enableScissorTest=function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},El.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},El.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},El.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},El.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},El.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},El.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},El.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},El.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},El.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},El.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(El.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?$t:Jt}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(dl.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(lr.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Rp.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const t=this;return(new vp).load(e,(function(e){t.setBuffer(e)})),this},Dp.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Rs.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},Rs.prototype.clear=function(e,t,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,n,r)},rr.crossOrigin=void 0,rr.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const i=new Fh;i.setCrossOrigin(this.crossOrigin);const s=i.load(e,n,void 0,r);return t&&(s.mapping=t),s},rr.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const i=new zh;i.setCrossOrigin(this.crossOrigin);const s=i.load(e,n,void 0,r);return t&&(s.mapping=t),s},rr.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},rr.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};const Tm={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function Am(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}function Lm(){return console.error("THREE.ParametricGeometry has been moved to /examples/jsm/geometries/ParametricGeometry.js"),new ns}function Cm(){return console.error("THREE.TextGeometry has been moved to /examples/jsm/geometries/TextGeometry.js"),new ns}function Rm(){console.error("THREE.FontLoader has been moved to /examples/jsm/loaders/FontLoader.js")}function Nm(){console.error("THREE.Font has been moved to /examples/jsm/loaders/FontLoader.js")}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:r}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=r)},965:(e,t,n)=>{"use strict";n.r(t),n.d(t,{OrbitControls:()=>o,MapControls:()=>l});var r=n(412);const i={type:"change"},s={type:"start"},a={type:"end"};class o extends r.EventDispatcher{constructor(e,t){super(),void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new r.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:r.MOUSE.ROTATE,MIDDLE:r.MOUSE.DOLLY,RIGHT:r.MOUSE.PAN},this.touches={ONE:r.TOUCH.ROTATE,TWO:r.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return c.phi},this.getAzimuthalAngle=function(){return c.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(e){e.addEventListener("keydown",X),this._domElementKeyEvents=e},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(i),n.update(),l=o.NONE},this.update=function(){const t=new r.Vector3,s=(new r.Quaternion).setFromUnitVectors(e.up,new r.Vector3(0,1,0)),a=s.clone().invert(),d=new r.Vector3,g=new r.Quaternion,v=2*Math.PI;return function(){const e=n.object.position;t.copy(e).sub(n.target),t.applyQuaternion(s),c.setFromVector3(t),n.autoRotate&&l===o.NONE&&A(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(c.theta+=h.theta*n.dampingFactor,c.phi+=h.phi*n.dampingFactor):(c.theta+=h.theta,c.phi+=h.phi);let r=n.minAzimuthAngle,y=n.maxAzimuthAngle;return isFinite(r)&&isFinite(y)&&(r<-Math.PI?r+=v:r>Math.PI&&(r-=v),y<-Math.PI?y+=v:y>Math.PI&&(y-=v),c.theta=r<=y?Math.max(r,Math.min(y,c.theta)):c.theta>(r+y)/2?Math.max(r,c.theta):Math.min(y,c.theta)),c.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,c.phi)),c.makeSafe(),c.radius*=p,c.radius=Math.max(n.minDistance,Math.min(n.maxDistance,c.radius)),!0===n.enableDamping?n.target.addScaledVector(f,n.dampingFactor):n.target.add(f),t.setFromSpherical(c),t.applyQuaternion(a),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(h.theta*=1-n.dampingFactor,h.phi*=1-n.dampingFactor,f.multiplyScalar(1-n.dampingFactor)):(h.set(0,0,0),f.set(0,0,0)),p=1,!!(m||d.distanceToSquared(n.object.position)>u||8*(1-g.dot(n.object.quaternion))>u)&&(n.dispatchEvent(i),d.copy(n.object.position),g.copy(n.object.quaternion),m=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",Z),n.domElement.removeEventListener("pointerdown",H),n.domElement.removeEventListener("pointercancel",W),n.domElement.removeEventListener("wheel",j),n.domElement.removeEventListener("pointermove",G),n.domElement.removeEventListener("pointerup",V),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",X)};const n=this,o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=o.NONE;const u=1e-6,c=new r.Spherical,h=new r.Spherical;let p=1;const f=new r.Vector3;let m=!1;const d=new r.Vector2,g=new r.Vector2,v=new r.Vector2,y=new r.Vector2,w=new r.Vector2,b=new r.Vector2,x=new r.Vector2,M=new r.Vector2,S=new r.Vector2,_=[],E={};function T(){return Math.pow(.95,n.zoomSpeed)}function A(e){h.theta-=e}function L(e){h.phi-=e}const C=function(){const e=new r.Vector3;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),f.add(e)}}(),R=function(){const e=new r.Vector3;return function(t,r){!0===n.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),f.add(e)}}(),N=function(){const e=new r.Vector3;return function(t,r){const i=n.domElement;if(n.object.isPerspectiveCamera){const s=n.object.position;e.copy(s).sub(n.target);let a=e.length();a*=Math.tan(n.object.fov/2*Math.PI/180),C(2*t*a/i.clientHeight,n.object.matrix),R(2*r*a/i.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(C(t*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),R(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function P(e){n.object.isPerspectiveCamera?p/=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),m=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function I(e){n.object.isPerspectiveCamera?p*=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),m=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function O(e){d.set(e.clientX,e.clientY)}function k(e){y.set(e.clientX,e.clientY)}function D(){if(1===_.length)d.set(_[0].pageX,_[0].pageY);else{const e=.5*(_[0].pageX+_[1].pageX),t=.5*(_[0].pageY+_[1].pageY);d.set(e,t)}}function U(){if(1===_.length)y.set(_[0].pageX,_[0].pageY);else{const e=.5*(_[0].pageX+_[1].pageX),t=.5*(_[0].pageY+_[1].pageY);y.set(e,t)}}function z(){const e=_[0].pageX-_[1].pageX,t=_[0].pageY-_[1].pageY,n=Math.sqrt(e*e+t*t);x.set(0,n)}function B(e){if(1==_.length)g.set(e.pageX,e.pageY);else{const t=$(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);g.set(n,r)}v.subVectors(g,d).multiplyScalar(n.rotateSpeed);const t=n.domElement;A(2*Math.PI*v.x/t.clientHeight),L(2*Math.PI*v.y/t.clientHeight),d.copy(g)}function F(e){if(1===_.length)w.set(e.pageX,e.pageY);else{const t=$(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);w.set(n,r)}b.subVectors(w,y).multiplyScalar(n.panSpeed),N(b.x,b.y),y.copy(w)}function q(e){const t=$(e),r=e.pageX-t.x,i=e.pageY-t.y,s=Math.sqrt(r*r+i*i);M.set(0,s),S.set(0,Math.pow(M.y/x.y,n.zoomSpeed)),P(S.y),x.copy(M)}function H(e){!1!==n.enabled&&(0===_.length&&(n.domElement.setPointerCapture(e.pointerId),n.domElement.addEventListener("pointermove",G),n.domElement.addEventListener("pointerup",V)),function(e){_.push(e)}(e),"touch"===e.pointerType?function(e){switch(J(e),_.length){case 1:switch(n.touches.ONE){case r.TOUCH.ROTATE:if(!1===n.enableRotate)return;D(),l=o.TOUCH_ROTATE;break;case r.TOUCH.PAN:if(!1===n.enablePan)return;U(),l=o.TOUCH_PAN;break;default:l=o.NONE}break;case 2:switch(n.touches.TWO){case r.TOUCH.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&z(),n.enablePan&&U(),l=o.TOUCH_DOLLY_PAN;break;case r.TOUCH.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&z(),n.enableRotate&&D(),l=o.TOUCH_DOLLY_ROTATE;break;default:l=o.NONE}break;default:l=o.NONE}l!==o.NONE&&n.dispatchEvent(s)}(e):function(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case r.MOUSE.DOLLY:if(!1===n.enableZoom)return;!function(e){x.set(e.clientX,e.clientY)}(e),l=o.DOLLY;break;case r.MOUSE.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;k(e),l=o.PAN}else{if(!1===n.enableRotate)return;O(e),l=o.ROTATE}break;case r.MOUSE.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;O(e),l=o.ROTATE}else{if(!1===n.enablePan)return;k(e),l=o.PAN}break;default:l=o.NONE}l!==o.NONE&&n.dispatchEvent(s)}(e))}function G(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch(J(e),l){case o.TOUCH_ROTATE:if(!1===n.enableRotate)return;B(e),n.update();break;case o.TOUCH_PAN:if(!1===n.enablePan)return;F(e),n.update();break;case o.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&q(e),n.enablePan&&F(e)}(e),n.update();break;case o.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&q(e),n.enableRotate&&B(e)}(e),n.update();break;default:l=o.NONE}}(e):function(e){if(!1!==n.enabled)switch(l){case o.ROTATE:if(!1===n.enableRotate)return;!function(e){g.set(e.clientX,e.clientY),v.subVectors(g,d).multiplyScalar(n.rotateSpeed);const t=n.domElement;A(2*Math.PI*v.x/t.clientHeight),L(2*Math.PI*v.y/t.clientHeight),d.copy(g),n.update()}(e);break;case o.DOLLY:if(!1===n.enableZoom)return;!function(e){M.set(e.clientX,e.clientY),S.subVectors(M,x),S.y>0?P(T()):S.y<0&&I(T()),x.copy(M),n.update()}(e);break;case o.PAN:if(!1===n.enablePan)return;!function(e){w.set(e.clientX,e.clientY),b.subVectors(w,y).multiplyScalar(n.panSpeed),N(b.x,b.y),y.copy(w),n.update()}(e)}}(e))}function V(e){!1!==n.enabled&&(e.pointerType,n.dispatchEvent(a),l=o.NONE,Y(e),0===_.length&&(n.domElement.releasePointerCapture(e.pointerId),n.domElement.removeEventListener("pointermove",G),n.domElement.removeEventListener("pointerup",V)))}function W(e){Y(e)}function j(e){!1===n.enabled||!1===n.enableZoom||l!==o.NONE&&l!==o.ROTATE||(e.preventDefault(),n.dispatchEvent(s),function(e){e.deltaY<0?I(T()):e.deltaY>0&&P(T()),n.update()}(e),n.dispatchEvent(a))}function X(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.code){case n.keys.UP:N(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:N(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:N(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:N(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function Z(e){!1!==n.enabled&&e.preventDefault()}function Y(e){delete E[e.pointerId];for(let t=0;t<_.length;t++)if(_[t].pointerId==e.pointerId)return void _.splice(t,1)}function J(e){let t=E[e.pointerId];void 0===t&&(t=new r.Vector2,E[e.pointerId]=t),t.set(e.pageX,e.pageY)}function $(e){const t=e.pointerId===_[0].pointerId?_[1]:_[0];return E[t.pointerId]}n.domElement.addEventListener("contextmenu",Z),n.domElement.addEventListener("pointerdown",H),n.domElement.addEventListener("pointercancel",W),n.domElement.addEventListener("wheel",j,{passive:!1}),this.update()}}class l extends o{constructor(e,t){super(e,t),this.screenSpacePanning=!1,this.mouseButtons.LEFT=r.MOUSE.PAN,this.mouseButtons.RIGHT=r.MOUSE.ROTATE,this.touches.ONE=r.TOUCH.PAN,this.touches.TWO=r.TOUCH.DOLLY_ROTATE}}},518:(e,t,n)=>{"use strict";n.r(t),n.d(t,{createMeshesFromInstancedMesh:()=>i,createMultiMaterialObject:()=>s,detach:()=>a,attach:()=>o});var r=n(412);function i(e){const t=new r.Group,n=e.count,i=e.geometry,s=e.material;for(let a=0;a<n;a++){const n=new r.Mesh(i,s);e.getMatrixAt(a,n.matrix),n.matrix.decompose(n.position,n.quaternion,n.scale),t.add(n)}return t.copy(e),t.updateMatrixWorld(),t}function s(e,t){const n=new r.Group;for(let i=0,s=t.length;i<s;i++)n.add(new r.Mesh(e,t[i]));return n}function a(e,t,n){console.warn("THREE.SceneUtils: detach() has been deprecated. Use scene.attach( child ) instead."),n.attach(e)}function o(e,t,n){console.warn("THREE.SceneUtils: attach() has been deprecated. Use parent.attach( child ) instead."),n.attach(e)}}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var s=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.loaded=!0,s.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";var e=r(412),t=r(469),n=r(653),i=r(651);const s=r(462);let a,o,l,u,c,h,p,f,m=window.getComputedStyle(document.getElementById("lavagna4D"));a=Number(m.width.replace("px","")),o=Number(m.height.replace("px",""));let d=[0,0];function g(){document.getElementById("lavagna4D").innerHTML="",u=s(document.getElementById("legge").value.split("xy").join("x*y")).buildFunction(["x","y"]),c=s("diff("+document.getElementById("legge").value.split("xy").join("x*y")+",x)").buildFunction(["x","y"]),h=s("diff("+document.getElementById("legge").value.split("xy").join("x*y")+",y)").buildFunction(["x","y"]),l=new n.y(a,o,"lavagna4D",{tastieraOpzioni:!1}),function(){let t=new e.PlaneBufferGeometry(10,10,120,120),n=new e.Vector3,r=t.attributes.position;t.setAttribute("color",new e.BufferAttribute(new Float32Array(3*r.count),3));let i=t.attributes.color,s=new e.Color;for(let e=0;e<r.count;e++)if(n.fromBufferAttribute(r,e),0==e)d=[u(n.x,n.y),u(n.x,n.y)];else{let e=u(n.x,n.y);e>d[0]&&(d[0]=e),e<d[1]&&(d[1]=e)}d[0]=Math.min(d[0],5),d[1]=Math.max(d[1],-5);for(let e=0;e<r.count;e++)n.fromBufferAttribute(r,e),r.setZ(e,u(n.x,n.y)),s.setHSL(.5*(r.getZ(e)-d[1])/(d[0]-d[1])+.3,1,.5),i.setXYZ(e,s.r,s.g,s.b);t.computeVertexNormals();let a=new e.MeshPhongMaterial({color:16777215,flatShading:!1,vertexColors:!0,shininess:0,side:e.DoubleSide,transparent:!0,opacity:.8});f=new e.Mesh(t,a),l.scene.add(f),l.forceRefresh()}(),document.getElementById("wire").checked&&function(){p&&l.scene.remove(p);let t=new e.PlaneBufferGeometry(10,10,60,60),n=new e.Vector3,r=t.attributes.position;for(let e=0;e<r.count;e++)n.fromBufferAttribute(r,e),r.setZ(e,u(n.x,n.y));t.computeVertexNormals();let i=new e.MeshBasicMaterial({color:"rgb(25,25,25)",wireframe:!0});p=new e.Mesh(t,i),l.scene.add(p)}()}document.getElementById("legge").addEventListener("input",(function(){if(""==document.getElementById("legge").value)document.getElementById("leggetex").innerHTML="...";else try{i.render("f(x)="+t.XF(document.getElementById("legge").value),document.getElementById("leggetex"))}catch(e){}})),document.getElementById("bottonedisegna").addEventListener("click",g),document.getElementById("legge").addEventListener("click",(e=>{"..."==e.target.value&&(e.target.value="")}));let v=0,y=["atan(-x)+sin(y^3/20)+3.2","cos((x^2+y^2)/(abs(x/3)+abs(y/3)+0.001))","cos((x^2+y^2)/2)*3/(sqrt(x^2+y^2)/3+2)","cos(x)+sin(y)"];document.getElementById("bottonerandom").addEventListener("click",(()=>{document.getElementById("legge").value=y[v],v++,v%=y.length;try{i.render("f(x)="+t.XF(document.getElementById("legge").value),document.getElementById("leggetex"))}catch(e){}g()}));try{i.render("f(x)="+t.XF(document.getElementById("legge").value),document.getElementById("leggetex"))}catch(e){}g()})()})();